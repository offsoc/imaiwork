"use strict";const e=require("../../../../common/vendor.js"),r=require("../../../../common/assets.js"),u=require("../../../../utils/util.js");require("../../../../stores/navigationBarTitle.js"),require("../../../../router/index.js"),require("../../../../stores/user.js"),require("../../../../api/user.js"),require("../../../../utils/request/index.js"),require("../../../../utils/request/http.js"),require("../../../../enums/requestEnums.js"),require("../../../../utils/request/cancel.js"),require("../../../../utils/auth.js"),require("../../../../enums/constantEnums.js"),require("../../../../utils/cache.js"),require("../../../../config/index.js"),require("../../../../hooks/useShareMessage.js"),require("../../../../stores/app.js"),require("../../../../api/app.js"),require("../../../../api/chat.js"),require("../../../../api/voice_chat.js");const s=e.defineComponent({__name:"video-player",props:{poster:{default:""},videoUrl:{default:""},playIconSize:{default:108}},setup(s){const t=e.ref(),a=e.ref(0),i=e.ref(0),n=e.ref(0),o=e.ref(!1),l=e.ref(!1),c=e.ref(!1),f=e.ref(!1),p=async e=>{const{duration:r}=e.detail;a.value=r},v=e=>{const{currentTime:r,duration:u}=e.detail;i.value=r,n.value=r/u*100},d=e=>{const{fullScreen:r}=e.detail;f.value=r},{proxy:q}=e.getCurrentInstance(),j=async e=>{const r=e.detail.x,s=await u.getRect(".progress-box",!1,q),i=(r-s.left)/s.width*100/100*a.value;t.value.seek(i)},m=()=>{c.value=!0,o.value=!0},x=()=>{o.value=!1},_=()=>{l.value=!0},y=async()=>{if(c.value=!0,l.value)return t.value.seek(0),t.value.play(),void(l.value=!1);o.value?(t.value.pause(),o.value=!1):(await e.nextTick$1(),t.value.play(),o.value=!0)};return e.onMounted((async()=>{await(async()=>{await e.nextTick$1(),t.value=e.index.createVideoContext("video-player",q)})()})),(q,$)=>e.e({a:s.videoUrl,b:e.unref(f),c:e.o(m),d:e.o(x),e:e.o(_),f:e.o(p),g:e.o(v),h:e.o(d),i:e.unref(c)?"":1,j:!e.unref(o)||e.unref(l)},!e.unref(o)||e.unref(l)?{k:r._imports_0$23,l:`${s.playIconSize}rpx`,m:`${s.playIconSize}rpx`,n:e.o((e=>y()))}:{},{o:e.t(e.unref(u.formatAudioTime)(e.unref(i))),p:e.t(e.unref(u.formatAudioTime)(e.unref(a))),q:!e.unref(o)||e.unref(l)},!e.unref(o)||e.unref(l)?{r:r._imports_1$3}:{s:r._imports_2$6},{t:e.o((e=>y())),v:`${e.unref(n)}%`,w:e.o(j),x:r._imports_3$6,y:e.o((e=>{t.value.requestFullScreen()})),z:`url(${s.poster})`})}}),t=e._export_sfc(s,[["__scopeId","data-v-396be46f"]]);wx.createComponent(t);

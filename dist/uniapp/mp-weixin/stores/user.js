"use strict";const e=require("../api/user.js"),s=require("../enums/constantEnums.js"),t=require("../hooks/useShareMessage.js"),n=require("../utils/auth.js"),o=require("../utils/cache.js"),r=require("../common/vendor.js").defineStore({id:"userStore",state:()=>({userInfo:{},token:n.getToken()||null,temToken:null,tokensConfig:[]}),getters:{isLogin:e=>!!e.token,userTokens:e=>e.userInfo.tokens||0,getTokenByScene:e=>s=>e.tokensConfig.find((e=>e.scene===s))||{}},actions:{async getUser(){const s=await e.getUserCenter({token:this.token});this.userInfo=s,this.getTokensConfig()},async getTokensConfig(){const s=await e.getTokensConfig();this.tokensConfig=s||[]},login(e){this.token=e,o.cache.set(s.TOKEN_KEY,e),t.useSharedId()},logout(){this.token="",this.userInfo={},o.cache.remove(s.TOKEN_KEY),o.cache.remove(s.CHAT_LIMIT_KEY)}}});exports.useUserStore=r;

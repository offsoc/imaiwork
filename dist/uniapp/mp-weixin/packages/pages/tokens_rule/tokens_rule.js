"use strict";const e=require("../../../common/vendor.js"),o=require("../../../common/assets.js"),t=require("../../../stores/user.js"),s=require("../../../config/index.js"),r=require("../../../api/user.js");if(require("../../../enums/constantEnums.js"),require("../../../hooks/useShareMessage.js"),require("../../../router/index.js"),require("../../../utils/cache.js"),require("../../../utils/util.js"),require("../../../stores/navigationBarTitle.js"),require("../../../stores/app.js"),require("../../../api/app.js"),require("../../../utils/request/index.js"),require("../../../utils/request/http.js"),require("../../../enums/requestEnums.js"),require("../../../utils/request/cancel.js"),require("../../../utils/auth.js"),require("../../../api/chat.js"),require("../../../api/voice_chat.js"),!Array){(e.resolveComponent("u-navbar")+e.resolveComponent("u-button")+e.resolveComponent("u-tabs")+e.resolveComponent("u-line")+e.resolveComponent("empty")+e.resolveComponent("z-paging")+e.resolveComponent("popup-bottom"))()}Math||((()=>"../../../uni_modules/vk-uview-ui/components/u-navbar/u-navbar.js")+(()=>"../../../uni_modules/vk-uview-ui/components/u-button/u-button.js")+(()=>"../../../uni_modules/vk-uview-ui/components/u-tabs/u-tabs.js")+(()=>"../../../uni_modules/vk-uview-ui/components/u-line/u-line.js")+(()=>"../../../components/empty/empty.js")+(()=>"../../../node-modules/z-paging/components/z-paging/z-paging.js")+(()=>"../../../components/popup-bottom/popup-bottom.js"))();const n=e.defineComponent({__name:"tokens_rule",setup(n){const u=t.useUserStore(),{isLogin:i,tokensConfig:a}=e.toRefs(u),l=[{name:"消耗记录",action:2},{name:"订阅记录",action:1}],c=e.ref(0),p=e=>{var o;c.value=e,g.action=l[e].action,null==(o=f.value)||o.reload()},m=e.ref([]),f=e.shallowRef(),g=e.reactive({type:"tokens",action:2}),d=async(e,o)=>{var t;try{const{lists:s}=await r.accountLog({page_no:e,page_size:o,...g});null==(t=f.value)||t.complete(s)}catch(s){console.log(s)}},b=e.ref(!1),v=()=>{i.value||e.index.$u.route({url:"/pages/login/login"}),b.value=!0},{screenHeight:j}=e.index.$u.sys();return e.onShow((()=>{u.getTokensConfig()})),(t,r)=>({a:e.p({"border-bottom":!1,"is-fixed":!1,background:{background:"transparent"},"back-icon-color":"#ffffff","title-color":"#ffffff",title:"规则明细","title-bold":!0}),b:e.f(e.unref(a),((o,t,s)=>({a:e.t(t+1),b:e.t(o.name),c:e.t(o.unit),d:e.t(o.score),e:t}))),c:o._imports_0$1,d:`url(${e.unref(s.config).baseUrl}static/images/tokens_rule_card_bg.png)`,e:e.n(e.unref(j)<600?"pt-_285rpx_":"pt-_435rpx_"),f:e.o(v),g:e.p({type:"primary",shape:"circle","custom-style":{fontSize:"26rpx",height:"90rpx"}}),h:`url(${e.unref(s.config).baseUrl}static/images/tokens_rule_bg.png)`,i:e.unref(j)<600?"-80rpx":"0",j:e.o(p),k:e.p({list:l,"is-scroll":!1,current:e.unref(c),"show-bar":!1,"bg-color":""}),l:e.f(e.unref(m),((o,t,s)=>({a:e.t(o.remark),b:e.t(o.create_time),c:e.t(o.change_amount_desc),d:e.t(o.left_tokens),e:"d7513c5e-5-"+s+",d7513c5e-4",f:e.f(o.extra,((o,t,s)=>({a:e.t(t),b:e.t(o),c:t}))),g:t}))),m:e.sr(f,"d7513c5e-4,d7513c5e-2",{k:"pagingRef"}),n:e.o(d),o:e.o((o=>e.isRef(m)?m.value=o:null)),p:e.p({fixed:!1,"default-page-size":20,"safe-area-inset-bottom":!0,"auto-show-back-to-top":!0,modelValue:e.unref(m)}),q:e.o((o=>e.isRef(b)?b.value=o:null)),r:e.p({title:"查看账单","is-disabled-touch":!0,"custom-class":"bg-_hF9FAFB_",show:e.unref(b)})})}}),u=e._export_sfc(n,[["__scopeId","data-v-d7513c5e"]]);wx.createPage(u);

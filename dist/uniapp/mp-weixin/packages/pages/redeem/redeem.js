"use strict";const e=require("../../../common/vendor.js"),u=require("../../../common/assets.js"),r=require("../../../api/recharge.js"),s=require("../../../hooks/useLockFn.js");if(require("../../../utils/request/index.js"),require("../../../utils/request/http.js"),require("../../../enums/requestEnums.js"),require("../../../utils/request/cancel.js"),require("../../../utils/auth.js"),require("../../../enums/constantEnums.js"),require("../../../utils/cache.js"),require("../../../stores/user.js"),require("../../../api/user.js"),require("../../../hooks/useShareMessage.js"),require("../../../router/index.js"),require("../../../utils/util.js"),require("../../../stores/navigationBarTitle.js"),require("../../../stores/app.js"),require("../../../api/app.js"),require("../../../api/chat.js"),require("../../../api/voice_chat.js"),require("../../../config/index.js"),!Array){(e.resolveComponent("u-navbar")+e.resolveComponent("u-input")+e.resolveComponent("u-button")+e.resolveComponent("u-line")+e.resolveComponent("u-popup"))()}Math||((()=>"../../../uni_modules/vk-uview-ui/components/u-navbar/u-navbar.js")+(()=>"../../../uni_modules/vk-uview-ui/components/u-input/u-input.js")+(()=>"../../../uni_modules/vk-uview-ui/components/u-button/u-button.js")+(()=>"../../../uni_modules/vk-uview-ui/components/u-line/u-line.js")+(()=>"../../../uni_modules/vk-uview-ui/components/u-popup/u-popup.js"))();const o=e.defineComponent({__name:"redeem",setup(o){const n=e.ref(""),i=e.ref(!1),t=e.ref({}),a=e.ref(!1),l=e.ref(!1),{lockFn:p,isLock:c}=s.useLockFn((async()=>{if(!n.value)return e.index.$u.toast("卡密编号不能为空"),void(l.value=!0);l.value=!1;try{const e=await r.checkRedeemCode({sn:n.value});i.value=!0,t.value=e}catch(u){e.index.$u.toast(u)}})),{lockFn:m,isLock:d}=s.useLockFn((async()=>{try{await r.useRedeemCode({sn:n.value}),i.value=!1,t.value={},n.value="",e.index.$u.toast("兑换成功")}catch(u){e.index.$u.toast(u)}}));return(r,s)=>e.e({a:e.p({"border-bottom":!1,"is-fixed":!1,background:{background:"transparent"},title:"充值中心","title-bold":!0}),b:u._imports_0$2,c:u._imports_1$1,d:e.o((e=>a.value=!1)),e:e.o((e=>a.value=!0)),f:e.o((u=>e.isRef(n)?n.value=u:null)),g:e.p({placeholder:"请输入有效卡密编号","placeholder-style":`color:${e.unref(l)?"#FB0000":" rgba(0,0,0,.2)"};font-size:26rpx;`,modelValue:e.unref(n)}),h:e.unref(a)?1:"",i:e.unref(l)?1:"",j:e.o(e.unref(p)),k:e.p({type:"primary",shape:"circle",loading:e.unref(c),"custom-style":{height:"90rpx",fontSize:"26rpx",boxShadow:"0px 6px 12px 0px rgba(0, 101, 251, 0.20)"}}),l:e.t(e.unref(t).content),m:e.t(e.unref(t).failure_time),n:e.unref(t).valid_time},e.unref(t).valid_time?{o:e.t(e.unref(t).valid_time)}:{},{p:e.o(e.unref(m)),q:e.p({type:"primary","custom-style":{width:"100%"},loading:e.unref(d)}),r:e.o((e=>i.value=!1)),s:e.o((u=>e.isRef(i)?i.value=u:null)),t:e.p({mode:"center","border-radius":"16",modelValue:e.unref(i)})})}});wx.createPage(o);

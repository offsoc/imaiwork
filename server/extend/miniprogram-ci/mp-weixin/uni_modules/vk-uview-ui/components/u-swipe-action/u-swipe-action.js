"use strict";const t=require("../../../../common/vendor.js"),e={name:"u-swipe-action",emits:["click","content-click","open","close"],props:{index:{type:[Number,String],default:""},btnWidth:{type:[String,Number],default:180},disabled:{type:Boolean,default:!1},show:{type:Boolean,default:!1},bgColor:{type:String,default:"#ffffff"},vibrateShort:{type:Boolean,default:!1},options:{type:Array,default:()=>[]}},watch:{show:{immediate:!0,handler(t,e){t?this.open():this.close()}}},data(){return{moveX:0,scrollX:0,status:!1,movableAreaWidth:0,elId:this.$u.guid(),showBtn:!1}},computed:{movableViewWidth(){return this.movableAreaWidth+this.allBtnWidth+"px"},innerBtnWidth(){return t.index.upx2px(this.btnWidth)},allBtnWidth(){return t.index.upx2px(this.btnWidth)*this.options.length},btnStyle(){return t=>(t.width=this.btnWidth+"rpx",t)}},mounted(){this.getActionRect()},methods:{btnClick(t){this.status=!1,this.$emit("click",this.index,t)},change(t){this.scrollX=t.detail.x},close(){this.moveX=0,this.status=!1},open(){this.disabled||(this.moveX=-this.allBtnWidth,this.status=!0)},touchend(){this.moveX=this.scrollX,this.$nextTick((function(){0==this.status?this.scrollX<=-this.allBtnWidth/4?(this.moveX=-this.allBtnWidth,this.status=!0,this.emitOpenEvent(),this.vibrateShort&&t.index.vibrateShort()):(this.moveX=0,this.status=!1,this.emitCloseEvent()):this.scrollX>3*-this.allBtnWidth/4?(this.moveX=0,this.$nextTick((()=>{this.moveX=101})),this.status=!1,this.emitCloseEvent()):(this.moveX=-this.allBtnWidth,this.status=!0,this.emitOpenEvent())}))},emitOpenEvent(){this.$emit("open",this.index)},emitCloseEvent(){this.$emit("close",this.index)},touchstart(){},getActionRect(){this.$uGetRect(".u-swipe-action").then((t=>{this.movableAreaWidth=t.width,this.$nextTick((()=>{this.showBtn=!0}))}))},contentClick(){1==this.status&&(this.status="close",this.moveX=0),this.$emit("content-click",this.index)}}};const i=t._export_sfc(e,[["render",function(e,i,s,h,n,o){return t.e({a:t.o(((...t)=>o.contentClick&&o.contentClick(...t))),b:n.showBtn},n.showBtn?{c:t.f(s.options,((e,i,s)=>({a:t.t(e.text),b:t.o((t=>o.btnClick(i)),i),c:t.s(o.btnStyle(e.style)),d:i})))}:{},{d:t.o(((...t)=>o.change&&o.change(...t))),e:t.o(((...t)=>o.touchend&&o.touchend(...t))),f:t.o(((...t)=>o.touchstart&&o.touchstart(...t))),g:s.disabled,h:n.moveX,i:o.movableViewWidth?o.movableViewWidth:"100%",j:s.bgColor})}],["__scopeId","data-v-b1583ba4"]]);wx.createComponent(i);

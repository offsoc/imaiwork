"use strict";const e=require("../../libs/util/emitter.js"),t=require("../../../../common/vendor.js"),a={name:"u-input",emits:["update:modelValue","input","change","blur","focus","click","touchstart"],mixins:[e.Emitter],props:{value:{type:[String,Number],default:""},modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},inputAlign:{type:String,default:""},placeholder:{type:String,default:"请输入内容"},disabled:{type:Boolean,default:!1},maxlength:{type:[Number,String],default:140},placeholderStyle:{type:String,default:"color: #888888;"},confirmType:{type:String,default:"done"},customStyle:{type:Object,default:()=>({})},fixed:{type:Boolean,default:!1},focus:{type:Boolean,default:!1},autoFocus:{type:Boolean,default:!1},passwordIcon:{type:Boolean,default:!0},border:{type:Boolean,default:!1},borderColor:{type:String,default:"#dcdfe6"},autoHeight:{type:Boolean,default:!0},selectOpen:{type:Boolean,default:!1},height:{type:[Number,String],default:""},clearable:{type:[Boolean,String]},cursorSpacing:{type:[Number,String],default:0},selectionStart:{type:[Number,String],default:-1},selectionEnd:{type:[Number,String],default:-1},trim:{type:Boolean,default:!0},showConfirmbar:{type:Boolean,default:!1},disableDefaultPadding:{type:Boolean,default:!0},backgroundColor:{type:String},padding:{type:String},adjustPosition:{type:Boolean,default:!0},adjustKeyboardTo:{type:String,default:"cursor"}},data:()=>({defaultValue:"",inputHeight:70,textareaHeight:100,validateState:!1,focused:!1,showPassword:!1,lastValue:"",uForm:{inputAlign:"",clearable:""}}),watch:{valueCom(e,t){this.defaultValue=e,e!=t&&"select"==this.type&&this.handleInput({detail:{value:e}})}},computed:{valueCom(){return this.modelValue},inputAlignCom(){return this.inputAlign||this.uForm.inputAlign||"left"},clearableCom(){return"boolean"==typeof this.clearable?this.clearable:"boolean"!=typeof this.uForm.clearable||this.uForm.clearable},inputMaxlength(){return Number(this.maxlength)},getStyle(){let e={};return e.minHeight=this.height?this.height+"rpx":"textarea"==this.type?this.textareaHeight+"rpx":this.inputHeight+"rpx",e=Object.assign(e,this.customStyle),e},getCursorSpacing(){return Number(this.cursorSpacing)},uSelectionStart(){return String(this.selectionStart)},uSelectionEnd(){return String(this.selectionEnd)}},created(){this.defaultValue=this.valueCom},mounted(){let e=this.$u.$parent.call(this,"u-form");e&&Object.keys(this.uForm).map((t=>{this.uForm[t]=e[t]}))},methods:{handleInput(e){let t=e.detail.value;this.trim&&(t=this.$u.trim(t)),this.$emit("input",t),this.$emit("update:modelValue",t),this.defaultValue=t,setTimeout((()=>{this.dispatch("u-form-item","onFieldChange",t)}),40)},handleBlur(e){setTimeout((()=>{this.focused=!1}),100),this.$emit("blur",e.detail.value),setTimeout((()=>{this.dispatch("u-form-item","onFieldBlur",e.detail.value)}),40)},onFormItemError(e){this.validateState=e},onFocus(e){this.focused=!0,this.$emit("focus")},onConfirm(e){this.$emit("confirm",e.detail.value)},onClear(e){this.$emit("input",""),this.$emit("update:modelValue","")},onKeyboardHeightChange(e){this.$emit("keyboardheightchange",e)},inputClick(){this.$emit("click")}}};if(!Array){t.resolveComponent("u-icon")()}Math;const o=t._export_sfc(a,[["render",function(e,a,o,l,i,r){return t.e({a:"textarea"==o.type},"textarea"==o.type?{b:t.s(r.getStyle),c:i.defaultValue,d:o.placeholder,e:o.placeholderStyle,f:o.disabled,g:r.inputMaxlength,h:o.fixed,i:o.focus,j:o.autoFocus,k:o.autoHeight,l:r.uSelectionEnd,m:r.uSelectionStart,n:r.getCursorSpacing,o:o.showConfirmbar,p:o.disableDefaultPadding,q:o.adjustPosition,r:o.adjustKeyboardTo,s:t.o(((...e)=>r.handleInput&&r.handleInput(...e))),t:t.o(((...e)=>r.handleBlur&&r.handleBlur(...e))),v:t.o(((...e)=>r.onFocus&&r.onFocus(...e))),w:t.o(((...e)=>r.onConfirm&&r.onConfirm(...e))),x:t.o(((...e)=>r.onKeyboardHeightChange&&r.onKeyboardHeightChange(...e)))}:{y:"password"==o.type?"text":o.type,z:t.s(r.getStyle),A:i.defaultValue,B:"password"==o.type&&!i.showPassword,C:o.placeholder,D:o.placeholderStyle,E:o.disabled||"select"===o.type,F:r.inputMaxlength,G:o.focus,H:o.autoFocus,I:o.confirmType,J:r.getCursorSpacing,K:r.uSelectionEnd,L:r.uSelectionStart,M:o.adjustPosition,N:t.o(((...e)=>r.onFocus&&r.onFocus(...e))),O:t.o(((...e)=>r.handleBlur&&r.handleBlur(...e))),P:t.o(((...e)=>r.handleInput&&r.handleInput(...e))),Q:t.o(((...e)=>r.onConfirm&&r.onConfirm(...e))),R:t.o(((...e)=>r.onKeyboardHeightChange&&r.onKeyboardHeightChange(...e)))},{S:r.clearableCom&&""!=r.valueCom&&i.focused},r.clearableCom&&""!=r.valueCom&&i.focused?{T:t.p({size:"32",name:"close-circle-fill",color:"#c0c4cc"}),U:t.o(((...e)=>r.onClear&&r.onClear(...e)))}:{},{V:o.passwordIcon&&"password"==o.type},o.passwordIcon&&"password"==o.type?{W:t.o((e=>i.showPassword=!i.showPassword)),X:t.p({size:"32",name:i.showPassword?"eye-fill":"eye",color:"#c0c4cc"})}:{},{Y:"select"==o.type},"select"==o.type?{Z:t.p({name:"arrow-down-fill",size:"26",color:"#c0c4cc"}),aa:o.selectOpen?1:""}:{},{ab:o.border?1:"",ac:i.validateState?1:"",ad:o.padding?o.padding:`0 ${o.border?20:0}rpx`,ae:o.borderColor,af:r.inputAlignCom,ag:o.backgroundColor,ah:t.o(((...e)=>r.inputClick&&r.inputClick(...e)))})}],["__scopeId","data-v-dd9b4910"]]);wx.createComponent(o);

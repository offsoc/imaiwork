"use strict";const e=require("../../common/vendor.js"),r=require("../../utils/util.js");require("../../stores/navigationBarTitle.js"),require("../../router/index.js"),require("../../stores/user.js"),require("../../api/user.js"),require("../../utils/request/index.js"),require("../../utils/request/http.js"),require("../../enums/requestEnums.js"),require("../../utils/request/cancel.js"),require("../../utils/auth.js"),require("../../enums/constantEnums.js"),require("../../utils/cache.js"),require("../../config/index.js"),require("../../hooks/useShareMessage.js"),require("../../stores/app.js"),require("../../api/app.js"),require("../../api/chat.js"),require("../../api/voice_chat.js");const u=e.defineComponent({__name:"video-player",props:{poster:{default:""},videoUrl:{default:""},playIconSize:{default:108},borderRadius:{default:48},showClose:{type:Boolean,default:!1}},setup(u,{expose:s}){const{statusBarHeight:a}=e.index.$u.sys(),t=e.ref(),i=e.ref(0),o=e.ref(0),n=e.ref(0),l=e.ref(!1),c=e.ref(!1),d=e.ref(!1),f=e.ref(!1),p=async e=>{const{duration:r}=e.detail;i.value=r},v=e=>{const{currentTime:r,duration:u}=e.detail;o.value=r,n.value=r/u*100},q=e=>{const{fullScreen:r}=e.detail;f.value=r},{proxy:j}=e.getCurrentInstance(),x=async e=>{const u=e.detail.x,s=await r.getRect(".progress-box",!1,j),a=(u-s.left)/s.width*100/100*i.value;t.value.seek(a)},m=()=>{d.value=!0,l.value=!0},y=()=>{l.value=!1},h=()=>{c.value=!0},g=async()=>{if(d.value=!0,c.value)return t.value.seek(0),t.value.play(),void(c.value=!1);l.value?(t.value.pause(),l.value=!1):(await e.nextTick$1(),t.value.play(),l.value=!0)};return e.onMounted((async()=>{await(async()=>{await e.nextTick$1(),t.value=e.index.createVideoContext("video-player",j)})()})),s({toggleVideo:g}),(s,j)=>e.e({a:u.borderRadius+"rpx",b:u.videoUrl,c:e.unref(f),d:e.o(m),e:e.o(y),f:e.o(h),g:e.o(p),h:e.o(v),i:e.o(q),j:e.unref(d)?"":1,k:u.showClose},u.showClose?{l:e.unref(a)+"px",m:e.o((e=>s.$emit("close")))}:{},{n:!e.unref(l)||e.unref(c)},!e.unref(l)||e.unref(c)?{o:`${u.playIconSize}rpx`,p:`${u.playIconSize}rpx`,q:e.o((e=>g()))}:{},{r:e.t(e.unref(r.formatAudioTime)(e.unref(o))),s:e.t(e.unref(r.formatAudioTime)(e.unref(i))),t:!e.unref(l)||e.unref(c)},(!e.unref(l)||e.unref(c),{}),{v:e.o((e=>g())),w:`${e.unref(n)}%`,x:e.o(x),y:e.o((e=>{t.value.requestFullScreen()})),z:`url(${u.poster})`,A:u.borderRadius+"rpx"})}}),s=e._export_sfc(u,[["__scopeId","data-v-049aae1d"]]);wx.createComponent(s);

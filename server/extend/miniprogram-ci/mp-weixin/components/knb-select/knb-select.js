"use strict";const e=require("../../common/vendor.js"),u=require("../../api/knowledge_base.js"),s=require("../../enums/appEnums.js");if(require("../../utils/request/index.js"),require("../../utils/request/http.js"),require("../../enums/requestEnums.js"),require("../../utils/request/cancel.js"),require("../../utils/auth.js"),require("../../enums/constantEnums.js"),require("../../utils/cache.js"),require("../../stores/user.js"),require("../../api/user.js"),require("../../hooks/useShareMessage.js"),require("../../router/index.js"),require("../../utils/util.js"),require("../../stores/navigationBarTitle.js"),require("../../stores/app.js"),require("../../api/app.js"),require("../../api/chat.js"),require("../../api/voice_chat.js"),require("../../config/index.js"),!Array){(e.resolveComponent("u-tabs")+e.resolveComponent("u-search")+e.resolveComponent("empty")+e.resolveComponent("z-paging")+e.resolveComponent("popup-bottom"))()}Math||((()=>"../../uni_modules/vk-uview-ui/components/u-tabs/u-tabs.js")+(()=>"../../uni_modules/vk-uview-ui/components/u-search/u-search.js")+(()=>"../empty/empty.js")+(()=>"../../node-modules/z-paging/components/z-paging/z-paging.js")+(()=>"../popup-bottom/popup-bottom.js"))();const a=e.defineComponent({__name:"knb-select",emits:["close","confirm"],setup(a,{expose:r,emit:n}){const o=e.ref([{name:"向量知识库",value:s.KnbTypeEnum.VECTOR},{name:"RAG知识库",value:s.KnbTypeEnum.RAG}]),i=e.ref(0),t=e.ref(!1),l=e.ref([]),c=e.ref(),p=e.ref(""),v=async(e,s)=>{var a,r;try{const r={page_no:e,page_size:s,name:p.value},{lists:n}=await(0==i.value?u.vectorKnowledgeBaseLists:u.knowledgeBaseLists)(r);null==(a=c.value)||a.complete(n)}catch(n){null==(r=c.value)||r.complete(!1)}},m=e=>0==i.value?g.value.id==e.id:g.value.index_id==e.index_id,d=e=>{var u;i.value=e,l.value=[],null==(u=c.value)||u.reload()},f=()=>{var e;null==(e=c.value)||e.reload()},h=()=>{p.value="",f()},g=e.ref({}),j=e=>{0==i.value?g.value.id==e.id?g.value={}:g.value=e:g.value.index_id==e.index_id?g.value={}:g.value=e,t.value=!1,n("confirm",{data:g.value,type:0==i.value?s.KnbTypeEnum.VECTOR:s.KnbTypeEnum.RAG})},q=e.ref();return r({open:async u=>{var s;t.value=!0,await e.nextTick$1(),await(null==(s=c.value)?void 0:s.reload()),g.value=u,await e.nextTick$1(),q.value.currentIndex=i.value}}),(u,s)=>({a:e.sr(q,"cf82d79c-1,cf82d79c-0",{k:"tabsRef"}),b:e.o(d),c:e.p({list:e.unref(o),current:e.unref(i),"bg-color":"transparent","font-size":"26","active-item-style":{fontWeight:"400"},"show-bar":!1}),d:e.o(f),e:e.o(h),f:e.o((u=>e.isRef(p)?p.value=u:null)),g:e.p({placeholder:"搜索相关知识库",height:"80","bg-color":"#ffffff","search-icon-color":"#0000001a","placeholder-color":"#0000001a","show-action":!1,modelValue:e.unref(p)}),h:e.f(e.unref(l),((u,s,a)=>e.e({a:m(u)},(m(u),{}),{b:e.t(u.name),c:e.t(u.file_count||u.file_counts),d:m(u),e:e.o((e=>j(u)),s),f:s,g:e.n(m(u)?"shadow-_0_0_0_1px_rgba_0b101b251b1__":""),h:e.o((e=>j(u)),s)}))),i:e.sr(c,"cf82d79c-3,cf82d79c-0",{k:"pagingRef"}),j:e.o(v),k:e.o((u=>e.isRef(l)?l.value=u:null)),l:e.p({fixed:!1,auto:!1,"safe-area-inset-bottom":!0,modelValue:e.unref(l)}),m:e.o((u=>e.isRef(t)?t.value=u:null)),n:e.p({height:"85%","is-disabled-touch":!0,"show-close-btn":!0,"custom-class":"bg-_hF9FAFB_",show:e.unref(t)})})}});wx.createComponent(a);

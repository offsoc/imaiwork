"use strict";const e=require("../../common/vendor.js"),t=require("../../utils/util.js");if(require("../../stores/navigationBarTitle.js"),require("../../router/index.js"),require("../../stores/user.js"),require("../../api/user.js"),require("../../utils/request/index.js"),require("../../utils/request/http.js"),require("../../enums/requestEnums.js"),require("../../utils/request/cancel.js"),require("../../utils/auth.js"),require("../../enums/constantEnums.js"),require("../../utils/cache.js"),require("../../config/index.js"),require("../../hooks/useShareMessage.js"),require("../../stores/app.js"),require("../../api/app.js"),require("../../api/chat.js"),require("../../api/voice_chat.js"),!Array){e.resolveComponent("u-icon")()}Math;const u={__name:"data-select",props:{localdata:{type:Array,default:()=>[]},value:{type:Array,default:()=>[]},modelValue:{type:[Array,String,Number]},label:{type:String,default:""},placeholder:{type:String,default:"请选择"},emptyTips:{type:String,default:"无选项"},clear:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},format:{type:String,default:""},placement:{type:String,default:"bottom"},multiple:{type:Boolean,default:!1}},emits:["input","update:modelValue","change"],setup(u,{emit:l}){const a=u,r=e.ref(!1),n=e.ref([]),i=e.ref([]),s=e.ref(0),o=e.ref(0),p=e.ref(a.placement),c=e.computed((()=>a.placeholder||"请选择")),d=e.computed((()=>"top"===p.value?"bottom: calc(100% + 12px);":"top: calc(100% + 12px);"));e.computed((()=>s.value-o.value-curHeight.value));const{proxy:f}=e.getCurrentInstance(),m=()=>{a.disabled||(r.value=!r.value),e.nextTick$1((()=>{const u=e.index.$u.sys();s.value=u.windowHeight,t.getRect(".uni-stat__select",!1,f).then((e=>{o.value=e.top,o.value>s.value-350?p.value="top":p.value="bottom"}))}))},v=e=>n.value.some((t=>t.value===e.value)),h=()=>{n.value=[],g()},g=()=>{const e=n.value.map((e=>e.value));a.multiple?(l("input",e),l("update:modelValue",e),l("change",e)):(l("input",e[0]),l("update:modelValue",e[0]),l("change",e[0]))},q=e=>{let{text:t,value:u,channel_code:l}=e;return l?`${t}(${l})`:t||`未命名(${u})`};return e.watch((()=>a.localdata),(e=>{Array.isArray(e)&&(i.value=e)}),{immediate:!0}),e.watch((()=>a.modelValue),(e=>{a.multiple?n.value=i.value.filter((t=>null==e?void 0:e.includes(t.value))):n.value=i.value.filter((t=>t.value==e))}),{immediate:!0}),(t,l)=>e.e({a:u.label},u.label?{b:e.t(u.label+"：")}:{},{c:e.unref(n).length>0},e.unref(n).length>0?e.e({d:u.multiple},u.multiple?{e:e.f(e.unref(n),((t,u,l)=>({a:e.t(t.text),b:u})))}:{f:e.t(e.unref(n)[0].text)}):{g:e.t(e.unref(c))},{h:e.unref(n).length>0&&u.clear&&!u.disabled},e.unref(n).length>0&&u.clear&&!u.disabled?{i:e.p({name:"close",color:"#c0c4cc",size:"24"}),j:e.o(h)}:{k:e.p({name:e.unref(r)?"arrow-up":"arrow-down",size:"24",color:"#A1A1A1"})},{l:e.o(m),m:e.unref(r)},e.unref(r)?{n:e.o(m)}:{},{o:e.unref(r)},e.unref(r)?e.e({p:e.n("bottom"==e.unref(p)?"uni-popper__arrow_bottom":"uni-popper__arrow_top"),q:0===e.unref(i).length},0===e.unref(i).length?{r:e.t(u.emptyTips)}:{s:e.f(e.unref(i),((t,u,l)=>({a:e.t(q(t)),b:t.disable?1:"",c:v(t)?1:"",d:u,e:e.o((e=>(e=>{if(!e.disable){if(a.multiple){const t=n.value.findIndex((t=>t.value===e.value));t>=0?n.value.splice(t,1):n.value.push(e)}else n.value=[e],r.value=!1;g()}})(t)),u)})))},{t:e.s(e.unref(d))}):{},{v:u.disabled?1:"",w:e.unref(n).length>0?1:""})}};wx.createComponent(u);

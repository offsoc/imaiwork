"use strict";const e=require("../common/vendor.js");e.ref(!1),exports.saveVideoToPhotosAlbum=async function(t){try{if(!(await(i="scope.writePhotosAlbum",new Promise(((t,o)=>{e.index.authorize({scope:i,success:()=>{t(!0)},fail:async n=>{try{if((await e.index.showModal({title:"提示",content:"您关闭了权限，需要前往设置页面打开权限才能继续使用该功能。",confirmText:"去设置",cancelText:"取消"})).confirm){const o=await e.index.openSetting();o.authSetting&&o.authSetting[i]?t(!0):t(!1)}else t(!1)}catch(a){o(a)}}})})))))return void e.index.$u.toast("您关闭了权限，请前往设置打开权限");e.index.showLoading({title:"下载中"});const{tempFilePath:o}=await e.index.downloadFile({url:t});await e.index.saveVideoToPhotosAlbum({filePath:o}),e.index.hideLoading(),e.index.showToast({title:"保存成功",icon:"success",duration:2e3})}catch(o){e.index.hideLoading(),e.index.showToast({title:"保存失败",icon:"none",duration:2e3})}var i};

"use strict";const e=require("../common/vendor.js"),t=require("../stores/navigationBarTitle.js");const r=e=>null==e||void 0===e;exports.addUnit=(e,t="rpx")=>Object.is(Number(e),NaN)?e:`${e}${t}`,exports.formatAudioTime=function(e,t=!1){if(!e)return t?"00:00:00":"00:00";const r=Math.floor(e/3600),n=Math.floor(e%3600/60),o=Math.floor(e%60);return e>3600?`${r<10?"0":""}${r}:${n<10?"0":""}${n}:${o<10?"0":""}${o}`:`${n<10?"0":""}${n}:${o<10?"0":""}${o}`},exports.formatFileSize=(e,t=2)=>{const r=["B","KB","MB","GB"];let n=0;for(;e>=1024&&n<r.length-1;)e/=1024,n++;return 0===n?`${e.toFixed(t)}B`:`${e.toFixed(t)}${r[n]}`},exports.getRect=(t,r=!1,n)=>new Promise(((o,i)=>{let s=e.index.createSelectorQuery();n&&(s=e.index.createSelectorQuery().in(n)),s[r?"selectAll":"select"](t).boundingClientRect((function(e){return r&&Array.isArray(e)&&e.length||!r&&e?o(e):void i("找不到元素")})).exec()})),exports.isImageUrl=e=>null!==e.match(/\.(jpeg|jpg|gif|png|bmp|svg|webp)$/i),exports.isJson=e=>{try{return JSON.parse(e),!0}catch(t){return!1}},exports.navigateTo=function(n,o=!1,i="navigateTo"){const s=n.query?`${n.path}?${function(e){let t="";for(const n of Object.keys(e)){const o=e[n];r(o)||(t+=n+"="+o+"&")}return t.slice(0,-1)}(n.query)}`:n.path;t.useNavigationBarTitleStore().add({path:n.path,title:n.name}),"navigateTo"==i&&e.index.navigateTo({url:s}),"reLaunch"==i&&e.index.reLaunch({url:s}),"switchTab"==i&&e.index.switchTab({url:s})},exports.paramsToStr=function(t){let r="";if(e.isObject(t)){r="?";for(const e in t)r+=`${e}=${t[e]}&`;r=r.slice(0,-1)}return r},exports.series=function(...e){return function(t){return new Promise(((r,n)=>{const o=e.values(),i=e=>{const t=o.next();t.done?r(e):Promise.resolve(t.value(e)).then(i).catch(n)};i(t)}))}},exports.setFormData=(e,t)=>{for(const r in t)null!=e[r]&&null!=e[r]&&(t[r]=e[r])},exports.strToParams=function(e){if(""===e||"?"===e)return{};const t={};for(const r of e.split("&"))t[r.split("=")[0]]=r.split("=")[1];return t};

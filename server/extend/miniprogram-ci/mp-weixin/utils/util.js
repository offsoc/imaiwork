"use strict";const e=require("../common/vendor.js"),t=require("../stores/navigationBarTitle.js");const r=e=>null==e||void 0===e;exports.addUnit=(e,t="rpx")=>Object.is(Number(e),NaN)?e:`${e}${t}`,exports.formatAudioTime=function(e,t=!1){if(!e)return t?"00:00:00":"00:00";const r=Math.floor(e/3600),o=Math.floor(e%3600/60),n=Math.floor(e%60);return e>3600?`${r<10?"0":""}${r}:${o<10?"0":""}${o}:${n<10?"0":""}${n}`:`${o<10?"0":""}${o}:${n<10?"0":""}${n}`},exports.formatFileSize=(e,t=2)=>{const r=["B","KB","MB","GB"];let o=0;for(;e>=1024&&o<r.length-1;)e/=1024,o++;return 0===o?`${e.toFixed(t)}B`:`${e.toFixed(t)}${r[o]}`},exports.formatNumberToWanOrYi=e=>e<1e4?e:e<1e8?`${(e/1e4).toFixed(1)}万`:e<1e10?`${(e/1e8).toFixed(1)}亿`:e<1e12?`${(e/1e10).toFixed(1)}亿`:e<1e14?`${(e/1e12).toFixed(1)}亿`:e<1e16?`${(e/1e14).toFixed(1)}亿`:`${(e/1e16).toFixed(1)}亿`,exports.getRect=(t,r=!1,o)=>new Promise(((n,i)=>{let s=e.index.createSelectorQuery();o&&(s=e.index.createSelectorQuery().in(o)),s[r?"selectAll":"select"](t).boundingClientRect((function(e){return r&&Array.isArray(e)&&e.length||!r&&e?n(e):void i("找不到元素")})).exec()})),exports.isImageUrl=e=>null!==e.match(/\.(jpeg|jpg|gif|png|bmp|svg|webp)$/i),exports.isJson=e=>{try{return JSON.parse(e),!0}catch(t){return!1}},exports.navigateTo=function(o,n=!1,i="navigateTo"){const s=o.query?`${o.path}?${function(e){let t="";for(const o of Object.keys(e)){const n=e[o];r(n)||(t+=o+"="+n+"&")}return t.slice(0,-1)}(o.query)}`:o.path;t.useNavigationBarTitleStore().add({path:o.path,title:o.name}),"navigateTo"==i&&e.index.navigateTo({url:s}),"reLaunch"==i&&e.index.reLaunch({url:s}),"switchTab"==i&&e.index.switchTab({url:s})},exports.paramsToStr=function(t){let r="";if(e.isObject(t)){r="?";for(const e in t)r+=`${e}=${t[e]}&`;r=r.slice(0,-1)}return r},exports.series=function(...e){return function(t){return new Promise(((r,o)=>{const n=e.values(),i=e=>{const t=n.next();t.done?r(e):Promise.resolve(t.value(e)).then(i).catch(o)};i(t)}))}},exports.setFormData=(e,t)=>{for(const r in t)null!=e[r]&&null!=e[r]&&(t[r]=e[r])},exports.strToParams=function(e){if(""===e||"?"===e)return{};const t={};for(const r of e.split("&"))t[r.split("=")[0]]=r.split("=")[1];return t};

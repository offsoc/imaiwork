"use strict";const e=require("../../../../common/vendor.js"),i=require("../../../../common/assets.js"),o=require("../../../../api/digital_human.js"),s=require("../../../../hooks/usePaging.js"),t=require("../../enums/index.js"),u=require("../../../../utils/cache.js"),n=require("../../../../config/index.js");if(require("../../../../utils/request/index.js"),require("../../../../utils/request/http.js"),require("../../../../enums/requestEnums.js"),require("../../../../utils/request/cancel.js"),require("../../../../utils/auth.js"),require("../../../../enums/constantEnums.js"),require("../../../../stores/user.js"),require("../../../../api/user.js"),require("../../../../hooks/useShareMessage.js"),require("../../../../router/index.js"),require("../../../../utils/util.js"),require("../../../../stores/navigationBarTitle.js"),require("../../../../stores/app.js"),require("../../../../api/app.js"),require("../../../../api/chat.js"),require("../../../../api/voice_chat.js"),!Array){(e.resolveComponent("u-navbar")+e.resolveComponent("u-button")+e.resolveComponent("u-icon")+e.resolveComponent("empty"))()}Math||((()=>"../../../../uni_modules/vk-uview-ui/components/u-navbar/u-navbar.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-button/u-button.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-icon/u-icon.js")+a+(()=>"../../../../components/empty/empty.js")+r+l)();const a=()=>"../../components/video-item/video-item.js",r=()=>"../../components/video-preview/video-preview.js",l=()=>"../../components/choose-model/choose-model.js",d=e.defineComponent({__name:"index",setup(a){const r=e.ref([{icon:i.ImageMenu1,title:"形象克隆",key:"anchor_clone",url:`/ai_modules/digital_human/pages/video_upload/video_upload?type=${t.ModeTypeEnum.ANCHOR}`},{icon:i.ImageMenu2,title:"声音克隆",key:"tone_clone",url:"/ai_modules/digital_human/pages/tone_clone/tone_clone"},{icon:i.ImageMenu3,title:"我的模特",key:"model_manage",url:"/ai_modules/digital_human/pages/model_manage/model_manage"},{icon:i.ImageMenu4,title:"音色管理",key:"tone_manage",url:"/ai_modules/digital_human/pages/tone_manage/tone_manage"}]),{pager:l,getLists:d,resetPage:m}=s.usePaging({fetchFun:o.digitalHumanLists,params:{page_size:10}}),c=e.ref(!1),p="dh_example",_=()=>{c.value=!1,e.index.$u.route({url:"/ai_modules/digital_human/pages/video_create/video_create"})},v=i=>{e.index.showModal({title:"提示",content:"确定要重试吗？",success:async s=>{if(s.confirm){e.index.showLoading({title:"重试中...",mask:!0});try{await o.retryVideo({video_id:i}),m(),e.index.hideLoading(),e.index.showToast({title:"重试成功",icon:"none",duration:2e3})}catch(t){e.index.hideLoading(),e.index.showToast({title:t||"重试失败",icon:"none",duration:2e3})}}}})},g=e.ref(""),h=e.ref(!1),f=e=>{g.value=e,h.value=!0},j=e.ref(!1),q=i=>{j.value=!1,e.index.$u.route({url:`/ai_modules/digital_human/pages/video_upload/video_upload?type=${t.ModeTypeEnum.ANCHOR}&model_version=${i}`})},x=e.ref(),y=async()=>{x.value=setTimeout((()=>{l.lists.some((e=>1!=e.status&&2!=e.status))?(d(),y()):clearTimeout(x.value)}),2e3)};return e.onShow((async()=>{await d(),y(),u.cache.get(p)||(u.cache.set(p,!0),c.value=!0)})),e.onHide((()=>{clearTimeout(x.value)})),e.onUnload((()=>{clearTimeout(x.value)})),(o,s)=>e.e({a:e.p({"is-fixed":!1,"border-bottom":!1,background:{background:"transparent"}}),b:i._imports_0$3,c:i._imports_0$4,d:e.p({type:"primary",shape:"circle","custom-style":{width:"460rpx",height:"104rpx"}}),e:e.f(e.unref(r),((i,o,s)=>({a:i.icon,b:o,c:e.o((o=>(i=>{const{url:o,key:s}=i;"anchor_clone"!==s?e.index.navigateTo({url:i.url}):j.value=!0})(i)),o)}))),f:e.p({name:"arrow-right",color:"#A7A7A7",size:"28"}),g:e.unref(l).lists.length},e.unref(l).lists.length?{h:e.f(e.unref(l).lists,((i,o,s)=>({a:e.o(v,o),b:e.o(f,o),c:"dde6f160-3-"+s,d:e.p({"show-more":!0,item:{id:i.id,name:i.name,pic:i.pic,video_url:i.result_url,clip_video_url:i.clip_result_url,status:i.status,remark:i.remark,model_version:i.model_version,automatic_clip:i.automatic_clip,clip_status:i.clip_status}}),e:o})))}:{},{i:e.o((e=>h.value=!1)),j:e.o((i=>e.isRef(h)?h.value=i:null)),k:e.p({title:"视频预览","video-url":e.unref(g),show:e.unref(h)}),l:e.o((e=>c.value=!1)),m:e.o(_),n:e.o((i=>e.isRef(c)?c.value=i:null)),o:e.p({title:"新手教程","confirm-btn-text":"立即定制","video-url":`${e.unref(n.config).baseUrl}static/videos/dh_example1.mp4`,show:e.unref(c)}),p:e.o(q),q:e.o((i=>e.isRef(j)?j.value=i:null)),r:e.p({show:e.unref(j)})})}}),m=e._export_sfc(d,[["__scopeId","data-v-dde6f160"]]);wx.createPage(m);

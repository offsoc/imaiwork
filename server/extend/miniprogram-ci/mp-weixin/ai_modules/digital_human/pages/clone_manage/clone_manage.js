"use strict";const e=require("../../../../common/vendor.js"),u=require("../../../../common/assets.js"),n=require("../../../../api/digital_human.js"),i=require("../../enums/index.js"),r=require("../../../../hooks/useAudio.js");if(require("../../../../utils/request/index.js"),require("../../../../utils/request/http.js"),require("../../../../enums/requestEnums.js"),require("../../../../utils/request/cancel.js"),require("../../../../utils/auth.js"),require("../../../../enums/constantEnums.js"),require("../../../../utils/cache.js"),require("../../../../stores/user.js"),require("../../../../api/user.js"),require("../../../../hooks/useShareMessage.js"),require("../../../../router/index.js"),require("../../../../utils/util.js"),require("../../../../stores/navigationBarTitle.js"),require("../../../../stores/app.js"),require("../../../../api/app.js"),require("../../../../api/chat.js"),require("../../../../api/voice_chat.js"),require("../../../../config/index.js"),!Array){(e.resolveComponent("u-navbar")+e.resolveComponent("u-tabs")+e.resolveComponent("u-icon")+e.resolveComponent("empty")+e.resolveComponent("z-paging")+e.resolveComponent("video-preview"))()}Math||((()=>"../../../../uni_modules/vk-uview-ui/components/u-navbar/u-navbar.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-tabs/u-tabs.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-icon/u-icon.js")+s+(()=>"../../../../components/empty/empty.js")+(()=>"../../../../node-modules/z-paging/components/z-paging/z-paging.js")+(()=>"../../../../components/video-preview/video-preview.js"))();const s=()=>"../../components/video-item/video-item.js",a=e.defineComponent({__name:"clone_manage",setup(s){const a=[{name:"形象克隆"},{name:"声音克隆"}],o=e.ref(0),t=e.ref([]),l=e.ref([]),d=e.ref(0),{setUrl:c,isPlaying:v,play:m,pause:f,pauseAll:p,destroy:g}=r.useAudio(),h=e.shallowRef(),j=async(e,u)=>{var r,s;try{const{lists:s,count:a}=0==o.value?await n.getAnchorList({page_no:e,page_size:u,type:0,model_version:i.DigitalHumanModelVersionEnum.CHANJING}):await n.getVoiceList({page_no:e,page_size:u,builtin:1,model_version:i.DigitalHumanModelVersionEnum.CHANJING});d.value=a,null==(r=h.value)||r.complete(s)}catch(a){null==(s=h.value)||s.complete([])}},_=e=>{var u;o.value=e,l.value=[],null==(u=h.value)||u.reload(),1==o.value&&(p(),g())},q=e.ref(""),w=e.ref(!1),b=e=>{q.value=e,w.value=!0},k=e.ref(null),x=e=>{l.value.includes(e)?l.value=l.value.filter((u=>u!==e)):l.value.push(e)},y=e.ref(!1),z=()=>{y.value=!y.value,l.value=[]},A=()=>{l.value.length===t.value.length?l.value=[]:l.value=t.value.map((e=>e.id))},C=u=>{e.index.showModal({title:"提示",content:"确定要删除吗？",success:async i=>{var r;if(i.confirm){e.index.showLoading({title:"删除中...",mask:!0});try{0==o.value?await n.deleteAnchor({id:u||l.value}):await n.deleteVoice({id:u||l.value}),null==(r=h.value)||r.reload(),e.index.hideLoading(),e.index.showToast({title:"删除成功",icon:"none",duration:3e3})}catch(s){e.index.hideLoading(),e.index.showToast({title:s||"删除失败",icon:"none",duration:3e3})}}y.value=!1,l.value=[]}})};return e.onUnload((()=>{g()})),(n,i)=>e.e({a:e.p({"border-bottom":!1,"is-fixed":!1,background:{background:"transparent"},title:"我的克隆","title-bold":!0}),b:e.o(_),c:e.p({list:a,"is-scroll":!1,current:e.unref(o),"bg-color":""}),d:e.t(e.unref(d)),e:0==e.unref(o)},0==e.unref(o)?{f:e.f(e.unref(t),((u,n,i)=>e.e(e.unref(y)?e.e({a:e.unref(l).includes(u.id)},e.unref(l).includes(u.id)?{b:"19342ae9-3-"+i+",19342ae9-2",c:e.p({name:"checkmark",color:"#fff",size:20})}:{},{d:e.unref(l).includes(u.id)?1:"",e:e.o((e=>x(u.id)),n)}):{},{f:e.o(C,n),g:e.o(b,n),h:"19342ae9-4-"+i+",19342ae9-2",i:e.p({item:{id:u.id,name:u.name,pic:u.pic,status:u.status,video_url:u.url,model_version:u.model_version,remark:u.remark},"show-play":!1,"show-more":!e.unref(y)}),j:n}))),g:e.unref(y)}:{},{h:1==e.unref(o)},1==e.unref(o)?{i:e.f(e.unref(t),((n,i,r)=>e.e({a:e.t(n.name),b:e.t(n.create_time),c:1==n.status},1==n.status?e.e({d:e.unref(v)&&e.unref(k)==n.id},e.unref(v)&&e.unref(k)==n.id?{e:u._imports_1$5}:{f:u._imports_2$2},{g:e.t(e.unref(v)&&e.unref(k)==n.id?"暂停":"试听"),h:e.o((e=>(async e=>{v.value&&k.value!==e.id&&p(),v.value?f():(m(e.voice_urls),k.value=e.id)})(n)),i)}):2===n.status?{j:u._imports_3$4}:[0,3,4,5].includes(n.status)?{l:u._imports_4$3}:{},{i:2===n.status,k:[0,3,4,5].includes(n.status)},e.unref(y)?e.e({m:e.unref(l).includes(n.id)},e.unref(l).includes(n.id)?{n:"19342ae9-5-"+r+",19342ae9-2",o:e.p({name:"checkmark",color:"#fff",size:20})}:{},{p:e.unref(l).includes(n.id)?1:"",q:e.o((e=>x(n.id)),i)}):{},{r:i}))),j:u._imports_0$9,k:e.unref(y)}:{},{l:e.sr(h,"19342ae9-2",{k:"pagingRef"}),m:e.o(j),n:e.o((u=>e.isRef(t)?t.value=u:null)),o:e.p({fixed:!1,"safe-area-inset-bottom":!0,modelValue:e.unref(t)}),p:e.unref(t).length>0},e.unref(t).length>0?e.e({q:e.t(e.unref(y)?"取消":"管理"),r:e.o(z),s:e.unref(y)},e.unref(y)?{t:e.o(A)}:{},{v:e.unref(y)},e.unref(y)?{w:e.t(e.unref(l).length),x:e.o((e=>C()))}:{}):{},{y:e.o((e=>w.value=!1)),z:e.o((u=>e.isRef(w)?w.value=u:null)),A:e.p({title:"视频预览","video-url":e.unref(q),show:e.unref(w)})})}}),o=e._export_sfc(a,[["__scopeId","data-v-19342ae9"]]);wx.createPage(o);

"use strict";const e=require("../../../../common/vendor.js"),o=require("../../../../common/assets.js"),s=require("../../../../api/digital_human.js");if(require("../../../../utils/request/index.js"),require("../../../../utils/request/http.js"),require("../../../../enums/requestEnums.js"),require("../../../../utils/request/cancel.js"),require("../../../../utils/auth.js"),require("../../../../enums/constantEnums.js"),require("../../../../utils/cache.js"),require("../../../../stores/user.js"),require("../../../../api/user.js"),require("../../../../hooks/useShareMessage.js"),require("../../../../router/index.js"),require("../../../../utils/util.js"),require("../../../../stores/navigationBarTitle.js"),require("../../../../stores/app.js"),require("../../../../api/app.js"),require("../../../../api/chat.js"),require("../../../../api/voice_chat.js"),require("../../../../config/index.js"),!Array){(e.resolveComponent("u-navbar")+e.resolveComponent("u-search")+e.resolveComponent("u-icon")+e.resolveComponent("circle-progress")+e.resolveComponent("empty")+e.resolveComponent("z-paging"))()}Math||((()=>"../../../../uni_modules/vk-uview-ui/components/u-navbar/u-navbar.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-search/u-search.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-icon/u-icon.js")+(()=>"../../../../components/circle-progress/circle-progress.js")+(()=>"../../../../components/empty/empty.js")+(()=>"../../../../node-modules/z-paging/components/z-paging/z-paging.js"))();const r=e.defineComponent({__name:"montage_publish_record",setup(r){const i=e.ref(""),t=e.ref([]),n=e.shallowRef(),u=e.ref(!1),a=e=>{var o;null==(o=n.value)||o.reload()},l=async(e,o)=>{var r,t;try{const{lists:t}=await s.getPublishRecord({page_no:e,page_size:o,name:i.value});null==(r=n.value)||r.complete(t)}catch(u){null==(t=n.value)||t.complete([])}};return(r,c)=>e.e({a:e.p({title:"发布记录","title-bold":!0,"is-fixed":!1,"border-bottom":!1,background:{background:"transparent"}}),b:e.o(a),c:e.o(a),d:e.o((o=>e.isRef(i)?i.value=o:null)),e:e.p({height:"72","search-icon-color":"#ABB1B3","placeholder-color":"#ABB1B3","show-action":!1,modelValue:e.unref(i)}),f:!e.unref(u)},e.unref(u)?{}:{g:e.p({name:"setting",color:"#A8AAAC",size:"48"})},{h:e.o((o=>u.value=!e.unref(u))),i:e.f(e.unref(t),((o,r,i)=>e.e({a:e.t(o.name),b:e.t(3!=o.status?"执行中":"已完成"),c:e.n(3!=o.status?"text-_hC93F8D_ bg-_hF3E5EE_":"text-_h479797_ bg-_hE6EEF0_"),d:e.t(o.create_time),e:o.times.length>0},o.times.length>0?{f:e.f(o.times,((o,s,r)=>({a:e.t(o),b:s})))}:{},{g:e.t(o.publish_cycle),h:3!==o.status},3!==o.status?{i:e.t(o.count-o.published_count),j:"8e552e50-4-"+i+",8e552e50-3",k:e.p({percent:isNaN(o.published_count/o.count*100)?0:parseFloat((o.published_count/o.count*100).toFixed(2)),"bg-color":"#E5ECFA",borderWidth:"15rpx",width:"198rpx",progressColor:"#467EF9",notProgressColor:"#E5ECFA"})}:{},e.unref(u)?{l:"8e552e50-5-"+i+",8e552e50-3",m:e.p({name:"close",color:"#ffffff",size:"20"}),n:e.o((r=>(o=>{const{id:r}=o;e.index.showModal({title:"提示",content:"删除后任务将终止，切后续将不再执行，注意，该操作不可逆！",success:async o=>{var i;if(o.confirm){e.index.showLoading();try{await s.deletePublishRecord({id:r}),null==(i=n.value)||i.reload(),e.index.hideLoading(),e.index.showToast({title:"删除成功",icon:"none",duration:3e3})}catch(t){e.index.hideLoading(),e.index.showToast({title:"删除失败",icon:"none",duration:3e3})}}}})})(o)),r)}:{},{o:r,p:e.o((s=>(o=>{e.index.navigateTo({url:`/ai_modules/digital_human/pages/montage_publish_video/montage_publish_video?id=${o.id}`})})(o)),r)}))),j:o._imports_0$17,k:o._imports_1$10,l:e.unref(u),m:e.sr(n,"8e552e50-3",{k:"pagingRef"}),n:e.o(l),o:e.o((o=>e.isRef(t)?t.value=o:null)),p:e.p({fixed:!1,"safe-area-inset-bottom":!0,modelValue:e.unref(t)})})}});wx.createPage(r);

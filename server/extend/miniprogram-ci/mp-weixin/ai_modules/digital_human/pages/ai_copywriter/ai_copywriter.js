"use strict";const e=require("../../../../common/vendor.js"),t=require("../../../../utils/util.js"),r=require("../../../../api/digital_human.js"),i=require("../../../../stores/user.js"),n=require("../../../../enums/appEnums.js"),u=require("../../config/copywriter.js"),s=require("../../enums/index.js");if(require("../../../../stores/navigationBarTitle.js"),require("../../../../router/index.js"),require("../../../../utils/cache.js"),require("../../../../enums/constantEnums.js"),require("../../../../utils/request/index.js"),require("../../../../utils/request/http.js"),require("../../../../enums/requestEnums.js"),require("../../../../utils/request/cancel.js"),require("../../../../utils/auth.js"),require("../../../../config/index.js"),require("../../../../api/user.js"),require("../../../../hooks/useShareMessage.js"),require("../../../../stores/app.js"),require("../../../../api/app.js"),require("../../../../api/chat.js"),require("../../../../api/voice_chat.js"),!Array){(e.resolveComponent("u-line")+e.resolveComponent("u-input")+e.resolveComponent("u-button"))()}Math||((()=>"../../../../uni_modules/vk-uview-ui/components/u-line/u-line.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-input/u-input.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-button/u-button.js"))();const o=e.defineComponent({__name:"ai_copywriter",setup(o){var a;const l=i.useUserStore(),{userTokens:p}=e.toRefs(l);null==(a=l.getTokenByScene(n.TokensSceneEnum.CHAT))||a.score;const c=()=>{d.value=u.aiTemplateCopywriter[0%u.aiTemplateCopywriter.length]},d=e.ref(""),m=e.ref(150),h=e.ref([]),f=[{id:1,name:"短",length:150},{id:2,name:"中",length:300},{id:3,name:"长",length:1e3}],v=e.computed((()=>f)),g=e.ref(v.value[0]),x=e.ref(0),{proxy:j}=e.getCurrentInstance(),q=async()=>{await e.nextTick$1(),t.getRect(".content-box",!1,j).then((e=>{x.value=e.height}))};return e.onLoad((e=>{m.value=e.limit})),(t,i)=>({a:e.o(c),b:e.p({color:"#e5e5e5"}),c:e.o((t=>e.isRef(d)?d.value=t:null)),d:e.p({type:"textarea",focus:!0,height:"364",placeholder:"请输入或粘贴您的文案 ...","placeholder-style":"color: #00000033; font-size: 26rpx;",maxlength:500,modelValue:e.unref(d)}),e:e.p({color:"#e5e5e5"}),f:e.t(e.unref(d).length),g:e.t(500),h:e.f(e.unref(v),((t,r,i)=>{var n;return{a:e.t(t.name),b:t.id,c:e.n((null==(n=e.unref(g))?void 0:n.id)===t.id?"bg-primary-light-9 text-primary":"bg-_hF3F3F3_ text-_h323232_"),d:e.o((e=>g.value=t),t.id)}})),i:e.f(e.unref(h),((t,r,i)=>({a:e.t(t),b:e.o((r=>{return i=t,e.index.$emit("confirm",{type:s.ListenerTypeEnum.AI_COPYWRITER,data:{content:i}}),h.value=[],void e.index.navigateBack();var i}),t.id),c:"67d65c8f-3-"+i,d:t.id}))),j:e.p({type:"primary",size:"mini"}),k:e.unref(x),l:e.o((t=>(async t=>{if(t)if(p.value<=0)e.index.$u.toast("算力不足，请充值！");else try{e.index.showLoading({title:"生成中...",mask:!0});const{content:i}=await r.generatePrompt({keywords:t,number:g.value.length});h.value.push(i)}catch(i){e.index.showToast({title:i||"生成失败，请重试",icon:"none",duration:3e3})}finally{e.index.hideLoading(),setTimeout((()=>{q()}),500)}else e.index.$u.toast("请输入文案")})(e.unref(d)))),m:e.p({type:"primary",shape:"circle","custom-style":{height:"90rpx",boxShadow:"0px 6px 12px 0px rgba(0, 101, 251, 0.20)",fontSize:"26rpx"}})})}}),a=e._export_sfc(o,[["__scopeId","data-v-67d65c8f"]]);wx.createPage(a);

"use strict";const e=require("../../../../common/vendor.js"),t=require("../../../../utils/util.js"),i=require("../../../../api/digital_human.js"),r=require("../../../../stores/user.js"),n=require("../../config/copywriter.js"),u=require("../../enums/index.js");if(require("../../../../stores/navigationBarTitle.js"),require("../../../../router/index.js"),require("../../../../utils/cache.js"),require("../../../../enums/constantEnums.js"),require("../../../../utils/request/index.js"),require("../../../../utils/request/http.js"),require("../../../../enums/requestEnums.js"),require("../../../../utils/request/cancel.js"),require("../../../../utils/auth.js"),require("../../../../config/index.js"),require("../../../../api/user.js"),require("../../../../hooks/useShareMessage.js"),require("../../../../stores/app.js"),require("../../../../api/app.js"),require("../../../../api/chat.js"),require("../../../../api/voice_chat.js"),!Array){(e.resolveComponent("u-line")+e.resolveComponent("u-input")+e.resolveComponent("u-button"))()}Math||((()=>"../../../../uni_modules/vk-uview-ui/components/u-line/u-line.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-input/u-input.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-button/u-button.js"))();const s=e.defineComponent({__name:"ai_copywriter",setup(s){const o=r.useUserStore(),{userTokens:a}=e.toRefs(o),l=()=>{p.value=n.aiTemplateCopywriter[0%n.aiTemplateCopywriter.length]},p=e.ref(""),c=e.ref(150),d=e.ref([]),m=[{id:1,name:"短",length:150},{id:2,name:"中",length:300},{id:3,name:"长",length:1e3}],h=e.computed((()=>m)),f=e.ref(h.value[0]),x=e.ref(0),{proxy:g}=e.getCurrentInstance(),v=async()=>{await e.nextTick$1(),t.getRect(".content-box",!1,g).then((e=>{x.value=e.height}))};return e.onLoad((e=>{c.value=e.limit})),(t,r)=>({a:e.o(l),b:e.p({color:"#e5e5e5"}),c:e.o((t=>e.isRef(p)?p.value=t:null)),d:e.p({type:"textarea",focus:!0,height:"364",placeholder:"请输入或粘贴您的文案 ...","placeholder-style":"color: #00000033; font-size: 26rpx;",maxlength:500,modelValue:e.unref(p)}),e:e.p({color:"#e5e5e5"}),f:e.t(e.unref(p).length),g:e.t(500),h:e.f(e.unref(h),((t,i,r)=>{var n;return{a:e.t(t.name),b:t.id,c:e.n((null==(n=e.unref(f))?void 0:n.id)===t.id?"bg-primary-light-9 text-primary":"bg-_hF3F3F3_ text-_h323232_"),d:e.o((e=>f.value=t),t.id)}})),i:e.f(e.unref(d),((t,i,r)=>({a:e.t(t),b:e.o((i=>{return r=t,e.index.$emit("confirm",{type:u.ListenerTypeEnum.AI_COPYWRITER,data:{content:r}}),d.value=[],void e.index.navigateBack();var r}),t.id),c:"a7b6ca1f-3-"+r,d:t.id}))),j:e.p({type:"primary",size:"mini"}),k:e.unref(x),l:e.o((t=>(async t=>{if(t.trim())if(a.value<=0)e.index.$u.toast("算力不足，请充值！");else{e.index.showLoading({title:"生成中...",mask:!0});try{const{content:r}=await i.generatePrompt({keywords:t,number:f.value.length});d.value.push(r),e.index.hideLoading()}catch(r){e.index.hideLoading(),e.index.showToast({title:r||"生成失败，请重试",icon:"none",duration:3e3})}finally{setTimeout((()=>{v()}),500)}}else e.index.$u.toast("请输入文案")})(e.unref(p)))),m:e.p({type:"primary",shape:"circle","custom-style":{height:"90rpx",boxShadow:"0px 6px 12px 0px rgba(0, 101, 251, 0.20)",fontSize:"26rpx"}})})}}),o=e._export_sfc(s,[["__scopeId","data-v-a7b6ca1f"]]);wx.createPage(o);

"use strict";const e=require("../../../../common/vendor.js"),s=require("../../../../common/assets.js"),t=require("../../../../api/digital_human.js"),i=require("../../../../utils/file.js");if(require("../../../../utils/request/index.js"),require("../../../../utils/request/http.js"),require("../../../../enums/requestEnums.js"),require("../../../../utils/request/cancel.js"),require("../../../../utils/auth.js"),require("../../../../enums/constantEnums.js"),require("../../../../utils/cache.js"),require("../../../../stores/user.js"),require("../../../../api/user.js"),require("../../../../hooks/useShareMessage.js"),require("../../../../router/index.js"),require("../../../../utils/util.js"),require("../../../../stores/navigationBarTitle.js"),require("../../../../stores/app.js"),require("../../../../api/app.js"),require("../../../../api/chat.js"),require("../../../../api/voice_chat.js"),require("../../../../config/index.js"),!Array){(e.resolveComponent("u-navbar")+e.resolveComponent("u-search")+e.resolveComponent("empty")+e.resolveComponent("z-paging"))()}Math||((()=>"../../../../uni_modules/vk-uview-ui/components/u-navbar/u-navbar.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-search/u-search.js")+(()=>"../../../../components/empty/empty.js")+(()=>"../../../../node-modules/z-paging/components/z-paging/z-paging.js")+r)();const r=()=>"../../components/video-preview-v2/video-preview-v2.js",a=e.defineComponent({__name:"video_works",setup(r){const a=e.ref([]),o=e.ref(0),u=e.ref(""),n=e=>{var s;null==(s=l.value)||s.reload()},l=e.shallowRef(),c=async(e,s)=>{var i,r;try{const{lists:r,count:a}=await t.digitalHumanLists({page_no:e,page_size:s,name:u.value});o.value=a,r.forEach((e=>{e.is_delete=!1})),null==(i=l.value)||i.complete(r)}catch(a){null==(r=l.value)||r.complete([])}};e.ref("");const p=e.ref(!1),m=e.ref(1),d=e.reactive({url:"",pic:""}),v=(e,s)=>{const{result_url:t,clip_result_url:i,automatic_clip:r}=e;d.url=1==s?t:1==r?i:t,d.pic=e.pic,p.value=!0,s&&(m.value=s)};return(r,o)=>({a:e.p({"border-bottom":!1,"is-fixed":!1,background:{background:"transparent"},title:"我的创作库","title-bold":!0}),b:e.o(n),c:e.o(n),d:e.o((s=>e.isRef(u)?u.value=s:null)),e:e.p({"bg-color":"#FFFFFF",height:"72","search-icon-color":"#ABB1B3","placeholder-color":"#ABB1B3","show-action":!1,modelValue:e.unref(u)}),f:e.f(e.unref(a),((r,a,o)=>e.e({a:e.t(r.name),b:e.o((s=>(async s=>{e.index.showModal({title:"您真的要删除吗？",content:"删除后将无法找回，且该操作不可逆！",success:async i=>{var r;if(i.confirm){e.index.showLoading({title:"删除中...",mask:!0});try{return await t.deleteDigitalHuman({id:s}),null==(r=l.value)||r.reload(),e.index.hideLoading(),void e.index.showToast({title:"删除成功",icon:"none",duration:3e3})}catch(a){e.index.hideLoading(),e.index.showToast({title:a||"删除失败",icon:"none",duration:3e3})}}}})})(r.id)),a),c:r.pic,d:1==r.automatic_clip},(r.automatic_clip,{}),{e:1==r.status},1==r.status?e.e({f:s._imports_0$6,g:e.o((e=>v(r)),a),h:1==r.automatic_clip},1==r.automatic_clip?e.e({i:1==r.clip_status||2==r.clip_status},(1==r.clip_status||r.clip_status,{}),{j:3==r.clip_status},(r.clip_status,{}),{k:4==r.clip_status},(r.clip_status,{})):{}):e.e({l:2==r.status},2==r.status?{m:s._imports_1$2,n:e.t(r.remark||"生成失败")}:{}),{o:e.t(r.create_time),p:1==r.status},1==r.status?e.e({q:e.o((e=>v(r,1)),a),r:e.o((s=>e.unref(i.saveVideoToPhotosAlbum)(r.result_url)),a),s:1==r.automatic_clip},1==r.automatic_clip?{t:e.o((s=>e.unref(i.saveVideoToPhotosAlbum)(r.clip_result_url)),a)}:{}):{},{v:a}))),g:s._imports_0$5,h:e.sr(l,"feda90ac-2",{k:"pagingRef"}),i:e.o(c),j:e.o((s=>e.isRef(a)?a.value=s:null)),k:e.p({fixed:!1,"safe-area-inset-bottom":!0,modelValue:e.unref(a)}),l:e.o((e=>p.value=!1)),m:e.o((s=>e.isRef(p)?p.value=s:null)),n:e.p({"video-url":e.unref(d).url,poster:e.unref(d).pic,show:e.unref(p)})})}}),o=e._export_sfc(a,[["__scopeId","data-v-feda90ac"]]);wx.createPage(o);

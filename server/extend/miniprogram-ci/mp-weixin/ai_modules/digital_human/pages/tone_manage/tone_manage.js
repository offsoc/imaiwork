"use strict";const e=require("../../../../common/vendor.js"),n=require("../../../../common/assets.js"),r=require("../../../../api/digital_human.js"),t=require("../../../../stores/app.js");if(require("../../../../utils/request/index.js"),require("../../../../utils/request/http.js"),require("../../../../enums/requestEnums.js"),require("../../../../utils/request/cancel.js"),require("../../../../utils/auth.js"),require("../../../../enums/constantEnums.js"),require("../../../../utils/cache.js"),require("../../../../stores/user.js"),require("../../../../api/user.js"),require("../../../../hooks/useShareMessage.js"),require("../../../../router/index.js"),require("../../../../utils/util.js"),require("../../../../stores/navigationBarTitle.js"),require("../../../../config/index.js"),require("../../../../api/app.js"),require("../../../../api/chat.js"),require("../../../../api/voice_chat.js"),!Array){(e.resolveComponent("u-navbar")+e.resolveComponent("u-button")+e.resolveComponent("empty")+e.resolveComponent("z-paging"))()}Math||((()=>"../../../../uni_modules/vk-uview-ui/components/u-navbar/u-navbar.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-button/u-button.js")+(()=>"../../../../components/empty/empty.js")+(()=>"../../../../node-modules/z-paging/components/z-paging/z-paging.js"))();const i=e.defineComponent({__name:"tone_manage",setup(i){const u=t.useAppStore(),s=e.computed((()=>{var e;return(null==(e=u.getDigitalHumanConfig)?void 0:e.channel)||[]}));e.ref("");const a=e.ref("all"),o=e.ref([]),l=e.ref([-1]),d=e.reactive({name:""}),p=e.shallowRef(),c=async(e,n)=>{var t,i;try{const{lists:i}=await r.getVoiceList({page_no:e,page_size:n,name:d.name,builtin:1});null==(t=p.value)||t.complete(i)}catch(u){null==(i=p.value)||i.complete([])}},m=e.computed((()=>s.value.reduce(((e,n)=>(e[n.id]=n.name,e)),{}))),f=e.ref(!1),v=()=>{f.value=!f.value,l.value=[]},g=()=>{e.index.showModal({title:"提示",content:"确定要删除吗？",success:async n=>{var t;if(n.confirm){e.index.showLoading({title:"删除中...",mask:!0});try{await r.deleteVoice({id:l.value}),null==(t=p.value)||t.reload(),e.index.hideLoading(),e.index.showToast({title:"删除成功",icon:"none",duration:3e3})}catch(i){e.index.hideLoading(),e.index.showToast({title:i||"删除失败",icon:"none",duration:3e3})}}f.value=!1,l.value=[]}})};return e.onLoad((async n=>{var r;n.id&&(l.value=[parseInt(n.id)]),n.model_version&&(d.model_version=n.model_version),await e.nextTick$1(),null==(r=p.value)||r.reload()})),(r,t)=>e.e({a:e.p({"border-bottom":!1,"is-fixed":!1,background:{background:"transparent"},title:"我的音色","title-bold":!0}),b:e.t(e.unref(o).length),c:"all"===e.unref(a)&&e.unref(o).length>0},"all"===e.unref(a)&&e.unref(o).length>0?{d:e.t(e.unref(f)?"取消":"管理"),e:e.o(v),f:e.p({type:"primary","custom-style":{height:"42rpx",fontSize:"24rpx",padding:"0 12rpx"}})}:{},{g:e.f(e.unref(o),((r,t,i)=>e.e({a:e.unref(m)[r.model_version]},e.unref(m)[r.model_version]?{b:e.t(e.unref(m)[r.model_version]),c:e.n(`digital-human-tag-${r.model_version}`)}:{},{d:e.t(r.name)},"all"==e.unref(a)?e.e({e:1===r.status},1===r.status?{f:n._imports_0$10}:2===r.status?{h:n._imports_1$7}:[0,3,4,5].includes(r.status)?{j:n._imports_2$4}:{},{g:2===r.status,i:[0,3,4,5].includes(r.status)}):{},"all"!==e.unref(a)||e.unref(f)?{k:e.unref(l).includes(r.id)}:{},{l:t,m:t,n:e.o((e=>{return n=r.id,void(l.value.includes(n)?l.value=l.value.filter((e=>e!==n)):l.value.push(n));var n}),t)}))),h:"all"==e.unref(a),i:"all"!==e.unref(a)||e.unref(f),j:e.sr(p,"7f6c16de-2",{k:"pagingRef"}),k:e.o(c),l:e.o((n=>e.isRef(o)?o.value=n:null)),m:e.p({fixed:!1,auto:!1,"safe-area-inset-bottom":!0,modelValue:e.unref(o)}),n:e.unref(o).length&&"choose"===e.unref(a)},e.unref(o).length&&"choose"===e.unref(a)?{o:e.o((n=>{0!==l.value.length?(e.index.$emit("confirm",{data:o.value.find((e=>e.id===l.value[0])),type:"tone"}),e.index.navigateBack()):e.index.showToast({title:"请选择要使用的音色",icon:"none"})})),p:e.p({type:"primary","custom-style":{height:"96rpx",borderRadius:"16rpx"}})}:{},{q:e.unref(f)},e.unref(f)?{r:e.t(e.unref(l).length),s:e.o(g),t:e.p({type:"error",disabled:0===e.unref(l).length,"custom-style":{height:"64rpx",fontSize:"24rpx",padding:"0 24rpx",borderRadius:"16rpx"}})}:{})}});wx.createPage(i);

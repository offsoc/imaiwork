"use strict";const e=require("../../../../common/vendor.js"),t=require("../../../../common/assets.js"),i=require("../../../../stores/app.js"),s=require("../../../../utils/file.js");if(require("../../../../api/app.js"),require("../../../../utils/request/index.js"),require("../../../../utils/request/http.js"),require("../../../../enums/requestEnums.js"),require("../../../../utils/request/cancel.js"),require("../../../../utils/auth.js"),require("../../../../enums/constantEnums.js"),require("../../../../utils/cache.js"),require("../../../../stores/user.js"),require("../../../../api/user.js"),require("../../../../hooks/useShareMessage.js"),require("../../../../router/index.js"),require("../../../../utils/util.js"),require("../../../../stores/navigationBarTitle.js"),require("../../../../config/index.js"),require("../../../../api/chat.js"),require("../../../../api/voice_chat.js"),!Array){e.resolveComponent("u-icon")()}Math;const o=e.defineComponent({__name:"video-item",props:{item:{default:()=>({id:0,name:"",pic:"",status:0,video_url:"",clip_video_url:"",model_version:"",remark:"",automatic_clip:0,clip_status:""})},showVersion:{type:Boolean,default:!0},showPlay:{type:Boolean,default:!0},showMore:{type:Boolean,default:!1},showName:{type:Boolean,default:!0}},emits:["play","delete","retry","download","preview"],setup(o,{emit:u}){const r=o,a=i.useAppStore(),l=e.computed((()=>{var e;return(null==(e=a.getDigitalHumanConfig)?void 0:e.channel)||[]}));e.computed((()=>l.value.length>0?l.value.reduce(((e,t)=>(e[t.id]=t.name,e)),{}):{}));const m=e=>{u("play",e)},c=()=>{const{status:t,id:i,clip_status:o,automatic_clip:a}=r.item;let l=[];1==t?(l.push("下载视频","播放克隆视频"),1==a&&3==o&&l.push("下载剪辑视频","播放剪辑视频")):l.push("重试"),l.push("删除"),e.index.showActionSheet({itemList:l,success:c=>{const{tapIndex:n}=c;1==t?(0==n&&(s.saveVideoToPhotosAlbum(r.item.video_url),u("download",r.item.video_url)),1==n&&m(r.item.video_url),1==a&&3==o&&(2==n&&(s.saveVideoToPhotosAlbum(r.item.clip_video_url),u("download",r.item.clip_video_url)),3==n&&m(r.item.clip_video_url))):0==n&&e.index.showModal({title:"提示",content:"确定要重试吗？",success:e=>{e.confirm&&u("retry",i)}}),n===l.length-1&&e.index.showModal({title:"提示",content:"确定要删除吗？",success:e=>{e.confirm&&u("delete",i)}})}})};return(i,s)=>e.e({a:o.item.pic,b:1==o.item.automatic_clip},(o.item.automatic_clip,{}),{c:o.showMore},o.showMore?{d:e.p({name:"more-dot-fill",color:"#fff"}),e:e.o(c)}:{},{f:1==o.item.status},1==o.item.status?e.e({g:o.showPlay},o.showPlay?{h:e.o((e=>m(o.item.clip_video_url||o.item.video_url)))}:{},{i:1==o.item.automatic_clip},1==o.item.automatic_clip?e.e({j:1==o.item.clip_status||2==o.item.clip_status},(1==o.item.clip_status||o.item.clip_status,{}),{k:3==o.item.clip_status},(o.item.clip_status,{}),{l:4==o.item.clip_status},(o.item.clip_status,{})):{}):e.e({m:2==o.item.status},2==o.item.status?{n:t._imports_0$7,o:e.t(o.item.remark||"生成失败")}:{p:t._imports_1$20}),{q:o.showName},o.showName?{r:e.t(o.item.name)}:{})}});wx.createComponent(o);

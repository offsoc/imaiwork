"use strict";const e=require("../../../../common/vendor.js"),t=require("../../../../common/assets.js"),i=require("../../../../stores/app.js"),s=require("../../../../utils/file.js");if(require("../../../../api/app.js"),require("../../../../utils/request/index.js"),require("../../../../utils/request/http.js"),require("../../../../enums/requestEnums.js"),require("../../../../utils/request/cancel.js"),require("../../../../utils/auth.js"),require("../../../../enums/constantEnums.js"),require("../../../../utils/cache.js"),require("../../../../stores/user.js"),require("../../../../api/user.js"),require("../../../../hooks/useShareMessage.js"),require("../../../../router/index.js"),require("../../../../utils/util.js"),require("../../../../stores/navigationBarTitle.js"),require("../../../../config/index.js"),require("../../../../api/chat.js"),require("../../../../api/voice_chat.js"),!Array){e.resolveComponent("u-icon")()}Math;const o=e.defineComponent({__name:"video-item",props:{item:{default:()=>({id:0,name:"",pic:"",status:0,video_url:"",clip_video_url:"",model_version:"",remark:"",automatic_clip:0,clip_status:""})},showVersion:{type:Boolean,default:!0},showPlay:{type:Boolean,default:!0},showMore:{type:Boolean,default:!1}},emits:["play","delete","retry","download","preview"],setup(o,{emit:r}){const u=o,a=i.useAppStore(),l=e.computed((()=>{var e;return(null==(e=a.getDigitalHumanConfig)?void 0:e.channel)||[]})),m=e.computed((()=>l.value.length>0?l.value.reduce(((e,t)=>(e[t.id]=t.name,e)),{}):{})),n=e=>{r("play",e)},c=()=>{const{status:t,id:i,clip_status:o,automatic_clip:a}=u.item;let l=[];1==t?(l.push("下载视频","播放克隆视频"),1==a&&3==o&&l.push("下载剪辑视频","播放剪辑视频")):l.push("重试"),l.push("删除"),e.index.showActionSheet({itemList:l,success:m=>{const{tapIndex:c}=m;1==t?(0==c&&(s.saveVideoToPhotosAlbum(u.item.video_url),r("download",u.item.video_url)),1==c&&n(u.item.video_url),1==a&&3==o&&(2==c&&(s.saveVideoToPhotosAlbum(u.item.clip_video_url),r("download",u.item.clip_video_url)),3==c&&n(u.item.clip_video_url))):0==c&&e.index.showModal({title:"提示",content:"确定要重试吗？",success:e=>{e.confirm&&r("retry",i)}}),c===l.length-1&&e.index.showModal({title:"提示",content:"确定要删除吗？",success:e=>{e.confirm&&r("delete",i)}})}})};return(i,s)=>e.e({a:o.item.pic,b:1==o.item.automatic_clip},(o.item.automatic_clip,{}),{c:o.showVersion},o.showVersion?e.e({d:e.unref(m)[o.item.model_version]},e.unref(m)[o.item.model_version]?{e:e.t(e.unref(m)[o.item.model_version]),f:e.n(`digital-human-tag-${o.item.model_version}`)}:{}):{},{g:o.item.pic,h:o.showMore},o.showMore?{i:e.p({name:"more-dot-fill",color:"#fff"}),j:e.o(c)}:{},{k:1==o.item.status},1==o.item.status?e.e({l:o.showPlay},o.showPlay?{m:t._imports_0$6,n:e.o((e=>n(o.item.clip_video_url||o.item.video_url)))}:{},{o:1==o.item.automatic_clip},1==o.item.automatic_clip?e.e({p:1==o.item.clip_status||2==o.item.clip_status},(1==o.item.clip_status||o.item.clip_status,{}),{q:3==o.item.clip_status},(o.item.clip_status,{}),{r:4==o.item.clip_status},(o.item.clip_status,{})):{}):e.e({s:2==o.item.status},2==o.item.status?{t:t._imports_1$2,v:e.t(o.item.remark||"生成失败")}:{}),{w:e.t(o.item.name)})}});wx.createComponent(o);

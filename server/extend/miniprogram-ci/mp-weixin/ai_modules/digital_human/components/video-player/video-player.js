"use strict";const e=require("../../../../common/vendor.js"),r=require("../../../../common/assets.js"),u=require("../../../../utils/util.js");require("../../../../stores/navigationBarTitle.js"),require("../../../../router/index.js"),require("../../../../stores/user.js"),require("../../../../api/user.js"),require("../../../../utils/request/index.js"),require("../../../../utils/request/http.js"),require("../../../../enums/requestEnums.js"),require("../../../../utils/request/cancel.js"),require("../../../../utils/auth.js"),require("../../../../enums/constantEnums.js"),require("../../../../utils/cache.js"),require("../../../../config/index.js"),require("../../../../hooks/useShareMessage.js"),require("../../../../stores/app.js"),require("../../../../api/app.js"),require("../../../../api/chat.js"),require("../../../../api/voice_chat.js");const s=e.defineComponent({__name:"video-player",props:{poster:{default:""},videoUrl:{default:""},playIconSize:{default:108},borderRadius:{default:48},showClose:{type:Boolean,default:!1}},setup(s,{expose:t}){const{statusBarHeight:a}=e.index.$u.sys(),o=e.ref(),i=e.ref(0),n=e.ref(0),l=e.ref(0),c=e.ref(!1),p=e.ref(!1),d=e.ref(!1),f=e.ref(!1),v=async e=>{const{duration:r}=e.detail;i.value=r},q=e=>{const{currentTime:r,duration:u}=e.detail;n.value=r,l.value=r/u*100},m=e=>{const{fullScreen:r}=e.detail;f.value=r},{proxy:j}=e.getCurrentInstance(),x=async e=>{const r=e.detail.x,s=await u.getRect(".progress-box",!1,j),t=(r-s.left)/s.width*100/100*i.value;o.value.seek(t)},_=()=>{d.value=!0,c.value=!0},y=()=>{c.value=!1},h=()=>{p.value=!0},$=async()=>{if(d.value=!0,p.value)return o.value.seek(0),o.value.play(),void(p.value=!1);c.value?(o.value.pause(),c.value=!1):(await e.nextTick$1(),o.value.play(),c.value=!0)};return e.onMounted((async()=>{await(async()=>{await e.nextTick$1(),o.value=e.index.createVideoContext("video-player",j)})()})),t({toggleVideo:$}),(t,j)=>e.e({a:s.borderRadius+"rpx",b:s.videoUrl,c:e.unref(f),d:e.o(_),e:e.o(y),f:e.o(h),g:e.o(v),h:e.o(q),i:e.o(m),j:e.unref(d)?"":1,k:s.showClose},s.showClose?{l:r._imports_0$9,m:e.unref(a)+"px",n:e.o((e=>t.$emit("close")))}:{},{o:!e.unref(c)||e.unref(p)},!e.unref(c)||e.unref(p)?{p:r._imports_1$18,q:`${s.playIconSize}rpx`,r:`${s.playIconSize}rpx`,s:e.o((e=>$()))}:{},{t:e.t(e.unref(u.formatAudioTime)(e.unref(n))),v:e.t(e.unref(u.formatAudioTime)(e.unref(i))),w:!e.unref(c)||e.unref(p)},!e.unref(c)||e.unref(p)?{x:r._imports_2$2}:{y:r._imports_3$8},{z:e.o((e=>$())),A:`${e.unref(l)}%`,B:e.o(x),C:r._imports_4$4,D:e.o((e=>(console.log("clickFullScreen",o.value),void o.value.requestFullScreen()))),E:`url(${s.poster})`,F:s.borderRadius+"rpx"})}}),t=e._export_sfc(s,[["__scopeId","data-v-13230e22"]]);wx.createComponent(t);

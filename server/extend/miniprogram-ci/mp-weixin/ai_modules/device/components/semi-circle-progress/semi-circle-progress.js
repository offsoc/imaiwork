"use strict";const e=require("../../../../common/vendor.js"),t=e.defineComponent({__name:"semi-circle-progress",props:{progress:{type:Number,default:0},size:{type:Number,default:180},strokeWidth:{type:Number,default:12},color:{type:String,default:"#0065FB"},bgColor:{type:String,default:"rgba(0, 0, 0, 0.05)"},animationDuration:{type:Number,default:800},animation:{type:Boolean,default:!0}},setup(t){const s=t,a=e.getCurrentInstance(),n="progressCanvas"+(new Date).getTime(),r=e.ref(1),i=e.ref(s.size),o=e.ref(s.size/2),u=e.ref(""),{proxy:l}=e.getCurrentInstance(),c=e.ref(0);let p=null;const d=(t,r)=>{p&&(clearTimeout(p),p=null),u.value="";const i=s.animationDuration,o=Date.now(),d=()=>{const f=Date.now()-o,m=s.animation?Math.min(f/i,1):1;c.value=t+(r-t)*m;const h=1===m;((t=!1)=>{const r=e.index.createCanvasContext(n,a);r.setTransform(1,0,0,1,0,0);const i=s.size/2,o=s.size/2,p=(s.size-s.strokeWidth)/2;if(r.clearRect(0,0,s.size,s.size/2),r.beginPath(),r.arc(i,o,p,Math.PI,2*Math.PI),r.setStrokeStyle(s.bgColor),r.setLineWidth(s.strokeWidth),r.setLineCap("round"),r.stroke(),c.value>0){const e=Math.PI+c.value/100*Math.PI;r.beginPath(),r.arc(i,o,p,Math.PI,e),r.setStrokeStyle(s.color),r.setLineWidth(s.strokeWidth),r.setLineCap("round"),r.stroke()}r.draw(!1,(()=>{t&&e.index.canvasToTempFilePath({y:0,x:0,width:s.size,height:s.size/2,canvasId:n,success:e=>{e.tempFilePath&&(u.value=e.tempFilePath)}},l)}))})(h),h?(clearTimeout(p),p=null):p=setTimeout(d,16)};d()};return e.onMounted((()=>{e.index.getSystemInfo({success:e=>{r.value=e.pixelRatio,i.value=s.size*r.value,o.value=s.size/2*r.value,d(0,s.progress)}})})),e.watch((()=>s.progress),((e,t)=>{d(t||0,e)})),(s,a)=>e.e({a:!e.unref(u)},e.unref(u)?{h:e.unref(u),i:t.size+"px",j:t.size/2+"px"}:{b:n,c:n,d:t.size+"px",e:t.size/2+"px",f:e.unref(i),g:e.unref(o)},{k:t.size+"px",l:t.size/2+"px"})}}),s=e._export_sfc(t,[["__scopeId","data-v-3afc079c"]]);wx.createComponent(s);

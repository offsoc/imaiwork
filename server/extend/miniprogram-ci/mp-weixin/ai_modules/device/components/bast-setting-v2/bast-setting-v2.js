"use strict";const e=require("../../../../common/vendor.js");if(!Array){(e.resolveComponent("u-input")+e.resolveComponent("u-icon"))()}Math||((()=>"../../../../uni_modules/vk-uview-ui/components/u-input/u-input.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-icon/u-icon.js"))();const t=e.defineComponent({__name:"bast-setting-v2",props:{modelValue:null,showDevice:{type:Boolean,default:!0},showAccounts:{type:Boolean,default:!1},platformTypes:null,currentFrequency:{default:0},timeInterval:{default:30}},emits:["update:modelValue","changeFrequency"],setup(t,{emit:n}){const o=t,u=e.computed({get:()=>o.modelValue,set(e){n("update:modelValue",e)}}),r=e.computed({get:()=>o.currentFrequency,set(e){n("changeFrequency",e)}}),a=e.ref(!1),c=()=>{e.index.$u.route({url:"/ai_modules/device/pages/custom_date/custom_date",params:{date:JSON.stringify(u.value.custom_date)}})},i=t=>{const{value:n}=t.detail,o=new Date(`2000/01/01 ${n}`);u.value.time_config[0]=n,o.setMinutes(o.getMinutes()+30),u.value.time_config[1]=e.index.$u.timeFormat(o,"hh:MM")},s=t=>{const{value:n}=t.detail;if(n<=u.value.time_config[0])return void e.index.$u.toast("结束时间不能小于开始时间");const r=new Date(`2000/01/01 ${u.value.time_config[0]}`);new Date(`2000/01/01 ${n}`).getTime()-r.getTime()<60*o.timeInterval*1e3?e.index.$u.toast(`结束时间不能小于开始时间${o.timeInterval}分钟`):u.value.time_config[1]=n},l=()=>{u.value.time_config[0]||e.index.$u.toast("请先选择开始时间")};return e.watch((()=>o.currentFrequency),(e=>{r.value=e})),(n,o)=>e.e({a:e.o((t=>e.unref(u).name=t)),b:e.p({"placeholder-style":"font-size: 24rpx;",placeholder:"请输入任务名称",maxlength:"30",modelValue:e.unref(u).name}),c:t.showDevice},(t.showDevice,{}),{d:t.showAccounts},(t.showAccounts,{}),{e:t.showDevice},t.showDevice?{f:e.t(e.unref(u).device_codes.length?`${e.unref(u).device_codes.length}个设备`:"选择设备"),g:e.n(e.unref(u).device_codes.length?"text-primary font-bold":"text-_h00000033_"),h:e.p({name:"arrow-right",size:"24",color:"#00000033"}),i:`/ai_modules/device/pages/device_choose/device_choose?device=${JSON.stringify(e.unref(u).device_codes)}`}:{},{j:t.showAccounts},t.showAccounts?{k:e.t(e.unref(u).accounts.length?`${e.unref(u).accounts.length}个账号`:"选择账号"),l:e.n(e.unref(u).accounts.length?"text-primary font-bold":"text-_h00000033_"),m:e.p({name:"arrow-right",size:"24",color:"#00000033"}),n:`/ai_modules/device/pages/account_choose/account_choose?accounts=${JSON.stringify(e.unref(u).accounts)}&platformTypes=${JSON.stringify(t.platformTypes)}`}:{},{o:e.f([1,3,5,10,30],((t,n,o)=>({a:e.t(t),b:n,c:e.unref(u).task_frep==t&&5!=e.unref(r)?1:"",d:e.o((e=>((e,t)=>{r.value=t,u.value.task_frep=e,u.value.custom_date=[],a.value=!1})(t,n)),n)}))),p:5==e.unref(r)?1:"",q:e.o(c),r:e.unref(u).custom_date.length&&5==e.unref(r)},e.unref(u).custom_date.length&&5==e.unref(r)?e.e({s:e.unref(u).custom_date.length>8},e.unref(u).custom_date.length>8?{t:e.t(e.unref(a)?"收起":"展开"),v:e.p({name:e.unref(a)?"arrow-up":"arrow-down",size:"24",color:"#00000033"}),w:e.o((t=>a.value=!e.unref(a)))}:{},{x:e.f(e.unref(u).custom_date,((t,n,o)=>{return{a:e.t((u=t,e.index.$u.timeFormat(new Date(u),"mm月dd日"))),b:n};var u})),y:e.unref(a)?"":1}):{},{z:e.t(e.unref(u).time_config[0]||"开始时间"),A:e.n(e.unref(u).time_config[0]?"text-primary font-bold":"text-_h00000033_"),B:e.p({name:"arrow-right",size:"24",color:"#00000033"}),C:e.unref(u).time_config[0],D:e.o(i),E:e.t(e.unref(u).time_config[1]||"结束时间"),F:e.n(e.unref(u).time_config[1]?"text-primary font-bold":"text-_h00000033_"),G:e.p({name:"arrow-right",size:"24",color:"#00000033"}),H:e.unref(u).time_config[1],I:!e.unref(u).time_config[0],J:e.o(l),K:e.o(s)})}}),n=e._export_sfc(t,[["__scopeId","data-v-6df8ba2e"]]);wx.createComponent(n);

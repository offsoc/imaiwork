"use strict";const e=require("../../../../common/vendor.js"),u=require("../../../../api/device.js"),a=require("../../../../enums/appEnums.js"),r=require("../../enums/index.js"),n=require("../../hooks/useDevice.js");if(require("../../../../utils/request/index.js"),require("../../../../utils/request/http.js"),require("../../../../enums/requestEnums.js"),require("../../../../utils/request/cancel.js"),require("../../../../utils/auth.js"),require("../../../../enums/constantEnums.js"),require("../../../../utils/cache.js"),require("../../../../stores/user.js"),require("../../../../api/user.js"),require("../../../../hooks/useShareMessage.js"),require("../../../../router/index.js"),require("../../../../utils/util.js"),require("../../../../stores/navigationBarTitle.js"),require("../../../../stores/app.js"),require("../../../../api/app.js"),require("../../../../api/chat.js"),require("../../../../api/voice_chat.js"),require("../../../../config/index.js"),require("../../../../common/assets.js"),!Array){(e.resolveComponent("u-icon")+e.resolveComponent("empty")+e.resolveComponent("z-paging")+e.resolveComponent("u-button"))()}Math||((()=>"../../../../uni_modules/vk-uview-ui/components/u-icon/u-icon.js")+(()=>"../../../../components/empty/empty.js")+(()=>"../../../../node-modules/z-paging/components/z-paging/z-paging.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-button/u-button.js"))();const i=e.defineComponent({__name:"account_choose",setup(i){const s=e.ref([]),{platformLogo:o}=n.useDevice(),t=e.ref([{value:0,label:"全部"},{value:a.AppTypeEnum.SPH,label:"微信",icon:o[a.AppTypeEnum.SPH].activeIcon},{value:a.AppTypeEnum.XHS,label:"小红书",icon:o[a.AppTypeEnum.XHS].activeIcon},{value:a.AppTypeEnum.DOUYIN,label:"抖音",icon:o[a.AppTypeEnum.DOUYIN].activeIcon},{value:5,label:"快手",icon:o[a.AppTypeEnum.KUAISHOU].activeIcon}]),l=e.ref(),p=e.ref([]),c=e.shallowRef(),v=e.ref([]),m=async(e,a)=>{var r,n;try{const{lists:n}=await u.getPublishAccountList({page_no:e,page_size:a,type:0===l.value?"":l.value});null==(r=c.value)||r.complete(n)}catch(i){null==(n=c.value)||n.complete([])}},d=e=>v.value.some((u=>u.id===e.id)),f=()=>{0!==v.value.length&&(e.index.$emit("confirm",{type:r.ListenerTypeEnum.CHOOSE_ACCOUNT,data:v.value}),e.index.navigateBack())};return e.onLoad((e=>{e.account&&(v.value=JSON.parse(e.account)),e.platformTypes&&(s.value=JSON.parse(e.platformTypes))})),e.onMounted((()=>{var e,u;l.value=(null==(e=(0===s.value.length||(t.value=t.value.filter((e=>s.value.includes(e.value)))),t.value)[0])?void 0:e.value)||0,null==(u=c.value)||u.reload()})),(u,a)=>({a:e.f(e.unref(t),((u,a,r)=>({a:e.t(u.label),b:u.value,c:u.value===e.unref(l)?1:"",d:e.o((e=>(e=>{var u;l.value=e.value,null==(u=c.value)||u.reload()})(u)),u.value)}))),b:e.f(e.unref(p),((u,a,r)=>{return e.e({a:u.avatar,b:(n=u.type,null==(i=t.value.find((e=>e.value===parseInt(n))))?void 0:i.icon),c:e.t(u.nickname),d:e.t(u.device_name),e:d(u)},d(u)?{f:"32826804-1-"+r+",32826804-0",g:e.p({name:"checkmark",color:"#ffffff",size:"20"})}:{},{h:e.n(d(u)?"bg-primary flex items-center justify-center":"border border-solid border-_h00000033_"),i:a,j:d(u)?1:"",k:e.o((e=>(e=>{d(e)?v.value=v.value.filter((u=>u.id!==e.id)):v.value.push(e)})(u)),a)});var n,i})),c:e.sr(c,"32826804-0",{k:"pagingRef"}),d:e.o(m),e:e.o((u=>e.isRef(p)?p.value=u:null)),f:e.p({fixed:!1,auto:!1,"safe-area-inset-bottom":!0,modelValue:e.unref(p)}),g:e.o(f),h:e.p({type:"primary","custom-style":{height:"100rpx",borderRadius:"20rpx",fontWeight:"bold"}})})}});wx.createPage(i);

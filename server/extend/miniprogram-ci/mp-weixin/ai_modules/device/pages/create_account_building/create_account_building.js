"use strict";const e=require("../../../../common/vendor.js"),t=require("../../../../api/device.js"),n=require("../../../../enums/appEnums.js"),i=require("../../enums/index.js");if(require("../../../../utils/request/index.js"),require("../../../../utils/request/http.js"),require("../../../../enums/requestEnums.js"),require("../../../../utils/request/cancel.js"),require("../../../../utils/auth.js"),require("../../../../enums/constantEnums.js"),require("../../../../utils/cache.js"),require("../../../../stores/user.js"),require("../../../../api/user.js"),require("../../../../hooks/useShareMessage.js"),require("../../../../router/index.js"),require("../../../../utils/util.js"),require("../../../../stores/navigationBarTitle.js"),require("../../../../stores/app.js"),require("../../../../api/app.js"),require("../../../../api/chat.js"),require("../../../../api/voice_chat.js"),require("../../../../config/index.js"),!Array){(e.resolveComponent("u-button")+e.resolveComponent("confirm-dialog"))()}Math||(s+(()=>"../../../../uni_modules/vk-uview-ui/components/u-button/u-button.js")+(()=>"../../../../components/confirm-dialog/confirm-dialog.js"))();const s=()=>"../../components/bast-setting-v2/bast-setting-v2.js",u=e.defineComponent({__name:"create_account_building",setup(s){const u=e.reactive({name:`自动养号任务${e.index.$u.timeFormat(new Date,"yyyymmddhhMM")}`,accounts:[],task_frep:1,time_config:["09:00","09:30"],custom_date:[]}),r=e.ref(0),o=e.ref(""),a=e.ref(!1),c=()=>{e.index.$u.route({url:"/pages/phone/phone",type:"reLaunch"}),a.value=!1},m=async()=>{if(u.name)if(u.accounts.length)if(5!==r.value||u.custom_date.length)if(u.time_config[0]&&u.time_config[1]){e.index.showLoading({title:"创建中...",mask:!0});try{await t.addGrowthAccountTask({task_name:u.name,accounts:u.accounts,task_frep:u.task_frep,time_config:[`${u.time_config[0]}-${u.time_config[1]}`],custom_date:u.custom_date}),e.index.hideLoading(),a.value=!0}catch(n){o.value=n,e.index.hideLoading(),e.index.showToast({title:n||"创建失败",icon:"none",duration:3e3})}}else e.index.$u.toast("请选择任务时间");else e.index.$u.toast("请选择任务日期");else e.index.$u.toast("请选择发布账号");else e.index.$u.toast("请输入任务名称")};return e.onLoad((()=>{e.index.$on("confirm",(e=>{const{type:t,data:n}=e;if(t===i.ListenerTypeEnum.CHOOSE_ACCOUNT){if(0===n.length)return;u.accounts=n.map((e=>({id:e.id,account:e.account,type:e.type})))}if(t===i.ListenerTypeEnum.CHOOSE_DATE){if(0===n.length)return;u.custom_date=n,r.value=5}}))})),e.onUnload((()=>{e.index.$off("confirm")})),(t,i)=>e.e({a:e.o((e=>r.value=e)),b:e.o((t=>e.isRef(u)?u.value=t:null)),c:e.p({"show-device":!1,"show-accounts":!0,"current-frequency":e.unref(r),"platform-types":[e.unref(n.AppTypeEnum).XHS],modelValue:e.unref(u)}),d:e.unref(o)},e.unref(o)?{e:e.t(e.unref(o))}:{},{f:e.o(m),g:e.p({type:"primary","custom-style":{height:"100rpx",borderRadius:"20rpx",fontWeight:"bold"}}),h:e.o(c),i:e.o(c),j:e.o((t=>e.isRef(a)?a.value=t:null)),k:e.p({center:!0,"confirm-text":"确定",content:"创建成功，回到首页？","show-close":!1,modelValue:e.unref(a)})})}});wx.createPage(u);

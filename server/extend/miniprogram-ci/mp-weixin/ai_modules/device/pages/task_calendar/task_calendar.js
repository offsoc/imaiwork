"use strict";const e=require("../../../../common/vendor.js"),r=require("../../../../api/device.js"),t=require("../../../../utils/util.js");if(require("../../../../utils/request/index.js"),require("../../../../utils/request/http.js"),require("../../../../enums/requestEnums.js"),require("../../../../utils/request/cancel.js"),require("../../../../utils/auth.js"),require("../../../../enums/constantEnums.js"),require("../../../../utils/cache.js"),require("../../../../stores/user.js"),require("../../../../api/user.js"),require("../../../../hooks/useShareMessage.js"),require("../../../../router/index.js"),require("../../../../stores/navigationBarTitle.js"),require("../../../../stores/app.js"),require("../../../../api/app.js"),require("../../../../api/chat.js"),require("../../../../api/voice_chat.js"),require("../../../../config/index.js"),!Array){(e.resolveComponent("u-navbar")+e.resolveComponent("u-icon")+e.resolveComponent("empty")+e.resolveComponent("z-paging"))()}Math||((()=>"../../../../uni_modules/vk-uview-ui/components/u-navbar/u-navbar.js")+n+(()=>"../../../../uni_modules/vk-uview-ui/components/u-icon/u-icon.js")+a+i+(()=>"../../../../components/empty/empty.js")+(()=>"../../../../node-modules/z-paging/components/z-paging/z-paging.js"))();const n=()=>"../../components/calendar-simple/calendar-simple.js",a=()=>"../../components/semi-circle-progress/semi-circle-progress.js",i=()=>"../../components/task-list/task-list.js",u=e.defineComponent({__name:"task_calendar",setup(n){const a=e.reactive({all:0,all_completed:0,completed:0,failure:0,interrupt:0,execution:0,waiting:0}),i=e.ref(e.index.$u.timeFormat(new Date,"yyyy-mm-dd")),u=e.ref(null),s=e.ref([]),o=e.computed((()=>0===a.all?0:Math.round((a.completed+a.failure)/a.all*100))),l=async()=>{const e=await r.getDeviceTaskCalendarStatistics({day:i.value});a.all=e.all,a.all_completed=e.all_completed,a.completed=e.completed,a.failure=e.failure,a.interrupt=e.interrupt,a.execution=e.execution,a.waiting=e.waiting},c=async(e,t)=>{var n;try{const{lists:n}=await r.getDeviceTaskCalendarList({page_no:e,page_size:t,day:i.value});u.value.complete(n)}catch(a){null==(n=u.value)||n.complete([])}},p=()=>{var e;null==(e=u.value)||e.reload()},m=e=>{var r;l(),null==(r=u.value)||r.reload()},d=e=>{s.value.forEach((r=>{r.id==e.id&&(r.name=e.name)}))};return e.onShow((()=>{l()})),(r,n)=>({a:e.p({title:"任务日历","title-bold":!0,"border-bottom":!1,background:{background:"transparent"}}),b:e.o(m),c:e.o((r=>e.isRef(i)?i.value=r:null)),d:e.p({modelValue:e.unref(i)}),e:e.t(e.unref(a).completed+e.unref(a).failure),f:e.t(e.unref(a).all),g:e.p({name:"plus",size:"24"}),h:e.t(e.unref(o)),i:e.p({progress:e.unref(o),size:120,strokeWidth:8}),j:e.t(e.unref(t.formatNumberToWanOrYi)(e.unref(a).all)),k:e.t(e.unref(t.formatNumberToWanOrYi)(e.unref(a).completed)),l:e.t(e.unref(t.formatNumberToWanOrYi)(e.unref(a).waiting)),m:e.t(e.unref(t.formatNumberToWanOrYi)(e.unref(a).failure)),n:e.t(e.unref(s).length),o:e.o(p),p:e.o(d),q:e.p({list:e.unref(s)}),r:e.sr(u,"41b9c590-4",{k:"pagingRef"}),s:e.o(c),t:e.o((r=>e.isRef(s)?s.value=r:null)),v:e.p({fixed:!1,modelValue:e.unref(s)})})}});wx.createPage(u);

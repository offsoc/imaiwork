"use strict";const e=require("../../../../common/vendor.js"),r=require("../../../../utils/util.js"),a=require("../../../../api/person_wechat.js"),t=require("../../../../hooks/useDictOptions.js"),o=require("../../../../stores/app.js"),u=require("../../../../stores/user.js"),n=require("../../../../enums/appEnums.js");if(require("../../../../stores/navigationBarTitle.js"),require("../../../../router/index.js"),require("../../../../utils/cache.js"),require("../../../../enums/constantEnums.js"),require("../../../../utils/request/index.js"),require("../../../../utils/request/http.js"),require("../../../../enums/requestEnums.js"),require("../../../../utils/request/cancel.js"),require("../../../../utils/auth.js"),require("../../../../config/index.js"),require("../../../../api/app.js"),require("../../../../api/chat.js"),require("../../../../api/voice_chat.js"),require("../../../../api/user.js"),require("../../../../hooks/useShareMessage.js"),!Array){(e.resolveComponent("u-navbar")+e.resolveComponent("u-icon")+e.resolveComponent("u-radio")+e.resolveComponent("u-radio-group")+e.resolveComponent("u-switch")+e.resolveComponent("u-input")+e.resolveComponent("u-button")+e.resolveComponent("data-select")+e.resolveComponent("u-line")+e.resolveComponent("u-popup"))()}Math||((()=>"../../../../uni_modules/vk-uview-ui/components/u-navbar/u-navbar.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-icon/u-icon.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-radio/u-radio.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-radio-group/u-radio-group.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-switch/u-switch.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-input/u-input.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-button/u-button.js")+(()=>"../../../../components/data-select/data-select.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-line/u-line.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-popup/u-popup.js"))();const s=e.defineComponent({__name:"create_task_set",setup(s){const i=o.useAppStore(),p=u.useUserStore(),l=e.computed((()=>{var e;return null==(e=p.getTokenByScene(n.TokensSceneEnum.SPH_OCR))?void 0:e.score})),d=e.computed((()=>{var e;return null==(e=p.getTokenByScene(n.TokensSceneEnum.SPH_LOCAL_OCR))?void 0:e.score})),m=e.computed((()=>i.config.wechat_remarks||[])),c=e.reactive({chat_type:"0",chat_number:30,chat_interval_time:10,greeting_content:"",add_type:"1",remark:"",add_number:15,add_interval_time:10,private_message_prompt:"",add_friends_prompt:"",wechat_id:"",wechat_reg_type:0,ocr_type:1,add_remark_enable:1,remarks:m.value||[]}),v=e.ref(!1),_=e.ref(!1),f=e.ref(-1),h=e.ref(""),x=e.ref("private_message_prompt"),{optionsData:g}=t.useDictOptions({wechatLists:{api:a.getWeChatLists,params:{page_size:1e3},transformData:e=>{var r;return null==(r=e.lists)?void 0:r.map((e=>({text:e.wechat_nickname,value:e.wechat_id})))}}}),b=()=>{h.value?(-1==f.value?c.remarks.push(h.value):c.remarks[f.value]=h.value,f.value=-1,h.value="",_.value=!1):e.index.$u.toast("请输入加好友备注内容")},y=()=>{"1"!=c.add_type||0!=c.wechat_id.length?(e.index.$emit("save",c),e.index.navigateBack()):e.index.$u.toast("请选择加微微信")};return e.onLoad((({data:e})=>{e&&(e=JSON.parse(decodeURIComponent(e)),r.setFormData(e,c))})),e.onShow((()=>{e.index.$on("save",(r=>{const{type:a,prompt:t}=r;"private_message_prompt"==a?c.private_message_prompt=t:c.add_friends_prompt=t,e.index.$off("save")}))})),(r,a)=>e.e({a:e.p({title:"高级设置",background:{backgroundColor:"#f6f6f6"}}),b:e.p({name:"info",size:16,color:"#ffffff"}),c:e.o((e=>v.value=!0)),d:e.p({name:1,"label-size":"24",size:"28"}),e:e.p({name:2,"label-size":"24",size:"28"}),f:e.o((r=>e.unref(c).ocr_type=r)),g:e.p({modelValue:e.unref(c).ocr_type})},{},{s:e.o((r=>e.unref(c).add_type="1"==r?"0":"1")),t:e.p({"model-value":"1"==e.unref(c).add_type,size:32,"active-value":"1","inactive-value":"0"}),v:"1"==e.unref(c).add_type},"1"==e.unref(c).add_type?e.e({w:e.o((r=>e.unref(c).wechat_id=r)),x:e.p({multiple:!0,localdata:e.unref(g).wechatLists,modelValue:e.unref(c).wechat_id}),y:e.o((r=>e.unref(c).wechat_reg_type=r)),z:e.p({localdata:[{text:"全部",value:0},{text:"微信号",value:1},{text:"手机号",value:2}],modelValue:e.unref(c).wechat_reg_type}),A:e.o((r=>e.unref(c).add_number=r)),B:e.p({type:"digit",placeholder:"请输入","placeholder-style":"font-size:26rpx;color:rgba(0,0,0,0.2)",modelValue:e.unref(c).add_number}),C:e.o((r=>e.unref(c).add_interval_time=r)),D:e.p({type:"digit",placeholder:"请输入","placeholder-style":"font-size:26rpx;color:rgba(0,0,0,0.2)",modelValue:e.unref(c).add_interval_time}),E:e.o((r=>e.unref(c).add_remark_enable=1==r?0:1)),F:e.p({"model-value":e.unref(c).add_remark_enable,size:32,"active-value":"1","inactive-value":"0"}),G:0==e.unref(c).add_remark_enable},0==e.unref(c).add_remark_enable?{H:e.o((r=>e.unref(c).remark=r)),I:e.p({type:"textarea",height:"160",placeholder:"请输入打招呼内容，为了避免封控，系统将自动调用AI进行去重润色","placeholder-style":"font-size:26rpx;color:rgba(0,0,0,0.2)",modelValue:e.unref(c).remark}),J:e.o((r=>{return a="add_friends_prompt",x.value=a,void e.index.$u.route({url:"/ai_modules/sph/pages/task_prompt/task_prompt",params:{type:a,prompt:JSON.stringify(c[a])}});var a})),K:e.p({type:"primary","custom-style":{width:"240rpx",height:"80rpx",boxShadow:"0 6px 12px 0 rgba(0, 101, 251, 0.20)",fontSize:"26rpx",borderRadius:"24rpx"}})}:{},{L:1==e.unref(c).add_remark_enable},1==e.unref(c).add_remark_enable?{M:e.f(e.unref(c).remarks,((r,a,t)=>({a:e.t(r),b:"7c7e6396-18-"+t,c:e.o((e=>(e=>{c.remarks.splice(e,1)})(a)),a),d:a,e:e.o((e=>(e=>{f.value=e,h.value=c.remarks[e],_.value=!0})(a)),a)}))),N:e.p({name:"close",size:16,color:"#00000080"}),O:e.o((e=>_.value=!0)),P:e.p({type:"primary","custom-style":{boxShadow:"0 6px 12px 0 rgba(0, 101, 251, 0.20)",fontSize:"26rpx",borderRadius:"24rpx"}})}:{}):{},{Q:e.o(y),R:e.p({type:"primary",shape:"circle","custom-style":{width:"100%",height:"100rpx",boxShadow:"0 6px 12px 0 rgba(0, 101, 251, 0.20)",fontSize:"26rpx"}}),S:e.t(e.unref(d)),T:e.t(e.unref(l)),U:e.t(e.unref(l)),V:e.o((e=>v.value=!1)),W:e.o((r=>e.isRef(v)?v.value=r:null)),X:e.p({mode:"bottom","border-radius":"24",modelValue:e.unref(v)}),Y:e.o((r=>e.isRef(h)?h.value=r:null)),Z:e.p({type:"textarea",height:"160",maxlength:"100",placeholder:"请输入打招呼内容","placeholder-style":"font-size:26rpx;color:rgba(0,0,0,0.2)",modelValue:e.unref(h)}),aa:e.o(b),ab:e.p({type:"primary","custom-style":{height:"100rpx",boxShadow:"0 6px 12px 0 rgba(0, 101, 251, 0.20)",fontSize:"26rpx",borderRadius:"24rpx"}}),ac:e.o((r=>e.isRef(_)?_.value=r:null)),ad:e.p({mode:"center","border-radius":"24",width:"90%",closeable:!0,modelValue:e.unref(_)})})}});wx.createPage(s);

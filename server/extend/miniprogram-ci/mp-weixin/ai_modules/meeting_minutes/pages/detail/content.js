"use strict";const e=require("../../../../common/vendor.js"),t=require("../../../../common/assets.js"),r=require("../../../../stores/app.js"),s=require("../../../../utils/util.js");if(require("../../../../api/app.js"),require("../../../../utils/request/index.js"),require("../../../../utils/request/http.js"),require("../../../../enums/requestEnums.js"),require("../../../../utils/request/cancel.js"),require("../../../../utils/auth.js"),require("../../../../enums/constantEnums.js"),require("../../../../utils/cache.js"),require("../../../../stores/user.js"),require("../../../../api/user.js"),require("../../../../hooks/useShareMessage.js"),require("../../../../router/index.js"),require("../../../../stores/navigationBarTitle.js"),require("../../../../config/index.js"),require("../../../../api/chat.js"),require("../../../../api/voice_chat.js"),!Array){e.resolveComponent("u-line")()}Math||((()=>"../../../../uni_modules/vk-uview-ui/components/u-line/u-line.js")+n)();const n=()=>"../../components/empty/empty.js",u=e.defineComponent({__name:"content",props:{detail:null,show:{type:Boolean}},emits:["update-time"],setup(n,{expose:u,emit:o}){const a=n,i=r.useAppStore(),l=e.computed((()=>i.getMeetingConfig.avatars)),c=e.ref(0),d=e=>{q.value||(h.value=!0)},p=e.computed((()=>{var e,t,r;const{response:s}=a.detail,n=null==(r=null==(t=null==(e=null==s?void 0:s.Result)?void 0:e.Transcription)?void 0:t.Transcription)?void 0:r.Paragraphs;return n&&n.length>0?n:[]})),f=e=>{var t,r,s;const{response:n}=a.detail,u=null==(s=null==(r=null==(t=null==n?void 0:n.Result)?void 0:t.Translation)?void 0:r.Translation)?void 0:s.Paragraphs;return u&&u.length>0?u[e]:[]};e.ref([]),e.ref([]);const v=e.ref([]);e.ref(null);const m=e.ref(-1),h=e.ref(!1),q=e.ref(!1),g=e=>{if(e&&0==e.length)return"00:00";const t=e[0].Start;return s.formatAudioTime(t/1e3)},{proxy:j}=e.getCurrentInstance(),T=()=>{c.value=0,setTimeout((()=>{x()}),30),setTimeout((()=>{h.value=!1}),100)},x=()=>{q.value=!0;const{top:e,height:t}=v.value[m.value];c.value=e-240,setTimeout((()=>{q.value=!1}),100)};return e.watch((()=>a.show),(t=>{t&&(async()=>{await e.nextTick$1();const t=await s.getRect(".content-item",!0,j)||[];v.value=t})()})),u({contentScroll:async(e=0)=>{const t=p.value;if(e=parseInt(e),m.value=t.findIndex((t=>e>=t.Words[0].Start&&e<=t.Words[t.Words.length-1].End)),p.value.forEach((e=>{e.style="",e.Words.forEach((e=>{e.class=""}))})),-1!==m.value){const t=p.value[m.value];t.style={backgroundColor:"#0065FB",color:"#ffffff99"},t.Words.forEach(((r,s)=>{e>=r.Start&&e<=t.Words[t.Words.length-1].End?r.class="itext-white":r.class=""})),v.value&&v.value.length>0&&!h.value&&x()}}}),(r,s)=>e.e({a:e.unref(p).length>0},e.unref(p).length>0?{b:e.f(e.unref(p),((t,r,s)=>e.e({a:e.unref(l)[t.SpeakerId-1],b:e.t(t.SpeakerId),c:e.t(g(t.Words)),d:e.f(t.Words,((t,r,s)=>({a:e.t(t.Text),b:e.n(t.class)})))},n.detail.translation?{e:"4382d966-0-"+s,f:e.f(f(r).Sentences,((t,r,s)=>({a:e.t(t.Text)})))}:{},{g:e.s(t.style),h:e.o((e=>(e=>{const t=e[0].Start;o("update-time",t/1e3)})(t.Words)),r),i:r}))),c:n.detail.translation}:{d:e.p({title:"这里空空如也~"})},{e:e.unref(h)&&e.unref(m)>-1},e.unref(h)&&e.unref(m)>-1?{f:t._imports_0$33,g:e.o(T)}:{},{h:e.unref(c),i:e.o(d)})}});wx.createComponent(u);

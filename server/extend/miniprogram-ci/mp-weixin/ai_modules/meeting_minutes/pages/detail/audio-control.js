"use strict";const e=require("../../../../common/vendor.js"),r=require("../../../../common/assets.js"),s=require("../../../../hooks/useAudio.js"),u=require("../../../../utils/util.js");require("../../../../stores/navigationBarTitle.js"),require("../../../../router/index.js"),require("../../../../stores/user.js"),require("../../../../api/user.js"),require("../../../../utils/request/index.js"),require("../../../../utils/request/http.js"),require("../../../../enums/requestEnums.js"),require("../../../../utils/request/cancel.js"),require("../../../../utils/auth.js"),require("../../../../enums/constantEnums.js"),require("../../../../utils/cache.js"),require("../../../../config/index.js"),require("../../../../hooks/useShareMessage.js"),require("../../../../stores/app.js"),require("../../../../api/app.js"),require("../../../../api/chat.js"),require("../../../../api/voice_chat.js");const t=e.defineComponent({__name:"audio-control",props:{url:null},emits:["update-time"],setup(t,{expose:i,emit:a}){const n=t,{setUrl:o,play:m,pause:c,seek:l,duration:p,currentTime:q,isPlaying:j}=s.useAudio({onTimeUpdate(e){a("update-time",e)}}),d=()=>{j.value?c():m()},f=e.computed((()=>q.value&&p.value?Math.floor(100*Math.max(0,Math.min(100,q.value/p.value))):0)),{proxy:h}=e.getCurrentInstance(),v=async e=>{const r=e.detail.x,s=await u.getRect(".parent",!1,h);const t=(r-s.left)/s.width*100/100*p.value;l(t)};return e.watch((()=>n.url),(e=>{e&&o(e)}),{immediate:!0}),i({seek:l,pause:c}),(s,t)=>e.e({a:!e.unref(j)},e.unref(j)?{c:r._imports_1$10}:{b:r._imports_0$31},{d:e.o(d),e:e.t(e.unref(u.formatAudioTime)(e.unref(q))),f:`${e.unref(f)}%`,g:e.o(v),h:e.t(e.unref(u.formatAudioTime)(e.unref(p)))})}});wx.createComponent(t);

"use strict";const e=require("../../../../common/vendor.js"),r=require("../../../../api/ladder_player.js"),i=require("../../../../stores/app.js");if(require("../../../../utils/request/index.js"),require("../../../../utils/request/http.js"),require("../../../../enums/requestEnums.js"),require("../../../../utils/request/cancel.js"),require("../../../../utils/auth.js"),require("../../../../enums/constantEnums.js"),require("../../../../utils/cache.js"),require("../../../../stores/user.js"),require("../../../../api/user.js"),require("../../../../hooks/useShareMessage.js"),require("../../../../router/index.js"),require("../../../../utils/util.js"),require("../../../../stores/navigationBarTitle.js"),require("../../../../config/index.js"),require("../../../../api/app.js"),require("../../../../api/chat.js"),require("../../../../api/voice_chat.js"),!Array){(e.resolveComponent("empty")+e.resolveComponent("z-paging"))()}Math||(a+(()=>"../../../../components/empty/empty.js")+(()=>"../../../../node-modules/z-paging/components/z-paging/z-paging.js"))();const a=()=>"../../components/chatting/chatting.js",s=e.defineComponent({__name:"chatlog",props:{id:null,sceneDetail:null},setup(a){const s=a,t=i.useAppStore(),n=e.computed((()=>{var e;return((null==(e=t.getLadderConfig)?void 0:e.voice)||[]).find((e=>{var r;return e.code==(null==(r=s.sceneDetail)?void 0:r.coach_voice)}))||{}})),o=e.ref([]),u=e.shallowRef(),l=async(e,i)=>{var a,t;try{const{lists:t}=await r.lpRecordLists({page_no:e,page_size:i,analysis_id:s.id}),o=t.map((e=>e.preliminary_ask?{type:2,reply:e.preliminary_ask,duration:e.preliminary_ask_audio_duration,logo:n.value.logo,link:e.preliminary_ask_audio}:[{type:1,duration:e.ask_audio_duration,message:e.ask,link:e.ask_audio,tips:{performance:e.performance||"暂无内容",speechcraft:e.speechcraft||"暂无内容"}},{type:2,reply:e.reply,duration:e.reply_audio_duration,logo:n.value.logo,link:e.reply_audio}])).flat();null==(a=u.value)||a.complete(o)}catch(o){null==(t=u.value)||t.complete([])}};return e.onMounted((()=>{(async()=>{var r;await e.nextTick$1(),e.index.showLoading({title:"加载中"});try{await(null==(r=u.value)?void 0:r.reload())}finally{e.index.hideLoading()}})()})),(r,i)=>({a:e.p({"content-list":e.unref(o)}),b:e.p({text:"暂无对话"}),c:e.sr(u,"97670a0c-0",{k:"pagingRef"}),d:e.o(l),e:e.o((r=>e.isRef(o)?o.value=r:null)),f:e.p({fixed:!1,auto:!1,"safe-area-inset-bottom":!0,modelValue:e.unref(o)})})}});wx.createComponent(s);

"use strict";const e=require("../../../../common/vendor.js"),s=require("../../../../stores/user.js"),u=require("../../../../enums/appEnums.js"),r=require("../../../../hooks/useKeyboardHeight.js");if(require("../../../../api/user.js"),require("../../../../utils/request/index.js"),require("../../../../utils/request/http.js"),require("../../../../enums/requestEnums.js"),require("../../../../utils/request/cancel.js"),require("../../../../utils/auth.js"),require("../../../../enums/constantEnums.js"),require("../../../../utils/cache.js"),require("../../../../router/index.js"),require("../../../../config/index.js"),require("../../../../hooks/useShareMessage.js"),require("../../../../utils/util.js"),require("../../../../stores/navigationBarTitle.js"),require("../../../../stores/app.js"),require("../../../../api/app.js"),require("../../../../api/chat.js"),require("../../../../api/voice_chat.js"),!Array){(e.resolveComponent("u-icon")+e.resolveComponent("u-button")+e.resolveComponent("u-popup"))()}Math||((()=>"../../../../uni_modules/vk-uview-ui/components/u-icon/u-icon.js")+o+(()=>"../../../../uni_modules/vk-uview-ui/components/u-button/u-button.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-popup/u-popup.js"))();const o=()=>"../../../components/form-designer/form-designer.js",t=e.defineComponent({__name:"sidebar",props:{formList:{default:()=>[]},title:{default:""}},emits:["open","close","success"],setup(o,{expose:t,emit:i}){var n;const a=o,{dynamicHeight:p}=r.useKeyboardHeight(),l=e.computed((()=>{const{windowHeight:s,statusBarHeight:u}=e.index.$u.sys();let r={height:0,top:0};r=e.index.getMenuButtonBoundingClientRect();return s-u-(r.height+(r.top-u))-40+"px"})),c=s.useUserStore(),{userTokens:m}=e.toRefs(c);null==(n=c.getTokenByScene(u.TokensSceneEnum.SCENE_CHAT))||n.score;const d=e.ref(!1),f=e.reactive({}),j=e.shallowRef(),q=async()=>{var s;m.value<=0?e.index.$u.toast("算力不足，请充值！"):(await(null==(s=j.value)?void 0:s.validate()),i("success",f),h())},h=()=>{d.value=!1,i("close")};return e.watchEffect((()=>{a.formList.forEach((e=>{f[e.props.field]=""}))})),t({open:()=>{d.value=!0},close:h,formData:f}),(s,u)=>({a:e.p({name:"close",size:"32"}),b:e.o(h),c:e.sr(j,"2abebdb4-2,2abebdb4-0",{k:"formRef"}),d:e.o((s=>e.isRef(f)?f.value=s:null)),e:e.p({formLists:o.formList,modelValue:e.unref(f)}),f:e.unref(p)+"px",g:e.o(q),h:e.p({type:"primary","custom-style":{borderRadius:"16rpx"}}),i:e.o(h),j:e.o((s=>e.isRef(d)?d.value=s:null)),k:e.p({mode:"bottom","custom-style":{backgroundColor:"transparent",padding:"0 20rpx"},height:e.unref(l),mask:!1,modelValue:e.unref(d)})})}});wx.createComponent(t);

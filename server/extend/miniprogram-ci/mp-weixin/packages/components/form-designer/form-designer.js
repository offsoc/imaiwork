"use strict";const e=require("../../../common/vendor.js");if(!Array){(e.resolveComponent("u-form-item")+e.resolveComponent("u-form"))()}Math||(o+t+r+l+(()=>"../../../uni_modules/vk-uview-ui/components/u-form-item/u-form-item.js")+(()=>"../../../uni_modules/vk-uview-ui/components/u-form/u-form.js"))();const o=()=>"./widgets/input.js",t=()=>"./widgets/textarea.js",r=()=>"./widgets/select.js",l=()=>"./widgets/file.js",i=e.defineComponent({__name:"form-designer",props:{formLists:{default:()=>[]},modelValue:null,labelPosition:{default:"top"},borderBottom:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(o,{expose:t,emit:r}){const l=o,i=e.shallowRef(),d=e.computed({get:()=>l.modelValue,set(e){r("update:modelValue",e)}}),p=e.ref({});return e.watch((()=>l.formLists),(o=>{p.value=null==o?void 0:o.reduce(((e,o)=>(o.props.isRequired&&(e[o.props.field]=[{type:"any",required:!0,message:`${o.props.title}不能为空`,trigger:"blur,change"}]),e)),{}),e.nextTick$1((()=>{var e;null==(e=i.value)||e.setRules(p.value)}))}),{immediate:!0}),t({validate:async()=>new Promise(((e,o)=>{var t;null==(t=i.value)||t.validate((t=>{t?e(!0):o()}))}))}),(t,r)=>({a:e.f(o.formLists,((t,r,l)=>e.e({a:"WidgetInput"===t.name},"WidgetInput"===t.name?{b:"29d64f6c-2-"+l+",29d64f6c-1-"+l,c:e.o((o=>e.unref(d)[t.props.field]=o),t.id),d:e.p({...t.props,modelValue:e.unref(d)[t.props.field]})}:"WidgetTextarea"===t.name?{f:"29d64f6c-3-"+l+",29d64f6c-1-"+l,g:e.o((o=>e.unref(d)[t.props.field]=o),t.id),h:e.p({...t.props,modelValue:e.unref(d)[t.props.field]})}:["WidgetSelect","WidgetMultiple"].includes(t.name)?{j:"29d64f6c-4-"+l+",29d64f6c-1-"+l,k:e.o((o=>e.unref(d)[t.props.field]=o),t.id),l:e.p({...t.props,multiple:"WidgetMultiple"===t.name,modelValue:e.unref(d)[t.props.field]})}:"WidgetFile"===t.name?{n:"29d64f6c-5-"+l+",29d64f6c-1-"+l,o:e.o((o=>e.unref(d)[t.props.field]=o),t.id),p:e.p({...t.props,modelValue:e.unref(d)[t.props.field]})}:{},{e:"WidgetTextarea"===t.name,i:["WidgetSelect","WidgetMultiple"].includes(t.name),m:"WidgetFile"===t.name,q:t.id,r:"29d64f6c-1-"+l+",29d64f6c-0",s:e.p({prop:t.props.field,label:t.props.title,borderBottom:o.borderBottom})}))),b:e.sr(i,"29d64f6c-0",{k:"formRef"}),c:e.p({model:e.unref(d),...{...t.$attrs,...l},"error-type":["toast"]})})}});wx.createComponent(i);

"use strict";const e=require("../../common/vendor.js"),a=require("../../api/agent.js"),r=require("../../stores/user.js");if(require("../../utils/request/index.js"),require("../../utils/request/http.js"),require("../../enums/requestEnums.js"),require("../../utils/request/cancel.js"),require("../../utils/auth.js"),require("../../enums/constantEnums.js"),require("../../utils/cache.js"),require("../../router/index.js"),require("../../config/index.js"),require("../../api/user.js"),require("../../hooks/useShareMessage.js"),require("../../utils/util.js"),require("../../stores/navigationBarTitle.js"),require("../../stores/app.js"),require("../../api/app.js"),require("../../api/chat.js"),require("../../api/voice_chat.js"),!Array){(e.resolveComponent("u-navbar")+e.resolveComponent("empty")+e.resolveComponent("z-paging")+e.resolveComponent("tabbar"))()}Math||((()=>"../../uni_modules/vk-uview-ui/components/u-navbar/u-navbar.js")+(()=>"../../components/empty/empty.js")+(()=>"../../node-modules/z-paging/components/z-paging/z-paging.js")+(()=>"../../components/tabbar/tabbar.js"))();const t=e.defineComponent({__name:"agent",setup(t){const s=e.computed((()=>r.useUserStore().isLogin)),n=e.ref([]),u=e.ref(null),i=e.ref(null),o=e.ref([]),l=e.shallowRef(),p=async(e,r)=>{var t;try{let s;s=1==i.value?await a.getCommonAgentList({page_no:e,page_size:r,source:0,cate_id:u.value}):await a.getCommonCozeAgentList({page_no:e,page_size:r,source:0,agent_cate_id:u.value,type:2==i.value?1:2}),o.value=s.lists||[],null==(t=l.value)||t.complete(s.lists)}catch(s){console.error("查询历史记录失败:",s)}};return e.onMounted((()=>{(async()=>{const{lists:e}=await a.getAgentCategoryList({page_size:25e3});n.value=e||[],n.value.length>0&&(u.value=n.value[0].id,i.value=n.value[0].type)})()})),(a,r)=>({a:e.p({"border-bottom":!1,background:{background:"transparent"},"is-back":!1}),b:e.f(e.unref(n),((a,r,t)=>({a:e.t(a.name),b:e.unref(u)===a.id?1:"",c:a.id,d:e.o((e=>(e=>{var a;u.value=e.id,i.value=e.type,null==(a=l.value)||a.reload()})(a)),a.id)}))),c:e.f(e.unref(o),((a,r,t)=>({a:a.image||a.avatar,b:`url(${a.bg_image})`,c:e.t(a.name),d:e.t(a.intro||a.introduced),e:r,f:e.o((r=>(a=>{s.value?1==i.value?e.index.$u.route({url:"/pages/index/index",params:{agent_name:a.name,agent_id:a.id,agent_logo:a.image}}):e.index.$u.route({url:"/packages/pages/robot_chat/robot_chat",params:{id:a.id,type:a.type}}):e.index.$u.route({url:"/pages/login/login"})})(a)),r)}))),d:e.sr(l,"84402785-1",{k:"pagingRef"}),e:e.o(p),f:e.o((a=>e.isRef(o)?o.value=a:null)),g:e.p({fixed:!1,"safe-area-inset-bottom":!0,modelValue:e.unref(o)})})}}),s=e._export_sfc(t,[["__scopeId","data-v-84402785"]]);wx.createPage(s);

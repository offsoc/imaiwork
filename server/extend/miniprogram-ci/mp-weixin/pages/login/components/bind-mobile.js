"use strict";const e=require("../../../common/vendor.js"),s=require("../../../api/user.js");require("../../../utils/request/index.js");const t=require("../../../stores/user.js");if(require("../../../utils/request/http.js"),require("../../../enums/requestEnums.js"),require("../../../utils/request/cancel.js"),require("../../../utils/auth.js"),require("../../../enums/constantEnums.js"),require("../../../utils/cache.js"),require("../../../router/index.js"),require("../../../config/index.js"),require("../../../hooks/useShareMessage.js"),require("../../../utils/util.js"),require("../../../stores/navigationBarTitle.js"),require("../../../stores/app.js"),require("../../../api/app.js"),require("../../../api/chat.js"),require("../../../api/voice_chat.js"),!Array){(e.resolveComponent("u-button")+e.resolveComponent("u-popup"))()}Math||((()=>"../../../uni_modules/vk-uview-ui/components/u-button/u-button.js")+(()=>"../../../uni_modules/vk-uview-ui/components/u-popup/u-popup.js"))();const o=e.defineComponent({__name:"bind-mobile",props:{show:{type:Boolean},userInfo:{type:Object}},emits:["update:show","success","close"],setup(o,{emit:r}){const u=o,i=e.computed({get:()=>u.show,set(e){r("update:show",e)}});e.shallowRef(),e.ref(""),t.useUserStore(),e.reactive({type:"bind",mobile:"",code:""});const n=async t=>{var o;const{encryptedData:i,iv:n,code:a}=t.detail,c={code:a,encrypted_data:i,iv:n};if(i)try{await s.userMnpMobile({...c},{token:null==(o=u.userInfo)?void 0:o.token}),e.index.$u.toast("绑定成功"),r("success")}catch(p){e.index.$u.toast(p||"绑定失败")}};return(s,t)=>({a:e.o(n),b:e.p({type:"primary",shape:"circle","hover-class":"none","open-type":"getPhoneNumber"}),c:e.o((e=>r("close"))),d:e.o((s=>e.isRef(i)?i.value=s:null)),e:e.p({mode:"bottom","border-radius":"14","mask-close-able":!1,"safe-area-inset-bottom":!0,closeable:!0,modelValue:e.unref(i)})})}});wx.createComponent(o);

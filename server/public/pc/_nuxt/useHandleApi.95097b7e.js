import{a as z,at as L,z as v,c as u,G as o,dq as w,u as H,dr as G}from"./entry.d7219633.js";import{u as Q}from"./usePaging.3c53b51c.js";import{TurnStatus as h}from"./index.0f8f6319.js";function W(t){return $request.get({url:"/audio/lists",params:t})}function te(t){return $request.post({url:"/audio/task",params:t})}function ne(t){return $request.post({url:"/audio/batch",params:t})}function j(t){return $request.post({url:"/audio/delete",params:t})}function re(t){return $request.get({url:"/audio/detail",params:t})}function B(t){return $request.post({url:"/audio/retry",params:t})}function ae(t){return $request.post({url:"/audio/text",params:t})}function U(t){const y=H(),{onSuccess:i}=t||{},q=z(),A=L(),S=v(),k=u(()=>S.userInfo.tokens),_=u(()=>S.getTokenByScene(G.MEETING)||{}),I=u(()=>A.getMeetingConfig.language),N=u(()=>[{name:"不翻译",code:0},...A.getMeetingConfig.translation]),D=[{value:0,label:"不区分"},{value:1,label:"单人"},{value:2,label:"多人"}],{pager:O,getLists:P}=Q({fetchFun:W,params:{page_size:10}});return{pager:O,userTokens:k,tokensValue:_,languageList:I,targetLanguageList:N,speakerOptions:D,getLists:P,handleAgain:async e=>{y.$confirm({message:"确定要重新转写？",onConfirm:async()=>{try{await B({id:e}),o.msgSuccess("重试成功"),i==null||i("retry")}catch(s){o.msgError(s||"重试失败")}}})},handleDelete:async e=>{y.$confirm({message:"确定删除此会议纪要吗？",onConfirm:async()=>{try{await j({id:e}),o.msgSuccess("删除成功"),i==null||i("delete")}catch(s){o.msgError(s||"删除失败")}}})},handleTrain:async(e,s)=>{var T,E,M,x,C,$,b;const{Result:n}=e.response||{},c=((E=(T=n==null?void 0:n.Transcription)==null?void 0:T.Transcription)==null?void 0:E.Paragraphs)||[],g=((x=(M=n==null?void 0:n.Translation)==null?void 0:M.Translation)==null?void 0:x.Paragraphs)||[],l=((C=n==null?void 0:n.AutoChapters)==null?void 0:C.AutoChapters)||[],m=(($=n==null?void 0:n.MeetingAssistance)==null?void 0:$.MeetingAssistance.Actions)||[],p=((b=n==null?void 0:n.Summarization)==null?void 0:b.Summarization.QuestionsAnsweringSummary)||[];if(c&&c.length||g&&g.length||l&&l.length||m&&m.length||p&&p.length){let a="";c.forEach(r=>{a+=r.Words.reduce((f,d)=>f+d.Text,"")}),a+=`

`,g.forEach(r=>{a+=r.Sentences.reduce((f,d)=>f+d.Text,"")}),a+=`

`,l.forEach(r=>{a+=r.Headline+`
`+r.Summary}),a+=`

`,m.forEach(r=>{a+=r.Text}),a+=`

`,p.forEach(r=>{a+=r.Question+`
`+r.Answer}),s({type:"txt",fileName:e.name,content:a})}else o.notify("暂无内容")},handleItem:e=>{const{status:s}=e;s==h.SUCCESS?q.push({path:"/app/meeting_minutes/detail",query:{id:e.id}}):s==h.ERROR?o.msgWarning("文件转写失败，不可查看"):s==h.ING&&o.msgWarning("文件转写中，不可查看")},formatName:e=>e.lastIndexOf(".")!==-1?e.slice(0,e.lastIndexOf(".")):e,getDuration:e=>e?w(e/1e3):0}}const se=Object.freeze(Object.defineProperty({__proto__:null,default:U},Symbol.toStringTag,{value:"Module"}));export{W as a,ae as b,re as c,te as d,se as e,ne as m,U as u};

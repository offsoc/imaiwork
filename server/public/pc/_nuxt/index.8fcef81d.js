import{d as oe,bP as se,at as ae,aF as ne,r as i,c as L,o as le,k as n,l as c,m as s,Z as a,J as b,I as g,s as W,K as $,t as E,Y as N,q as m,L as _,bM as re,v as ie,dv as ce,G as M,aH as de,aw as fe,y as ue,ax as pe,_ as me}from"./entry.ee599c70.js";import{_ as _e}from"./index.79c42c5a.js";import{E as ve,a as xe}from"./el-tabs.68bb8047.js";import{a as ge,_ as he}from"./mind-map.vue.d91ea3ac.js";import{u as ye,b as be,c as ke}from"./useHandleApi.8d3ee1f5.js";import{_ as Te}from"./index.vue.a1182a5d.js";import Ce from"./lead.ea3016ad.js";import{_ as Se}from"./note.vue.e1d8b96c.js";import{_ as Ee}from"./audio-control.vue.2daac88e.js";import{_ as we}from"./recorder-control.vue.9587cdce.js";import{d as Re}from"./debounce.f4735d5c.js";import{E as Ie}from"./index.e69b4eeb.js";import"./raf.09011a0b.js";import"./strings.32bdf471.js";import"./clamp.05cad4d6.js";import"./toNumber.0872a42f.js";import"./index.6ab00366.js";import"./useMindMap.93e993f9.js";import"./index.3864ff87.js";import"./index.937f4495.js";import"./usePaging.5914886e.js";import"./index.0f8f6319.js";import"./index.8fd3c68c.js";import"./index.684b3e96.js";import"./_baseIteratee.6942dcd2.js";import"./index.0e845cb8.js";import"./el-slider.b59fa7c4.js";import"./el-input-number.0bb1bb2b.js";import"./index.7e73622e.js";/* empty css                  *//* empty css               *//* empty css                     */import"./useDictOptions.42b4c8c0.js";import"./knowledge_base.519704cc.js";import"./common.1373bb04.js";import"./index.f36399ff.js";/* empty css                   */const Be={class:"h-full flex min-w-[1200px] relative"},Pe={class:"h-full flex flex-col basis-[42%] min-w-[468px] bg-[#f7f8fc]"},Ve={class:"grow min-h-0 flex flex-col"},Le={class:"grow min-h-0 my-8 relative"},We={class:"px-6 pb-6"},$e={class:"flex flex-col gap-y-6"},Ae={class:"flex gap-4 items-center"},De=["src"],Fe={class:"flex gap-2 text-[#7F7F94] text-xs"},Ne=["onClick"],Me={class:"break-all leading-[24px]"},Ue={key:1,class:"flex flex-col justify-center items-center h-full"},ze={class:"h-[80px] flex-shrink-0"},He={key:1,class:"grow min-h-0 flex flex-col justify-center items-center"},je={class:"flex-1 flex flex-col py-6 bg-white"},qe={class:"px-8"},Ke={class:"grow min-h-0 px-8 overflow-hidden"},Ge={class:"fixed right-4 top-[70px] z-[1001]"},Je=oe({__name:"index",setup(Ye){const w=se(),U=ae(),u=ne({id:"",from:"main"}),A=i(null),d=i({}),h=i("1"),z=L(()=>U.getMeetingConfig.avatars),H=L(()=>{var e,o;const{response:t}=d.value;if(t)return(o=(e=t.Result)==null?void 0:e.AutoChapters)==null?void 0:o.AutoChapters}),k=L(()=>{var o,r,f;const{response:t}=d.value,e=(f=(r=(o=t==null?void 0:t.Result)==null?void 0:o.Transcription)==null?void 0:r.Transcription)==null?void 0:f.Paragraphs;return e&&e.length>0?e:[]}),{handleTrain:j}=ye(),q=t=>{var r,f,p;const{response:e}=d.value,o=(p=(f=(r=e==null?void 0:e.Result)==null?void 0:r.Translation)==null?void 0:f.Translation)==null?void 0:p.Paragraphs;return o&&o.length>0?o[t]:[]},R=i([]),D=i([]),v=i(-1),C=i(!1),I=i(!1),B=i(null),K=()=>{I.value||(C.value=!0)},G=(t=0)=>{const e=k.value;if(t=parseInt(t.toFixed(0)),v.value=e.findIndex(o=>t>=o.Words[0].Start&&t<=o.Words[o.Words.length-1].End),k.value.forEach(o=>{o.class="",o.Words.forEach(r=>{r.class=""})}),v.value!==-1){const o=k.value[v.value];o.class="!bg-primary !text-[#ffffff99]",D.value.forEach((x,l)=>{v.value}),o.Words.forEach((x,l)=>{t>=x.Start?x.class="!text-white":x.class=""});const r=R.value.filter((x,l)=>l<=v.value),{scrollTop:f,clientHeight:p}=B.value.wrapRef,y=r[r.length-1];(y.offsetTop+y.clientHeight>f+p||f>y.offsetTop)&&!C.value&&F(y.offsetTop)}},J=()=>{F(R.value[v.value].offsetTop),setTimeout(()=>{C.value=!1},20)},F=t=>{I.value=!0,B.value.setScrollTop(t),setTimeout(()=>{I.value=!1},20)},Y=t=>{if(t&&t.length==0)return"00:00";const e=t[0].Start;return ce(e/1e3)},Z=t=>{var o;const e=t[0].Start;(o=A.value)==null||o.seek(e/1e3)},O=Re(async t=>{try{await be({id:u.id,text:t}),M.msgSuccess("更新笔记成功")}catch{M.msgError("更新笔记失败")}},2*1e3),Q=async t=>{O(t)},P=i(null),V=i(!1),X=()=>{j(d.value,async t=>{var e,o;V.value=!0,await de(),(e=P.value)==null||e.open(),(o=P.value)==null||o.setFormData(t)})},S=i(!1),ee=async()=>{try{S.value=!0;const t=await ke({id:u.id});d.value=t,w.meta.title=t.name,S.value=!1}finally{S.value=!1}};return le(()=>{u.id=w.query.id,u.from=w.query.from,u.id&&ee()}),(t,e)=>{const o=fe,r=ue,f=_e,p=ve,y=xe,x=pe;return n(),c(b,null,[s("div",Be,[s("div",Pe,[e[4]||(e[4]=s("div",{class:"text-lg font-bold mx-6 mt-6"},"语音转文字",-1)),s("div",Ve,[a(S)?(n(),c("div",He,[m(f)])):(n(),c(b,{key:0},[s("div",Le,[a(k).length>0?(n(),g(a(Ie),{key:0,ref_key:"scrollbarContentRef",ref:B,onScroll:K},{default:W(()=>[s("div",We,[s("div",$e,[(n(!0),c(b,null,$(a(k),(l,te)=>(n(),c("div",{ref_for:!0,ref_key:"contentItemRef",ref:R},[s("div",Ae,[s("img",{class:"w-6 h-6 rounded-full object-cover",src:a(z)[l.SpeakerId-1]},null,8,De),s("div",Fe,[s("span",null,"发言人"+E(l.SpeakerId),1),s("span",null,E(Y(l.Words)),1)])]),s("div",{class:N(["cursor-pointer py-4 px-6 bg-white rounded-lg mt-[10px] leading-[24px] text-[#585A73] hover:shadow-[0_0_0_2px_rgba(35,83,244,.4)]",l.class]),ref_for:!0,ref_key:"paragraphRef",ref:D,onClick:T=>Z(l.Words)},[(n(!0),c(b,null,$(l.Words,T=>(n(),c("span",{class:N(T.class)},E(T.Text),3))),256)),a(d).translation?(n(),c(b,{key:0},[m(o,{class:"!border-t-[#f0f0f0] !my-3"}),s("div",Me,[(n(!0),c(b,null,$(q(te).Sentences,T=>(n(),c("span",null,[s("span",null,E(T.Text),1)]))),256))])],64)):_("",!0)],10,Ne)],512))),256))])])]),_:1},512)):(n(),c("div",Ue,[...e[3]||(e[3]=[s("img",{src:ge,class:"w-[100px] h-[100px]"},null,-1),s("div",{class:"text-[#27264da6] mt-4"},"这里空空如也~",-1)])])),a(C)&&a(v)>-1?(n(),c("div",{key:2,class:"absolute bottom-0 right-3 p-2 bg-[rgba(44,44,54,.8)] rounded-lg z-[888]",onClick:J},[m(r,{name:"local-icon-crosshair",size:20,color:"#ffffff"})])):_("",!0)]),s("div",ze,[a(u).from==="real-time"&&!a(u).id?(n(),g(we,{key:0})):_("",!0),a(u).id?(n(),g(Ee,{key:1,ref_key:"audioControlRef",ref:A,music:a(d).url,"content-list":a(H),onUpdateTime:G},null,8,["music","content-list"])):_("",!0)])],64))])]),s("div",je,[s("div",qe,[m(y,{modelValue:a(h),"onUpdate:modelValue":e[0]||(e[0]=l=>re(h)?h.value=l:null)},{default:W(()=>[m(p,{label:"导读",name:"1"}),m(p,{label:"脑图",name:"2"}),m(p,{label:"笔记",name:"3"})]),_:1},8,["modelValue"])]),s("div",Ke,[a(h)==="1"?(n(),g(Ce,{key:0,detail:a(d)},null,8,["detail"])):_("",!0),a(h)==="2"?(n(),g(he,{key:1,detail:a(d)},null,8,["detail"])):_("",!0),a(h)==="3"?(n(),g(Se,{key:2,modelValue:a(d).text,"onUpdate:modelValue":[e[1]||(e[1]=l=>a(d).text=l),Q]},null,8,["modelValue"])):_("",!0)])]),s("div",Ge,[m(x,{type:"primary",onClick:X},{default:W(()=>[...e[5]||(e[5]=[ie("知识库训练",-1)])]),_:1})])]),a(V)?(n(),g(Te,{key:0,ref_key:"knbBindRef",ref:P,onClose:e[2]||(e[2]=l=>V.value=!1)},null,512)):_("",!0)],64)}}});const Lt=me(Je,[["__scopeId","data-v-32d1eb0a"]]);export{Lt as default};

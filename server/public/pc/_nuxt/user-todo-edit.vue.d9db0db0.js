import{d as V,r as f,aF as h,cq as C,bI as R,k as q,I as T,s,q as n,Z as o,cP as Y,bz as P,G as u,au as B,av as H,ay as L}from"./entry.46557796.js";import{E as M}from"./el-date-picker.9a9f22f5.js";/* empty css                     */import{E as O,F as U}from"./person_wechat.8bcf26fc.js";const N=V({__name:"user-todo-edit",props:{wechatId:{},friendId:{}},emits:["close","confirm"],setup(_,{expose:y,emit:b}){const l=_,r=b,m=f(null),e=h({id:"",todo_type:0,todo_content:"",todo_time:"",wechat_id:l.wechatId,friend_id:l.friendId}),c=f(),k={todo_content:[{required:!0,message:"请输入待办内容"}],todo_time:[{required:!0,message:"请选择时间"}]},E=t=>t.getTime()<P().startOf("day").valueOf(),w=async()=>{var t;await((t=c.value)==null?void 0:t.validate());try{e.id?await O(e):await U(e),i(),r("confirm"),u.msgSuccess("添加成功")}catch(a){u.msgError(a)}},{lockFn:F,isLock:I}=C(w),D=t=>{var a;e.todo_type=t,(a=m.value)==null||a.open()},i=()=>{r("close")};return y({open:D,setFormData:t=>R(t,e)}),(t,a)=>{const g=B,p=H,x=M,v=L;return q(),T(Y,{ref_key:"popupRef",ref:m,title:o(e).todo_type==0?"添加待办":"添加自动跟进",async:"",width:"487px","confirm-button-text":"确认创建","confirm-loading":o(I),onConfirm:o(F),onClose:i},{default:s(()=>[n(v,{ref_key:"formRef",ref:c,model:o(e),"label-position":"top",rules:k},{default:s(()=>[n(p,{label:`请输入需要记录的${o(e).todo_type==0?"代办":"自动跟进"}内容`,prop:"todo_content"},{default:s(()=>[n(g,{modelValue:o(e).todo_content,"onUpdate:modelValue":a[0]||(a[0]=d=>o(e).todo_content=d),type:"textarea",rows:5,placeholder:`请输入${o(e).todo_type==0?"代办":"自动跟进"}内容`},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(p,{label:"日期时间",prop:"todo_time"},{default:s(()=>[n(x,{class:"!w-full",modelValue:o(e).todo_time,"onUpdate:modelValue":a[1]||(a[1]=d=>o(e).todo_time=d),type:"datetime","value-format":"YYYY-MM-DD HH:mm:ss",disabled:!!o(e).id,"disabled-date":E,placeholder:"点击选择时间"},null,8,["modelValue","disabled"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","confirm-loading","onConfirm"])}}});export{N as _};

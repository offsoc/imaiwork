import{Q as be,S as le,a_ as Se,b2 as Me,b4 as Ie,aX as ne,bV as he,aZ as Pe,aU as ae,O as te,ab as _e,r as J,c as f,D as ie,bd as de,aW as p,aH as ce,d as oe,W as Ve,aF as Ce,aG as ge,k as L,l as F,q as Ne,s as ke,m as q,t as Fe,Z as t,Y as K,b5 as Ke,a3 as Z,aa as Te,ap as Ee,e as Re,aK as Xe,A as Ye,N as pe,ah as Be,o as We,V as $e,aL as Ue,aQ as Oe,ai as Ae,I as me,L as re,J as ue,K as ve,a0 as je,am as He}from"./entry.46557796.js";import{E as Ge}from"./el-input-number.2848ce7e.js";import{d as xe}from"./debounce.22e3311f.js";const ze=Symbol("sliderContextKey"),Qe=be({modelValue:{type:le([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:Se,inputSize:Se,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:le(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:le(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:Me,default:"top"},marks:{type:le(Object)},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...Ie(["ariaLabel"])}),fe=e=>ae(e)||te(e)&&e.every(ae),Ze={[ne]:fe,[he]:fe,[Pe]:fe},qe=be({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:Me,default:"top"}}),Je={[ne]:e=>ae(e)},De=(e,l,d)=>{const a=J(),u=J(!1),m=f(()=>l.value instanceof Function),i=f(()=>m.value&&l.value(e.modelValue)||e.modelValue),h=xe(()=>{d.value&&(u.value=!0)},50),V=xe(()=>{d.value&&(u.value=!1)},50);return{tooltip:a,tooltipVisible:u,formatValue:i,displayTooltip:h,hideTooltip:V}},el=(e,l,d)=>{const{disabled:a,min:u,max:m,step:i,showTooltip:h,persistent:V,precision:c,sliderSize:v,formatTooltip:n,emitChange:y,resetSize:T,updateDragging:W}=_e(ze),{tooltip:z,tooltipVisible:P,formatValue:I,displayTooltip:S,hideTooltip:R}=De(e,n,h),E=J(),k=f(()=>`${(e.modelValue-u.value)/(m.value-u.value)*100}%`),M=f(()=>e.vertical?{bottom:k.value}:{left:k.value}),$=()=>{l.hovering=!0,S()},se=()=>{l.hovering=!1,l.dragging||R()},U=o=>{a.value||(o.preventDefault(),_(o),window.addEventListener("mousemove",B),window.addEventListener("touchmove",B),window.addEventListener("mouseup",x),window.addEventListener("touchend",x),window.addEventListener("contextmenu",x),E.value.focus())},X=o=>{a.value||(l.newPosition=Number.parseFloat(k.value)+o/(m.value-u.value)*100,C(l.newPosition),y())},O=()=>{X(-i.value)},r=()=>{X(i.value)},b=()=>{X(-i.value*4)},w=()=>{X(i.value*4)},H=()=>{a.value||(C(0),y())},G=()=>{a.value||(C(100),y())},Q=o=>{let g=!0;switch(o.code){case p.left:case p.down:O();break;case p.right:case p.up:r();break;case p.home:H();break;case p.end:G();break;case p.pageDown:b();break;case p.pageUp:w();break;default:g=!1;break}g&&o.preventDefault()},A=o=>{let g,N;return o.type.startsWith("touch")?(N=o.touches[0].clientY,g=o.touches[0].clientX):(N=o.clientY,g=o.clientX),{clientX:g,clientY:N}},_=o=>{l.dragging=!0,l.isClick=!0;const{clientX:g,clientY:N}=A(o);e.vertical?l.startY=N:l.startX=g,l.startPosition=Number.parseFloat(k.value),l.newPosition=l.startPosition},B=o=>{if(l.dragging){l.isClick=!1,S(),T();let g;const{clientX:N,clientY:Y}=A(o);e.vertical?(l.currentY=Y,g=(l.startY-l.currentY)/v.value*100):(l.currentX=N,g=(l.currentX-l.startX)/v.value*100),l.newPosition=l.startPosition+g,C(l.newPosition)}},x=()=>{l.dragging&&(setTimeout(()=>{l.dragging=!1,l.hovering||R(),l.isClick||C(l.newPosition),y()},0),window.removeEventListener("mousemove",B),window.removeEventListener("touchmove",B),window.removeEventListener("mouseup",x),window.removeEventListener("touchend",x),window.removeEventListener("contextmenu",x))},C=async o=>{if(o===null||Number.isNaN(+o))return;o<0?o=0:o>100&&(o=100);const g=100/((m.value-u.value)/i.value);let Y=Math.round(o/g)*g*(m.value-u.value)*.01+u.value;Y=Number.parseFloat(Y.toFixed(c.value)),Y!==e.modelValue&&d(ne,Y),!l.dragging&&e.modelValue!==l.oldValue&&(l.oldValue=e.modelValue),await ce(),l.dragging&&S(),z.value.updatePopper()};return ie(()=>l.dragging,o=>{W(o)}),de(E,"touchstart",U,{passive:!1}),{disabled:a,button:E,tooltip:z,tooltipVisible:P,showTooltip:h,persistent:V,wrapperStyle:M,formatValue:I,handleMouseEnter:$,handleMouseLeave:se,onButtonDown:U,onKeyDown:Q,setPosition:C}},ll=oe({name:"ElSliderButton"}),tl=oe({...ll,props:qe,emits:Je,setup(e,{expose:l,emit:d}){const a=e,u=Ve("slider"),m=Ce({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:a.modelValue}),i=f(()=>v.value?n.value:!1),{disabled:h,button:V,tooltip:c,showTooltip:v,persistent:n,tooltipVisible:y,wrapperStyle:T,formatValue:W,handleMouseEnter:z,handleMouseLeave:P,onButtonDown:I,onKeyDown:S,setPosition:R}=el(a,m,d),{hovering:E,dragging:k}=ge(m);return l({onButtonDown:I,onKeyDown:S,setPosition:R,hovering:E,dragging:k}),(M,$)=>(L(),F("div",{ref_key:"button",ref:V,class:K([t(u).e("button-wrapper"),{hover:t(E),dragging:t(k)}]),style:Z(t(T)),tabindex:t(h)?-1:0,onMouseenter:t(z),onMouseleave:t(P),onMousedown:t(I),onFocus:t(z),onBlur:t(P),onKeydown:t(S)},[Ne(t(Ke),{ref_key:"tooltip",ref:c,visible:t(y),placement:M.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":M.tooltipClass,disabled:!t(v),persistent:t(i)},{content:ke(()=>[q("span",null,Fe(t(W)),1)]),default:ke(()=>[q("div",{class:K([t(u).e("button"),{hover:t(E),dragging:t(k)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled","persistent"])],46,["tabindex","onMouseenter","onMouseleave","onMousedown","onFocus","onBlur","onKeydown"]))}});var Le=Te(tl,[["__file","button.vue"]]);const al=be({mark:{type:le([String,Object]),default:void 0}});var nl=oe({name:"ElSliderMarker",props:al,setup(e){const l=Ve("slider"),d=f(()=>Ee(e.mark)?e.mark:e.mark.label),a=f(()=>Ee(e.mark)?void 0:e.mark.style);return()=>Re("div",{class:l.e("marks-text"),style:a.value},d.value)}});const ol=(e,l,d)=>{const{form:a,formItem:u}=Xe(),m=Ye(),i=J(),h=J(),V={firstButton:i,secondButton:h},c=f(()=>e.disabled||(a==null?void 0:a.disabled)||!1),v=f(()=>Math.min(l.firstValue,l.secondValue)),n=f(()=>Math.max(l.firstValue,l.secondValue)),y=f(()=>e.range?`${100*(n.value-v.value)/(e.max-e.min)}%`:`${100*(l.firstValue-e.min)/(e.max-e.min)}%`),T=f(()=>e.range?`${100*(v.value-e.min)/(e.max-e.min)}%`:"0%"),W=f(()=>e.vertical?{height:e.height}:{}),z=f(()=>e.vertical?{height:y.value,bottom:T.value}:{width:y.value,left:T.value}),P=()=>{m.value&&(l.sliderSize=m.value[`client${e.vertical?"Height":"Width"}`])},I=r=>{const b=e.min+r*(e.max-e.min)/100;if(!e.range)return i;let w;return Math.abs(v.value-b)<Math.abs(n.value-b)?w=l.firstValue<l.secondValue?"firstButton":"secondButton":w=l.firstValue>l.secondValue?"firstButton":"secondButton",V[w]},S=r=>{const b=I(r);return b.value.setPosition(r),b},R=r=>{l.firstValue=r??e.min,k(e.range?[v.value,n.value]:r??e.min)},E=r=>{l.secondValue=r,e.range&&k([v.value,n.value])},k=r=>{d(ne,r),d(he,r)},M=async()=>{await ce(),d(Pe,e.range?[v.value,n.value]:e.modelValue)},$=r=>{var b,w,H,G,Q,A;if(c.value||l.dragging)return;P();let _=0;if(e.vertical){const B=(H=(w=(b=r.touches)==null?void 0:b.item(0))==null?void 0:w.clientY)!=null?H:r.clientY;_=(m.value.getBoundingClientRect().bottom-B)/l.sliderSize*100}else{const B=(A=(Q=(G=r.touches)==null?void 0:G.item(0))==null?void 0:Q.clientX)!=null?A:r.clientX,x=m.value.getBoundingClientRect().left;_=(B-x)/l.sliderSize*100}if(!(_<0||_>100))return S(_)};return{elFormItem:u,slider:m,firstButton:i,secondButton:h,sliderDisabled:c,minValue:v,maxValue:n,runwayStyle:W,barStyle:z,resetSize:P,setPosition:S,emitChange:M,onSliderWrapperPrevent:r=>{var b,w;((b=V.firstButton.value)!=null&&b.dragging||(w=V.secondButton.value)!=null&&w.dragging)&&r.preventDefault()},onSliderClick:r=>{$(r)&&M()},onSliderDown:async r=>{const b=$(r);b&&(await ce(),b.value.onButtonDown(r))},onSliderMarkerDown:r=>{if(c.value||l.dragging)return;S(r)&&M()},setFirstValue:R,setSecondValue:E}},sl=(e,l,d,a)=>({stops:f(()=>{if(!e.showStops||e.min>e.max)return[];if(e.step===0)return[];const i=(e.max-e.min)/e.step,h=100*e.step/(e.max-e.min),V=Array.from({length:i-1}).map((c,v)=>(v+1)*h);return e.range?V.filter(c=>c<100*(d.value-e.min)/(e.max-e.min)||c>100*(a.value-e.min)/(e.max-e.min)):V.filter(c=>c>100*(l.firstValue-e.min)/(e.max-e.min))}),getStopStyle:i=>e.vertical?{bottom:`${i}%`}:{left:`${i}%`}}),rl=e=>f(()=>e.marks?Object.keys(e.marks).map(Number.parseFloat).sort((d,a)=>d-a).filter(d=>d<=e.max&&d>=e.min).map(d=>({point:d,position:(d-e.min)*100/(e.max-e.min),mark:e.marks[d]})):[]),ul=(e,l,d,a,u,m)=>{const i=c=>{u(ne,c),u(he,c)},h=()=>e.range?![d.value,a.value].every((c,v)=>c===l.oldValue[v]):e.modelValue!==l.oldValue,V=()=>{var c,v;e.min>e.max&&pe("Slider","min should not be greater than max.");const n=e.modelValue;e.range&&te(n)?n[1]<e.min?i([e.min,e.min]):n[0]>e.max?i([e.max,e.max]):n[0]<e.min?i([e.min,n[1]]):n[1]>e.max?i([n[0],e.max]):(l.firstValue=n[0],l.secondValue=n[1],h()&&(e.validateEvent&&((c=m==null?void 0:m.validate)==null||c.call(m,"change").catch(y=>Be())),l.oldValue=n.slice())):!e.range&&ae(n)&&!Number.isNaN(n)&&(n<e.min?i(e.min):n>e.max?i(e.max):(l.firstValue=n,h()&&(e.validateEvent&&((v=m==null?void 0:m.validate)==null||v.call(m,"change").catch(y=>Be())),l.oldValue=n)))};V(),ie(()=>l.dragging,c=>{c||V()}),ie(()=>e.modelValue,(c,v)=>{l.dragging||te(c)&&te(v)&&c.every((n,y)=>n===v[y])&&l.firstValue===c[0]&&l.secondValue===c[1]||V()},{deep:!0}),ie(()=>[e.min,e.max],()=>{V()})},il=(e,l,d)=>{const a=J();return We(async()=>{e.range?(te(e.modelValue)?(l.firstValue=Math.max(e.min,e.modelValue[0]),l.secondValue=Math.min(e.max,e.modelValue[1])):(l.firstValue=e.min,l.secondValue=e.max),l.oldValue=[l.firstValue,l.secondValue]):(!ae(e.modelValue)||Number.isNaN(e.modelValue)?l.firstValue=e.min:l.firstValue=Math.min(e.max,Math.max(e.min,e.modelValue)),l.oldValue=l.firstValue),de(window,"resize",d),await ce(),d()}),{sliderWrapper:a}},dl=oe({name:"ElSlider"}),cl=oe({...dl,props:Qe,emits:Ze,setup(e,{expose:l,emit:d}){const a=e,u=Ve("slider"),{t:m}=$e(),i=Ce({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:h,slider:V,firstButton:c,secondButton:v,sliderDisabled:n,minValue:y,maxValue:T,runwayStyle:W,barStyle:z,resetSize:P,emitChange:I,onSliderWrapperPrevent:S,onSliderClick:R,onSliderDown:E,onSliderMarkerDown:k,setFirstValue:M,setSecondValue:$}=ol(a,i,d),{stops:se,getStopStyle:U}=sl(a,i,y,T),{inputId:X,isLabeledByFormItem:O}=Ue(a,{formItemContext:h}),r=Oe(),b=f(()=>a.inputSize||r.value),w=f(()=>a.ariaLabel||m("el.slider.defaultLabel",{min:a.min,max:a.max})),H=f(()=>a.range?a.rangeStartLabel||m("el.slider.defaultRangeStartLabel"):w.value),G=f(()=>a.formatValueText?a.formatValueText(o.value):`${o.value}`),Q=f(()=>a.rangeEndLabel||m("el.slider.defaultRangeEndLabel")),A=f(()=>a.formatValueText?a.formatValueText(g.value):`${g.value}`),_=f(()=>[u.b(),u.m(r.value),u.is("vertical",a.vertical),{[u.m("with-input")]:a.showInput}]),B=rl(a);ul(a,i,y,T,d,h);const x=f(()=>{const s=[a.min,a.max,a.step].map(ye=>{const D=`${ye}`.split(".")[1];return D?D.length:0});return Math.max.apply(null,s)}),{sliderWrapper:C}=il(a,i,P),{firstValue:o,secondValue:g,sliderSize:N}=ge(i),Y=s=>{i.dragging=s};return de(C,"touchstart",S,{passive:!1}),de(C,"touchmove",S,{passive:!1}),Ae(ze,{...ge(a),sliderSize:N,disabled:n,precision:x,emitChange:I,resetSize:P,updateDragging:Y}),l({onSliderClick:R}),(s,ye)=>{var D,we;return L(),F("div",{id:s.range?t(X):void 0,ref_key:"sliderWrapper",ref:C,class:K(t(_)),role:s.range?"group":void 0,"aria-label":s.range&&!t(O)?t(w):void 0,"aria-labelledby":s.range&&t(O)?(D=t(h))==null?void 0:D.labelId:void 0},[q("div",{ref_key:"slider",ref:V,class:K([t(u).e("runway"),{"show-input":s.showInput&&!s.range},t(u).is("disabled",t(n))]),style:Z(t(W)),onMousedown:t(E),onTouchstartPassive:t(E)},[q("div",{class:K(t(u).e("bar")),style:Z(t(z))},null,6),Ne(Le,{id:s.range?void 0:t(X),ref_key:"firstButton",ref:c,"model-value":t(o),vertical:s.vertical,"tooltip-class":s.tooltipClass,placement:s.placement,role:"slider","aria-label":s.range||!t(O)?t(H):void 0,"aria-labelledby":!s.range&&t(O)?(we=t(h))==null?void 0:we.labelId:void 0,"aria-valuemin":s.min,"aria-valuemax":s.range?t(g):s.max,"aria-valuenow":t(o),"aria-valuetext":t(G),"aria-orientation":s.vertical?"vertical":"horizontal","aria-disabled":t(n),"onUpdate:modelValue":t(M)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),s.range?(L(),me(Le,{key:0,ref_key:"secondButton",ref:v,"model-value":t(g),vertical:s.vertical,"tooltip-class":s.tooltipClass,placement:s.placement,role:"slider","aria-label":t(Q),"aria-valuemin":t(o),"aria-valuemax":s.max,"aria-valuenow":t(g),"aria-valuetext":t(A),"aria-orientation":s.vertical?"vertical":"horizontal","aria-disabled":t(n),"onUpdate:modelValue":t($)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):re("v-if",!0),s.showStops?(L(),F("div",{key:1},[(L(!0),F(ue,null,ve(t(se),(j,ee)=>(L(),F("div",{key:ee,class:K(t(u).e("stop")),style:Z(t(U)(j))},null,6))),128))])):re("v-if",!0),t(B).length>0?(L(),F(ue,{key:2},[q("div",null,[(L(!0),F(ue,null,ve(t(B),(j,ee)=>(L(),F("div",{key:ee,style:Z(t(U)(j.position)),class:K([t(u).e("stop"),t(u).e("marks-stop")])},null,6))),128))]),q("div",{class:K(t(u).e("marks"))},[(L(!0),F(ue,null,ve(t(B),(j,ee)=>(L(),me(t(nl),{key:ee,mark:j.mark,style:Z(t(U)(j.position)),onMousedown:je(vl=>t(k)(j.position),["stop"])},null,8,["mark","style","onMousedown"]))),128))],2)],64)):re("v-if",!0)],46,["onMousedown","onTouchstartPassive"]),s.showInput&&!s.range?(L(),me(t(Ge),{key:0,ref:"input","model-value":t(o),class:K(t(u).e("input")),step:s.step,disabled:t(n),controls:s.showInputControls,min:s.min,max:s.max,precision:t(x),debounce:s.debounce,size:t(b),"onUpdate:modelValue":t(M),onChange:t(I)},null,8,["model-value","class","step","disabled","controls","min","max","precision","debounce","size","onUpdate:modelValue","onChange"])):re("v-if",!0)],10,["id","role","aria-label","aria-labelledby"])}}});var ml=Te(cl,[["__file","slider.vue"]]);const hl=He(ml);export{hl as E};

import{E as B}from"./el-switch.d7a8c51d.js";import{d as D,A as G,aF as O,r as c,cq as W,k as u,I as _,s as n,q as t,Z as o,l as J,K,J as P,L as T,cP as Z,G as V,av as j,au as z,cT as H,cU as M,ay as Q}from"./entry.d9d53b29.js";import{E as X,a as Y}from"./index.79f7263c.js";import{E as $}from"./el-input-number.3a2d39dc.js";/* empty css                  *//* empty css               *//* empty css                     */import{s as ee,g as oe}from"./person_wechat.8bcf26fc.js";import{E as ae}from"./agent.a3fcedc5.js";const ce=D({__name:"edit",emits:["close","success"],setup(te,{expose:y,emit:I}){const f=I,v=G(),a=O({wechat_id:"",open_ai:1,remark:"wechat_ai",takeover_mode:1,takeover_type:1,robot_id:"",sort:1}),w={remark:[{required:!0,message:"请输入账号备注"}],open_ai:[{required:!0,message:"请选择AI接管"}],takeover_mode:[{required:!0,message:"请选择接管模式"}],takeover_type:[{required:!0,message:"请选择接管类型"}],robot_id:[{required:!0,message:"请选择AI接管机器人"}]},d=c(),k=c([]),i=c(!1),E=async r=>{i.value=!0;const e=await ae({keyword:r});k.value=e.lists,i.value=!1},A=()=>{var r;(r=d.value)==null||r.open(),E()},C=()=>{f("close")},F=async()=>{var r,e;await((r=v.value)==null?void 0:r.validate());try{await ee(a),(e=d.value)==null||e.close(),V.msgSuccess("保存成功"),f("success")}catch(p){V.msgError(p||"保存失败")}},{lockFn:R,isLock:q}=W(F),x=async r=>{const e=await oe({wechat_id:r});b(e)},b=async r=>{for(const e in a)r[e]!=null&&r[e]!=null&&(a[e]=r[e])};return y({open:A,getDetail:x,setFormData:b}),(r,e)=>{const p=B,s=j,L=z,m=H,g=M,U=X,S=Y,N=$,h=Q;return u(),_(Z,{ref_key:"popupRef",ref:d,async:"",width:"600px",title:"编辑微信账号","confirm-loading":o(q),onConfirm:o(R),onClose:C},{default:n(()=>[t(h,{model:o(a),ref_key:"formRef",ref:v,rules:w,"label-position":"top"},{default:n(()=>[t(s,{label:"AI总功能开关",prop:"open_ai"},{default:n(()=>[t(p,{modelValue:o(a).open_ai,"onUpdate:modelValue":e[0]||(e[0]=l=>o(a).open_ai=l),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1}),t(s,{label:"账号备注",prop:"remark"},{default:n(()=>[t(L,{modelValue:o(a).remark,"onUpdate:modelValue":e[1]||(e[1]=l=>o(a).remark=l),placeholder:"点击输入账号备注"},null,8,["modelValue"])]),_:1}),t(s,{label:"接管模式",prop:"takeover_mode"},{default:n(()=>[t(g,{modelValue:o(a).takeover_mode,"onUpdate:modelValue":e[2]||(e[2]=l=>o(a).takeover_mode=l)},{default:n(()=>[t(m,{label:"AI接管",value:1}),t(m,{label:"人工介入",value:0})]),_:1},8,["modelValue"])]),_:1}),o(a).takeover_mode===1?(u(),_(s,{key:0,label:"AI接管机器人",prop:"robot_id"},{default:n(()=>[t(S,{modelValue:o(a).robot_id,"onUpdate:modelValue":e[3]||(e[3]=l=>o(a).robot_id=l),filterable:"",clearable:"",remote:"",placeholder:"请选择接管机器人AI",loading:o(i),"remote-method":E},{default:n(()=>[(u(!0),J(P,null,K(o(k),l=>(u(),_(U,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])]),_:1})):T("",!0),t(s,{label:"接管类型",prop:"takeover_type"},{default:n(()=>[t(g,{modelValue:o(a).takeover_type,"onUpdate:modelValue":e[4]||(e[4]=l=>o(a).takeover_type=l)},{default:n(()=>[t(m,{label:"全部",value:0}),t(m,{label:"私聊",value:1})]),_:1},8,["modelValue"])]),_:1}),t(s,{label:"排序",prop:"sort"},{default:n(()=>[t(N,{modelValue:o(a).sort,"onUpdate:modelValue":e[5]||(e[5]=l=>o(a).sort=l),precision:0,min:0,max:100},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["confirm-loading","onConfirm"])}}});export{ce as _};

import{d as V,r as y,cj as i,cx as I,G as p,o as L,b as N,k as r,l,m as o,q as m,s as $,v as D,Z as n,J as h,K as b,Y as g,t as u,aI as S,aJ as U,I as j,aq as P,y as q,ax as z,_ as A}from"./entry.2beb4577.js";import{u as J}from"./knowledge_base.519704cc.js";import{_ as K}from"./doc.vue.4d19b26c.js";import{_ as G}from"./csv.vue.98776bed.js";import{_ as M}from"./web.vue.12bea330.js";import"./index.e8be04c0.js";import"./index.a9d48d33.js";import"./cloneDeep.a23e4277.js";import"./index.vue.478e85a5.js";import"./index.47b30189.js";/* empty css                  *//* empty css                    *//* empty css                     */import"./hook.050168d8.js";import"./file-reader.7514380a.js";import"./text-splitter.ed74dd16.js";import"./data-item.730808cc.js";import"./csv-item.f8b43fc2.js";const R={class:"h-full bg-white rounded-[20px] overflow-x-auto dynamic-scroller"},W={class:"h-full flex flex-col min-w-[800px]"},Y={class:"flex-shrink-0 flex items-center justify-between px-[14px] h-[88px] border-b border-[#0000000d]"},Z={class:"flex items-center gap-1"},H={class:"p-3"},O={class:"grid grid-cols-2 xl:grid-cols-3 gap-4"},Q=["onClick"],X={class:"flex items-center gap-2"},ee={class:"text-base"},oe={class:"text-[#00000080]"},te={class:"text-[#00000080] mt-3"},se={class:"grow min-h-0 flex flex-col"},ne=V({__name:"vector-panel",props:{knName:{default:""},knId:{default:""}},emits:["back","success"],setup(k,{emit:w}){const B=k,_=w,d=y([{type:1,name:"通用文档导入",desc:"选择文本文件，直接按其分段进行处理",uploadType:"支持 .txt , docx, .pdf, .md",icon:"local-icon-document2",component:i(K),data:[]},{type:2,name:"问答对导入",desc:"批量导入问答对，效果最佳",uploadType:"支持 .excel , csv",icon:"local-icon-word",component:i(G),data:[]},{type:4,name:"网页解析",desc:"输入网页链接，快速导入内容",uploadType:"支持 url链接",icon:"local-icon-sand_lock",component:i(M),data:[]}]),a=y(1),C=t=>{a.value=t},f=()=>{_("back")},{lockFn:E,isLock:F}=I(async()=>{const t=d.value.find(s=>s.type==a.value),c=t.data.every(s=>!s.data.length);if(!t||!t.data.length||c){p.msgWarning("请先添加数据");return}try{await J({kb_id:B.knId,method:a.value,documents:t.data}),p.msgSuccess("添加成功"),_("success"),f()}catch(s){p.msgError(s)}}),x=t=>(t.preventDefault(),t.returnValue="请勿刷新页面","请勿刷新页面");return L(()=>{window.addEventListener("beforeunload",x)}),N(()=>{window.removeEventListener("beforeunload",x)}),(t,c)=>{const s=q,T=z;return r(),l("div",R,[o("div",W,[o("div",Y,[o("div",{class:"flex items-center gap-2 cursor-pointer",onClick:f},[m(s,{name:"el-icon-ArrowLeft"}),c[0]||(c[0]=o("div",null,"返回上一步",-1))]),o("div",Z,[m(T,{type:"primary",class:"!rounded-full !h-10 w-[98px]",loading:n(F),onClick:n(E)},{default:$(()=>[...c[1]||(c[1]=[D(" 提交 ",-1)])]),_:1},8,["loading","onClick"])])]),o("div",H,[o("div",O,[(r(!0),l(h,null,b(n(d),e=>(r(),l("div",{key:e.type,class:g(["rounded-xl p-4 cursor-pointer",[n(a)==e.type?"bg-[#0065fb0d] shadow-[0_0_0_1px_var(--color-primary)]":"bg-[#f6f6f6] shadow-[0_0_0_1px_#EFEFEF]"]]),onClick:v=>C(e.type)},[o("div",X,[o("div",{class:g(["flex-shrink-0 w-[50px] h-[50px] flex items-center justify-center rounded-md border border-[#0000001a]",[n(a)==e.type?"bg-[#0065FB] text-white":"text-black"]])},[m(s,{name:e.icon,size:24},null,8,["name"])],2),o("div",null,[o("div",ee,u(e.name),1),o("div",oe,u(e.desc),1)])]),o("div",te,u(e.uploadType),1)],10,Q))),128))])]),o("div",se,[(r(!0),l(h,null,b(n(d),e=>S((r(),j(P(e.component),{key:e.type,modelValue:e.data,"onUpdate:modelValue":v=>e.data=v},null,8,["modelValue","onUpdate:modelValue"])),[[U,e.type==n(a)]])),128))])])])}}});const we=A(ne,[["__scopeId","data-v-b74d29d7"]]);export{we as default};

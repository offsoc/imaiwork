import{d as A,r as m,c as y,aF as F,k as i,I as K,s as g,m as s,q as a,Z as r,$ as M,v as S,aI as q,l as c,J as R,K as H,cO as J,y as O,au as T,ax as U,_ as Z}from"./entry.d7219633.js";import{_ as G}from"./index.vue.f38ca415.js";import{E as Q}from"./el-empty.77af023a.js";import{u as W}from"./usePaging.3c53b51c.js";import{DigitalHumanModelVersionEnum as X}from"./index.728f9c9c.js";import{E as Y}from"./index.15764a88.js";import"./position.cb246d7d.js";import"./throttle.70466628.js";import"./debounce.085e8a4a.js";const ee={class:"rounded-xl overflow-hidden flex flex-col -my-2"},oe={class:"flex items-center justify-between h-[50px] px-4"},se={class:"flex items-center gap-x-2"},te={class:"w-6 h-6 flex items-center justify-center rounded-md border border-[#ffffff1a]"},le={class:"px-4 my-4"},ne={class:"flex items-center rounded-full h-[50px] border border-[#2a2a2a] px-[5px]"},ie=["infinite-scroll-disabled"],ae={key:0,class:"grid grid-cols-3 gap-2 p-2"},re=["onClick"],ce={class:"cursor-pointer bg-black w-full relative h-[210px] flex flex-col overflow-hidden rounded-xl shadow-[0_0_0_1px_var(--app-border-color-2)]"},de=["src"],pe={class:"absolute top-2 right-2 z-[1000] w-6 h-6 rounded-full"},fe={key:1,class:"h-full flex items-center justify-center"},ue=A({__name:"video-material",props:{type:{default:"video"}},emits:["close","confirm"],setup(w,{expose:b,emit:k}){const d=w,E=k,v=m();y(()=>d.type==="video"?"视频":"视频结果");const l=F({model_version:X.ADVANCED,status:1,name:"",page_no:1}),C=y(()=>()=>Promise.resolve([])),V=m(!0),{pager:p,getLists:x,resetPage:I}=W({fetchFun:C.value,params:l,isScroll:!0}),n=m([]),f=()=>{I()},u=o=>n.value.some(e=>e.id==o.id),$=o=>{if(d.type==="video-result"){u(o)?n.value=[]:n.value=[o];return}u(o)?n.value=n.value.filter(e=>e.id!==o.id):n.value.push(o)},B=async()=>{l.page_no+=1,await x()},L=async()=>{var o;(o=v.value)==null||o.open();try{d.type==="video"?l.status=6:(l.status=1,l.model_version=""),x()}finally{V.value=!1}},_=()=>{E("close")};return b({open:L,close:_}),(o,e)=>{const h=O,j=G,D=T,N=U,P=Q,z=Y;return i(),K(J,{ref_key:"popupRef",ref:v,width:"528px",class:"choose-anchor-popup",style:{padding:"0","background-color":"var(--app-bg-color-2)","box-shadow":"0px 0px 0px 1px var(--app-border-color-2)"},"cancel-button-text":"","confirm-button-text":"","show-close":!1,onClose:_},{default:g(()=>[s("div",ee,[s("div",oe,[s("div",se,[s("div",te,[a(h,{name:"local-icon-windows",size:14})]),e[4]||(e[4]=s("div",{class:"text-[20px] text-white font-bold"},"素材库",-1))]),s("div",{class:"w-6 h-6",onClick:_},[a(j)])]),s("div",le,[s("div",ne,[a(D,{modelValue:r(l).name,"onUpdate:modelValue":e[0]||(e[0]=t=>r(l).name=t),class:"flex-1 search-input",clearable:"","prefix-icon":"el-icon-Search",placeholder:"请输入视频名称","input-style":"color: #ffffff",onClear:e[1]||(e[1]=t=>f()),onKeyup:e[2]||(e[2]=M(t=>f(),["enter"]))},null,8,["modelValue"]),a(N,{type:"primary",class:"!text-white !rounded-full !w-[116px] !h-10",onClick:e[3]||(e[3]=t=>f())},{default:g(()=>e[5]||(e[5]=[S(" 搜索 ",-1)])),_:1,__:[5]})])]),q((i(),c("div",{class:"h-[600px] overflow-y-auto relative dynamic-scroller","infinite-scroll-immediate":!1,"infinite-scroll-disabled":!r(p).isLoad,"infinite-scroll-distance":10},[r(p).lists.length>0?(i(),c("div",ae,[(i(!0),c(R,null,H(r(p).lists,t=>(i(),c("div",{key:t.id,onClick:_e=>$(t)},[s("div",ce,[s("video",{src:t.upload_video_url,class:"w-full h-full object-cover"},null,8,de),s("div",pe,[a(h,{name:"local-icon-success_fill",size:20,color:u(t.id)?"var(--color-primary)":"#ffffff1a"},null,8,["color"])])])],8,re))),128))])):(i(),c("div",fe,[a(P,{description:"暂无数据"})]))],8,ie)),[[z,B]])])]),_:1},512)}}});const Ee=Z(ue,[["__scopeId","data-v-985fc741"]]);export{Ee as default};

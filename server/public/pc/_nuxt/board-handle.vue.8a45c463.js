import{E as x,a as A}from"./index.79f7263c.js";import{d as B,r as u,aF as O,c as q,k as a,I as f,s as d,m as U,q as i,Z as l,l as p,K as R,J as g,L,ay as Y,cP as D,av as H}from"./entry.d9d53b29.js";/* empty css                  *//* empty css               *//* empty css                     */import{BoardHandleTypeEnum as m}from"./index.a1206616.js";const G=B({__name:"board-handle",props:{wechatId:{},stageLists:{},flowLists:{},stageId:{},flowId:{}},emits:["confirm","close"],setup(V,{expose:y,emit:C}){const s=V,k=C,I=u(),o=O({stage_id:s.stageId,flow_id:s.flowId,wechat_id:s.wechatId,to_flow_id:"",to_stage_id:"",friend_id:[]}),F=u(),w=u(m.CLEAR),S={to_stage_id:[{required:!0,message:"请选择转移到的阶段"}],to_flow_id:[{required:!0,message:"请选择转移到的流程"}]},c=u([]),_=u([]),T=q(()=>{var n;return(n=_.value.find(t=>t.id==o.to_flow_id))==null?void 0:n.key_stages}),h=n=>{var t;w.value=n,(t=I.value)==null||t.open(),n==m.TRANSFER?(c.value=s.stageLists.filter(r=>r.id!=s.stageId),o.to_flow_id=s.flowId,c.value.length>0&&(o.to_stage_id=c.value[0].id)):n==m.TRANSFER_TO_CYCLE&&(_.value=s.flowLists.filter(r=>r.id!=s.flowId),_.value.length>0&&(o.to_flow_id=_.value[0].id))},v=()=>{k("close")},N=async()=>{k("confirm",o),v()};return y({open:h,close:v}),(n,t)=>{const r=x,b=A,E=H;return a(),f(D,{ref_key:"popupRef",ref:I,async:"",width:"500px",onClose:v,onConfirm:N},{default:d(()=>[U("div",null,[i(l(Y),{ref_key:"formRef",ref:F,model:l(o),"label-position":"top",rules:S},{default:d(()=>[l(w)==l(m).TRANSFER?(a(),f(E,{key:0,label:"请选择转移到本流程的其它阶段"},{default:d(()=>[i(b,{modelValue:l(o).to_stage_id,"onUpdate:modelValue":t[0]||(t[0]=e=>l(o).to_stage_id=e),placeholder:"请选择",filterable:"",clearable:""},{default:d(()=>[(a(!0),p(g,null,R(l(c),e=>(a(),f(r,{key:e.id,label:e.sub_stage_name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):L("",!0),l(w)==l(m).TRANSFER_TO_CYCLE?(a(),p(g,{key:1},[i(E,{label:"请选择已有的流程"},{default:d(()=>[i(b,{modelValue:l(o).to_flow_id,"onUpdate:modelValue":t[1]||(t[1]=e=>l(o).to_flow_id=e),placeholder:"请选择已有的流程"},{default:d(()=>[(a(!0),p(g,null,R(l(_),e=>(a(),f(r,{key:e.id,label:e.flow_name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),i(E,{label:"请选择对应流程的阶段"},{default:d(()=>[i(b,{modelValue:l(o).to_stage_id,"onUpdate:modelValue":t[2]||(t[2]=e=>l(o).to_stage_id=e),placeholder:"请选择对应流程的阶段",disabled:!l(o).to_flow_id},{default:d(()=>[(a(!0),p(g,null,R(l(T),e=>(a(),f(r,{key:e.id,label:e.sub_stage_name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1})],64)):L("",!0)]),_:1},8,["model"])])]),_:1},512)}}});export{G as _};

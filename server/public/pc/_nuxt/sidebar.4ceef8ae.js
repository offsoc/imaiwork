import{d as R,r as T,aF as j,c as v,cq as J,k as i,l as p,m as o,q as l,s as a,J as K,K as U,Y as W,Z as r,L as x,t as g,a0 as h,I as Y,v as Z,cP as H,G as O,y as Q,aw as X,ax as ee,au as oe,av as te,ay as se,_ as ne}from"./entry.d9d53b29.js";import{E as le}from"./index.890e9d1e.js";import{E as ae}from"./index.050c9b6b.js";/* empty css                   *//* empty css                     */import{useCate as re,useFile as ie}from"./useMaterial.86feed62.js";import"./usePaging.64764a63.js";import"./person_wechat.8bcf26fc.js";import"./index.cf59f1a8.js";const ce={class:"w-full h-full flex flex-col bg-white rounded-xl"},de={class:"grow min-h-0 pt-5"},pe=["onClick"],me={key:0,class:"absolute left-0 top-0 h-full w-[2px] bg-primary"},ue={class:"w-5"},_e={class:"flex-1 flex items-center gap-x-2 w-0 ml-4"},fe={class:"overflow-hidden text-ellipsis whitespace-nowrap"},ve={class:"text-[#A5ADC7]"},xe={class:"p-2"},ge={class:"flex flex-col gap-1"},he=["onClick"],ke=["onClick"],Ee={class:"flex-shrink-0 h-[53px] flex justify-center items-center px-4"},we=R({__name:"sidebar",setup(ye){const{currentGroupId:m,cateLists:k,handleAddGroup:E,handleGroupSelect:w,handleDeleteGroup:y,handleEditGroup:b,getCateLists:u}=re(),{queryParams:C,getLists:F}=ie(),c=T(),t=j({id:void 0,name:""}),_=v(()=>t.id!==void 0),S=v(()=>_.value?"修改分组":"添加分组"),G=s=>{C.group_id=s.id,w(s),F()},I=()=>{var s;t.id=void 0,t.name="",(s=c.value)==null||s.open()},L=s=>{var e;t.id=s.id,t.name=s.group_name,(e=c.value)==null||e.open()},D=async()=>{var s;if(!t.name.trim()){O.msgError("请输入分组名称");return}try{_.value?await b(t.name,t.id):await E(t.name),(s=c.value)==null||s.close(),await u()}catch(e){console.error("提交分组失败:",e)}},{isLock:V,lockFn:A}=J(D);return u(),(s,e)=>{const d=Q,B=le,M=ae,N=X,P=ee,$=oe,q=te,z=se;return i(),p("div",ce,[o("div",de,[l(M,null,{default:a(()=>[o("div",null,[(i(!0),p(K,null,U(r(k),n=>(i(),p("div",{key:n.id,class:W(["h-12 px-5 relative cursor-pointer flex items-center",{"bg-[#E5F0FF]":r(m)===n.id}]),onClick:f=>G(n)},[r(m)===n.id?(i(),p("div",me)):x("",!0),o("div",ue,[l(d,{name:"local-icon-file_fill",color:"var(--color-primary)",size:18})]),o("div",_e,[o("span",fe,g(n.group_name),1),o("span",ve,"("+g(n.file_count||0)+")",1)]),o("div",{class:"flex-shrink-0",onClick:e[0]||(e[0]=h(()=>{},["stop"]))},[n.id>0?(i(),Y(B,{key:0,"show-arrow":!1,"popper-class":"!w-[130px] !min-w-[130px] !p-[6px] !rounded-xl",placement:"bottom-end"},{reference:a(()=>[o("div",xe,[l(d,{name:"el-icon-MoreFilled",color:"#A5ADC7"})])]),default:a(()=>[o("div",ge,[o("div",{class:"px-3 py-2 hover:bg-primary-light-9 rounded-lg cursor-pointer flex items-center gap-2",onClick:f=>L(n)},[l(d,{name:"el-icon-Setting"}),e[3]||(e[3]=o("span",null,"修改分组",-1))],8,he),o("div",{class:"px-3 py-2 hover:bg-primary-light-9 rounded-lg cursor-pointer flex items-center gap-2 text-error",onClick:f=>r(y)(n.id)},[l(d,{name:"el-icon-Delete"}),e[4]||(e[4]=o("span",null,"删除分组",-1))],8,ke)])]),_:2},1024)):x("",!0)])],10,pe))),128))])]),_:1})]),l(N,{class:"!my-0"}),o("div",Ee,[l(P,{onClick:I},{default:a(()=>e[5]||(e[5]=[Z("添加分组",-1)])),_:1,__:[5]})]),l(H,{ref_key:"popupRef",ref:c,title:S.value,async:!0,"confirm-loading":r(V),onConfirm:r(A)},{default:a(()=>[o("div",null,[l(z,{model:t,onSubmit:e[2]||(e[2]=h(()=>{},["prevent"]))},{default:a(()=>[l(q,{label:"分组名称"},{default:a(()=>[l($,{modelValue:t.name,"onUpdate:modelValue":e[1]||(e[1]=n=>t.name=n),placeholder:"请输入分组名称",maxlength:"20","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1},8,["title","confirm-loading","onConfirm"])])}}});const Ae=ne(we,[["__scopeId","data-v-6ca94617"]]);export{Ae as default};

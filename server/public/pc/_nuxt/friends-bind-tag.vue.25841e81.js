import{E as P,a as T}from"./index.52e544f1.js";import{d as V,r as c,aF as q,cq as B,G as _,k as i,I as p,s as l,q as m,Z as t,l as I,K as S,J as O,cP as G,av as H,ay as J}from"./entry.46557796.js";/* empty css                  *//* empty css               *//* empty css                     */import K from"./useHandle.beb30b0b.js";const D=V({__name:"friends-bind-tag",emits:["success","close"],setup(N,{expose:u,emit:f}){const g=f,{wechatTagLists:F,addFriendTag:k,getWechatTagLists:E}=K(),n=c(null),b=c(!1),a=q({tag_ids:[]}),d=c(),v={tag_ids:[{required:!0,message:"请选择标签"}]},y=async()=>{var e;(e=n.value)==null||e.open(),E()},x=()=>{g("close")},{lockFn:h,isLock:w}=B(async()=>{var e,o;await((e=d.value)==null?void 0:e.validate());try{await k({tag_ids:a.tag_ids}),b.value=!1,a.tag_ids=[],(o=n.value)==null||o.close(),_.msgSuccess("添加标签成功")}catch(r){_.msgError(r)}});return u({open:y}),(e,o)=>{const r=P,C=T,L=H,R=J;return i(),p(G,{ref_key:"tagPopRef",ref:n,title:"添加标签",async:"",width:"487px","confirm-button-text":"确认添加","confirm-loading":t(w),onConfirm:t(h),onClose:x},{default:l(()=>[m(R,{ref_key:"tagFormRef",ref:d,model:t(a),"label-position":"top",rules:v},{default:l(()=>[m(L,{label:"请选择标签",prop:"tag_ids"},{default:l(()=>[m(C,{modelValue:t(a).tag_ids,"onUpdate:modelValue":o[0]||(o[0]=s=>t(a).tag_ids=s),placeholder:"请选择标签",multiple:"",filterable:"",clearable:""},{default:l(()=>[(i(!0),I(O,null,S(t(F),s=>(i(),p(r,{key:s.id,label:s.tag_name,value:s.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["confirm-loading","onConfirm"])}}});export{D as _};

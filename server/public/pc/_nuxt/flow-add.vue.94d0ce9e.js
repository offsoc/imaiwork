import{d as V,r as f,aF as I,cx as h,G as d,k as C,I as R,s as c,m as a,q as r,v as m,Z as t,ay as b,cV as B,y as N,au as q,av as L}from"./entry.ca4d3d61.js";import{aF as $}from"./person_wechat.703f63bb.js";const z={class:"bg-primary-light-9 p-2 rounded-xl flex items-center gap-2"},A={class:"mt-4"},T=V({__name:"flow-add",emits:["close","success"],setup(D,{expose:u,emit:_}){const i=_,p=f(),n=I({flow_name:""}),x={flow_name:[{required:!0,message:"请输入流程名称"},{validator:(o,e,s)=>{/^[\u4e00-\u9fa5]+$/.test(e)||s(new Error("流程名称只能是汉字")),s()}}]},l=f(),{lockFn:v,isLock:w}=h(async()=>{var o,e;await((o=p.value)==null?void 0:o.validate());try{await $(n),d.msgSuccess("流程创建成功"),(e=l.value)==null||e.close(),i("success")}catch(s){d.msgError(s)}}),g=()=>{var o;(o=l.value)==null||o.open()},y=()=>{i("close")};return u({open:g}),(o,e)=>{const s=N,k=q,F=L;return C(),R(B,{ref_key:"popupRef",ref:l,title:"新建客户流程",width:"500px",async:"","confirm-loading":t(w),onClose:y,onConfirm:t(v)},{default:c(()=>[a("div",null,[a("div",z,[r(s,{name:"local-icon-tip",color:"var(--color-primary)",size:20}),e[1]||(e[1]=a("div",{class:"text-[#636363]"},[m(" 请注意，流程名称"),a("span",{class:"text-error"},"不可重复"),m("；流程名称请勿超过"),a("span",{class:"text-error"},"15个汉字"),m("； ")],-1))]),a("div",A,[r(t(b),{ref_key:"formRef",ref:p,model:t(n),rules:x,"label-position":"top"},{default:c(()=>[r(F,{label:"流程名称",prop:"flow_name"},{default:c(()=>[r(k,{modelValue:t(n).flow_name,"onUpdate:modelValue":e[0]||(e[0]=E=>t(n).flow_name=E),placeholder:"请输入流程名称",maxlength:"15"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])])]),_:1},8,["confirm-loading","onConfirm"])}}});export{T as _};

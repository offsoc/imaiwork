import{d as w,r as c,bA as b,k as l,I as k,s as R,m as t,aI as h,Z as i,l as p,L as B,cV as C,cW as A,er as I,G as L,es as Q}from"./entry.ca4d3d61.js";import{u as V}from"./usePolling.0c0a09f2.js";const D={class:"flex flex-col gap-y-4"},N={class:"rounded-[10px] bg-white p-5 flex flex-col items-center"},P={class:"w-[250px] h-[250px] mt-[28px]"},S=["src"],U=w({__name:"device-add",props:{bindLoading:{type:Boolean}},emits:["close","confirm"],setup(q,{expose:u,emit:f}){const d=f,s=c(!1),r=c(null),o=c(""),{start:m,end:a}=V(async()=>{(await I()).status==1&&(a(),d("confirm"),L.msgSuccess("绑定成功"))},{time:4500}),x=async()=>{s.value=!0;try{const n=await Q();o.value=n.url,m()}finally{s.value=!1}},_=()=>{r.value.open(),x()},v=()=>{d("close"),a()};return b(()=>a()),u({open:_}),(n,e)=>{const g=C,y=A;return l(),k(g,{ref_key:"popupRef",ref:r,title:"添加AI智能设备",async:"",width:"500px","confirm-button-text":"",onClose:v},{default:R(()=>[t("div",D,[t("div",N,[e[0]||(e[0]=t("div",{class:"text-xl font-bold"},"设备绑定码",-1)),e[1]||(e[1]=t("div",{class:"text-xl text-[#0000004d] mt-[10px]"},"请勿与任何人分享此代码",-1)),h((l(),p("div",P,[i(o)?(l(),p("img",{key:0,src:i(o),class:"w-full h-full rounded-[10px]"},null,8,S)):B("",!0)])),[[y,i(s)]]),e[2]||(e[2]=t("div",{class:"font-bold mt-5"},"请前往RPA启用摄像头扫描此二维码",-1))])])]),_:1},512)}}});export{U as _};

import{d as O,as as X,x as ee,aF as oe,r as g,A as N,cq as te,o as se,k as _,l as le,m as o,q as s,s as a,Z as n,bK as K,Y as A,a0 as R,L as k,v as d,aI as ae,I as h,t as ne,J as ie,aH as E,G as m,y as re,ax as de,cQ as me,u as ce,_ as pe}from"./entry.46557796.js";import{E as ue,a as fe}from"./el-collapse.849b2f00.js";import{E as _e}from"./el-empty.db5857ba.js";import{E as ve}from"./el-slider.239593a3.js";import{E as we}from"./el-input-number.2848ce7e.js";import{E as xe,a as ye}from"./index.5f8d7d98.js";import{_ as ge}from"./index.vue.383c1815.js";import{E as ke}from"./index.304400de.js";/* empty css                        *//* empty css               *//* empty css                 *//* empty css                     */import{u as he}from"./usePaging.3ef28349.js";import{t as Ee,v as Ce}from"./agent.a3fcedc5.js";import{_ as be}from"./keywords-edit.vue.057a7218.js";import{_ as Ve}from"./workflow-edit.vue.acbe937d.js";import{_ as Ne}from"./import-data.vue.3b75ca00.js";import"./index.89b03c7c.js";import"./debounce.22e3311f.js";import"./index.08e202f9.js";import"./_baseIteratee.6084bee0.js";import"./index.1d76ef55.js";import"./index.52e544f1.js";import"./index.c76cd001.js";import"./strings.1c189114.js";import"./index.vue.520aef1d.js";import"./add-content.34d91834.js";import"./el-tabs.0dd2047f.js";import"./index.6e98cf6f.js";import"./el-alert.ec09dd2d.js";import"./index.816355b6.js";import"./index.vue.4fd7b3ea.js";import"./index.c84588fb.js";import"./index.fdfb054e.js";import"./index.6c2ab172.js";import"./cloneDeep.18da6720.js";/* empty css                  *//* empty css                    *//* empty css                  */import"./el-image.663be0a1.js";import"./el-image-viewer.4c392e93.js";import"./throttle.f2fe0ca7.js";import"./position.bb07cf08.js";import"./index.vue.7b7084b3.js";/* empty css                   */import"./arrow_down.70a5466c.js";import"./dom.7f5b5a10.js";import"./index.cf59f1a8.js";import"./emoji.vue.a9dcd8db.js";import"./useHandle.beb30b0b.js";import"./person_wechat.8bcf26fc.js";import"./mini-program-card.vue.7cccd646.js";import"./material-picker.vue.dbd2148f.js";import"./index.vue.94992955.js";import"./sidebar.22f9e609.js";import"./useMaterial.f57939ae.js";import"./container.79644375.js";/* empty css                  */import"./upload.cf61b504.js";import"./preview.vue.ec784ac8.js";import"./link-card.vue.fa6a35e1.js";import"./file-card.vue.6c632466.js";import"./el-steps.abe8cd06.js";const Be={class:"h-full flex flex-col py-6"},Se={class:"grow min-h-0"},Ie={class:"px-[30px]"},$e={class:"mt-3"},De={class:"leading-5"},Fe={class:"flex items-center gap-x-2"};const Ke={class:"leading-5"},Ae={class:"flex items-center gap-x-2"},Re={class:"flex items-center justify-between gap-x-6 mb-2 px-4"},je={class:"flex items-center w-full gap-x-4"},ze={class:"flex-1"},Le={class:"border border-[var(--el-border-color-lighter)] rounded-lg"},Me={class:"h-[64px] flex justify-center items-center"},Ue={class:"flex items-center justify-center mt-4"},We=O({__name:"index",props:X({modelValue:{},agentId:{default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(B){const v=B,S=ce(),r=ee(B,"modelValue"),j=oe({keyword:"",robot_id:v.agentId}),{pager:c,getLists:p}=he({fetchFun:Ee,params:j}),u=g([]),C=g(!1),b=N(),Pe=async l=>{var e,i;C.value=!0,await E(),(e=b.value)==null||e.open(),l&&((i=b.value)==null||i.setFormData(l))},z=l=>{v.modelValue.flow_status=1,v.modelValue.flow_config=l},Te=()=>{S.$confirm({message:"确定删除该工作流吗？",onConfirm:async()=>{try{r.value.flow_status=0,r.value.flow_config={workflow_id:"",bot_id:"",app_id:"",api_token:""},m.msgSuccess("删除成功")}catch{m.msgError("删除失败")}}})},w=g(!1),x=N(),L=async()=>{var l;w.value=!0,await E(),(l=x.value)==null||l.open()},I=async l=>{var e,i;w.value=!0,await E(),(e=x.value)==null||e.open(),(i=x.value)==null||i.setFormData(l)},M=async l=>{await S.$confirm({message:"确定删除该问答话术吗？",onConfirm:async()=>{try{await Ce({id:l}),m.msgSuccess("删除成功"),p()}catch{m.msgError("删除失败")}}})},V=g(!1),$=N(),U=async()=>{var l;V.value=!0,await E(),(l=$.value)==null||l.open()},W=async()=>{try{m.msgSuccess("保存成功")}catch(l){m.msgError(l||"提交失败")}},{lockFn:P,isLock:T}=te(W);return se(()=>{p()}),(l,e)=>{const i=re,D=ue,qe=_e,q=ve,G=we,f=de,y=xe,H=ye,J=ge,Q=fe,Y=ke,Z=me;return _(),le(ie,null,[o("div",Be,[o("div",Se,[s(Y,null,{default:a(()=>[o("div",Ie,[e[23]||(e[23]=o("div",{class:"font-bold"},"技能",-1)),o("div",$e,[s(Q,{modelValue:n(u),"onUpdate:modelValue":e[8]||(e[8]=t=>K(u)?u.value=t:null)},{default:a(()=>[s(D,{name:"1",disabled:""},{title:a(()=>[o("div",De,[o("div",Fe,[o("span",{class:A(["transition-all duration-300",{"rotate-180":n(u).includes("1")}])},[s(i,{name:"el-icon-ArrowUp",color:"#00000080"})],2),e[12]||(e[12]=o("span",null,"插件",-1)),e[13]||(e[13]=o("span",{class:"text-xs text-white bg-[#FF8D1A] px-[6px] py-[2px] rounded inline-block"}," 功能开发中 ",-1))]),e[14]||(e[14]=o("div",{class:"text-[#00000080] mt-1"}," 插件能够让智能体调用外部 API，例如搜索信息、浏览网页、生成图片等，扩展智能体的能力和使用场景。 ",-1))])]),icon:a(()=>[o("div",{class:"w-5 h-5 bg-[#ECECEC] flex items-center justify-center rounded",onClick:e[0]||(e[0]=R(()=>{},["stop"]))},[s(i,{name:"el-icon-Plus",size:12})])]),_:1}),k("",!0),s(D,{name:"3"},{title:a(()=>[o("div",Ke,[o("div",Ae,[o("span",{class:A(["transition-all duration-300",{"rotate-180":n(u).includes("3")}])},[s(i,{name:"el-icon-ArrowUp",color:"#00000080"})],2),e[17]||(e[17]=o("span",null,"固定话术",-1))]),e[18]||(e[18]=o("div",{class:"text-[#00000080] mt-1"}," 固定话术是智能体在对话过程中，根据用户输入的特定关键词，自动回复的固定内容。 ",-1))])]),icon:a(()=>[o("div",{class:"w-5 h-5 bg-[#ECECEC] flex items-center justify-center rounded cursor-pointer",onClick:e[3]||(e[3]=R(t=>L(),["stop"]))},[s(i,{name:"el-icon-Plus",size:12})])]),default:a(()=>[o("div",Re,[o("div",je,[o("div",ze,[s(q,{modelValue:r.value.threshold,"onUpdate:modelValue":e[4]||(e[4]=t=>r.value.threshold=t),min:0,max:1,step:.01},null,8,["modelValue"])]),s(G,{modelValue:r.value.threshold,"onUpdate:modelValue":e[5]||(e[5]=t=>r.value.threshold=t),"controls-position":"right",min:0,max:1,step:.01},null,8,["modelValue"])]),s(f,{type:"primary",onClick:e[6]||(e[6]=t=>U())},{default:a(()=>e[19]||(e[19]=[d("批量导入",-1)])),_:1,__:[19]})]),o("div",Le,[ae((_(),h(H,{data:n(c).lists,stripe:"","header-row-style":{height:"62px"},"row-style":{height:"50px"},"max-height":"300px"},{default:a(()=>[s(y,{label:"匹配模式",width:"120"},{default:a(({row:t})=>[d(ne(t.match_type===0?"模糊匹配":"精确匹配"),1)]),_:1}),s(y,{label:"匹配内容",prop:"keyword","min-width":"200"}),s(y,{label:"回复内容","min-width":"300"},{default:a(({row:t})=>[s(f,{link:"",type:"primary",onClick:F=>I(t)},{default:a(()=>e[20]||(e[20]=[d(" 点击查看 ",-1)])),_:2,__:[20]},1032,["onClick"])]),_:1}),s(y,{label:"操作",width:"120",fixed:"right"},{default:a(({row:t})=>[s(f,{link:"",type:"primary",onClick:F=>I(t)},{default:a(()=>e[21]||(e[21]=[d(" 编辑 ",-1)])),_:2,__:[21]},1032,["onClick"]),s(f,{link:"",type:"danger",onClick:F=>M(t.id)},{default:a(()=>e[22]||(e[22]=[d(" 删除 ",-1)])),_:2,__:[22]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[Z,n(c).loading]])]),o("div",Me,[s(J,{modelValue:n(c),"onUpdate:modelValue":e[7]||(e[7]=t=>K(c)?c.value=t:null),layout:"prev, pager, next",onChange:n(p)},null,8,["modelValue","onChange"])])]),_:1})]),_:1},8,["modelValue"])])])]),_:1})]),o("div",Ue,[s(f,{type:"primary",class:"w-[318px] !rounded-full !h-[50px]",loading:n(T),onClick:n(P)},{default:a(()=>e[24]||(e[24]=[d(" 保存 ",-1)])),_:1,__:[24]},8,["loading","onClick"])])]),n(w)?(_(),h(be,{key:0,ref_key:"keywordsEditRef",ref:x,onClose:e[9]||(e[9]=t=>w.value=!1),onSuccess:n(p)},null,8,["onSuccess"])):k("",!0),n(C)?(_(),h(Ve,{key:1,ref_key:"workflowEditRef",ref:b,onClose:e[10]||(e[10]=t=>C.value=!1),onSuccess:z},null,512)):k("",!0),n(V)?(_(),h(Ne,{key:2,ref_key:"importKeywordsRef",ref:$,title:"批量导入关键词","agent-id":v.agentId,onClose:e[11]||(e[11]=t=>V.value=!1),onSuccess:n(p)},null,8,["agent-id","onSuccess"])):k("",!0)],64)}}});const tt=pe(We,[["__scopeId","data-v-a32aba08"]]);export{tt as default};

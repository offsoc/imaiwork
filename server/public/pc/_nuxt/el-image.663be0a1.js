import{Q as X,S as z,U as _,aU as ee,d as F,V as se,W as ae,c8 as re,c as l,c9 as oe,ca as te,r as d,aT as m,O as ne,D as le,o as ie,k as i,l as f,H as g,m as T,t as ce,Z as s,Y as E,J as V,al as j,L as y,I as ue,ak as de,s as I,bB as H,bC as M,aa as fe,aH as ve,bj as pe,ap as me,cb as ge,bd as ye,cc as we,am as he}from"./entry.46557796.js";import{E as Le}from"./el-image-viewer.4c392e93.js";import{i as Se}from"./position.bb07cf08.js";const be=X({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:z([String,Object])},previewSrcList:{type:z(Array),default:()=>_([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},showProgress:Boolean,crossorigin:{type:z(String)}}),ke={load:t=>t instanceof Event,error:t=>t instanceof Event,switch:t=>ee(t),close:()=>!0,show:()=>!0},ze=F({name:"ElImage",inheritAttrs:!1}),Ee=F({...ze,props:be,emits:ke,setup(t,{expose:R,emit:v}){const a=t,{t:D}=se(),n=ae("image"),K=re(),C=l(()=>oe(Object.entries(K).filter(([e])=>/^(data-|on[A-Z])/i.test(e)||["id","style"].includes(e)))),U=te({excludeListeners:!0,excludeKeys:l(()=>Object.keys(C.value))}),h=d(),p=d(!1),c=d(!0),L=d(!1),w=d(),o=d(),Z=m&&"loading"in HTMLImageElement.prototype;let S;const q=l(()=>[n.e("inner"),b.value&&n.e("preview"),c.value&&n.is("loading")]),J=l(()=>{const{fit:e}=a;return m&&e?{objectFit:e}:{}}),b=l(()=>{const{previewSrcList:e}=a;return ne(e)&&e.length>0}),Q=l(()=>{const{previewSrcList:e,initialIndex:r}=a;let u=r;return r>e.length-1&&(u=0),u}),P=l(()=>a.loading==="eager"?!1:!Z&&a.loading==="lazy"||a.lazy),k=()=>{m&&(c.value=!0,p.value=!1,h.value=a.src)};function W(e){c.value=!1,p.value=!1,v("load",e)}function Y(e){c.value=!1,p.value=!0,v("error",e)}function B(){Se(w.value,o.value)&&(k(),$())}const A=we(B,200,!0);async function N(){var e;if(!m)return;await ve();const{scrollContainer:r}=a;pe(r)?o.value=r:me(r)&&r!==""?o.value=(e=document.querySelector(r))!=null?e:void 0:w.value&&(o.value=ge(w.value)),o.value&&(S=ye(o,"scroll",A),setTimeout(()=>B(),100))}function $(){!m||!o.value||!A||(S==null||S(),o.value=void 0)}function O(){b.value&&(L.value=!0,v("show"))}function x(){L.value=!1,v("close")}function G(e){v("switch",e)}return le(()=>a.src,()=>{P.value?(c.value=!0,p.value=!1,$(),N()):k()}),ie(()=>{P.value?N():k()}),R({showPreview:O}),(e,r)=>(i(),f("div",j({ref_key:"container",ref:w},s(C),{class:[s(n).b(),e.$attrs.class]}),[p.value?g(e.$slots,"error",{key:0},()=>[T("div",{class:E(s(n).e("error"))},ce(s(D)("el.image.error")),3)]):(i(),f(V,{key:1},[h.value!==void 0?(i(),f("img",j({key:0},s(U),{src:h.value,loading:e.loading,style:s(J),class:s(q),crossorigin:e.crossorigin,onClick:O,onLoad:W,onError:Y}),null,16,["src","loading","crossorigin"])):y("v-if",!0),c.value?(i(),f("div",{key:1,class:E(s(n).e("wrapper"))},[g(e.$slots,"placeholder",{},()=>[T("div",{class:E(s(n).e("placeholder"))},null,2)])],2)):y("v-if",!0)],64)),s(b)?(i(),f(V,{key:2},[L.value?(i(),ue(s(Le),{key:0,"z-index":e.zIndex,"initial-index":s(Q),infinite:e.infinite,"zoom-rate":e.zoomRate,"min-scale":e.minScale,"max-scale":e.maxScale,"show-progress":e.showProgress,"url-list":e.previewSrcList,crossorigin:e.crossorigin,"hide-on-click-modal":e.hideOnClickModal,teleported:e.previewTeleported,"close-on-press-escape":e.closeOnPressEscape,onClose:x,onSwitch:G},de({toolbar:I(u=>[g(e.$slots,"toolbar",H(M(u)))]),default:I(()=>[e.$slots.viewer?(i(),f("div",{key:0},[g(e.$slots,"viewer")])):y("v-if",!0)]),_:2},[e.$slots.progress?{name:"progress",fn:I(u=>[g(e.$slots,"progress",H(M(u)))])}:void 0]),1032,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","show-progress","url-list","crossorigin","hide-on-click-modal","teleported","close-on-press-escape"])):y("v-if",!0)],64)):y("v-if",!0)],16))}});var Ie=fe(Ee,[["__file","image.vue"]]);const Ae=he(Ie);export{Ae as E};

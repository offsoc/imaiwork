import{d as ae,aF as se,r as c,c as B,aV as ne,G as S,b6 as re,k as i,l as m,m as a,q as r,s as p,Z as s,bK as P,B as ie,J as _,K as g,Y as b,t as f,a0 as pe,L as C,v as U,I as G,aI as me,av as de,y as ce,au as ue,ax as _e,ay as fe}from"./entry.d7219633.js";import{E as ge}from"./el-image.37ed17f2.js";import{E as ve}from"./index.f15af271.js";import{E as xe,a as he}from"./index.50778a9c.js";import{E as be}from"./el-image-viewer.960ba8e6.js";/* empty css                     *//* empty css                  *//* empty css               */import{u as ye}from"./useDictOptions.2e009744.js";import{b as we}from"./drawing.7058a163.js";import{goodsResolutionOptions as y}from"./index.fb0aa6a9.js";import{CopywritingTypeEnum as ke}from"./chatEnum.1c450e0f.js";import{_ as Ce}from"./image-upload.vue.db6765e0.js";import{_ as Ee}from"./case-image-v2.vue.439d4dcc.js";const ze={class:"h-full"},Ie={class:"p-4"},Ve={class:"w-full"},Ae={class:"flex items-center gap-2 text-[11px] text-white"},De=["onClick"],$e={key:0,class:"mt-3 rounded-md bg-app-bg-3 border border-app-border-2 p-[6px]"},Fe={class:"flex items-center gap-2 text-[11px] px-[6px] h-[26px]"},Oe=["onClick"],Re={class:"mt-[6px] h-[232px] bg-app-bg-3 rounded-md shadow-[0_0_0_1px_#2A2A2A]"},Te={class:"grid grid-cols-3 gap-2 p-[6px]"},Be=["onClick"],Se={class:"absolute bottom-0 left-0 right-0 z-10 bg-[rgba(0,0,0,0.05))]"},Pe={class:"text-white text-center text-xs font-bold"},Ue={class:"absolute right-0 top-0 w-full h-full invisible group-hover:visible z-[888] flex items-center justify-center gap-2 bg-[var(--el-overlay-color-lighter)]"},Ge=["onClick"],Ne={key:1,class:"mt-3"},Ke={class:"w-full"},Le={class:"flex items-center gap-2 text-[11px] text-white"},Me=["onClick"],We={class:"w-full flex gap-2"},je={class:"flex-1 flex items-center"},qe={class:"h-11 flex-1 flex items-center gap-x-2 bg-app-bg-3 border border-app-border-2 px-3 rounded-lg"},Je={class:"text-[#ffffff80]"},Ye={class:"h-11 flex-1 flex items-center gap-x-2 bg-app-bg-3 border border-app-border-2 px-3 rounded-lg"},Ze={class:"text-[#ffffff80]"},He={class:"fixed right-4 top-[93px] z-[22]"},ut=ae({__name:"goods-image-form",emits:["update:formData","generatePrompt"],setup(Qe,{expose:N,emit:K}){const E=K,t=se({model:"",image:"",prompt:"",img_count:1,resolution:y[0].value,template_category:"",template_name:"",template_name_zh:""}),z=[{name:"平台优选",id:1},{name:"创意描述",id:2}],u=c(1),v=c(),{optionsData:I}=ye({template:{api:we,transformData:l=>{const{templates:e,categories:n}=l.result;return n.length>0&&(v.value=n[0].category_en),{templates:e,categories:n}}}}),L=B(()=>{const{templates:l}=I.template;return l&&l.length>0?(t.template_name_zh=l[0].name_zh,t.template_category=l[0].category_en,t.template_name=l[0].name_en,l.filter(e=>e.category_en===v.value)):[]}),M=l=>{t.template_category=l.category_en,t.template_name=l.name_en,t.template_name_zh=l.name_zh},w=c(!1),V=c(0),A=c([]),W=(l,e)=>{w.value=!0,e&&(V.value=0,A.value=[e])},j=l=>{E("generatePrompt",{promptId:l,prompt:t.prompt})},q=l=>{t.prompt=l},x=c(y[0].label),D=B(()=>{const[l,e]=x.value.split("*");return{width:l,height:e}}),J=l=>{var e;t.resolution=(e=y.find(n=>n.label===l))==null?void 0:e.value},$=c(),Y=()=>{$.value.open()},Z=l=>{const{images:e,text:n}=l;t.image=e[0],t.prompt=n,t.template_category="",t.template_name="",t.template_name_zh="",u.value=2},h=c("amozon"),F=[{label:"简介风格",key:"amozon"},{label:"经典风格",key:"default"}];return ne(()=>{E("update:formData",t)}),N({getFormData:()=>{var l,e;return{params:{image:t.image,ref_image:[],img_count:t.img_count,prompt:t.prompt,custom_template:"false",resolution:t.resolution,template_category:t.template_category,template_name:t.template_name,template_name_zh:t.template_name_zh,style:h.value},type_name:(l=z.find(n=>n.id===u.value))==null?void 0:l.name,style_name:(e=F.find(n=>n.key===h.value))==null?void 0:e.label}},validateForm:()=>new Promise((l,e)=>{if(!t.image){S.msgWarning("请上传商品图"),e(!1);return}if(u.value===2&&!t.prompt){S.msgWarning("请添加描述"),e(!1);return}l(!0)}),setPrompt:q}),(l,e)=>{const n=de,H=ge,Q=ce,O=ve,R=ue,T=_e,X=xe,ee=he,te=fe,oe=be,le=re("number-input");return i(),m(_,null,[a("div",ze,[r(O,null,{default:p(()=>[a("div",Ie,[r(te,{model:s(t),"label-position":"top"},{default:p(()=>[r(n,null,{default:p(()=>[r(Ce,{"form-data":s(t),"onUpdate:formData":e[0]||(e[0]=o=>P(t)?t.value=o:null),content:"上传商品图","template-video-url":`${s(ie)()}/static/videos/reference-image-tips-goods.mp4`},null,8,["form-data","template-video-url"])]),_:1}),r(n,null,{default:p(()=>[a("div",Ve,[a("div",Ae,[(i(),m(_,null,g(z,(o,d)=>a("div",{class:b(["h-[26px] rounded-md px-[11px] flex items-center cursor-pointer",[s(u)===o.id?"bg-primary":"shadow-[0_0_0_1px_#2A2A2A] bg-app-bg-1 "]]),key:d,onClick:k=>u.value=o.id},f(o.name),11,De)),64))]),s(u)===1?(i(),m("div",$e,[a("div",Fe,[(i(!0),m(_,null,g(s(I).template.categories,o=>(i(),m("div",{class:b(["text-white px-[11px] rounded-md h-[26px] flex items-center cursor-pointer",s(v)===o.category_en?"shadow-[0_0_0_1px_rgba(255,255,255,0.10)] bg-[#262626] ":""]),onClick:d=>v.value=o.category_en},f(o.category_zh),11,Oe))),256))]),a("div",Re,[r(O,null,{default:p(()=>[a("div",Te,[(i(!0),m(_,null,g(s(L),(o,d)=>(i(),m("div",{class:b(["h-[90px] rounded-md overflow-hidden cursor-pointer relative group",{"shadow-[0_0_0_3px_var(--color-primary)]":s(t).template_name_zh==o.name_zh}]),key:d,onClick:k=>M(o)},[r(H,{src:o.img,class:"w-full h-full",fit:"cover",lazy:""},null,8,["src"]),a("div",Se,[a("div",Pe,f(o.name_zh),1)]),a("div",Ue,[a("div",{class:"cursor-pointer absolute top-0 right-0",onClick:pe(k=>W(0,o.img),["stop"])},[r(Q,{name:"local-icon-fullscreen",size:32})],8,Ge)])],10,Be))),128))])]),_:1})])])):C("",!0),s(u)===2?(i(),m("div",Ne,[e[7]||(e[7]=a("div",{class:"flex items-center justify-between mb-3"},[a("div",{class:"text-white"},"添加描述")],-1)),r(R,{modelValue:s(t).prompt,"onUpdate:modelValue":e[1]||(e[1]=o=>s(t).prompt=o),type:"textarea",resize:"none",placeholder:"添加描述",rows:6},null,8,["modelValue"]),r(T,{type:"primary",class:"!rounded-full !h-[50px] w-full mt-3",disabled:!s(t).prompt,onClick:e[2]||(e[2]=o=>j(s(ke).AI_GOODS_IMAGE))},{default:p(()=>e[6]||(e[6]=[U(" 生成提示词 ",-1)])),_:1,__:[6]},8,["disabled"])])):C("",!0)])]),_:1}),r(n,{label:"生成风格"},{default:p(()=>[a("div",Ke,[a("div",Le,[(i(),m(_,null,g(F,(o,d)=>a("div",{class:b(["h-[26px] rounded-md px-[11px] flex items-center cursor-pointer",[s(h)===o.key?"bg-primary":"shadow-[0_0_0_1px_#2A2A2A] bg-app-bg-1 "]]),key:d,onClick:k=>h.value=o.key},f(o.label),11,Me)),64))])])]),_:1}),r(n,null,{label:p(()=>e[8]||(e[8]=[a("div",{class:"flex items-center gap-2 text-white"},[a("span",null,"生成模型")],-1)])),default:p(()=>[a("div",We,[r(ee,{modelValue:s(x),"onUpdate:modelValue":e[3]||(e[3]=o=>P(x)?x.value=o:null),"popper-class":"dark-select-popper",class:"!w-[120px]","show-arrow":!1,onChange:J},{default:p(()=>[(i(!0),m(_,null,g(s(y),(o,d)=>(i(),G(X,{key:d,label:o.label,value:o.label},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),a("div",je,[a("div",qe,[e[9]||(e[9]=a("span",{class:"text-white"},"宽",-1)),a("span",Je,f(s(D).width),1)]),e[11]||(e[11]=a("div",null,"x",-1)),a("div",Ye,[e[10]||(e[10]=a("span",{class:"text-white"},"高",-1)),a("span",Ze,f(s(D).height),1)])])])]),_:1}),r(n,{label:"生成张数"},{default:p(()=>[me(r(R,{modelValue:s(t).img_count,"onUpdate:modelValue":e[4]||(e[4]=o=>s(t).img_count=o),min:"1",max:"4",type:"number",class:"!h-11"},null,8,["modelValue"]),[[le,{decimal:0}]])]),_:1})]),_:1},8,["model"])])]),_:1})]),a("div",He,[r(T,{type:"primary",class:"!rounded-full w-[100px] !h-10",onClick:Y},{default:p(()=>e[12]||(e[12]=[U(" 优秀案例 ",-1)])),_:1,__:[12]})]),s(w)?(i(),G(oe,{key:0,"initial-index":s(V),"url-list":s(A),onClose:e[5]||(e[5]=o=>w.value=!1)},null,8,["initial-index","url-list"])):C("",!0),r(Ee,{ref_key:"caseImageRef",ref:$,type:"goods",onChoose:Z},null,512)],64)}}});export{ut as _};

import{E as F}from"./el-switch.7d8162d3.js";import{E as N}from"./el-input-number.0bb1bb2b.js";import{E as B,a as L}from"./index.8fd3c68c.js";import{d as O,aF as D,r as U,cx as z,o as I,k as r,l as m,m as s,q as i,Z as o,v as u,s as p,J as b,K as E,I as J,bM as R,G as g,ax as M}from"./entry.ee599c70.js";/* empty css                  *//* empty css               *//* empty css                     */import{u as P}from"./useDictOptions.42b4c8c0.js";import{z as j,a2 as q,a3 as A}from"./person_wechat.703f63bb.js";const G={class:"h-full flex flex-col bg-white rounded-xl overflow-hidden"},K={class:"grow min-h-0 px-10 mt-5"},T={class:"flex flex-wrap gap-x-[60px] w-full"},W={class:"w-[45%]"},Z={class:"flex flex-col gap-y-4"},H={class:"mt-2"},Q={class:"mt-2"},X={class:"flex items-center gap-2"},Y={class:"mt-2"},$={class:"flex items-center gap-2"},ee={class:"mt-2 w-full"},se={class:"w-[45%]"},te={class:"flex flex-col gap-y-4"},le={class:"mt-2"},ae={class:"flex justify-center my-4"},ve=O({__name:"friend",setup(oe){const l=D({is_enable:!1,accept_numbers:0,add_interval_time:0,wechat_ids:[],accept_type:0,accept_source:[]}),d=U(),{optionsData:w}=P({wechatLists:{api:j,params:{page_size:999},transformData:a=>a.lists}}),c=[{id:0,label:"不限",value:[]},{id:1,value:["1000003"],label:"通过搜索微信号添加"},{id:2,value:["1000008","1000014"],label:"通过群聊添加"},{id:3,value:["1000015"],label:"通过搜索手机号添加"},{id:4,value:["1000017"],label:"通过名片分享添加"},{id:5,value:["1000030"],label:"通过扫一扫添加"}],y=a=>{const e=c.find(n=>n.id===a);l.accept_source=(e==null?void 0:e.value)||[]},V=async()=>{try{await q(l),g.msgSuccess("保存成功"),f()}catch(a){g.msgError(a||"保存失败")}},{lockFn:k,isLock:S}=z(V),f=async()=>{const a=await A();h(a)},h=async a=>{var e;for(const n in l)a[n]!=null&&a[n]!=null&&(l[n]=a[n]);d.value=(e=c.find(n=>JSON.stringify(n.value)===JSON.stringify(l.accept_source)))==null?void 0:e.id};return I(()=>{f()}),(a,e)=>{const n=F,v=N,x=B,_=L,C=M;return r(),m("div",G,[e[15]||(e[15]=s("div",{class:"h-[48px] bg-primary text-white text-2xl flex items-center px-4"},"策略设置",-1)),s("div",K,[s("div",T,[s("div",W,[s("div",Z,[e[11]||(e[11]=s("div",{class:"flex items-center gap-2"},[s("span",{class:"w-[4px] h-[14px] bg-primary"}),s("span",{class:"text-lg"},"自动同意好友申请")],-1)),s("div",H,[e[5]||(e[5]=s("div",{class:"text-[#9E9E9E] mb-2"},"是否开启",-1)),i(n,{modelValue:o(l).is_enable,"onUpdate:modelValue":e[0]||(e[0]=t=>o(l).is_enable=t),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),s("div",Q,[e[7]||(e[7]=s("div",{class:"text-[#9E9E9E] mb-2"},"每日添加数量",-1)),s("div",X,[i(v,{modelValue:o(l).accept_numbers,"onUpdate:modelValue":e[1]||(e[1]=t=>o(l).accept_numbers=t),precision:0,min:0,size:"small"},null,8,["modelValue"]),e[6]||(e[6]=u("个 ",-1))])]),s("div",Y,[e[9]||(e[9]=s("div",{class:"text-[#9E9E9E] mb-2"},"每添加一个间隔时间",-1)),s("div",$,[i(v,{modelValue:o(l).add_interval_time,"onUpdate:modelValue":e[2]||(e[2]=t=>o(l).add_interval_time=t),precision:0,min:0,size:"small"},null,8,["modelValue"]),e[8]||(e[8]=u("分钟 ",-1))])]),s("div",ee,[e[10]||(e[10]=s("div",{class:"text-[#9E9E9E] mb-2"},"执行微信号",-1)),i(_,{modelValue:o(l).wechat_ids,"onUpdate:modelValue":e[3]||(e[3]=t=>o(l).wechat_ids=t),class:"!w-[70%]",multiple:"",clearable:"",filterable:""},{default:p(()=>[(r(!0),m(b,null,E(o(w).wechatLists,t=>(r(),J(x,{key:t.id,label:t.wechat_nickname,value:t.wechat_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])])]),s("div",se,[s("div",te,[e[13]||(e[13]=s("div",{class:"flex items-center gap-2"},[s("span",{class:"w-[4px] h-[14px] bg-primary"}),s("span",{class:"text-lg"},"同意申请的好友类型")],-1)),s("div",le,[e[12]||(e[12]=s("div",{class:"text-[#9E9E9E] mb-2"},"自动同意策略",-1)),i(_,{modelValue:o(d),"onUpdate:modelValue":e[4]||(e[4]=t=>R(d)?d.value=t:null),class:"!w-[70%]",onChange:y},{default:p(()=>[(r(),m(b,null,E(c,t=>i(x,{key:t.id,label:t.label,value:t.id},null,8,["label","value"])),64))]),_:1},8,["modelValue"])])])])])]),s("div",ae,[i(C,{type:"primary",class:"w-[120px] !h-[40px]",loading:o(S),onClick:o(k)},{default:p(()=>[...e[14]||(e[14]=[u(" 保存 ",-1)])]),_:1},8,["loading","onClick"])])])}}});export{ve as _};

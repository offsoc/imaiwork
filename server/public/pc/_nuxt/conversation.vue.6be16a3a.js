import{E as w}from"./el-avatar.1965756b.js";import{d as U,k as o,l as a,I as _,s as g,q as c,m as t,Z as l,ec as z,L as p,t as f,Y as B,bC as d,e2 as S,y as A}from"./entry.ee599c70.js";import{E as H}from"./el-empty.76498597.js";import{s as I,a as Y}from"./vue-virtual-scroller.esm.a1114c4a.js";/* empty css                             */import L from"./useHandle.953ac7ac.js";const j={class:"h-full"},q=["onClick"],M={class:"w-[42px] h-[42px] flex-shrink-0 relative"},T={key:2,class:"absolute -top-1 -right-1"},V={class:"flex-1"},$={class:"flex justify-between items-center gap-x-2"},F={class:"line-clamp-1 break-all"},O={class:"text-[#949494] text-xs"},Z={class:"flex items-center gap-x-3 mt-1"},G={class:"flex-1 w-0 text-xs text-[#949494] text-ellipsis overflow-hidden whitespace-nowrap h-[18px]"},J={class:""},K={class:"flex items-center gap-x-2"},P={key:0},Q={key:1},R={key:1,class:"flex justify-center items-center h-full"},ce=U({__name:"conversation",props:{conversationList:{default:()=>[]}},emits:["change-friend","bottom-conversation"],setup(h,{emit:y}){const u=y,{currentFriend:i}=L(),k=s=>{var n;((n=i.value)==null?void 0:n.UserName)!==s.UserName&&(i.value=s,u("change-friend",i.value))},b=s=>s?s.substring(s.indexOf(":")+1):"",D=s=>d(s).isSame(d(),"day")?d(s).format("HH:mm"):d(s).format("YYYY/MM/DD"),E=s=>{const{scrollTop:n,scrollHeight:r,clientHeight:m}=s.target;n+m>=r&&u("bottom-conversation")};return(s,n)=>{const r=w,m=S,v=A,C=H;return o(),a("div",j,[h.conversationList.length>0?(o(),_(l(Y),{key:0,class:"h-full pb-4 dynamic-scroller",items:h.conversationList,"min-item-size":66,"key-field":"UserName",onScroll:E},{default:g(({item:e,index:W,active:N})=>[c(l(I),{item:e,active:N},{default:g(()=>{var x;return[t("div",{class:B(["h-[66px] flex items-center px-4 gap-2 hover:bg-[#D3D3D3] cursor-pointer",{"bg-[#D3D3D3]":((x=l(i))==null?void 0:x.UserName)===e.UserName}]),onClick:X=>k(e)},[t("div",M,[e.Avatar?(o(),_(r,{key:0,size:42,shape:"square",src:e.Avatar},null,8,["src"])):(o(),_(r,{key:1,size:42,shape:"square",icon:l(z)},null,8,["icon"])),!e.IsSilent&&e.UnreadCnt>0?(o(),a("div",T,[c(m,{value:e.UnreadCnt,color:"#EA3323","badge-style":{border:"none"}},null,8,["value"])])):p("",!0)]),t("div",V,[t("div",$,[t("div",F,f(e.Memo||e.ShowName),1),t("div",null,[t("span",O,f(D(e.UpdateTime)),1)])]),t("div",Z,[t("div",G,[t("span",J,f(b(e.Digest)),1)]),t("div",K,[e.IsSilent?(o(),a("div",P,[c(v,{name:"local-icon-notification_off",color:"#c7c7c7"})])):p("",!0),e.IsTop?(o(),a("div",Q,[c(v,{name:"local-icon-zhiding",color:"#c7c7c7"})])):p("",!0)])])])],10,q)]}),_:2},1032,["item","active"])]),_:1},8,["items"])):(o(),a("div",R,[c(C,{description:"暂无会话","image-size":100})]))])}}});export{ce as _};

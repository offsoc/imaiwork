import{E as C,a as D}from"./index.79f7263c.js";import{d as N,bM as R,c as j,r as d,aF as O,cq as U,D as z,f as G,k as n,l as v,m as c,q as s,s as l,Z as t,I as y,J,K,v as E,L as M,G as x,av as T,ax as Z,ay as H,bI as P}from"./entry.d9d53b29.js";/* empty css                  *//* empty css               *//* empty css                     */import{E as Q}from"./agent.a3fcedc5.js";import{c as W,a as X}from"./service.12abd78a.js";const Y={class:"h-full flex flex-col"},$={class:"grow min-h-0 w-[600px] px-4"},ee={class:"w-full"},te={class:"flex justify-end mt-2"},oe={class:"flex items-center justify-center my-4"},me=N({__name:"base-setting",emits:["close","success"],setup(ae,{emit:w}){const F=w,i=R(),V=j(()=>i.query.account),_=d(),o=O({account:V.value,takeover_mode:0,robot_id:""}),h={takeover_mode:[{required:!0,message:"请选择接管类型",trigger:"blur"}],robot_id:[{required:!0,message:"请选择接管机器人AI",trigger:"blur"}]},p=d([]),u=d(!1),f=async a=>{u.value=!0;const e=await Q({keyword:a});p.value=e.lists,u.value=!1},A=async()=>{await _.value.validate();try{await W(o),F("success"),x.msgSuccess("保存成功")}catch(a){x.msgError(a||"提交失败")}},{lockFn:I,isLock:L}=U(A),q=async()=>{const a=await X({account:i.query.account});P(a,o)};return z(()=>i.query.account,a=>{a&&(o.account=a,q(),f())},{immediate:!0}),(a,e)=>{const m=C,g=D,k=T,b=Z,S=G("router-link"),B=H;return n(),v("div",Y,[c("div",$,[s(B,{ref_key:"formRef",ref:_,model:t(o),rules:h,"label-position":"top"},{default:l(()=>[s(k,{label:"接管类型",prop:"takeover_mode"},{default:l(()=>[s(g,{modelValue:t(o).takeover_mode,"onUpdate:modelValue":e[0]||(e[0]=r=>t(o).takeover_mode=r),placeholder:"请选择接管类型"},{default:l(()=>[s(m,{label:"人工接管",value:0}),s(m,{label:"AI接管",value:1})]),_:1},8,["modelValue"])]),_:1}),t(o).takeover_mode===1?(n(),y(k,{key:0,label:"接管机器人AI",prop:"robot_id"},{default:l(()=>[c("div",ee,[s(g,{modelValue:t(o).robot_id,"onUpdate:modelValue":e[1]||(e[1]=r=>t(o).robot_id=r),filterable:"",clearable:"",remote:"",placeholder:"请选择接管机器人AI",loading:t(u),"remote-method":f},{default:l(()=>[(n(!0),v(J,null,K(t(p),r=>(n(),y(m,{key:r.id,label:r.name,value:r.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"]),c("div",te,[s(S,{to:"/agent",target:"_blank"},{default:l(()=>[s(b,{link:"",type:"primary",size:"small"},{default:l(()=>e[2]||(e[2]=[E(" 点击这里创建您的专属机器人 > ",-1)])),_:1,__:[2]})]),_:1})])])]),_:1})):M("",!0)]),_:1},8,["model"])]),c("div",oe,[s(b,{type:"primary",class:"w-[166px] !h-[40px]",loading:t(L),onClick:t(I)},{default:l(()=>e[3]||(e[3]=[E(" 保存 ",-1)])),_:1,__:[3]},8,["loading","onClick"])])])}}});export{me as _};

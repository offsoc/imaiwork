import{d as M,ed as S,r as q,aF as I,o as P,k as o,l,m as e,q as a,t as f,Z as n,J as u,K as R,aI as W,I as K,s as i,v as r,Y as z,L as _,bK as G,u as J,G as k,y as O,ax as Q,cP as U}from"./entry.d7219633.js";import{E as Y,a as Z}from"./index.0a6eb9ae.js";import{E as H}from"./el-empty.77af023a.js";import{_ as X}from"./index.vue.5e2341cc.js";/* empty css                        *//* empty css               *//* empty css                 *//* empty css                     */import{u as ee}from"./usePaging.3c53b51c.js";import{i as te,j as se,k as ae}from"./sph.47a77ad4.js";const oe={class:"h-full flex flex-col gap-[10px]"},ne={class:"bg-app-bg-2 rounded-[20px] p-[18px]"},le={class:"flex items-center justify-between mb-4"},ie={class:"flex justify-between gap-x-4"},re={class:"flex flex-col gap-y-3"},ce={class:"text-[#ffffffcc]"},de={class:"text-[#ffffffcc]"},fe={class:"flex"},pe={class:"flex flex-wrap gap-2"},me={class:"grow min-h-0 bg-app-bg-2 rounded-[20px] flex flex-col"},ue={class:"grow min-h-0"},_e={class:"flex items-center justify-center gap-x-2"},ge={class:"flex justify-center items-center h-full"},xe={class:"flex justify-center p-4"},De=M({__name:"detail",emits:["back"],setup(he,{emit:E}){const C=E,x=S(),p=q({}),B=I({id:x.id}),{pager:m,getLists:g}=ee({fetchFun:te,params:B}),j=c=>({0:"bg-danger",2:"bg-[#FFBC50]",1:"bg-[#3BB840]",4:"bg-primary"})[c],V=async c=>{J().$confirm({message:"确定删除该记录吗？",theme:"dark",onConfirm:async()=>{try{await se({id:c}),k.msgSuccess("删除成功"),g()}catch(t){k.msgError(t||"删除失败")}}})},T=async()=>{const c=await ae({id:x.id});p.value=c};return P(async()=>{await T(),await g()}),(c,t)=>{var h,y,v,b,w;const A=O,d=Y,D=Q,F=H,L=Z,N=X,$=U;return o(),l("div",oe,[e("div",ne,[e("div",le,[e("div",{class:"flex items-center gap-2 cursor-pointer",onClick:t[0]||(t[0]=s=>C("back"))},[a(A,{name:"el-icon-ArrowLeft",color:"#ffffff"}),t[2]||(t[2]=e("div",{class:"text-white"},"返回",-1))])]),e("div",ie,[e("div",re,[e("div",null,[t[3]||(t[3]=e("span",{class:"text-[#ffffff80]"},"添加频率：",-1)),e("span",ce,"相隔"+f((h=n(p))==null?void 0:h.add_interval_time)+"分钟添加"+f((y=n(p))==null?void 0:y.add_number)+"个微信号",1)]),e("div",null,[t[4]||(t[4]=e("span",{class:"text-[#ffffff80]"},"微信数量：",-1)),e("span",de,"共有"+f(((b=(v=n(p))==null?void 0:v.wechat_id)==null?void 0:b.length)||0)+"个微信执行该任务",1)]),e("div",fe,[t[5]||(t[5]=e("span",{class:"text-[#ffffff80] flex-shrink-0"},"申请备注：",-1)),e("span",pe,[(o(!0),l(u,null,R((w=n(p))==null?void 0:w.remarks,s=>(o(),l("span",{class:"px-[10px] py-[4px] rounded-md text-[#ffffffcc] shadow-[0_0_0_1px_var(--app-border-color-2)]",key:s},f(s),1))),128))])])])])]),e("div",me,[e("div",ue,[W((o(),K(L,{height:"100%",data:n(m).lists,"header-row-style":{height:"62px"},"row-style":{height:"50px"}},{empty:i(()=>[e("div",ge,[a(F,{description:"暂无数据"})])]),default:i(()=>[a(d,{prop:"clue_wechat",label:"线索","min-width":"120","show-overflow-tooltip":""}),a(d,{prop:"wechat_no",label:"执行账号","min-width":"140"},{default:i(({row:s})=>[r(f(s.wechat_no||"-"),1)]),_:1}),a(d,{label:"申请备注词","min-width":"200","show-overflow-tooltip":""},{default:i(({row:s})=>[r(f(s.remark||"-"),1)]),_:1}),a(d,{label:"任务状态",width:"160",align:"center"},{default:i(({row:s})=>[e("div",_e,[e("div",{class:z(["w-[6px] h-[6px] rounded-full",j(s.status)])},null,2),e("span",null,[s.status==0?(o(),l(u,{key:0},[r("添加失败")],64)):_("",!0),s.status==1?(o(),l(u,{key:1},[r("添加成功")],64)):_("",!0),s.status==2?(o(),l(u,{key:2},[r("执行中")],64)):_("",!0),s.status==4?(o(),l(u,{key:3},[r("等待添加")],64)):_("",!0)])])]),_:1}),a(d,{prop:"create_time",label:"执行时间",width:"180"}),a(d,{label:"操作",width:"80",fixed:"right",align:"right"},{default:i(({row:s})=>[a(D,{type:"danger",link:"",onClick:ve=>V(s.id)},{default:i(()=>t[6]||(t[6]=[r("删除",-1)])),_:2,__:[6]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[$,n(m).loading]])]),e("div",xe,[a(N,{modelValue:n(m),"onUpdate:modelValue":t[1]||(t[1]=s=>G(m)?m.value=s:null),layout:"prev, pager, next",onChange:n(g)},null,8,["modelValue","onChange"])])])])}}});export{De as _};

import{e9 as H,ea as Z,eb as Se,ec as _e,ed as Te,cy as Pe,ee as Ce,Q as we,S as De,aa as Ee,d as Q,V as Oe,W as z,ab as Re,c as _,r as X,k as Ae,l as Ie,m as k,Y as f,Z as r,t as A,q as I,L as Ve,bz as E,O as U,aW as xe,aX as G,ai as Ne,al as Me,am as Ke}from"./entry.46557796.js";import{c as ye}from"./customParseFormat.df9b4c29.js";import{d as He,P as Ue,u as Be,f as Fe,g as J,h as Le,t as Ye,T as $e,b as je,i as We,C as qe}from"./panel-time-pick.003e480c.js";import{b as ze}from"./index.52e544f1.js";function Ge(){}function Je(t){return t!==t}function Ze(t,s,o){for(var i=o-1,u=t.length;++i<u;)if(t[i]===s)return i;return-1}function Qe(t,s,o){return s===s?Ze(t,s,o):ze(t,Je,o)}function Xe(t,s){var o=t==null?0:t.length;return!!o&&Qe(t,s,0)>-1}function en(t,s,o){for(var i=-1,u=t==null?0:t.length;++i<u;)if(o(s,t[i]))return!0;return!1}var nn=1/0,an=H&&1/Z(new H([,-0]))[1]==nn?function(t){return new H(t)}:Ge;const tn=an;var sn=200;function on(t,s,o){var i=-1,u=Xe,b=t.length,a=!0,v=[],m=v;if(o)a=!1,u=en;else if(b>=sn){var T=s?null:tn(t);if(T)return Z(T);a=!1,u=_e,m=new Se}else m=s?[]:v;e:for(;++i<b;){var g=t[i],S=s?s(g):g;if(g=o||g!==0?g:0,a&&S===S){for(var O=m.length;O--;)if(m[O]===S)continue e;s&&m.push(S),v.push(g)}else u(m,S,o)||(m!==v&&m.push(S),v.push(g))}return v}var rn=Te(function(t){return on(Pe(t,1,Ce,!0))});const B=rn,ln=we({...He,parsedValue:{type:De(Array)}}),cn=Q({__name:"panel-time-range",props:ln,emits:["pick","select-range","set-picker-option"],setup(t,{emit:s}){const o=t,i=(e,n)=>{const l=[];for(let c=e;c<=n;c++)l.push(c);return l},{t:u,lang:b}=Oe(),a=z("time"),v=z("picker"),m=Re(Ue),{arrowControl:T,disabledHours:g,disabledMinutes:S,disabledSeconds:O,defaultValue:V}=m.props,ee=_(()=>[a.be("range-picker","body"),a.be("panel","content"),a.is("arrow",T),w.value?"has-seconds":""]),ne=_(()=>[a.be("range-picker","body"),a.be("panel","content"),a.is("arrow",T),w.value?"has-seconds":""]),P=_(()=>o.parsedValue[0]),C=_(()=>o.parsedValue[1]),ae=Be(o),te=()=>{s("pick",ae.value,!1)},w=_(()=>o.format.includes("ss")),F=_(()=>o.format.includes("A")?"A":o.format.includes("a")?"a":""),se=(e=!1)=>{s("pick",[P.value,C.value],e)},oe=e=>{L(e.millisecond(0),C.value)},re=e=>{L(P.value,e.millisecond(0))},le=e=>{const n=e.map(c=>E(c).locale(b.value)),l=$(n);return n[0].isSame(l[0])&&n[1].isSame(l[1])},L=(e,n)=>{o.visible&&s("pick",[e,n],!0)},ie=_(()=>P.value>C.value),R=X([0,2]),ce=(e,n)=>{s("select-range",e,n,"min"),R.value=[e,n]},Y=_(()=>w.value?11:8),ue=(e,n)=>{s("select-range",e,n,"max");const l=r(Y);R.value=[e+l,n+l]},de=e=>{const n=w.value?[0,3,6,11,14,17]:[0,3,8,11],l=["hours","minutes"].concat(w.value?["seconds"]:[]),d=(n.indexOf(R.value[0])+e+n.length)%n.length,p=n.length/2;d<p?K.start_emitSelectRange(l[d]):K.end_emitSelectRange(l[d-p])},pe=e=>{const n=e.code,{left:l,right:c,up:d,down:p}=xe;if([l,c].includes(n)){de(n===l?-1:1),e.preventDefault();return}if([d,p].includes(n)){const h=n===d?-1:1,D=R.value[0]<Y.value?"start":"end";K[`${D}_scrollDown`](h),e.preventDefault();return}},x=(e,n)=>{const l=g?g(e):[],c=e==="start",p=(n||(c?C.value:P.value)).hour(),h=c?i(p+1,23):i(0,p-1);return B(l,h)},N=(e,n,l)=>{const c=S?S(e,n):[],d=n==="start",p=l||(d?C.value:P.value),h=p.hour();if(e!==h)return c;const D=p.minute(),y=d?i(D+1,59):i(0,D-1);return B(c,y)},M=(e,n,l,c)=>{const d=O?O(e,n,l):[],p=l==="start",h=c||(p?C.value:P.value),D=h.hour(),y=h.minute();if(e!==D||n!==y)return d;const q=h.second(),ke=p?i(q+1,59):i(0,q-1);return B(d,ke)},$=([e,n])=>[j(e,"start",!0,n),j(n,"end",!1,e)],{getAvailableHours:me,getAvailableMinutes:fe,getAvailableSeconds:be}=Fe(x,N,M),{timePickerOptions:K,getAvailableTime:j,onSetOption:W}=Le({getAvailableHours:me,getAvailableMinutes:fe,getAvailableSeconds:be}),ve=e=>e?U(e)?e.map(n=>E(n,o.format).locale(b.value)):E(e,o.format).locale(b.value):null,ge=e=>e?U(e)?e.map(n=>n.format(o.format)):e.format(o.format):null,he=()=>{if(U(V))return V.map(n=>E(n).locale(b.value));const e=E(V).locale(b.value);return[e,e.add(60,"m")]};return s("set-picker-option",["formatToString",ge]),s("set-picker-option",["parseUserInput",ve]),s("set-picker-option",["isValidValue",le]),s("set-picker-option",["handleKeydownInput",pe]),s("set-picker-option",["getDefaultValue",he]),s("set-picker-option",["getRangeAvailableTime",$]),(e,n)=>e.actualVisible?(Ae(),Ie("div",{key:0,class:f([r(a).b("range-picker"),r(v).b("panel")])},[k("div",{class:f(r(a).be("range-picker","content"))},[k("div",{class:f(r(a).be("range-picker","cell"))},[k("div",{class:f(r(a).be("range-picker","header"))},A(r(u)("el.datepicker.startTime")),3),k("div",{class:f(r(ee))},[I(J,{ref:"minSpinner",role:"start","show-seconds":r(w),"am-pm-mode":r(F),"arrow-control":r(T),"spinner-date":r(P),"disabled-hours":x,"disabled-minutes":N,"disabled-seconds":M,onChange:oe,onSetOption:r(W),onSelectRange:ce},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),k("div",{class:f(r(a).be("range-picker","cell"))},[k("div",{class:f(r(a).be("range-picker","header"))},A(r(u)("el.datepicker.endTime")),3),k("div",{class:f(r(ne))},[I(J,{ref:"maxSpinner",role:"end","show-seconds":r(w),"am-pm-mode":r(F),"arrow-control":r(T),"spinner-date":r(C),"disabled-hours":x,"disabled-minutes":N,"disabled-seconds":M,onChange:re,onSetOption:r(W),onSelectRange:ue},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),k("div",{class:f(r(a).be("panel","footer"))},[k("button",{type:"button",class:f([r(a).be("panel","btn"),"cancel"]),onClick:l=>te()},A(r(u)("el.datepicker.cancel")),11,["onClick"]),k("button",{type:"button",class:f([r(a).be("panel","btn"),"confirm"]),disabled:r(ie),onClick:l=>se()},A(r(u)("el.datepicker.confirm")),11,["disabled","onClick"])],2)],2)):Ve("v-if",!0)}});var un=Ee(cn,[["__file","panel-time-range.vue"]]);E.extend(ye);var dn=Q({name:"ElTimePicker",install:null,props:{...Ye,isRange:Boolean},emits:[G],setup(t,s){const o=X(),[i,u]=t.isRange?["timerange",un]:["time",$e],b=a=>s.emit(G,a);return Ne(je,t.popperOptions),s.expose({focus:()=>{var a;(a=o.value)==null||a.focus()},blur:()=>{var a;(a=o.value)==null||a.blur()},handleOpen:()=>{var a;(a=o.value)==null||a.handleOpen()},handleClose:()=>{var a;(a=o.value)==null||a.handleClose()}}),()=>{var a;const v=(a=t.format)!=null?a:We;return I(qe,Me(t,{ref:o,type:i,format:v,"onUpdate:modelValue":b}),{default:m=>I(u,m,null)})}}});const vn=Ke(dn);export{vn as E};

import{d as A,bP as F,r as x,aF as L,o as M,k as f,l as E,m as o,t as g,Z as s,q as t,s as n,dG as U,aI as H,I as C,v as h,L as j,bM as W,aH as Z,G as _,dH as J,c_ as K,y as O,ax as Q,au as X,cW as Y,u as ee,_ as te}from"./entry.ee599c70.js";import{E as oe,a as se}from"./index.ef8eb140.js";import{E as le}from"./index.f36399ff.js";import{E as ne}from"./el-empty.76498597.js";import{_ as ie}from"./index.vue.33025166.js";/* empty css                        *//* empty css                        *//* empty css               *//* empty css                   *//* empty css                 *//* empty css                     */import{u as ae}from"./usePaging.5914886e.js";import{j as re,k as pe,l as de,r as ce}from"./interview.fea9f1a0.js";import me from"./detail.e67faf4f.js";import"./index.e69b4eeb.js";import"./_baseIteratee.6942dcd2.js";import"./debounce.f4735d5c.js";import"./toNumber.0872a42f.js";import"./index.0e845cb8.js";import"./raf.09011a0b.js";import"./index.8fd3c68c.js";import"./index.684b3e96.js";import"./strings.32bdf471.js";import"./clamp.05cad4d6.js";import"./index.vue.6c7b501b.js";import"./index.3864ff87.js";import"./el-card.6eb35d3c.js";import"./index.6d0fa316.js";/* empty css                  */import"./useAudio.5d8f0f69.js";const ue={class:"h-full flex flex-col"},fe={class:"bg-white rounded-lg px-4 h-[107px] grid grid-cols-3 gap-4 flex-shrink-0"},_e={class:"flex flex-col justify-center items-center"},ve={class:"text-[24px] font-bold"},we={class:"flex flex-col justify-center items-center"},xe={class:"text-[24px] font-bold"},ge={class:"flex flex-col justify-center items-center"},he={class:"text-[24px] font-bold"},ye={class:"grow min-h-0 flex flex-col mt-6 bg-white rounded-lg overflow-hidden"},be={class:"flex items-center justify-between gap-2 px-4 py-6"},ke={class:"flex items-center justify-end gap-2 grow"},Ee={class:"grow min-h-0"},Ce={class:"flex flex-col gap-2"},je=["onClick"],Re=["onClick"],Ve=["onClick"],Ie={class:"flex justify-end p-4"},$e=A({__name:"index",setup(De){const R=F(),y=ee(),v=x(),w=x(!1),p=L({job_id:"",interview_name:"",status:""}),u=x({job_count:0,avg_time:0,interview_count:0}),V=async()=>{const a=await pe();u.value=a},{pager:m,getLists:d,resetParams:I}=ae({fetchFun:re,params:p}),$=async a=>{var e,r;w.value=!0,await Z(),(e=v.value)==null||e.open(),(r=v.value)==null||r.getDetail(a)},D=async a=>{y.$confirm({message:"确定要删除该面试记录吗？",onConfirm:async()=>{try{await de({ids:[a]}),_.msgSuccess("删除成功"),d()}catch(e){_.msgError(e||"删除失败")}}})},B=async a=>{y.$confirm({message:"确定要重新分析该面试记录吗？",onConfirm:async()=>{try{await ce({id:a}),_.msgSuccess("重新分析成功"),d()}catch(e){_.msgError(e||"重新分析失败")}}})};return M(()=>{p.job_id=R.query.id,d(),V()}),(a,e)=>{const r=J,P=K,b=O,c=Q,S=X,i=oe,T=le,N=ne,G=se,q=ie,z=Y;return f(),E("div",ue,[o("div",fe,[o("div",_e,[e[7]||(e[7]=o("span",{class:"text-[#74798C]"},"当前岗位数",-1)),o("span",ve,g(s(u).job_count),1)]),o("div",we,[e[9]||(e[9]=o("div",{class:"text-[#74798C]"},"面试平局时长",-1)),o("div",null,[o("span",xe,g(s(u).avg_time||0),1),e[8]||(e[8]=o("span",{class:"text-[#74798C]"},"分钟",-1))])]),o("div",ge,[e[10]||(e[10]=o("span",{class:"text-[#74798C]"},"总面试数量",-1)),o("span",he,g(s(u).interview_count||0),1)])]),o("div",ye,[o("div",be,[e[11]||(e[11]=o("div",{class:"text-[18px] font-bold"},"面试列表",-1)),o("div",ke,[t(P,{modelValue:s(p).status,"onUpdate:modelValue":e[0]||(e[0]=l=>s(p).status=l),onChange:e[1]||(e[1]=l=>s(d)())},{default:n(()=>[t(r,{label:"全部",value:""}),t(r,{label:"分析中",value:"5"}),t(r,{label:"已完成",value:"1"}),t(r,{label:"分析失败",value:"7"})]),_:1},8,["modelValue"]),t(S,{modelValue:s(p).interview_name,"onUpdate:modelValue":e[3]||(e[3]=l=>s(p).interview_name=l),class:"h-[32px] !w-[240px]",placeholder:"请输入面试者名称"},{append:n(()=>[t(c,{onClick:e[2]||(e[2]=l=>s(d)())},{default:n(()=>[t(b,{name:"el-icon-Search",size:16})]),_:1})]),_:1},8,["modelValue"]),t(c,{icon:s(U),onClick:e[4]||(e[4]=l=>s(I)())},null,8,["icon"])])]),o("div",Ee,[H((f(),C(G,{data:s(m).lists,stripe:"",height:"100%","row-style":{height:"60px"},"header-cell-style":{height:"50px"}},{empty:n(()=>[t(N,{description:"暂无数据"})]),default:n(()=>[t(i,{prop:"interview_name",label:"面试者","min-width":"140","show-overflow-tooltip":""}),t(i,{prop:"job_name",label:"面试岗位","min-width":"160","show-overflow-tooltip":""}),t(i,{label:"学历",prop:"degree","min-width":"120","show-overflow-tooltip":""}),t(i,{label:"工作年限",prop:"work_years",width:"80","show-overflow-tooltip":""}),t(i,{label:"AI评分",width:"120",prop:"best_score","show-overflow-tooltip":""}),t(i,{label:"面试时长",width:"120",prop:"duration","show-overflow-tooltip":""}),t(i,{label:"面试状态",prop:"status_text",width:"120","show-overflow-tooltip":""}),t(i,{label:"面试时间",prop:"first_start_time_text",width:"200","show-overflow-tooltip":""}),t(i,{label:"操作",width:"120",fixed:"right"},{default:n(({row:l})=>[t(T,{"show-arrow":!1,"popper-class":"!w-[120px] !min-w-[120px] !p-[6px] !rounded-xl"},{reference:n(()=>[t(c,{link:""},{default:n(()=>[t(b,{name:"el-icon-MoreFilled"})]),_:1})]),default:n(()=>[o("div",Ce,[o("div",{class:"px-2 py-1 hover:bg-primary-light-9 rounded-lg cursor-pointer",onClick:k=>$(l.id)},[t(c,{link:"",icon:"el-icon-View",class:"w-full !justify-start"},{default:n(()=>[...e[12]||(e[12]=[h("详情",-1)])]),_:1})],8,je),o("div",{class:"px-2 py-1 hover:bg-primary-light-9 rounded-lg cursor-pointer",onClick:k=>D(l.id)},[t(c,{link:"",icon:"el-icon-Delete",class:"w-full !justify-start"},{default:n(()=>[...e[13]||(e[13]=[h("删除",-1)])]),_:1})],8,Re),l.status==7?(f(),E("div",{key:0,class:"px-2 py-1 hover:bg-primary-light-9 rounded-lg cursor-pointer",onClick:k=>B(l.id)},[t(c,{link:"",icon:"el-icon-Refresh",class:"w-full !justify-start"},{default:n(()=>[...e[14]||(e[14]=[h("重新分析",-1)])]),_:1})],8,Ve)):j("",!0)])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[z,s(m).loading]])]),o("div",Ie,[t(q,{modelValue:s(m),"onUpdate:modelValue":e[5]||(e[5]=l=>W(m)?m.value=l:null),onChange:s(d)},null,8,["modelValue","onChange"])])]),s(w)?(f(),C(me,{key:0,ref_key:"detailRef",ref:v,onClose:e[6]||(e[6]=l=>w.value=!1)},null,512)):j("",!0)])}}});const rt=te($e,[["__scopeId","data-v-b0986232"]]);export{rt as default};

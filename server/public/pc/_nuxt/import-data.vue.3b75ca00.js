import{E as S,a as F}from"./el-steps.abe8cd06.js";import{d as I,r as m,cq as N,k as R,I as V,s as l,m as o,q as s,Z as n,cW as h,cX as q,cY as L,v as T,cP as $,G as r,ax as A}from"./entry.46557796.js";import{_ as D}from"./index.c84588fb.js";import{m as G}from"./agent.a3fcedc5.js";const K={class:"mt-6"},M={class:"mt-2"},Z=I({__name:"import-data",props:{title:{},agentId:{}},emits:["success","close"],setup(u,{expose:f,emit:_}){const p=u,d=_,i=m(""),a=m(),v=()=>{var e;(e=a.value)==null||e.open()},x=()=>{d("close")},g=()=>{const t=`${window.location.origin}/static/file/template/speech.csv`;window.open(t,"_blank")},k=e=>{const{data:{uri:t}}=e;i.value=t},C=async()=>{var e;if(!i.value){r.msgError("请上传文件");return}try{await G({file:i.value,robot_id:p.agentId}),d("success"),(e=a.value)==null||e.close(),r.msgSuccess("导入成功")}catch(t){r.msgError(t||"导入失败")}},{lockFn:y,isLock:w}=N(C);return f({open:v}),(e,t)=>{const c=S,E=F,b=A,B=D;return R(),V($,{ref_key:"popupRef",ref:a,async:"",width:"656px",title:p.title,"confirm-loading":n(w),onConfirm:n(y),onClose:x},{default:l(()=>[o("div",null,[o("div",null,[s(E,{simple:"",active:-1},{default:l(()=>[s(c,{title:"上传文件",icon:n(h)},null,8,["icon"]),s(c,{title:"导入数据",icon:n(q)},null,8,["icon"]),s(c,{title:"导入完成",icon:n(L)},null,8,["icon"])]),_:1})]),o("div",{class:"mt-6"},[o("div",{class:"font-bold"},[t[0]||(t[0]=o("span",null,"一、请按照数据模板的格式准备要导入的数据。",-1)),o("a",{class:"text-primary cursor-pointer",onClick:g}," 点击此处下载《话术导入模板》 ")]),t[1]||(t[1]=o("div",{class:"text-xs text-[#C4C6C8] indent-7 mt-1"},"导入文件请勿超过10MB（约100条数据）",-1))]),o("div",K,[t[3]||(t[3]=o("div",{class:"font-bold"},[o("span",null,"二、请选择需要导入的文件")],-1)),o("div",M,[s(B,{type:"file",accept:".csv","list-type":"text",limit:1,onSuccess:k},{default:l(()=>[s(b,{type:"primary"},{default:l(()=>t[2]||(t[2]=[T("上传文件",-1)])),_:1,__:[2]})]),_:1})])])])]),_:1},8,["title","confirm-loading","onConfirm"])}}});export{Z as _};

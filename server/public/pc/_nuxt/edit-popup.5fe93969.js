import{d as B,z as F,aG as D,c as I,r as k,aF as R,cq as S,k as h,I as q,s as n,q as s,Z as t,ay as N,m as T,v as x,cO as G,dr as L,G as E,bI as U,au as z,av as O,ax as j}from"./entry.d7219633.js";import{f as A,g as K}from"./knowledge_base.519704cc.js";const W={class:"flex justify-end mt-6 -mb-4"},P=B({__name:"edit-popup",emits:["close","success"],setup(Z,{expose:w,emit:y}){const i=y,m=F(),{getTokenByScene:b}=m;D(m),I(()=>{var o;return(o=b(L.KNOWLEDGE_CREATE))==null?void 0:o.score});const r=k(),d=k(),a=R({id:"",name:"",description:""}),C={name:[{required:!0,message:"请输入知识库名称"}],description:[{required:!0,message:"请输入知识库描述"}]},V=()=>{var o;(o=r.value)==null||o.open()},u=()=>{i("close")},v=async()=>{var o,e;await((o=d.value)==null?void 0:o.validate());try{await A(a),E.msgSuccess("操作成功"),(e=r.value)==null||e.close(),i("success")}catch(l){E.msgError(l)}},{lockFn:p,isLock:f}=S(v);return w({open:V,getDetail:async o=>{const e=await K({id:o});U(e,a)}}),(o,e)=>{const l=z,_=O,g=j;return h(),q(G,{ref_key:"popupRef",ref:r,async:"",title:"编辑知识库",width:"550px","confirm-loading":t(f),"confirm-button-text":"","cancel-button-text":"",onClose:u,onConfirm:t(p)},{default:n(()=>[s(t(N),{ref_key:"formRef",ref:d,model:t(a),rules:C,"label-position":"top"},{default:n(()=>[s(_,{label:"知识库名称",prop:"name"},{default:n(()=>[s(l,{modelValue:t(a).name,"onUpdate:modelValue":e[0]||(e[0]=c=>t(a).name=c),"show-word-limit":"",maxlength:"12",placeholder:"请输入知识库名称"},null,8,["modelValue"])]),_:1}),s(_,{label:"知识库描述",prop:"description"},{default:n(()=>[s(l,{modelValue:t(a).description,"onUpdate:modelValue":e[1]||(e[1]=c=>t(a).description=c),"show-word-limit":"",maxlength:"1000",type:"textarea",resize:"none",placeholder:"请输入知识库描述",rows:8},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),T("div",W,[s(g,{onClick:u},{default:n(()=>e[2]||(e[2]=[x("取消",-1)])),_:1,__:[2]}),s(g,{type:"primary",loading:t(f),onClick:t(p)},{default:n(()=>e[3]||(e[3]=[x(" 确定 ",-1)])),_:1,__:[3]},8,["loading","onClick"])])]),_:1},8,["confirm-loading","onConfirm"])}}});export{P as default};

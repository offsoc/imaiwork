import{d as se,aG as oe,r as y,aF as le,c as ae,D as ne,k as u,I as M,s as p,m as o,q as n,Z as l,$ as re,v as T,l as h,K as j,J as I,bK as P,Y as B,t as S,a0 as ie,cP as ue,y as ce,au as de,ax as fe,_ as pe}from"./entry.46557796.js";import{_ as me}from"./index.vue.520aef1d.js";import{E as _e,a as ve}from"./el-tabs.0dd2047f.js";import{E as xe}from"./index.304400de.js";import{E as be}from"./el-empty.db5857ba.js";import{_ as ye}from"./index.vue.383c1815.js";/* empty css                     */import{u as he}from"./usePaging.3ef28349.js";import{u as ge}from"./useAudio.4da108c6.js";import{g as we}from"./redbook.f03a8b74.js";import{MaterialTypeEnum as ke}from"./index.83df7a87.js";const Ce=c=>$request.get({url:"/material.music/lists",params:c}),tt=c=>$request.post({url:"/material.music/add",params:c}),Ee={class:"rounded-xl overflow-hidden flex flex-col -my-2"},$e={class:"flex items-center justify-between h-[50px] px-4"},Ve={class:"flex items-center gap-x-2"},Ae={class:"w-6 h-6 flex items-center justify-center rounded-md border border-[#ffffff1a]"},Me={class:"px-4 my-4"},Te={class:"flex items-center rounded-full h-[50px] border border-[#2a2a2a] px-[5px]"},je={class:"px-4"},Ie={class:"h-[500px] flex flex-col"},Pe={class:"grow min-h-0 cursor-pointer"},Be=["onClick"],Se={class:"flex-1 flex items-center gap-x-2"},ze={class:"text-white text-base"},Le={class:"flex items-center gap-x-4"},Ue=["onClick"],qe={class:"w-5 h-5 flex items-center justify-center rounded-full mx-auto"},Ke={key:1,class:"flex items-center justify-center h-full"},Ne={class:"flex justify-between items-center my-2 px-2"},Re=se({__name:"choose-audio",props:{multiple:{type:Boolean,default:!1}},emits:["close","confirm"],setup(c,{expose:z,emit:L}){const U=c,$=L,{multiple:m}=oe(U),V=y(),q=[{label:"系统",value:"system"},{label:"我的",value:"0"},{label:"科技",value:"1"},{label:"悬疑",value:"2"},{label:"抒情",value:"3"},{label:"欢快",value:"4"},{label:"古典",value:"5"},{label:"跳跃",value:"6"}],r=y("system"),g=le({name:""}),{pager:d,getLists:f,resetPage:K}=he({fetchFun:t=>r.value==="system"?we({...t,m_type:ke.MUSIC}):Ce({...t,style:r.value}),params:g}),A=ae(()=>r.value==="system"?d.lists.map(t=>({...t,url:t.content,id:`${t.id}-system`})):d.lists),N=t=>{r.value=t.paneName,K()},a=y(),{play:R,pause:D,pauseAll:F,setUrl:O,isPlaying:w}=ge(),_=y(),G=({id:t,url:e})=>{w.value&&_.value!==t&&F(),w.value?D():(_.value!==t&&O(e),R(),_.value=t)},v=t=>{if(m.value)return a.value.find(i=>i.id===t);const{id:e}=a.value||{};return e?e===t:!1},J=t=>{const{id:e,content:i,url:C}=t,x={...t,url:i||C};v(e)?m.value?a.value=a.value.filter(b=>b.id!==e):a.value={}:m.value?a.value.push(x):a.value=x},Y=t=>{a.value=t},Z=()=>{$("confirm",a.value),k()},H=async()=>{var t;(t=V.value)==null||t.open(),await f()},k=()=>{$("close")};return ne(()=>m.value,t=>{t?a.value=[]:a.value={}},{immediate:!0}),z({open:H,setChooseAudio:Y}),(t,e)=>{const i=ce,C=me,x=de,b=fe,Q=_e,W=ve,X=xe,ee=be,te=ye;return u(),M(ue,{ref_key:"popupRef",ref:V,width:"528px",class:"choose-audio-popup",style:{padding:"0","background-color":"var(--app-bg-color-2)","box-shadow":"0px 0px 0px 1px var(--app-border-color-2)"},"confirm-button-text":"","cancel-button-text":"","show-close":!1,onClose:k},{default:p(()=>[o("div",Ee,[o("div",$e,[o("div",Ve,[o("div",Ae,[n(i,{name:"local-icon-windows",size:14})]),e[8]||(e[8]=o("div",{class:"text-[20px] text-white font-bold"},"背景音乐素材",-1))]),o("div",{class:"w-6 h-6",onClick:k},[n(C)])]),o("div",Me,[o("div",Te,[n(x,{modelValue:l(g).name,"onUpdate:modelValue":e[0]||(e[0]=s=>l(g).name=s),class:"flex-1 search-input",clearable:"","prefix-icon":"el-icon-Search",placeholder:"请输入音乐名称","input-style":"color: #ffffff",onClear:e[1]||(e[1]=s=>l(f)()),onKeyup:e[2]||(e[2]=re(s=>l(f)(),["enter"]))},null,8,["modelValue"]),n(b,{type:"primary",class:"!text-white !rounded-full !w-[116px] !h-10",onClick:e[3]||(e[3]=s=>l(f)())},{default:p(()=>e[9]||(e[9]=[T(" 搜索 ",-1)])),_:1,__:[9]})])]),o("div",je,[n(W,{modelValue:l(r),"onUpdate:modelValue":e[4]||(e[4]=s=>P(r)?r.value=s:null),class:"!text-white",onTabClick:N},{default:p(()=>[(u(),h(I,null,j(q,(s,E)=>n(Q,{key:E,label:s.label,name:s.value},null,8,["label","name"])),64))]),_:1},8,["modelValue"])]),o("div",Ie,[o("div",Pe,[l(A).length>0?(u(),M(X,{key:0},{default:p(()=>[o("div",null,[(u(!0),h(I,null,j(l(A),s=>(u(),h("div",{key:s.id,class:"flex items-center justify-between gap-x-2 h-[50px] border-t border-[#2a2a2a] px-[30px] cursor-pointer hover:bg-[#ffffff0d]",onClick:E=>J(s)},[o("div",Se,[o("div",{class:B(["w-5 h-5 flex items-center justify-center rounded",[v(s.id)?"bg-primary":"bg-[#ffffff0d]"]])},[n(i,{name:"local-icon-music",size:14,color:"#ffffff"})],2),o("div",ze,S(s.name),1)]),o("div",Le,[o("div",{class:B(["cursor-pointer text-base",[v(s.id)?"text-primary":"text-[rgba(255,255,255,0.5)]"]]),onClick:ie(E=>G(s),["stop"])},S(l(_)&&s.id&&l(w)?"暂停":"播放"),11,Ue),o("div",qe,[n(i,{name:"local-icon-success_fill",size:20,color:v(s.id)?"var(--color-primary)":"#ffffff1a"},null,8,["color"])])])],8,Be))),128))])]),_:1})):(u(),h("div",Ke,[n(ee,{description:"暂无数据","image-size":100})]))]),o("div",Ne,[n(te,{modelValue:l(d),"onUpdate:modelValue":e[5]||(e[5]=s=>P(d)?d.value=s:null),layout:"prev, pager, next",onChange:e[6]||(e[6]=s=>l(f)())},null,8,["modelValue"]),n(b,{type:"primary",class:"!rounded-full w-[110px] !h-10",onClick:e[7]||(e[7]=s=>Z())},{default:p(()=>e[10]||(e[10]=[T(" 确定 ",-1)])),_:1,__:[10]})])])])]),_:1},512)}}});const De=pe(Re,[["__scopeId","data-v-469a9c85"]]),st=Object.freeze(Object.defineProperty({__proto__:null,default:De},Symbol.toStringTag,{value:"Module"}));export{De as A,tt as a,st as c};

import{d as P,c as j,r as f,k as a,l as s,m as o,q as n,L as r,s as d,J as g,K as L,Y as T,Z as p,v as R,I as S,bK as $,cP as F,aH as K,G as w,y as M,dN as q,b5 as G,ax as H,au as J}from"./entry.d9d53b29.js";import{E as U}from"./index.050c9b6b.js";/* empty css                     */const Y={class:"w-full h-full bg-black flex flex-col py-2"},Z={class:"flex items-center justify-center gap-2 mt-2"},D={class:"grow min-h-0 mt-4"},O={class:"flex flex-col gap-y-1 mt-4 px-2"},Q=["onClick"],X={class:"relative w-[48px] h-[48px] rounded"},ee={class:"w-full h-full rounded"},te=["src"],le={key:0,class:"absolute -right-1 -top-1 z-50"},oe={key:1,class:"absolute w-full h-full top-0 left-0 flex items-center justify-center bg-[#BABABAAF] z-40 rounded"},ae={key:2,class:"absolute top-0 left-0 w-full h-full z-[888]"},se={key:0,class:"flex justify-center mt-2 mx-2"},ne={class:"flex flex-col gap-y-4"},ie=P({__name:"sidebar-panel",props:{currentWechat:{default:null},wechatList:{default:()=>[]},loading:{type:Boolean,default:!1},showAddWeChat:{type:Boolean,default:!0}},emits:["update:currentWechat","addWechat"],setup(x,{expose:C,emit:y}){const b=x,h=y,_=j({get(){return b.currentWechat},set(e){h("update:currentWechat",e)}}),u=f(),i=f(!1),c=f(""),k=async()=>{var e;i.value=!0,await K(),(e=u.value)==null||e.open()},W=async()=>{if(!c.value){w.msgError("请输入您的设备授权码");return}h("addWechat",c.value)},E=e=>{if(!e.loading){if(e.wechat_status!=1){w.msgError("当前微信状态为离线，请先上线");return}_.value=e}};return C({closeAddWeChatPop:()=>{var e;i.value=!1,(e=u.value)==null||e.close()}}),(e,l)=>{const m=M,B=q,A=G,V=U,z=H,I=J;return a(),s(g,null,[o("div",Y,[o("div",Z,[n(m,{name:"local-icon-wechat",color:"#00C800",size:22}),l[2]||(l[2]=o("span",{class:"text-white font-bold whitespace-nowrap"},"个微",-1)),r("",!0)]),o("div",D,[n(V,null,{default:d(()=>[o("div",O,[(a(!0),s(g,null,L(e.wechatList,(t,N)=>{var v;return a(),s("div",{key:N,class:T(["w-full h-[66px] mx-auto flex items-center justify-center cursor-pointer rounded",{"bg-[#00C800]":((v=p(_))==null?void 0:v.wechat_id)===t.wechat_id,"hover:bg-[#00C800]":!t.loading}]),onClick:ce=>E(t)},[n(A,{content:t.wechat_nickname,placement:"right"},{default:d(()=>[o("div",X,[o("div",ee,[o("img",{src:t.wechat_avatar,alt:"",class:"w-full h-full rounded"},null,8,te)]),t.MsgCnt>0&&t.wechat_status==1?(a(),s("div",le,[n(B,{value:t.MsgCnt,color:"#EA3323","badge-style":{border:"none"}},null,8,["value"])])):r("",!0),t.wechat_status!=1?(a(),s("div",oe,[n(m,{name:"local-icon-offline",size:24})])):r("",!0),t.loading?(a(),s("div",ae,l[3]||(l[3]=[o("div",{class:"w-full h-full rounded bg-gray-200 animate-pulse"},null,-1)]))):r("",!0)])]),_:2},1032,["content"])],10,Q)}),128))])]),_:1})]),e.showAddWeChat?(a(),s("div",se,[n(z,{color:"#00C800",class:"w-full",onClick:k},{default:d(()=>l[4]||(l[4]=[R(" 添加微信 ",-1)])),_:1,__:[4]})])):r("",!0)]),p(i)?(a(),S(F,{key:0,ref_key:"addWeChatPopRef",ref:u,title:"添加设备",async:"","confirm-button-text":"确认绑定","confirm-loading":e.loading,onClose:l[1]||(l[1]=t=>c.value=""),onConfirm:W},{default:d(()=>[o("div",ne,[n(I,{modelValue:p(c),"onUpdate:modelValue":l[0]||(l[0]=t=>$(c)?c.value=t:null),placeholder:"请输入您的设备授权码",clearable:"",class:"!h-[48px]"},null,8,["modelValue"])])]),_:1},8,["confirm-loading"])):r("",!0)],64)}}});export{ie as _};

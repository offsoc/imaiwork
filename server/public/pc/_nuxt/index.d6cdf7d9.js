import{E as q,a as J}from"./index.ed825429.js";import{d as M,r as g,aF as O,k as t,l as a,m as c,q as i,s as d,Z as s,J as h,K as w,I as U,v as x,bM as G,L as y,aI as C,G as _,ax as K,cJ as W,ba as Z,y as H,cW as Q,u as X,_ as Y}from"./entry.f4f46cb5.js";import{E as ee}from"./index.bad4fd13.js";/* empty css                  *//* empty css               *//* empty css                     */import{u as le}from"./usePaging.64f4ceb2.js";import{e as se,r as te,i as oe}from"./digital_human.b276942f.js";import{_ as ae}from"./empty.vue.e7db209b.js";import ne from"./video-item.0ed8a7ed.js";import{E as ie}from"./index.cc7179fb.js";import"./index.03679949.js";import"./strings.87cef2c7.js";import"./_baseIteratee.0f37ae7b.js";import"./toNumber.d5c70aa7.js";import"./clamp.6295a89e.js";import"./index.d4d0dc47.js";import"./index.25e18e1c.js";import"./index.vue.cb61de56.js";import"./index.vue.b711ba9e.js";/* empty css                   */import"./useTemplate.afda57ca.js";import"./throttle.a2681779.js";import"./debounce.640f3738.js";const re={class:"h-full flex flex-col bg-app-bg-2 rounded-[20px]"},ce={class:"flex-shrink-0 px-[14px]"},de={class:"flex items-center justify-end h-[88px]"},ue={class:"flex items-center gap-[14px]"},pe={key:1,class:"flex items-center gap-2"},me=["infinite-scroll-disabled"],fe={class:"h-full"},_e={key:0},ve={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4 py-4"},ge=["onClick"],he={key:0,class:"absolute top-0 right-0 z-[1000] w-full h-full bg-black/5 flex justify-end p-2"},xe={class:"w-6 h-6 rounded-full"},ye={key:0,class:"text-white text-center text-xs w-full py-4"},ke={key:1,class:"h-full flex items-center justify-center"},be=M({__name:"index",setup(Ee){const k=X(),V=[{label:"全部",value:""},{label:"生成中",value:"0"},{label:"生成成功",value:"1"},{label:"生成失败",value:"2"}],p=g(!1),u=g(!1),n=g([]),m=O({page_no:1,page_size:20,status:"",model_version:"",type:0}),{pager:r,getLists:b,resetPage:v}=le({fetchFun:se,params:m,isScroll:!0}),S=()=>{p.value=!1,n.value=[]},L=o=>{n.value.includes(o)?n.value=n.value.filter(e=>e!==o):n.value.push(o),n.value.length==r.lists.length?u.value=!0:u.value=!1},$=()=>{u.value?n.value=r.lists.map(o=>o.id):n.value=[]},A=async()=>{m.page_no+=1,b()},I=async o=>{k.$confirm({message:"确定重试改形象吗？",theme:"dark",onConfirm:async()=>{try{await te({anchor_id:o}),v(),_.msgSuccess("重试成功")}catch(e){_.msgError(e||"重试失败")}}})},E=async o=>{k.$confirm({title:"提示",message:"确定删除吗？",theme:"dark",onConfirm:async()=>{try{await oe({id:o}),r.lists=r.lists.filter(e=>typeof o=="number"?e.id!==o:!n.value.includes(e.id)),_.msgSuccess("删除成功")}catch{_.msgError("删除失败")}}})};return b(),(o,e)=>{const B=q,D=J,f=K,N=W,R=Z,j=ee,z=H,F=Q,P=ie;return t(),a("div",re,[c("div",ce,[i(j,null,{default:d(()=>[c("div",de,[c("div",ue,[i(D,{modelValue:s(m).status,"onUpdate:modelValue":e[0]||(e[0]=l=>s(m).status=l),class:"!w-[260px] status-select","popper-class":"dark-select-popper",clearable:"","show-arrow":!1,"empty-values":[null,void 0],"value-on-clear":null,onChange:s(v)},{default:d(()=>[(t(),a(h,null,w(V,l=>i(B,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","onChange"]),s(r).lists.length>0?(t(),a(h,{key:0},[s(p)?(t(),a("div",pe,[i(N,{modelValue:s(u),"onUpdate:modelValue":e[2]||(e[2]=l=>G(u)?u.value=l:null),onChange:$},{default:d(()=>[...e[6]||(e[6]=[x(" 全选 ",-1)])]),_:1},8,["modelValue"]),i(f,{type:"danger",class:"!h-10 !rounded-full !w-[90px]",onClick:e[3]||(e[3]=l=>E(s(n)))},{default:d(()=>[...e[7]||(e[7]=[x(" 删除 ",-1)])]),_:1}),c("div",null,[i(f,{link:"",onClick:S},{default:d(()=>[...e[8]||(e[8]=[c("span",{class:"text-white"},"退出管理",-1)])]),_:1})])])):(t(),U(f,{key:0,type:"primary",class:"!h-10 !rounded-full !w-[116px]",onClick:e[1]||(e[1]=l=>p.value=!0)},{default:d(()=>[...e[5]||(e[5]=[x(" 批量管理 ",-1)])]),_:1}))],64)):y("",!0),c("div",null,[i(R,{content:"刷新"},{default:d(()=>[i(f,{circle:"",color:"#1f1f1f",icon:"el-icon-Refresh",class:"!w-10 !h-10",onClick:e[4]||(e[4]=l=>s(v)())})]),_:1})])])])]),_:1})]),C((t(),a("div",{class:"grow min-h-0 overflow-y-auto px-4 dynamic-scroller","infinite-scroll-immediate":!1,"infinite-scroll-disabled":!s(r).isLoad,"infinite-scroll-distance":10},[C((t(),a("div",fe,[s(r).lists.length?(t(),a("div",_e,[c("div",ve,[(t(!0),a(h,null,w(s(r).lists,(l,T)=>(t(),a("div",{class:"h-[295px] relative cursor-pointer overflow-hidden",key:T,onClick:we=>L(l.id)},[i(ne,{item:{id:l.id,name:l.name,pic:l.pic,status:l.status,video_url:l.url,model_version:l.model_version,remark:l.remark,create_time:l.create_time},onDelete:E,onRetry:I},null,8,["item"]),s(p)?(t(),a("div",he,[c("div",xe,[i(z,{name:"local-icon-success_fill",size:20,color:s(n).includes(l.id)?"var(--el-color-error)":"#ffffff1a"},null,8,["color"])])])):y("",!0)],8,ge))),128))]),s(r).isLoad?y("",!0):(t(),a("div",ye,"暂无更多了~"))])):(t(),a("div",ke,[i(ae)]))])),[[F,s(r).loading]])],8,me)),[[P,A]])])}}});const Ze=Y(be,[["__scopeId","data-v-9ea88cb2"]]);export{Ze as default};

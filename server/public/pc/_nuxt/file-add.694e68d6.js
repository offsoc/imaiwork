import{d as F,r as V,aF as w,A as C,cx as A,k as B,I as D,s as n,m as u,q as m,Z as a,bM as _,v as g,aH as E,G as v,bK as N,ax as R,_ as S}from"./entry.f4f46cb5.js";import{b as z}from"./knowledge_base.519704cc.js";import{_ as U}from"./file-add-form.vue.3fd4f3b1.js";import{E as I}from"./index.d7101a01.js";import"./index.ed825429.js";import"./index.bad4fd13.js";import"./index.03679949.js";import"./strings.87cef2c7.js";import"./_baseIteratee.0f37ae7b.js";import"./toNumber.d5c70aa7.js";import"./clamp.6295a89e.js";import"./index.d4d0dc47.js";import"./el-slider.3cfbb3b3.js";import"./el-input-number.1ee836d6.js";import"./index.87d72f66.js";import"./debounce.640f3738.js";/* empty css                  *//* empty css               *//* empty css                     */import"./common.1373bb04.js";import"./upload-file.25ff2a9c.js";import"./index.b2901b1d.js";import"./index.26e6fbc6.js";import"./cloneDeep.3fe36a61.js";/* empty css                  *//* empty css                    */const J={class:"pb-8"},L={class:"absolute bottom-0 left-0 w-full flex justify-end p-4 bg-white"},O=F({__name:"file-add",emits:["close","success"],setup(T,{expose:k,emit:y}){const p=y,i=V(!1),t=w({id:"",index_id:"",category_id:"",strategy:1,separator:"",chunk_size:600,overlap_size:100,rerank_min_score:.5,documents:[]}),l=C(),x=async()=>{var o;i.value=!0,await E(),(o=l.value)==null||o.clearUploadFile()},d=()=>{p("close")},b=async()=>{var e;if(!((e=l.value)!=null&&e.validateForm()))return;const o={...t};if(t.strategy==2){const s=t.separator.map(r=>JSON.stringify(r)==JSON.stringify("\\n")?`
`:r);o.separator=s}try{await z(o),v.msgSuccess("操作成功"),i.value=!1,p("success")}catch(s){v.msgError(s||"操作失败")}},{lockFn:c,isLock:f}=A(b);return k({open:x,getDetail:async o=>{N(o,t)}}),(o,e)=>{const s=R;return B(),D(a(I),{modelValue:a(i),"onUpdate:modelValue":e[1]||(e[1]=r=>_(i)?i.value=r:null),title:"添加文件",size:"600px","confirm-loading":a(f),onClose:d,onConfirm:a(c)},{default:n(()=>[u("div",J,[m(U,{ref_key:"fileAddFormRef",ref:l,modelValue:a(t),"onUpdate:modelValue":e[0]||(e[0]=r=>_(t)?t.value=r:null)},null,8,["modelValue"])]),u("div",L,[m(s,{type:"primary",loading:a(f),onClick:a(c)},{default:n(()=>[...e[2]||(e[2]=[g("确定",-1)])]),_:1},8,["loading","onClick"]),m(s,{onClick:d},{default:n(()=>[...e[3]||(e[3]=[g("取消",-1)])]),_:1})])]),_:1},8,["modelValue","confirm-loading","onConfirm"])}}});const fe=S(O,[["__scopeId","data-v-36ae291e"]]);export{fe as default};

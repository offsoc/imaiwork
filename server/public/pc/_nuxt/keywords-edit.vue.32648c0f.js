import{d as h,bP as q,r as u,c as B,aF as D,cx as G,k as N,I as U,s,q as l,Z as t,v as f,m as K,cV as L,G as _,cZ as T,c_ as Z,av as $,au as A,ay as P}from"./entry.f4f46cb5.js";import{a0 as S,a1 as j}from"./person_wechat.703f63bb.js";import z from"./add-content.d4e61971.js";const H={class:"h-[600px] w-full overflow-hidden"},X=h({__name:"keywords-edit",emits:["close","success"],setup(J,{expose:y,emit:k}){const m=k,v=q(),d=u(),n=u("add"),w=B(()=>n.value==="add"?"新增关键词回复":"编辑关键词回复"),c=u(),o=D({id:"",match_type:0,keyword:"",reply:[]}),R={keyword:[{required:!0,message:"请输入匹配内容"}],reply:[{required:!0,message:"请输入回复内容"}]},V=a=>{var e;n.value=a?"edit":"add",(e=d.value)==null||e.open()},E=()=>{m("close")},b=async()=>{var a;await c.value.validate();try{o.id?await S(o):await j({...o,robot_id:v.query.id}),_.msgSuccess(`${n.value==="add"?"新增":"编辑"}成功`),(a=d.value)==null||a.close(),m("success")}catch(e){_.msgError(e||`${n.value==="add"?"新增":"编辑"}失败`)}},{lockFn:x,isLock:C}=G(b);return y({open:V,setFormData:async a=>{for(const e in o)a[e]!=null&&a[e]!=null&&(o[e]=a[e]);o.reply=o.reply.map(e=>({...e,type:parseInt(e.type)}))}}),(a,e)=>{const i=T,F=Z,p=$,g=A,I=P;return N(),U(L,{ref_key:"popupRef",ref:d,async:"",width:"550px",title:t(w),"confirm-loading":t(C),onConfirm:t(x),onClose:E},{default:s(()=>[l(I,{ref_key:"formRef",ref:c,model:t(o),rules:R,"label-position":"top"},{default:s(()=>[l(p,{label:"匹配方式",prop:"match_type"},{default:s(()=>[l(F,{modelValue:t(o).match_type,"onUpdate:modelValue":e[0]||(e[0]=r=>t(o).match_type=r)},{default:s(()=>[l(i,{value:0},{default:s(()=>[...e[3]||(e[3]=[f("模糊匹配",-1)])]),_:1}),l(i,{value:1},{default:s(()=>[...e[4]||(e[4]=[f("精确匹配",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(p,{label:"匹配内容",prop:"keyword"},{default:s(()=>[l(g,{modelValue:t(o).keyword,"onUpdate:modelValue":e[1]||(e[1]=r=>t(o).keyword=r),placeholder:"回复内容支持多词组匹配，以分号相隔; 例如：你好;你好啊;你好呀"},null,8,["modelValue"])]),_:1}),l(p,{label:"回复内容",prop:"reply"},{default:s(()=>[K("div",H,[l(z,{ref:"addContentRef",modelValue:t(o).reply,"onUpdate:modelValue":e[2]||(e[2]=r=>t(o).reply=r),"show-preview":!1},null,8,["modelValue"])])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","confirm-loading","onConfirm"])}}});export{X as _};

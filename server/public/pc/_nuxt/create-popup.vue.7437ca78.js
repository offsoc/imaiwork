import{_ as U}from"./index.vue.520aef1d.js";import{d as q,A as b,aF as x,cq as G,G as k,bI as L,k as v,I as E,s as a,m as l,q as s,t as P,Z as t,v as r,L as S,au as A,av as Z,cT as $,cU as j,ay as z,ax as H,cP as J}from"./entry.46557796.js";import{u as K,p as M}from"./agent.a3fcedc5.js";const O={class:"text-2xl font-bold mb-5"},Q={class:"flex"},ee=q({__name:"create-popup",props:{showChatType:{type:[Boolean,Number]},type:{},agentId:{}},emits:["close","success"],setup(V,{expose:h,emit:g}){const m=V,c=g,i=b(),o=x({robot_id:m.agentId,type:m.type,id:"",name:"",password:"",chat_type:1}),_=b(),C=x({name:[{required:!0,message:"请输入分享名称"}]}),{lockFn:F,isLock:R}=G(async()=>{await _.value.validate();try{o.id?await K(o):await M(o),k.msgSuccess("发布成功"),d(),c("success")}catch(n){k.msgError(n)}}),I=()=>{i.value.open()},d=()=>{c("close")};return h({open:I,setFormData:n=>L(n,o)}),(n,e)=>{const B=U,f=A,u=Z,y=$,N=j,D=z,w=H,T=J;return v(),E(T,{ref_key:"popupRef",ref:i,async:"",width:"550px","confirm-button-text":"","cancel-button-text":"","header-class":"!p-0","show-close":!1},{default:a(()=>[l("div",null,[l("div",{class:"absolute w-6 h-6 right-4 top-4 cursor-pointer",onClick:d},[s(B)]),l("div",O,P(t(o).id?"编辑":"添加")+"链接",1),s(D,{model:t(o),rules:t(C),ref_key:"formRef",ref:_,"label-position":"top"},{default:a(()=>[s(u,{label:"名称",prop:"name"},{default:a(()=>[s(f,{modelValue:t(o).name,"onUpdate:modelValue":e[0]||(e[0]=p=>t(o).name=p),class:"!h-11",placeholder:"记录名称，仅用于展示"},null,8,["modelValue"])]),_:1}),s(u,{label:"密码",prop:"password"},{default:a(()=>[s(f,{modelValue:t(o).password,"onUpdate:modelValue":e[1]||(e[1]=p=>t(o).password=p),type:"password",placeholder:"不设置密码，可直接访问","show-password":"",class:"!h-11"},null,8,["modelValue"])]),_:1}),n.showChatType&&!t(o).id?(v(),E(u,{key:0,label:"对话模式",prop:"chat_type"},{default:a(()=>[l("div",null,[s(N,{modelValue:t(o).chat_type,"onUpdate:modelValue":e[2]||(e[2]=p=>t(o).chat_type=p)},{default:a(()=>[s(y,{value:1},{default:a(()=>e[3]||(e[3]=[r("文本对话",-1)])),_:1,__:[3]}),s(y,{value:2},{default:a(()=>e[4]||(e[4]=[r("形象对话",-1)])),_:1,__:[4]})]),_:1},8,["modelValue"]),e[5]||(e[5]=l("div",{class:"form-tips"},"若关闭或没有配置形象选择后，默认展示文本",-1))])]),_:1})):S("",!0)]),_:1},8,["model","rules"]),l("div",Q,[s(w,{class:"!rounded-full flex-1 !h-[50px]",onClick:d},{default:a(()=>e[6]||(e[6]=[r("取消",-1)])),_:1,__:[6]}),s(w,{type:"primary",class:"!rounded-full flex-1 !h-[50px]",loading:t(R),onClick:t(F)},{default:a(()=>e[7]||(e[7]=[r(" 保存 ",-1)])),_:1,__:[7]},8,["loading","onClick"])])])]),_:1},512)}}});export{ee as _};

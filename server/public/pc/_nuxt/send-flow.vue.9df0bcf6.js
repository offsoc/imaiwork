import{E as C,a as I}from"./index.50778a9c.js";import{d as L,A as f,aF as R,cq as V,bI as B,k as r,I as d,s as l,m as q,q as n,Z as t,l as D,K as O,J as A,ay as N,cO as S,G,av as J}from"./entry.d7219633.js";/* empty css                  *//* empty css               *//* empty css                     */import{ai as K}from"./person_wechat.8bcf26fc.js";import M from"./useTask.c2b7e4e6.js";const W=L({__name:"send-flow",props:{type:{}},emits:["success","close"],setup(P,{expose:u,emit:_}){const i=_,c=f(),m=f(),e=R({id:"",flow_id:[],push_type:0}),w={flow_id:[{required:!0,message:"请选择执行的客户流程",trigger:"blur"}]},{flowLists:k,getFlowLists:E}=M(),F=async()=>{var o;await((o=m.value)==null?void 0:o.validate());try{await K(e),i("success"),p()}catch(a){G.msgError(a)}},b=()=>{var o;(o=c.value)==null||o.open(),E()},p=()=>{i("close")},{lockFn:y,isLock:g}=V(F);return u({open:b,setFormData:o=>{B(o,e),e.flow_id&&(e.flow_id=e.flow_id.map(a=>parseInt(a)))}}),(o,a)=>{const v=C,h=I,x=J;return r(),d(S,{ref_key:"popupRef",ref:c,title:"设置执行范围",width:"500px",async:"","confirm-loading":t(g),onClose:p,onConfirm:t(y)},{default:l(()=>[q("div",null,[n(t(N),{ref_key:"formRef",ref:m,model:t(e),"label-position":"top",rules:w},{default:l(()=>[n(x,{label:"请选择执行的客户流程（多选）",prop:"flow_id"},{default:l(()=>[n(h,{modelValue:t(e).flow_id,"onUpdate:modelValue":a[0]||(a[0]=s=>t(e).flow_id=s),placeholder:"请选择执行的客户流程",filterable:"",multiple:""},{default:l(()=>[(r(!0),D(A,null,O(t(k),s=>(r(),d(v,{key:s.id,label:s.flow_name,value:s.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1},8,["confirm-loading","onConfirm"])}}});export{W as _};

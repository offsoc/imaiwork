import{aW as B,es as le,d as U,W as F,k,I as se,s as A,H as Y,al as Ve,Z as E,be as Fe,aa as xe,cG as ae,cI as fe,cH as Ue,c as b,et as He,Q as ye,b0 as ne,ab as re,N as ce,r as I,b1 as Ge,ck as Je,aR as Oe,aF as Q,D as ue,ai as Me,o as me,b as $e,e as y,ap as X,a1 as Pe,b5 as Be,aI as ze,aJ as Ke,J as ee,aD as Ie,eu as ke,S as de,U as Ye,ev as Ze,aV as Le,az as Qe,b9 as Xe,aB as et,P as we,O as Ae,aH as tt,cE as nt,ah as st,aj as ot,l as R,m as P,Y as pe,v as at,t as ie,am as lt,bc as Se,bM as ut,a as it,z as rt,aG as ct,dt,at as pt,A as vt,q as Te,K as he,L as Ne,er as mt,_ as ft}from"./entry.46557796.js";import{E as ht}from"./index.89b03c7c.js";import{C as bt}from"./index.1d76ef55.js";import{E as _t}from"./index.304400de.js";/* empty css                     */let Mt=class{constructor(t,a){this.parent=t,this.domNode=a,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(t){t===this.subMenuItems.length?t=0:t<0&&(t=this.subMenuItems.length-1),this.subMenuItems[t].focus(),this.subIndex=t}addListeners(){const t=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,a=>{a.addEventListener("keydown",n=>{let r=!1;switch(n.code){case B.down:{this.gotoSubIndex(this.subIndex+1),r=!0;break}case B.up:{this.gotoSubIndex(this.subIndex-1),r=!0;break}case B.tab:{le(t,"mouseleave");break}case B.enter:case B.numpadEnter:case B.space:{r=!0,n.currentTarget.click();break}}return r&&(n.preventDefault(),n.stopPropagation()),!1})})}},gt=class{constructor(t,a){this.domNode=t,this.submenu=null,this.submenu=null,this.init(a)}init(t){this.domNode.setAttribute("tabindex","0");const a=this.domNode.querySelector(`.${t}-menu`);a&&(this.submenu=new Mt(this,a)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",t=>{let a=!1;switch(t.code){case B.down:{le(t.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),a=!0;break}case B.up:{le(t.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),a=!0;break}case B.tab:{le(t.currentTarget,"mouseleave");break}case B.enter:case B.numpadEnter:case B.space:{a=!0,t.currentTarget.click();break}}a&&t.preventDefault()})}},xt=class{constructor(t,a){this.domNode=t,this.init(a)}init(t){const a=this.domNode.childNodes;Array.from(a).forEach(n=>{n.nodeType===1&&new gt(n,t)})}};const yt=U({name:"ElMenuCollapseTransition"}),It=U({...yt,setup(e){const t=F("menu"),a={onBeforeEnter:n=>n.style.opacity="0.2",onEnter(n,r){ae(n,`${t.namespace.value}-opacity-transition`),n.style.opacity="1",r()},onAfterEnter(n){fe(n,`${t.namespace.value}-opacity-transition`),n.style.opacity=""},onBeforeLeave(n){n.dataset||(n.dataset={}),Ue(n,t.m("collapse"))?(fe(n,t.m("collapse")),n.dataset.oldOverflow=n.style.overflow,n.dataset.scrollWidth=n.clientWidth.toString(),ae(n,t.m("collapse"))):(ae(n,t.m("collapse")),n.dataset.oldOverflow=n.style.overflow,n.dataset.scrollWidth=n.clientWidth.toString(),fe(n,t.m("collapse"))),n.style.width=`${n.scrollWidth}px`,n.style.overflow="hidden"},onLeave(n){ae(n,"horizontal-collapse-transition"),n.style.width=`${n.dataset.scrollWidth}px`}};return(n,r)=>(k(),se(Fe,Ve({mode:"out-in"},E(a)),{default:A(()=>[Y(n.$slots,"default")]),_:3},16))}});var St=xe(It,[["__file","menu-collapse-transition.vue"]]);function Re(e,t){const a=b(()=>{let r=e.parent;const f=[t.value];for(;r.type.name!=="ElMenu";)r.props.index&&f.unshift(r.props.index),r=r.parent;return f});return{parentMenu:b(()=>{let r=e.parent;for(;r&&!["ElMenu","ElSubMenu"].includes(r.type.name);)r=r.parent;return r}),indexPath:a}}function Ct(e){return b(()=>{const a=e.backgroundColor;return a?new He(a).shade(20).toString():""})}const We=(e,t)=>{const a=F("menu");return b(()=>a.cssVarBlock({"text-color":e.textColor||"","hover-text-color":e.textColor||"","bg-color":e.backgroundColor||"","hover-bg-color":Ct(e).value||"","active-color":e.activeTextColor||"",level:`${t}`}))},Ce="rootMenu",ve="subMenu:",Et=ye({index:{type:String,required:!0},showTimeout:Number,hideTimeout:Number,popperClass:String,disabled:Boolean,teleported:{type:Boolean,default:void 0},popperOffset:Number,expandCloseIcon:{type:ne},expandOpenIcon:{type:ne},collapseCloseIcon:{type:ne},collapseOpenIcon:{type:ne}}),be="ElSubMenu";var Ee=U({name:be,props:Et,setup(e,{slots:t,expose:a}){const n=Ie(),{indexPath:r,parentMenu:f}=Re(n,b(()=>e.index)),p=F("menu"),_=F("sub-menu"),o=re(Ce);o||ce(be,"can not inject root menu");const c=re(`${ve}${f.value.uid}`);c||ce(be,"can not inject sub menu");const d=I({}),M=I({});let v;const w=I(!1),T=I(),H=I(),W=b(()=>S.value==="horizontal"&&D.value?"bottom-start":"right-start"),j=b(()=>S.value==="horizontal"&&D.value||S.value==="vertical"&&!o.props.collapse?e.expandCloseIcon&&e.expandOpenIcon?N.value?e.expandOpenIcon:e.expandCloseIcon:Ge:e.collapseCloseIcon&&e.collapseOpenIcon?N.value?e.collapseOpenIcon:e.collapseCloseIcon:Je),D=b(()=>c.level===0),G=b(()=>{const u=e.teleported;return Oe(u)?D.value:u}),te=b(()=>o.props.collapse?`${p.namespace.value}-zoom-in-left`:`${p.namespace.value}-zoom-in-top`),Z=b(()=>S.value==="horizontal"&&D.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","right","right-end","left-start","bottom-start","bottom-end","top-start","top-end"]),N=b(()=>o.openedMenus.includes(e.index)),g=b(()=>[...Object.values(d.value),...Object.values(M.value)].some(({active:u})=>u)),S=b(()=>o.props.mode),O=b(()=>o.props.persistent),$=Q({index:e.index,indexPath:r,active:g}),J=We(o.props,c.level+1),K=b(()=>{var u;return(u=e.popperOffset)!=null?u:o.props.popperOffset}),z=b(()=>{var u;return(u=e.popperClass)!=null?u:o.props.popperClass}),oe=b(()=>{var u;return(u=e.showTimeout)!=null?u:o.props.showTimeout}),s=b(()=>{var u;return(u=e.hideTimeout)!=null?u:o.props.hideTimeout}),l=()=>{var u,C,x;return(x=(C=(u=H.value)==null?void 0:u.popperRef)==null?void 0:C.popperInstanceRef)==null?void 0:x.destroy()},i=u=>{u||l()},m=()=>{o.props.menuTrigger==="hover"&&o.props.mode==="horizontal"||o.props.collapse&&o.props.mode==="vertical"||e.disabled||o.handleSubMenuClick({index:e.index,indexPath:r.value,active:g.value})},h=(u,C=oe.value)=>{var x;if(u.type!=="focus"){if(o.props.menuTrigger==="click"&&o.props.mode==="horizontal"||!o.props.collapse&&o.props.mode==="vertical"||e.disabled){c.mouseInChild.value=!0;return}c.mouseInChild.value=!0,v==null||v(),{stop:v}=ke(()=>{o.openMenu(e.index,r.value)},C),G.value&&((x=f.value.vnode.el)==null||x.dispatchEvent(new MouseEvent("mouseenter")))}},L=(u=!1)=>{var C;if(o.props.menuTrigger==="click"&&o.props.mode==="horizontal"||!o.props.collapse&&o.props.mode==="vertical"){c.mouseInChild.value=!1;return}v==null||v(),c.mouseInChild.value=!1,{stop:v}=ke(()=>!w.value&&o.closeMenu(e.index,r.value),s.value),G.value&&u&&((C=c.handleMouseleave)==null||C.call(c,!0))};ue(()=>o.props.collapse,u=>i(!!u));{const u=x=>{M.value[x.index]=x},C=x=>{delete M.value[x.index]};Me(`${ve}${n.uid}`,{addSubMenu:u,removeSubMenu:C,handleMouseleave:L,mouseInChild:w,level:c.level+1})}return a({opened:N}),me(()=>{o.addSubMenu($),c.addSubMenu($)}),$e(()=>{c.removeSubMenu($),o.removeSubMenu($)}),()=>{var u;const C=[(u=t.title)==null?void 0:u.call(t),y(Pe,{class:_.e("icon-arrow"),style:{transform:N.value?e.expandCloseIcon&&e.expandOpenIcon||e.collapseCloseIcon&&e.collapseOpenIcon&&o.props.collapse?"none":"rotateZ(180deg)":"none"}},{default:()=>X(j.value)?y(n.appContext.components[j.value]):y(j.value)})],x=o.isMenuPopup?y(Be,{ref:H,visible:N.value,effect:"light",pure:!0,offset:K.value,showArrow:!1,persistent:O.value,popperClass:z.value,placement:W.value,teleported:G.value,fallbackPlacements:Z.value,transition:te.value,gpuAcceleration:!1},{content:()=>{var q;return y("div",{class:[p.m(S.value),p.m("popup-container"),z.value],onMouseenter:V=>h(V,100),onMouseleave:()=>L(!0),onFocus:V=>h(V,100)},[y("ul",{class:[p.b(),p.m("popup"),p.m(`popup-${W.value}`)],style:J.value},[(q=t.default)==null?void 0:q.call(t)])])},default:()=>y("div",{class:_.e("title"),onClick:m},C)}):y(ee,{},[y("div",{class:_.e("title"),ref:T,onClick:m},C),y(ht,{},{default:()=>{var q;return ze(y("ul",{role:"menu",class:[p.b(),p.m("inline")],style:J.value},[(q=t.default)==null?void 0:q.call(t)]),[[Ke,N.value]])}})]);return y("li",{class:[_.b(),_.is("active",g.value),_.is("opened",N.value),_.is("disabled",e.disabled)],role:"menuitem",ariaHaspopup:!0,ariaExpanded:N.value,onMouseenter:h,onMouseleave:()=>L(),onFocus:h},[x])}}});const kt=ye({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:de(Array),default:()=>Ye([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,closeOnClickOutside:Boolean,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0},popperOffset:{type:Number,default:6},ellipsisIcon:{type:ne,default:()=>Ze},popperEffect:{type:de(String),default:"dark"},popperClass:String,showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300},persistent:{type:Boolean,default:!0}}),_e=e=>Ae(e)&&e.every(t=>X(t)),wt={close:(e,t)=>X(e)&&_e(t),open:(e,t)=>X(e)&&_e(t),select:(e,t,a,n)=>X(e)&&_e(t)&&et(a)&&(Oe(n)||n instanceof Promise)};var Tt=U({name:"ElMenu",props:kt,emits:wt,setup(e,{emit:t,slots:a,expose:n}){const r=Ie(),f=r.appContext.config.globalProperties.$router,p=I(),_=F("menu"),o=F("sub-menu"),c=I(-1),d=I(e.defaultOpeneds&&!e.collapse?e.defaultOpeneds.slice(0):[]),M=I(e.defaultActive),v=I({}),w=I({}),T=b(()=>e.mode==="horizontal"||e.mode==="vertical"&&e.collapse),H=()=>{const s=M.value&&v.value[M.value];if(!s||e.mode==="horizontal"||e.collapse)return;s.indexPath.forEach(i=>{const m=w.value[i];m&&W(i,m.indexPath)})},W=(s,l)=>{d.value.includes(s)||(e.uniqueOpened&&(d.value=d.value.filter(i=>l.includes(i))),d.value.push(s),t("open",s,l))},j=s=>{const l=d.value.indexOf(s);l!==-1&&d.value.splice(l,1)},D=(s,l)=>{j(s),t("close",s,l)},G=({index:s,indexPath:l})=>{d.value.includes(s)?D(s,l):W(s,l)},te=s=>{(e.mode==="horizontal"||e.collapse)&&(d.value=[]);const{index:l,indexPath:i}=s;if(!(we(l)||we(i)))if(e.router&&f){const m=s.route||l,h=f.push(m).then(L=>(L||(M.value=l),L));t("select",l,i,{index:l,indexPath:i,route:m},h)}else M.value=l,t("select",l,i,{index:l,indexPath:i})},Z=s=>{var l;const i=v.value,m=i[s]||M.value&&i[M.value]||i[e.defaultActive];M.value=(l=m==null?void 0:m.index)!=null?l:s},N=s=>{const l=getComputedStyle(s),i=Number.parseInt(l.marginLeft,10),m=Number.parseInt(l.marginRight,10);return s.offsetWidth+i+m||0},g=()=>{var s,l;if(!p.value)return-1;const i=Array.from((l=(s=p.value)==null?void 0:s.childNodes)!=null?l:[]).filter(V=>V.nodeName!=="#text"||V.nodeValue),m=64,h=getComputedStyle(p.value),L=Number.parseInt(h.paddingLeft,10),u=Number.parseInt(h.paddingRight,10),C=p.value.clientWidth-L-u;let x=0,q=0;return i.forEach((V,qe)=>{V.nodeName!=="#comment"&&(x+=N(V),x<=C-m&&(q=qe+1))}),q===i.length?-1:q},S=s=>w.value[s].indexPath,O=(s,l=33.34)=>{let i;return()=>{i&&clearTimeout(i),i=setTimeout(()=>{s()},l)}};let $=!0;const J=()=>{if(c.value===g())return;const s=()=>{c.value=-1,tt(()=>{c.value=g()})};$?s():O(s)(),$=!1};ue(()=>e.defaultActive,s=>{v.value[s]||(M.value=""),Z(s)}),ue(()=>e.collapse,s=>{s&&(d.value=[])}),ue(v.value,H);let K;Le(()=>{e.mode==="horizontal"&&e.ellipsis?K=Qe(p,J).stop:K==null||K()});const z=I(!1);{const s=h=>{w.value[h.index]=h},l=h=>{delete w.value[h.index]};Me(Ce,Q({props:e,openedMenus:d,items:v,subMenus:w,activeIndex:M,isMenuPopup:T,addMenuItem:h=>{v.value[h.index]=h},removeMenuItem:h=>{delete v.value[h.index]},addSubMenu:s,removeSubMenu:l,openMenu:W,closeMenu:D,handleMenuItemClick:te,handleSubMenuClick:G})),Me(`${ve}${r.uid}`,{addSubMenu:s,removeSubMenu:l,mouseInChild:z,level:0})}me(()=>{e.mode==="horizontal"&&new xt(r.vnode.el,_.namespace.value)}),n({open:l=>{const{indexPath:i}=w.value[l];i.forEach(m=>W(m,i))},close:j,updateActiveIndex:Z,handleResize:J});const oe=We(e,0);return()=>{var s,l;let i=(l=(s=a.default)==null?void 0:s.call(a))!=null?l:[];const m=[];if(e.mode==="horizontal"&&p.value){const u=Xe(i),C=c.value===-1?u:u.slice(0,c.value),x=c.value===-1?[]:u.slice(c.value);x!=null&&x.length&&e.ellipsis&&(i=C,m.push(y(Ee,{index:"sub-menu-more",class:o.e("hide-arrow"),popperOffset:e.popperOffset},{title:()=>y(Pe,{class:o.e("icon-more")},{default:()=>y(e.ellipsisIcon)}),default:()=>x})))}const h=e.closeOnClickOutside?[[bt,()=>{d.value.length&&(z.value||(d.value.forEach(u=>t("close",u,S(u))),d.value=[]))}]]:[],L=ze(y("ul",{key:String(e.collapse),role:"menubar",ref:p,style:oe.value,class:{[_.b()]:!0,[_.m(e.mode)]:!0,[_.m("collapse")]:e.collapse}},[...i,...m]),h);return e.collapseTransition&&e.mode==="vertical"?y(St,()=>L):L}}});const Nt=ye({index:{type:de([String,null]),default:null},route:{type:de([String,Object])},disabled:Boolean}),Ot={click:e=>X(e.index)&&Ae(e.indexPath)},ge="ElMenuItem",$t=U({name:ge}),Pt=U({...$t,props:Nt,emits:Ot,setup(e,{expose:t,emit:a}){const n=e;nt(n.index)&&st();const r=Ie(),f=re(Ce),p=F("menu"),_=F("menu-item");f||ce(ge,"can not inject root menu");const{parentMenu:o,indexPath:c}=Re(r,ot(n,"index")),d=re(`${ve}${o.value.uid}`);d||ce(ge,"can not inject sub menu");const M=b(()=>n.index===f.activeIndex),v=Q({index:n.index,indexPath:c,active:M}),w=()=>{n.disabled||(f.handleMenuItemClick({index:n.index,indexPath:c.value,route:n.route}),a("click",v))};return me(()=>{d.addSubMenu(v),f.addMenuItem(v)}),$e(()=>{d.removeSubMenu(v),f.removeMenuItem(v)}),t({parentMenu:o,rootMenu:f,active:M,nsMenu:p,nsMenuItem:_,handleClick:w}),(T,H)=>(k(),R("li",{class:pe([E(_).b(),E(_).is("active",E(M)),E(_).is("disabled",T.disabled)]),role:"menuitem",tabindex:"-1",onClick:w},[E(o).type.name==="ElMenu"&&E(f).props.collapse&&T.$slots.title?(k(),se(E(Be),{key:0,effect:E(f).props.popperEffect,placement:"right","fallback-placements":["left"],persistent:E(f).props.persistent},{content:A(()=>[Y(T.$slots,"title")]),default:A(()=>[P("div",{class:pe(E(p).be("tooltip","trigger"))},[Y(T.$slots,"default")],2)]),_:3},8,["effect","persistent"])):(k(),R(ee,{key:1},[Y(T.$slots,"default"),Y(T.$slots,"title")],64))],2))}});var je=xe(Pt,[["__file","menu-item.vue"]]);const Bt={title:String},zt=U({name:"ElMenuItemGroup"}),Lt=U({...zt,props:Bt,setup(e){const t=F("menu-item-group");return(a,n)=>(k(),R("li",{class:pe(E(t).b())},[P("div",{class:pe(E(t).e("title"))},[a.$slots.title?Y(a.$slots,"title",{key:1}):(k(),R(ee,{key:0},[at(ie(a.title),1)],64))],2),P("ul",null,[Y(a.$slots,"default")])],2))}});var De=xe(Lt,[["__file","menu-item-group.vue"]]);const At=lt(Tt,{MenuItem:je,MenuItemGroup:De,SubMenu:Ee}),Rt=Se(je);Se(De);const Wt=Se(Ee);const jt={class:"h-full flex gap-x-4"},Dt={class:"w-[210px] bg-white border-r border-r-[#e5e5e5] py-2 flex-shrink-0"},qt={class:"flex gap-2 items-center"},Vt={class:"w-6 h-6 flex-shrink-0 flex items-center justify-center"},Ft=["src"],Ut={class:"text-base"},Ht={class:"flex gap-2 items-center overflow-hidden"},Gt={class:"text-ellipsis whitespace-nowrap overflow-hidden text-base"},Jt={class:"flex gap-2 items-center overflow-hidden"},Kt={class:"w-6 h-6 flex-shrink-0 flex items-center justify-center"},Yt=["src"],Zt={class:"text-ellipsis whitespace-nowrap overflow-hidden text-base"},Qt=U({__name:"sidebar",props:{formList:{default:()=>[]},detail:{default:()=>({name:"",logo:"",description:""})},isLock:{type:Boolean,default:!1}},emits:["success","change-scene"],setup(e,{expose:t,emit:a}){var N;const n=ut(),r=it(),f=rt();ct(f),(N=f.getTokenByScene(dt.SCENE_CHAT))==null||N.score;const{menuList:p}=pt(),_=I(""),o=Q({type:3,page_size:9999}),c=I(""),d=I(""),M=()=>{_.value=`${n.query.ppid}-${n.query.pid}-${n.query.id}`,d.value=n.query.pid,c.value=n.query.ppid,T()},v=g=>{if(g.indexOf("-")>-1){const[S,O]=g.split("-");d.value=O,c.value=S,T()}},w=g=>{const[S,O,$]=g.split("-");o.ppid=S,o.assistant_id=$,o.scene_id=O,r.replace({query:{ppid:S,pid:O,id:$}}),W("change-scene")},T=async()=>{if(!d.value)return;const{lists:g}=await mt({...o,scene_id:d.value});p.forEach(S=>{S.id==c.value&&S.sub_list.forEach(O=>{O.id==d.value&&(O.sub_list=g)})})},H=e,W=a,j=Q({}),D=vt();Q({});const G=I([]);I(1);const te=()=>{H.formList.forEach(g=>{j[g.props.field]=""})},Z=async()=>{var g;return await((g=D.value)==null?void 0:g.validate())};return Le(()=>{te()}),me(()=>{M()}),t({formData:j,fileLists:G,formValidate:Z}),(g,S)=>{const O=Rt,$=Wt,J=At,K=_t;return k(),R("div",jt,[P("div",Dt,[Te(K,null,{default:A(()=>[Te(J,{collapse:"","default-active":E(_),onSelect:w,onOpen:v},{default:A(()=>[(k(!0),R(ee,null,he(E(p),(z,oe)=>(k(),se($,{index:`${z.id}`},{title:A(()=>[P("div",qt,[P("div",Vt,[z.logo?(k(),R("img",{key:0,src:z.logo,class:"w-[24px] h-[24px] rounded-full object-cover"},null,8,Ft)):Ne("",!0)]),P("span",Ut,ie(z.name),1)])]),default:A(()=>[(k(!0),R(ee,null,he(z.sub_list,(s,l)=>(k(),se($,{title:s.name,index:`${s.pid}-${s.id}`},{title:A(()=>[P("div",Ht,[P("div",Gt,ie(s.name),1)])]),default:A(()=>[(k(!0),R(ee,null,he(s.sub_list,(i,m)=>(k(),se(O,{index:`${s.pid}-${s.id}-${i.id}`},{title:A(()=>[P("div",Jt,[P("div",Kt,[i.logo?(k(),R("img",{key:0,src:i.logo,class:"w-[24px] h-[24px] rounded-full object-cover"},null,8,Yt)):Ne("",!0)]),P("div",Zt,ie(i.name),1)])]),_:2},1032,["index"]))),256))]),_:2},1032,["title","index"]))),256))]),_:2},1032,["index"]))),256))]),_:1},8,["default-active"])]),_:1})])])}}});const un=ft(Qt,[["__scopeId","data-v-d0e4a4dd"]]);export{un as default};

import{d as M,aG as A,r as T,at as G,c as H,aF as W,D as Z,k as d,I as B,s as r,m as t,q as l,Z as u,$ as J,v as f,aI as O,l as g,t as Q,bM as X,L as Y,cV as ee,y as oe,au as te,ax as se,cW as ne,_ as le}from"./entry.f4f46cb5.js";import{_ as ae}from"./index.vue.fd4cab65.js";import{E as ie,a as re}from"./index.eb05fb19.js";import{E as ce}from"./index.03679949.js";import{_ as ue}from"./index.vue.f3f2b692.js";/* empty css                        *//* empty css               *//* empty css                 *//* empty css                     */import{u as pe}from"./usePaging.64f4ceb2.js";import{ToneTypeEnum as de}from"./index.728f9c9c.js";import{g as fe}from"./digital_human.b276942f.js";import{c as me}from"./cloneDeep.7492d0e6.js";import"./index.bad4fd13.js";import"./_baseIteratee.0f37ae7b.js";import"./debounce.640f3738.js";import"./toNumber.d5c70aa7.js";import"./index.d4d0dc47.js";import"./raf.787400b1.js";import"./index.ed825429.js";import"./strings.87cef2c7.js";import"./clamp.6295a89e.js";const _e={class:"rounded-xl overflow-hidden flex flex-col -my-2"},ve={class:"flex items-center justify-between h-[50px] px-4"},xe={class:"flex items-center gap-x-2"},ye={class:"w-6 h-6 flex items-center justify-center rounded-md border border-[#ffffff1a]"},he={class:"px-4 my-4"},ge={class:"flex items-center rounded-full h-[50px] border border-[#2a2a2a] px-[5px]"},be={class:"h-[500px] flex flex-col"},we={class:"grow min-h-0 cursor-pointer"},Ce={key:0},Ee={key:1},ke={class:"w-5 h-5 flex items-center justify-center rounded-full mx-auto"},Ve={class:"flex justify-center my-2 px-2"},Te={key:0,class:"flex justify-center my-2 px-2"},Be=M({__name:"choose-tone",props:{is_show_original:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1}},emits:["close","confirm"],setup(I,{expose:$,emit:R}){const j=I,b=R,{is_show_original:D,multiple:c}=A(j),w=T(),L=G(),m=H(()=>{var e;const o=me((e=L.getDigitalHumanConfig)==null?void 0:e.voice.filter(s=>s.status=="1").map(s=>({...s,voice_id:s.code,builtin:0})));return D.value&&o.unshift({voice_id:-1,name:"视频原音",builtin:1}),o}),p=W({name:"",status:1,model_version:"",builtin:de.USER}),{pager:i,getLists:_}=pe({fetchFun:fe,params:p}),v=async()=>{const o=m.value.filter(e=>e.name.includes(p.name));await _(),i.lists.unshift(...o)},a=T(),C=o=>{var s;if(c.value)return((s=a.value)==null?void 0:s.findIndex(y=>y.voice_id===o))>-1;const{voice_id:e}=a.value||{};return e?e===o:!1},S=o=>{const{voice_id:e}=o;C(e)?c.value?a.value=a.value.filter(s=>s.voice_id!==e):a.value={}:c.value?a.value.push(o):a.value=o,c.value||E()},N=o=>{a.value=o},P=async()=>{await _(),i.page==1&&i.lists.unshift(...m.value)},E=()=>{b("confirm",a.value),x()},U=async o=>{var e;(e=w.value)==null||e.open(),p.model_version=o,await _(),i.lists.unshift(...m.value)},x=()=>{b("close")};return Z(()=>c.value,o=>{o?a.value=[]:a.value={}},{immediate:!0}),$({open:U,setChooseTone:N}),(o,e)=>{const s=oe,y=ae,q=te,k=se,h=ie,V=ce,z=re,F=ue,K=ne;return d(),B(ee,{ref_key:"popupRef",ref:w,width:"528px",class:"choose-anchor-popup",style:{padding:"0","background-color":"var(--app-bg-color-2)","box-shadow":"0px 0px 0px 1px var(--app-border-color-2)"},"confirm-button-text":"","cancel-button-text":"","show-close":!1,onClose:x},{default:r(()=>[t("div",_e,[t("div",ve,[t("div",xe,[t("div",ye,[l(s,{name:"local-icon-windows",size:14})]),e[6]||(e[6]=t("div",{class:"text-[20px] text-white font-bold"},"从已有音色中选择",-1))]),t("div",{class:"w-6 h-6",onClick:x},[l(y)])]),t("div",he,[t("div",ge,[l(q,{modelValue:u(p).name,"onUpdate:modelValue":e[0]||(e[0]=n=>u(p).name=n),class:"flex-1 search-input",clearable:"","prefix-icon":"el-icon-Search",placeholder:"请输入音色名称","input-style":"color: #ffffff",onClear:e[1]||(e[1]=n=>v()),onKeyup:e[2]||(e[2]=J(n=>v(),["enter"]))},null,8,["modelValue"]),l(k,{type:"primary",class:"!text-white !rounded-full !w-[116px] !h-10",onClick:e[3]||(e[3]=n=>v())},{default:r(()=>[...e[7]||(e[7]=[f(" 搜索 ",-1)])]),_:1})])]),t("div",be,[t("div",we,[O((d(),B(z,{data:u(i).lists,height:"100%",onRowClick:S},{default:r(()=>[l(h,{label:"音色名称",prop:"name"}),l(h,{label:"音色类型"},{default:r(({row:n})=>[n.voice_id==-1?(d(),g("div",Ce,[e[9]||(e[9]=t("span",null,"当前视频",-1)),l(V,{class:"ml-3",effect:"dark",type:"primary",round:"","disable-transitions":!0},{default:r(()=>[...e[8]||(e[8]=[f("原生",-1)])]),_:1})])):(d(),g("div",Ee,[t("span",null,Q(n.builtin==0?"内置音色":"用户音色"),1),l(V,{class:"ml-3 !border-none !text-white",color:"#3BB840",round:"","disable-transitions":!0},{default:r(()=>[...e[10]||(e[10]=[f("免费",-1)])]),_:1})]))]),_:1}),l(h,{label:"操作"},{default:r(({row:n})=>[t("div",ke,[l(s,{name:"local-icon-success_fill",size:20,color:C(n.voice_id)?"var(--color-primary)":"#ffffff1a"},null,8,["color"])])]),_:1})]),_:1},8,["data"])),[[K,u(i).loading]])]),t("div",Ve,[l(F,{modelValue:u(i),"onUpdate:modelValue":e[4]||(e[4]=n=>X(i)?i.value=n:null),layout:"prev, pager, next",onChange:P},null,8,["modelValue"])])]),u(c)?(d(),g("div",Te,[l(k,{type:"primary",class:"!rounded-full w-[318px] !h-[50px]",onClick:e[5]||(e[5]=n=>E())},{default:r(()=>[...e[11]||(e[11]=[f(" 确定 ",-1)])]),_:1})])):Y("",!0)])]),_:1},512)}}});const Qe=le(Be,[["__scopeId","data-v-e7ccd289"]]);export{Qe as default};

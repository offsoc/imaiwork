import{E as $,a as L}from"./el-tabs.68bb8047.js";import{E as R,a as W}from"./index.8fd3c68c.js";import{d as X,at as z,c as q,aF as H,r as J,D as K,aW as Y,G as T,k as m,l as i,m as r,q as n,s,J as E,K as x,Z as a,I,Y as Z,t as j,bM as Q,B as ee,L as h,v as te,av as le,au as ae,ax as oe,ay as ne}from"./entry.ee599c70.js";import{E as se}from"./index.e69b4eeb.js";/* empty css                  *//* empty css               *//* empty css                     */import{GenerateVideoTypeEnum as d,ModelEnum as k}from"./index.fb0aa6a9.js";import{CopywritingTypeEnum as re}from"./chatEnum.1c450e0f.js";import{_ as me}from"./resolution-select.vue.f00d45f7.js";import{_ as ie}from"./image-upload.vue.03d48380.js";const de={class:"h-full flex flex-col"},pe={class:"type-tabs"},ue={class:"grow min-h-0"},ce={class:"p-4"},_e={class:"flex items-center gap-2 text-[11px] px-[6px]"},fe=["onClick"],be={class:"w-full"},ge={key:0},Ee={key:1,class:"h-[126px] rounded-md border border-app-border-2 bg-app-bg-3 p-4 flex flex-col items-center justify-center"},w=150,Ue=X({__name:"generation-video-form",emits:["update:formData","generatePrompt"],setup(xe,{expose:D,emit:C}){const v=C,A=z(),p=q(()=>A.getHdConfig.channel.filter(o=>[k.GENERAL,k.SEEDANCE].includes(parseInt(o.id)))),e=H({type:d.TXT2VIDEO,model:"",text:"",aspect_ratio:"",image_url:void 0}),O=[{label:"文生视频",value:d.TXT2VIDEO},{label:"图生视频",value:d.IMG2VIDEO}],U=o=>{e.model=p.value[0].id},y=[{label:"本地图片",id:1},{label:"链接图片",id:2}],u=J(y[0].id),F=o=>{v("generatePrompt",{promptId:o,prompt:e.text})},G=o=>{e.text=o.slice(0,w)},N=o=>{e.aspect_ratio=o.label};return K(()=>p.value,o=>{o.length>0&&(e.model=o[0].id)},{immediate:!0}),Y(()=>{v("update:formData",e)}),D({getFormData:()=>{var c;const{image_url:o,text:t,aspect_ratio:f}=e;return{params:{image_url:o,text:t,aspect_ratio:f},type:e.type,type_name:e.type==d.TXT2VIDEO?"文生视频":"图生视频",model:e.model,model_name:(c=p.value.find(b=>b.id==e.model))==null?void 0:c.name}},validateForm:()=>new Promise((o,t)=>{e.text?!e.image_url&&e.type==d.IMG2VIDEO&&(T.msgWarning("图片不能为空"),t("图片不能为空")):(T.msgWarning("创作描述不能为空"),t("创作描述不能为空")),o(!0)}),setPrompt:G}),(o,t)=>{const f=$,c=L,b=R,S=W,_=le,V=ae,B=oe,P=ne,M=se;return m(),i("div",de,[r("div",pe,[n(c,{modelValue:a(e).type,"onUpdate:modelValue":t[0]||(t[0]=l=>a(e).type=l),onTabClick:U},{default:s(()=>[(m(),i(E,null,x(O,(l,g)=>n(f,{name:l.value,label:l.label,key:g},null,8,["name","label"])),64))]),_:1},8,["modelValue"])]),r("div",ue,[n(M,null,{default:s(()=>[r("div",ce,[n(P,{model:a(e),"label-position":"top"},{default:s(()=>[n(_,{label:"生成模型"},{default:s(()=>[n(S,{modelValue:a(e).model,"onUpdate:modelValue":t[1]||(t[1]=l=>a(e).model=l),class:"!h-11","popper-class":"dark-select-popper",placeholder:"请选择模型名称","show-arrow":!1},{default:s(()=>[(m(!0),i(E,null,x(a(p),l=>(m(),I(b,{label:l.name,value:l.id,key:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(e).type==a(d).IMG2VIDEO?(m(),I(_,{key:0},{label:s(()=>[r("div",_e,[(m(),i(E,null,x(y,(l,g)=>r("div",{class:Z(["h-[26px] rounded-md px-[11px] flex items-center cursor-pointer",[a(u)===l.id?"bg-primary":"shadow-[0_0_0_1px_#2A2A2A] bg-app-bg-1 "]]),key:g,onClick:ve=>{u.value=l.id,a(e).image_url=""}},j(l.label),11,fe)),64))])]),default:s(()=>[r("div",be,[a(u)===1?(m(),i("div",ge,[n(ie,{"form-data":a(e),"onUpdate:formData":t[2]||(t[2]=l=>Q(e)?e.value=l:null),content:"上传图片","img-key":"image_url","template-video-url":`${("getApiUrl"in o?o.getApiUrl:a(ee))()}/static/videos/reference-image-tips-video.mp4`},null,8,["form-data","template-video-url"])])):a(u)===2?(m(),i("div",Ee,[t[6]||(t[6]=r("div",{class:"text-[11px] text-white mb-5"},"输入图片链接开始制作吧",-1)),n(V,{modelValue:a(e).image_url,"onUpdate:modelValue":t[3]||(t[3]=l=>a(e).image_url=l),placeholder:"请输入图片链接"},null,8,["modelValue"])])):h("",!0)])]),_:1})):h("",!0),n(_,{label:"创作描述"},{default:s(()=>[n(V,{modelValue:a(e).text,"onUpdate:modelValue":t[4]||(t[4]=l=>a(e).text=l),type:"textarea",resize:"none",placeholder:"请输入创作描述","show-word-limit":"",maxlength:w,rows:11},null,8,["modelValue"]),n(B,{type:"primary",class:"!rounded-full !h-[50px] w-full mt-3",disabled:!a(e).text,onClick:t[5]||(t[5]=l=>F(a(re).AI_GENERATION_VIDEO))},{default:s(()=>[...t[7]||(t[7]=[te(" 生成提示词 ",-1)])]),_:1},8,["disabled"])]),_:1}),n(_,null,{label:s(()=>[...t[8]||(t[8]=[r("div",{class:"flex items-center gap-2 text-white"},[r("span",null,"生成规格")],-1)])]),default:s(()=>[n(me,{"onUpdate:resolution":N})]),_:1})]),_:1},8,["model"])])]),_:1})])])}}});export{Ue as _};

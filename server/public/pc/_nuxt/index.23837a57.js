import{E as M}from"./index.2da0c7da.js";import{d as Y,A as H,r as I,c as D,o as J,k as n,l as a,q as o,s as u,Z as l,m as e,aI as j,J as k,K as Z,Y as B,t as m,dv as X,a0 as T,v as y,L as O,G as p,cy as $,aw as ee,y as se,ax as te,cW as oe,_ as le}from"./entry.ee599c70.js";import{E as ie,a as ne}from"./el-tabs.68bb8047.js";import{E as ae}from"./el-image.c8eee104.js";import{E as re}from"./index.f36399ff.js";import{E as ce}from"./index.684b3e96.js";import{E as de}from"./index.e69b4eeb.js";import{E as ue}from"./el-empty.76498597.js";/* empty css                 */import"./el-image-viewer.4443ea01.js";/* empty css                   *//* empty css               *//* empty css                     */import{u as me}from"./usePaging.5914886e.js";import{m as fe,_ as pe,a as ve}from"./sidebar.vue.2fc7973b.js";import _e from"./control.49efc090.js";import"./raf.09011a0b.js";import"./strings.32bdf471.js";import"./clamp.05cad4d6.js";import"./toNumber.0872a42f.js";import"./index.6ab00366.js";import"./throttle.108b0b49.js";import"./debounce.f4735d5c.js";import"./el-slider.b59fa7c4.js";import"./el-input-number.0bb1bb2b.js";import"./index.7e73622e.js";const ge="data:image/png;base64,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",Ae=""+new URL("empty_image.bfa812a1.png",import.meta.url).href,he={class:"h-full flex"},xe={class:"px-8 grow h-full relative"},Ee={class:"h-full flex flex-col pb-[120px]"},be={class:"pt-8 w-full h-full flex flex-col"},Ce={class:"grow min-h-0"},ye={key:0,class:"h-full flex flex-col"},we={class:"h-full grow min-h-0 relative"},Qe={class:"min-w-[700px] flex h-full"},qe={class:"bg-[#FAFAFA] h-full grow"},Ne={class:"space-y-4 p-5"},Ie=["onClick"],De={class:"flex items-center gap-4 grow"},ke={class:"flex flex-col gap-2 grow"},Be={class:"line-clamp-1"},Ke={class:"flex justify-between items-end w-full text-tx-primary text-sm"},Pe={class:"flex flex-col gap-1"},Ue={class:"text-xs"},Fe={class:"text-xs"},Ve={class:"rotate-90 origin-center p-1"},We={class:"flex flex-col text-center gap-y-2"},ze={key:1,class:"h-full flex items-center justify-center w-full"},Ge={class:"absolute right-2 top-2"},Le={class:"shadow rounded-xl bg-white z-50 h-full w-[40%]",style:{background:`linear-gradient(
                                                137.64deg,
                                                rgba(184, 219, 255, 1) 0%,
                                                rgba(255, 255, 255, 1) 100%
                                            )`}},Re={key:0,class:"flex flex-col items-center p-5 h-full min-h-0"},Se={class:"text-center mt-4"},Me={class:"text-lg"},Ye={class:"text-tx-primary text-sm mt-2"},He={class:"grow min-h-0 mt-4 w-full"},Je={class:"px-2 whitespace-pre-line flex justify-center"},je={key:1,class:"h-full flex items-center justify-center"},Ze={key:1,class:"h-full flex items-center justify-center"},Xe={key:0,class:"h-24 bg-white w-full shadow-[0_-20px_20px_0_rgba(0,0,0,0.02)] absolute z-50 bottom-0 left-0"},Te={class:"h-full flex items-center px-5"},Oe={class:"flex items-center gap-4 w-[25%]"},$e={class:"flex flex-col grow"},es={class:"text-sm text-tx-primary"},ss={class:"grow ml-14"},ts=Y({__name:"index",setup(os){const{pager:_,getLists:w,resetPage:K}=me({size:25e3,fetchFun:fe}),g=H(null),b=I(0),r=I(0),d=D(()=>A.value[r.value]||{}),A=D(()=>{const{lists:t}=_;if(t.length)return t.map(c=>{const f=Object.keys(c.json_info),v=f.length?P(c.json_info[f[0]]):{};return{...c,...v}})}),P=t=>{var h;if(!t)return{};const{prompt:s={},image_url:c,audio_url:f,status:v}=t;return{image_url:c,audio_url:f,status:v,tags:(h=s.tags)==null?void 0:h.replace(/\s+/g,"；"),duration:s.duration,lyric:s.prompt}},U=t=>{r.value=t},F=()=>{var t;r.value<A.value.length-1?r.value++:r.value=0,(t=g.value)==null||t.resetPlayer()},V=()=>{var t;r.value>0?r.value--:r.value=A.value.length-1,(t=g.value)==null||t.resetPlayer()},W=t=>{p.loading("保存中"),$(t).then(()=>{p.closeLoading(),p.msgSuccess("导出文件成功")}).catch(()=>{p.closeLoading(),p.msgError("导出文件失败")})},z=async(t,s)=>{var c;await p.confirm("此操作不可逆，确定要删除吗？"),await ve({id:t}),w(),r.value=0,(c=g.value)==null||c.resetPlayer()};return J(()=>{w()}),(t,s)=>{const c=M,f=ee,v=ie,h=ne,C=ae,G=se,Q=te,L=re,R=ce,q=de,N=ue,S=oe;return n(),a("div",he,[o(c,{width:"300px"},{default:u(()=>[o(pe,{onSuccess:s[0]||(s[0]=i=>l(K)())})]),_:1}),e("div",xe,[e("div",Ee,[e("div",be,[s[7]||(s[7]=e("div",null,"音乐生成记录",-1)),o(f,{class:"!my-5 !mb-0"}),e("div",null,[o(h,null,{default:u(()=>[o(v,{label:"全部"})]),_:1})]),j((n(),a("div",Ce,[l(_).lists.length?(n(),a("div",ye,[e("div",we,[e("div",Qe,[e("div",qe,[o(q,null,{default:u(()=>[e("div",Ne,[(n(!0),a(k,null,Z(l(A),(i,x)=>(n(),a("div",{class:B(["group cursor-pointer bg-white border border-[transparent] rounded-lg p-3 relative shadow-[1px_2px_6px_0px_rgba(0,0,0,0.08)] flex justify-between",{"border border-primary !bg-primary-light-9":l(r)==x}]),key:x,onClick:E=>U(x)},[i.status==2?(n(),a(k,{key:0},[e("div",De,[e("div",null,[o(C,{src:i.image_url,class:"h-16 w-16 rounded-full"},null,8,["src"])]),e("div",ke,[e("div",Be,m(i.ask),1),e("div",Ke,[e("div",Pe,[e("span",null,m(i.tags),1),e("span",Ue,m(l(X)(i.duration)),1)]),e("div",Fe,m(i.create_time),1)])])]),e("div",{class:B(["ml-2 h-full invisible group-hover:visible absolute right-2",[l(b)==i?"!visible":""]]),onClick:s[2]||(s[2]=T(()=>{},["stop"]))},[o(L,{width:90,onHide:s[1]||(s[1]=E=>b.value=0),onShow:E=>b.value=i},{reference:u(()=>[e("div",Ve,[o(G,{name:"el-icon-MoreFilled"})])]),default:u(()=>[e("div",We,[e("div",null,[o(Q,{link:"",class:"!m-0",size:"small",onClick:E=>W(i.audio_url)},{default:u(()=>[...s[3]||(s[3]=[y(" 导出文件 ",-1)])]),_:1},8,["onClick"])]),e("div",null,[o(Q,{type:"danger",link:"",size:"small",onClick:E=>z(i.id,x)},{default:u(()=>[...s[4]||(s[4]=[y("删除",-1)])]),_:1},8,["onClick"])])])]),_:2},1032,["onShow"])],2)],64)):(n(),a("div",ze,[s[6]||(s[6]=e("img",{src:ge,class:"h-10"},null,-1)),e("span",Ge,[o(R,{type:"danger"},{default:u(()=>[...s[5]||(s[5]=[y("生成中",-1)])]),_:1})])]))],10,Ie))),128))])]),_:1})]),e("div",Le,[l(d)?(n(),a("div",Re,[e("div",null,[o(C,{src:l(d).image_url,class:"w-[195px] h-[195px] rounded-full"},null,8,["src"])]),e("div",Se,[e("div",Me,m(l(d).ask),1),e("div",Ye,m(l(d).tags),1)]),e("div",He,[o(q,null,{default:u(()=>[e("div",Je,m(l(d).lyric),1)]),_:1})])])):(n(),a("div",je,[o(N,{description:"暂无音乐数据"})]))])])])])):(n(),a("div",Ze,[o(N,{image:l(Ae),description:"暂无音乐记录，赶紧去创作吧~"},null,8,["image"])]))])),[[S,l(_).loading]])])]),l(_).lists.length?(n(),a("div",Xe,[e("div",Te,[e("div",Oe,[e("div",null,[o(C,{class:"h-16 w-16 rounded-full",src:l(d).image_url},null,8,["src"])]),e("div",$e,[e("div",null,m(l(d).ask),1),e("div",es,[e("span",null,m(l(d).tags),1)])])]),e("div",ss,[e("div",null,[o(_e,{music:l(d).audio_url,ref_key:"musicControlRef",ref:g,onNext:F,onPrev:V},null,8,["music"])])])])])):O("",!0)])])}}});const Ds=le(ts,[["__scopeId","data-v-826dc1ea"]]);export{Ds as default};

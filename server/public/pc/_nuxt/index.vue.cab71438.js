import{d as P,at as z,c as F,r as v,A as K,aF as q,k as c,l as p,m as s,q as o,s as l,Z as n,$ as G,v as _,aI as J,I as h,t as M,J as y,L as m,bK as U,aH as Q,u as Z,G as E,ax as O,au as W,b5 as X,y as Y,cQ as ee}from"./entry.46557796.js";import{E as te}from"./index.304400de.js";import{E as oe,a as ne}from"./index.5f8d7d98.js";import{E as se}from"./el-empty.db5857ba.js";import{_ as le}from"./index.vue.383c1815.js";/* empty css                     *//* empty css                        *//* empty css               *//* empty css                 */import{u as ae}from"./usePaging.3ef28349.js";import{b as ie,d as re}from"./digital_human.b276942f.js";import{DigitalHumanModelVersionEnum as ce}from"./index.728f9c9c.js";const de={class:"h-full flex flex-col bg-app-bg-2 rounded-[20px]"},ue={class:"flex-shrink-0 px-[14px]"},pe={class:"flex items-center justify-end h-[88px]"},me={class:"flex items-center gap-[14px]"},fe={class:"grow min-h-0 flex flex-col overflow-hidden"},_e={class:"grow min-h-0"},ge={class:"flex items-center gap-2 justify-center"},xe={class:"flex justify-center p-4"},ve={key:0,class:"w-full flex justify-center gap-10 bg-app-bg-2 p-4 rounded-lg mt-2"},ye=["src"],De=P({__name:"index",setup(he){const k=z(),w=F(()=>{const{channel:a}=k.getDigitalHumanConfig;return a&&a.length>0?a.filter(e=>{if(e.id=parseInt(e.id),e.status==1&&![ce.CHANJING].includes(e.id))return e}):[]}),b=v(!1),C=K(),g=q({name:"",model_version:""}),{pager:d,getLists:r,resetPage:Ee}=ae({fetchFun:ie,params:g}),V=a=>{const e=w.value.find(i=>i.id==a);return(e==null?void 0:e.name)||""},f=v({}),$=v(),A=async(a,e)=>{var i;b.value=!0,$.value=e,f.value=a,await Q(),(i=C.value)==null||i.setAudio(f.value.url)},T=async a=>{Z().$confirm({title:"提示",message:"是否删除该音频",theme:"dark",onConfirm:async()=>{try{await re({id:a}),r(),E.msgSuccess("删除成功")}catch(e){E.msgError(e||"删除失败")}}})};return r(),(a,e)=>{const i=O,I=W,N=X,S=te,u=oe,x=Y,B=se,D=ne,R=le,j=ee;return c(),p("div",de,[s("div",ue,[o(S,null,{default:l(()=>[s("div",pe,[s("div",me,[o(I,{modelValue:n(g).name,"onUpdate:modelValue":e[1]||(e[1]=t=>n(g).name=t),"prefix-icon":"el-icon-Search",class:"!w-[240px] search-name-input",placeholder:"请输入音频名称",clearable:"",onClear:e[2]||(e[2]=t=>n(r)()),onKeydown:e[3]||(e[3]=G(t=>n(r)(),["enter"]))},{append:l(()=>[o(i,{text:"",onClick:e[0]||(e[0]=t=>n(r)())},{default:l(()=>e[6]||(e[6]=[_(" 搜索 ",-1)])),_:1,__:[6]})]),_:1},8,["modelValue"]),o(N,{content:"刷新"},{default:l(()=>[o(i,{circle:"",color:"#1f1f1f",icon:"el-icon-Refresh",class:"!w-10 !h-10",onClick:e[4]||(e[4]=t=>n(r)())})]),_:1})])])]),_:1})]),s("div",fe,[s("div",_e,[J((c(),h(D,{data:n(d).lists,height:"100%","header-row-style":{height:"62px"},"row-style":{height:"50px"}},{empty:l(()=>[o(B,{description:"暂无数据"})]),default:l(()=>[o(u,{prop:"name",label:"音频名称","min-width":"200"}),o(u,{label:"创建时间",prop:"create_time","min-width":"200"}),o(u,{label:"使用模型","min-width":"120"},{default:l(({row:t})=>[_(M(V(t.model_version)),1)]),_:1}),o(u,{label:"状态","min-width":"120"},{default:l(({row:t})=>[s("div",ge,[[0,3,4,5].includes(t.status)?(c(),p(y,{key:0},[o(x,{name:"local-icon-clone",color:"var(--el-color-warning)",size:16}),e[7]||(e[7]=s("span",{class:"text-warning"},"克隆中",-1))],64)):m("",!0),t.status===1?(c(),p(y,{key:1},[o(x,{name:"local-icon-success_fill",color:"var(--el-color-success)",size:16}),e[8]||(e[8]=s("span",{class:"text-success"},"成功",-1))],64)):m("",!0),t.status===2?(c(),p(y,{key:2},[o(x,{name:"local-icon-error_fill",size:16}),e[9]||(e[9]=s("span",{class:"text-danger"},"失败",-1))],64)):m("",!0)])]),_:1}),o(u,{label:"操作",width:"120",fixed:"right"},{default:l(({row:t,$index:H})=>[t.status==1?(c(),h(i,{key:0,link:"",type:"primary",onClick:L=>A(t,H)},{default:l(()=>e[10]||(e[10]=[_(" 播放 ",-1)])),_:2,__:[10]},1032,["onClick"])):m("",!0),o(i,{link:"",type:"danger",onClick:L=>T(t.id)},{default:l(()=>e[11]||(e[11]=[_(" 删除 ",-1)])),_:2,__:[11]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[j,n(d).loading]])]),s("div",xe,[o(R,{modelValue:n(d),"onUpdate:modelValue":e[5]||(e[5]=t=>U(d)?d.value=t:null),layout:"prev, pager, next",onChange:n(r)},null,8,["modelValue","onChange"])])]),n(f).url?(c(),p("div",ve,[s("audio",{src:n(f).url,controls:"",class:"w-full",autoplay:""},null,8,ye)])):m("",!0)])}}});export{De as _};

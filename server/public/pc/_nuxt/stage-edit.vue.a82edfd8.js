import{d as F,r as f,aF as I,cq as C,G as g,bI as D,b6 as R,k as h,I as q,s as l,m as a,q as n,v as c,Z as t,aI as B,ay as N,cP as S,y as U,au as L,av as $}from"./entry.d9d53b29.js";import{aw as z,aE as A}from"./person_wechat.8bcf26fc.js";const G={class:"bg-primary-light-9 p-2 rounded-xl flex items-center gap-2"},P={class:"mt-4"},H=F({__name:"stage-edit",emits:["close","success"],setup(T,{expose:v,emit:x}){const p=x,u=f(),s=I({flow_id:"",id:"",sub_stage_name:"",sort:""}),b={sub_stage_name:[{required:!0,message:"请输入流程名称"},{validator:(o,e,r)=>{/^[\u4e00-\u9fa5]+$/.test(e)||r(new Error("流程名称只能是汉字")),r()}}]},m=f(),{lockFn:y,isLock:w}=C(async()=>{var o,e;await((o=u.value)==null?void 0:o.validate());try{s.id?await z(s):await A(s),(e=m.value)==null||e.close(),g.msgSuccess("新增成功"),p("success")}catch(r){g.msgError(r)}}),V=()=>{var o;(o=m.value)==null||o.open()},k=()=>{p("close")};return v({open:V,setFormData:o=>D(o,s)}),(o,e)=>{const r=U,d=L,_=$,E=R("number-input");return h(),q(S,{ref_key:"popupRef",ref:m,title:"新建客户流程",width:"500px",async:"","confirm-loading":t(w),onClose:k,onConfirm:t(y)},{default:l(()=>[a("div",null,[a("div",G,[n(r,{name:"local-icon-tip",color:"var(--color-primary)",size:20}),e[2]||(e[2]=a("div",{class:"text-[#636363]"},[c(" 请注意，若新增标签，切记名称"),a("span",{class:"text-error"},"不可重复"),c("；且勿超过"),a("span",{class:"text-error"},"8个汉字"),c("； ")],-1))]),a("div",P,[n(t(N),{ref_key:"formRef",ref:u,model:t(s),rules:b,"label-position":"top"},{default:l(()=>[n(_,{label:"阶段名称",prop:"sub_stage_name"},{default:l(()=>[n(d,{modelValue:t(s).sub_stage_name,"onUpdate:modelValue":e[0]||(e[0]=i=>t(s).sub_stage_name=i),placeholder:"请输入阶段名称",maxlength:"8"},null,8,["modelValue"])]),_:1}),n(_,{label:"排序",prop:"sort"},{default:l(()=>[B(n(d,{modelValue:t(s).sort,"onUpdate:modelValue":e[1]||(e[1]=i=>t(s).sort=i),type:"number",placeholder:"请输入排序"},null,8,["modelValue"]),[[E,{min:0,max:999}]]),e[3]||(e[3]=a("div",{class:"text-xs text-gray-500"},"排序越大越靠前，最大值为999",-1))]),_:1,__:[3]})]),_:1},8,["model"])])])]),_:1},8,["confirm-loading","onConfirm"])}}});export{H as _};

import{d as R,bM as S,c as E,aF as j,r as b,D as F,k as r,l as c,m as s,q as n,s as l,v as g,Z as a,$ as M,aI as U,I as h,J as w,K as G,t as C,bK as H,L as J,aH as V,G as $,ax as Q,au as Z,cQ as z,u as O}from"./entry.46557796.js";import{E as W,a as X}from"./index.5f8d7d98.js";import{E as Y}from"./el-empty.db5857ba.js";import{_ as ee}from"./index.vue.383c1815.js";/* empty css                        *//* empty css               *//* empty css                 *//* empty css                     */import{u as te}from"./usePaging.3ef28349.js";import{b as ae,d as oe}from"./service.12abd78a.js";import{_ as ne}from"./material-edit.vue.2cd7e083.js";const se={class:"h-full flex flex-col"},le={class:"flex items-center justify-between px-4"},re={class:"grow min-h-0 mt-4"},ie={key:0},pe={key:1},ue={class:"flex justify-center"},de={class:"font-bold"},ce={class:"flex justify-end p-4"},Ve=R({__name:"publish-setting",setup(me){const v=S(),B=O(),k=E(()=>v.query.account),x=E(()=>v.query.app_type),m=j({keyword:"",account:k.value,type:x.value}),{pager:p,getLists:u,resetPage:fe,resetParams:K}=te({fetchFun:ae,params:m}),f=b(!1),y=b(),T=async()=>{var o;f.value=!0,await V(),(o=y.value)==null||o.open()},q=async o=>{var e,i;f.value=!0,await V(),(e=y.value)==null||e.open("edit"),(i=y.value)==null||i.getDetail(o.id)},D=o=>{B.$confirm({message:"确定删除该名片回复规则吗？",onConfirm:async()=>{try{await oe({id:o}),$.msgSuccess("删除成功"),u()}catch(e){$.msgError(e||"删除失败")}}})};return F(()=>v.query.app_type,o=>{o&&(m.type=o,u())},{immediate:!0}),(o,e)=>{const i=Q,L=Z,_=W,N=Y,A=X,I=ee,P=z;return r(),c(w,null,[s("div",se,[s("div",le,[n(i,{type:"primary",onClick:T},{default:l(()=>e[5]||(e[5]=[g("新增名片回复规则",-1)])),_:1,__:[5]}),s("div",null,[n(L,{modelValue:a(m).keyword,"onUpdate:modelValue":e[0]||(e[0]=t=>a(m).keyword=t),placeholder:"请输入匹配内容","prefix-icon":"el-icon-Search",clearable:"",onClear:a(K),onKeyup:e[1]||(e[1]=M(t=>a(u)(),["enter"]))},null,8,["modelValue","onClear"])])]),s("div",re,[U((r(),h(A,{data:a(p).lists,height:"100%",stripe:"","row-style":{height:"60px"}},{empty:l(()=>[n(N,{description:"暂无数据"})]),default:l(()=>[n(_,{label:"匹配类型"},{default:l(({row:t})=>[t.match_type==0?(r(),c("span",ie,"模糊匹配")):(r(),c("span",pe,"精确匹配"))]),_:1}),n(_,{prop:"keyword",label:"匹配内容"}),n(_,{label:"回复内容"},{default:l(({row:t})=>[s("div",ue,[(r(!0),c(w,null,G(t.reply,d=>(r(),c("div",{key:d.id,class:"flex flex-col text-left gap-2 bg-primary-light-9 rounded px-4 py-2"},[s("span",de,C(d.name),1),s("span",null,C(d.code),1)]))),128))])]),_:1}),n(_,{prop:"name",label:"操作",width:"120"},{default:l(({row:t})=>[n(i,{type:"primary",link:"",onClick:d=>q(t)},{default:l(()=>e[6]||(e[6]=[g("编辑",-1)])),_:2,__:[6]},1032,["onClick"]),n(i,{type:"danger",link:"",onClick:d=>D(t.id)},{default:l(()=>e[7]||(e[7]=[g("删除",-1)])),_:2,__:[7]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[P,a(p).loading]])]),s("div",ce,[n(I,{modelValue:a(p),"onUpdate:modelValue":e[2]||(e[2]=t=>H(p)?p.value=t:null),onChange:a(u)},null,8,["modelValue","onChange"])])]),a(f)?(r(),h(ne,{key:0,ref_key:"materialEditRef",ref:y,type:5,"app-type":a(x),account:a(k),onClose:e[3]||(e[3]=t=>f.value=!1),onSuccess:e[4]||(e[4]=t=>a(u)())},null,8,["app-type","account"])):J("",!0)],64)}}});export{Ve as _};

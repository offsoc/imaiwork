import{c6 as s}from"./entry.d9d53b29.js";class d{constructor(t={}){this.config=t,this.mermaidInstance=null,this.isLoading=!1,this.lastValidResult=""}async loadMermaid(){if(this.mermaidInstance)return this.mermaidInstance;if(this.isLoading)return new Promise(t=>{const i=()=>{this.mermaidInstance?t(this.mermaidInstance):setTimeout(i,50)};i()});this.isLoading=!0;try{const{default:t}=await s(()=>import("./index.vue.287e2e78.js").then(i=>i.m),["./index.vue.287e2e78.js","./entry.d9d53b29.js","./entry.994e5538.css","./debounce.39f38609.js","./index.3864ff87.js","./katex.0065138a.js","./index.cfd68a0e.css"],import.meta.url);return t.initialize({theme:this.config.theme||"default",startOnLoad:!1,suppressErrorRendering:!0,...this.config}),this.mermaidInstance=t,t}catch(t){throw console.error("Failed to load mermaid:",t),new Error("Failed to load mermaid library")}finally{this.isLoading=!1}}async renderMermaid(t,i="light"){try{const e=await this.loadMermaid();this.config.theme!==i&&(this.config.theme=i,e.initialize({startOnLoad:!1,suppressErrorRendering:!0,theme:i==="dark"?"dark":"default",...this.config}));const a=`mc_mermaid_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,{svg:r}=await e.render(a,t);return this.lastValidResult=r,r}catch{return this.lastValidResult}}}export{d as MermaidService};

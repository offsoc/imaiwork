import{d as I,bP as R,c as E,aF as S,r as h,D as F,k as r,l as m,m as s,q as n,s as l,v as g,Z as o,$ as M,aI as U,I as b,J as w,K as G,t as C,bM as H,L as J,aH as V,G as $,ax as W,au as Z,cW as z,u as O}from"./entry.f4f46cb5.js";import{E as Q,a as X}from"./index.eb05fb19.js";import{E as Y}from"./el-empty.28f9091a.js";import{_ as ee}from"./index.vue.f3f2b692.js";/* empty css                        *//* empty css               *//* empty css                 *//* empty css                     */import{u as te}from"./usePaging.64f4ceb2.js";import{i as oe,j as ae}from"./service.9c966dd0.js";import{_ as ne}from"./material-edit.vue.2d9c7268.js";import"./index.bad4fd13.js";import"./_baseIteratee.0f37ae7b.js";import"./debounce.640f3738.js";import"./toNumber.d5c70aa7.js";import"./index.d4d0dc47.js";import"./raf.787400b1.js";import"./index.ed825429.js";import"./index.03679949.js";import"./strings.87cef2c7.js";import"./clamp.6295a89e.js";const se={class:"h-full flex flex-col"},le={class:"flex items-center justify-between px-4"},re={class:"grow min-h-0 mt-4"},ie={key:0},pe={key:1},ue={class:"flex justify-center"},de={class:"font-bold"},me={class:"flex justify-end p-4"},je=I({__name:"publish-setting",setup(ce){const v=R(),B=O(),k=E(()=>v.query.account),x=E(()=>v.query.app_type),c=S({keyword:"",account:k.value,type:x.value}),{pager:p,getLists:u,resetPage:fe,resetParams:T}=te({fetchFun:oe,params:c}),f=h(!1),y=h(),q=async()=>{var a;f.value=!0,await V(),(a=y.value)==null||a.open()},D=async a=>{var e,i;f.value=!0,await V(),(e=y.value)==null||e.open("edit"),(i=y.value)==null||i.getDetail(a.id)},K=a=>{B.$confirm({message:"确定删除该名片回复规则吗？",onConfirm:async()=>{try{await ae({id:a}),$.msgSuccess("删除成功"),u()}catch(e){$.msgError(e||"删除失败")}}})};return F(()=>v.query.app_type,a=>{a&&(c.type=a,u())},{immediate:!0}),(a,e)=>{const i=W,L=Z,_=Q,N=Y,P=X,j=ee,A=z;return r(),m(w,null,[s("div",se,[s("div",le,[n(i,{type:"primary",onClick:q},{default:l(()=>[...e[5]||(e[5]=[g("新增名片回复规则",-1)])]),_:1}),s("div",null,[n(L,{modelValue:o(c).keyword,"onUpdate:modelValue":e[0]||(e[0]=t=>o(c).keyword=t),placeholder:"请输入匹配内容","prefix-icon":"el-icon-Search",clearable:"",onClear:o(T),onKeyup:e[1]||(e[1]=M(t=>o(u)(),["enter"]))},null,8,["modelValue","onClear"])])]),s("div",re,[U((r(),b(P,{data:o(p).lists,height:"100%",stripe:"","row-style":{height:"60px"}},{empty:l(()=>[n(N,{description:"暂无数据"})]),default:l(()=>[n(_,{label:"匹配类型"},{default:l(({row:t})=>[t.match_type==0?(r(),m("span",ie,"模糊匹配")):(r(),m("span",pe,"精确匹配"))]),_:1}),n(_,{prop:"keyword",label:"匹配内容"}),n(_,{label:"回复内容"},{default:l(({row:t})=>[s("div",ue,[(r(!0),m(w,null,G(t.reply,d=>(r(),m("div",{key:d.id,class:"flex flex-col text-left gap-2 bg-primary-light-9 rounded px-4 py-2"},[s("span",de,C(d.name),1),s("span",null,C(d.code),1)]))),128))])]),_:1}),n(_,{prop:"name",label:"操作",width:"120"},{default:l(({row:t})=>[n(i,{type:"primary",link:"",onClick:d=>D(t)},{default:l(()=>[...e[6]||(e[6]=[g("编辑",-1)])]),_:1},8,["onClick"]),n(i,{type:"danger",link:"",onClick:d=>K(t.id)},{default:l(()=>[...e[7]||(e[7]=[g("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[A,o(p).loading]])]),s("div",me,[n(j,{modelValue:o(p),"onUpdate:modelValue":e[2]||(e[2]=t=>H(p)?p.value=t:null),onChange:o(u)},null,8,["modelValue","onChange"])])]),o(f)?(r(),b(ne,{key:0,ref_key:"materialEditRef",ref:y,type:5,"app-type":o(x),account:o(k),onClose:e[3]||(e[3]=t=>f.value=!1),onSuccess:e[4]||(e[4]=t=>o(u)())},null,8,["app-type","account"])):J("",!0)],64)}}});export{je as default};

import{d as K,bP as N,c as h,A as j,aF as A,r as u,cx as G,G as B,o as L,bb as T,k as F,l as q,m as o,t as z,Z as a,q as l,s as n,v as M,bM as r,I as O,aI as I,L as P,ax as Z,av as $,y as H,au as J,ay as Q}from"./entry.ca4d3d61.js";import{E as W,a as X}from"./index.5f182cdf.js";import{E as Y}from"./index.8b07fb5c.js";/* empty css                  *//* empty css               *//* empty css                     */import{f as ee,s as oe,g as se,t as le}from"./knowledge_base.519704cc.js";import{KnTypeEnum as te}from"./index.5bd136e1.js";import ae from"./base-form.c3d5525a.js";const ne={class:"h-full bg-white flex flex-col rounded-[20px]"},de={class:"flex-shrink-0 h-[88px] flex items-center justify-between px-[30px] border-b border-[#0000000d]"},ie={class:"grow min-h-0 py-[20px]"},re={class:"w-[456px] mx-auto"},me={class:"w-full border border-[var(--el-border-color)] rounded-lg p-[14px] leading-5"},ce={class:"flex items-center gap-x-3"},ue={class:"rounded-md border border-[rgba(0,0,0,0.1)] w-10 h-10 flex items-center justify-center"},pe={class:"mt-6 grid grid-cols-2 gap-x-3"},_e={class:""},fe={class:"mt-3"},ve={class:""},be={class:"mt-3"},xe={class:"mt-3 w-full p-[14px] rounded-lg bg-[#f6f6f6] border border-[#efefef] leading-5"},ge={class:"flex items-center gap-x-3"},we={class:"rounded-md border border-[rgba(0,0,0,0.1)] w-10 h-10 flex items-center justify-center"},Se=K({__name:"index",setup(Ee){const x=N(),m=h(()=>x.params.id),c=h(()=>x.query.kn_type==te.RAG),g=j(),s=A({name:"",description:"",cover:""}),p=u("1"),_=u("1"),f=u(2),v=u(2),{lockFn:R,isLock:D}=G(async()=>{var d;await((d=g.value)==null?void 0:d.validateForm());try{c.value?await ee({id:m.value,name:s.name,description:s.description,image:s.cover}):await oe({id:m.value,name:s.name,intro:s.description,image:s.cover,documents_model_id:2,documents_model_sub_id:2,embedding_model_id:3,embedding_model_sub_id:3}),B.msgSuccess("保存成功")}catch(e){B.msgError(e)}}),S=async()=>{if(c.value){const{name:d,description:e,image:i}=await se({id:m.value});s.name=d,s.description=e,s.cover=i}else{const{name:d,intro:e,image:i}=await le({id:m.value});s.name=d,s.description=e,s.cover=i}};return L(()=>{S()}),(d,e)=>{const i=Z,w=W,E=X,b=$,k=H,y=J,C=Q,U=Y,V=T("number-input");return F(),q("div",ne,[o("div",de,[o("div",null,[o("span",null,"知识库设置（"+z(a(c)?"RAG":"向量")+"）",1),e[5]||(e[5]=o("span",{class:"text-[rgba(0,0,0,0.5)]"},"在这里，您可以修改此知识库的属性和检索设置",-1))]),l(i,{type:"primary",class:"w-[98px] !h-10 !rounded-full",loading:a(D),onClick:a(R)},{default:n(()=>[...e[6]||(e[6]=[M("保存",-1)])]),_:1},8,["loading","onClick"])]),o("div",ie,[l(U,{class:"h-full"},{default:n(()=>[o("div",re,[l(ae,{ref_key:"formRef",ref:g,modelValue:a(s),"onUpdate:modelValue":e[0]||(e[0]=t=>r(s)?s.value=t:null),"is-edit":!0},null,8,["modelValue"]),l(C,{"label-position":"top"},{default:n(()=>[l(b,{label:"可见权限"},{default:n(()=>[l(E,{class:"!h-11",modelValue:a(p),"onUpdate:modelValue":e[1]||(e[1]=t=>r(p)?p.value=t:null),placeholder:"请选择",disabled:""},{default:n(()=>[l(w,{label:"私人",value:"1"})]),_:1},8,["modelValue"])]),_:1}),l(b,{label:"索引模式"},{default:n(()=>[l(E,{class:"!h-11",modelValue:a(_),"onUpdate:modelValue":e[2]||(e[2]=t=>r(_)?_.value=t:null),placeholder:"请选择",disabled:""},{default:n(()=>[l(w,{label:"高质量",value:"1"})]),_:1},8,["modelValue"])]),_:1}),a(c)?P("",!0):(F(),O(b,{key:0,label:"检索设置"},{default:n(()=>[o("div",me,[o("div",ce,[o("div",ue,[l(k,{name:"local-icon-list",size:24})]),e[7]||(e[7]=o("div",null,[o("div",{class:"font-bold"},"向量检索"),o("div",{class:"text-[11px] text-[#00000080] mt-1"}," 通过生成查询嵌入并查询与其向量表示最相似的文本分段 ")],-1))]),o("div",pe,[o("div",_e,[e[8]||(e[8]=o("div",{class:"text-[#00000080]"},"Top K",-1)),o("div",fe,[I(l(y,{class:"!h-11",disabled:"",modelValue:a(f),"onUpdate:modelValue":e[3]||(e[3]=t=>r(f)?f.value=t:null),type:"number"},null,8,["modelValue"]),[[V,{min:1,max:1024}]])])]),o("div",ve,[e[9]||(e[9]=o("div",{class:"text-[#00000080]"},"相似度阈值",-1)),o("div",be,[I(l(y,{class:"!h-11",disabled:"",modelValue:a(v),"onUpdate:modelValue":e[4]||(e[4]=t=>r(v)?v.value=t:null),type:"number"},null,8,["modelValue"]),[[V,{min:0,max:1}]])])])])]),o("div",xe,[o("div",ge,[o("div",we,[l(k,{name:"local-icon-list_search",size:24})]),e[10]||(e[10]=o("div",null,[o("div",{class:"font-bold"},"向量检索"),o("div",{class:"text-[11px] text-[#00000080] mt-1"}," 通过生成查询嵌入并查询与其向量表示最相似的文本分段 ")],-1))])])]),_:1}))]),_:1})])]),_:1})])])}}});export{Se as _};

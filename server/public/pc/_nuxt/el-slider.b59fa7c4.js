import{Q as Ve,S as le,b1 as ke,b5 as Ce,b7 as _e,a_ as ne,bX as ye,b0 as Le,aV as ae,O as te,ab as Ie,r as J,c as f,D as de,bh as ce,aY as Re,aZ as X,aH as me,d as oe,W as we,aF as Pe,aG as be,k as C,l as R,q as Ne,s as Ee,m as q,t as Fe,Z as t,Y as F,ba as Ke,a3 as Z,aa as Te,ap as Be,e as Ye,aK as Xe,A as pe,ah as he,N as We,o as $e,V as Ue,aL as Oe,aQ as Ae,ai as je,I as ve,L as ie,J as ue,K as fe,a0 as He,am as Ge}from"./entry.ee599c70.js";import{E as Qe}from"./el-input-number.0bb1bb2b.js";import{d as xe}from"./debounce.f4735d5c.js";import{c as Ze}from"./clamp.05cad4d6.js";const ze=Symbol("sliderContextKey"),qe=Ve({modelValue:{type:le([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:ke,inputSize:ke,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:le(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:le(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:Ce,default:"top"},marks:{type:le(Object)},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},..._e(["ariaLabel"])}),ge=e=>ae(e)||te(e)&&e.every(ae),Je={[ne]:ge,[ye]:ge,[Le]:ge},De=Ve({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:Ce,default:"top"}}),el={[ne]:e=>ae(e)},ll=(e,l,d)=>{const a=J(),u=J(!1),m=f(()=>l.value instanceof Function),o=f(()=>m.value&&l.value(e.modelValue)||e.modelValue),h=xe(()=>{d.value&&(u.value=!0)},50),V=xe(()=>{d.value&&(u.value=!1)},50);return{tooltip:a,tooltipVisible:u,formatValue:o,displayTooltip:h,hideTooltip:V}},tl=(e,l,d)=>{const{disabled:a,min:u,max:m,step:o,showTooltip:h,persistent:V,precision:c,sliderSize:v,formatTooltip:s,emitChange:y,resetSize:T,updateDragging:p}=Ie(ze),{tooltip:z,tooltipVisible:P,formatValue:_,displayTooltip:k,hideTooltip:K}=ll(e,s,h),B=J(),E=f(()=>`${(e.modelValue-u.value)/(m.value-u.value)*100}%`),L=f(()=>e.vertical?{bottom:E.value}:{left:E.value}),W=()=>{l.hovering=!0,k()},se=()=>{l.hovering=!1,l.dragging||K()},$=i=>{a.value||(i.preventDefault(),I(i),window.addEventListener("mousemove",x),window.addEventListener("touchmove",x),window.addEventListener("mouseup",M),window.addEventListener("touchend",M),window.addEventListener("contextmenu",M),B.value.focus())},Y=i=>{a.value||(l.newPosition=Number.parseFloat(E.value)+i/(m.value-u.value)*100,N(l.newPosition),y())},U=()=>{Y(-o.value)},r=()=>{Y(o.value)},b=()=>{Y(-o.value*4)},S=()=>{Y(o.value*4)},H=()=>{a.value||(N(0),y())},G=()=>{a.value||(N(100),y())},Q=i=>{const g=Re(i);let w=!0;switch(g){case X.left:case X.down:U();break;case X.right:case X.up:r();break;case X.home:H();break;case X.end:G();break;case X.pageDown:b();break;case X.pageUp:S();break;default:w=!1;break}w&&i.preventDefault()},O=i=>{let g,w;return i.type.startsWith("touch")?(w=i.touches[0].clientY,g=i.touches[0].clientX):(w=i.clientY,g=i.clientX),{clientX:g,clientY:w}},I=i=>{l.dragging=!0,l.isClick=!0;const{clientX:g,clientY:w}=O(i);e.vertical?l.startY=w:l.startX=g,l.startPosition=Number.parseFloat(E.value),l.newPosition=l.startPosition},x=i=>{if(l.dragging){l.isClick=!1,k(),T();let g;const{clientX:w,clientY:D}=O(i);e.vertical?(l.currentY=D,g=(l.startY-l.currentY)/v.value*100):(l.currentX=w,g=(l.currentX-l.startX)/v.value*100),l.newPosition=l.startPosition+g,N(l.newPosition)}},M=()=>{l.dragging&&(setTimeout(()=>{l.dragging=!1,l.hovering||K(),l.isClick||N(l.newPosition),y()},0),window.removeEventListener("mousemove",x),window.removeEventListener("touchmove",x),window.removeEventListener("mouseup",M),window.removeEventListener("touchend",M),window.removeEventListener("contextmenu",M))},N=async i=>{if(i===null||Number.isNaN(+i))return;i=Ze(i,0,100);const g=Math.floor((m.value-u.value)/o.value),w=g*o.value/(m.value-u.value)*100,D=w+(100-w)/2;let n;if(i<w){const re=w/g,A=Math.round(i/re);n=u.value+A*o.value}else i<D?n=u.value+g*o.value:n=m.value;n=Number.parseFloat(n.toFixed(c.value)),n!==e.modelValue&&d(ne,n),!l.dragging&&e.modelValue!==l.oldValue&&(l.oldValue=e.modelValue),await me(),l.dragging&&k(),z.value.updatePopper()};return de(()=>l.dragging,i=>{p(i)}),ce(B,"touchstart",$,{passive:!1}),{disabled:a,button:B,tooltip:z,tooltipVisible:P,showTooltip:h,persistent:V,wrapperStyle:L,formatValue:_,handleMouseEnter:W,handleMouseLeave:se,onButtonDown:$,onKeyDown:Q,setPosition:N}},al=oe({name:"ElSliderButton"}),nl=oe({...al,props:De,emits:el,setup(e,{expose:l,emit:d}){const a=e,u=we("slider"),m=Pe({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:a.modelValue}),o=f(()=>v.value?s.value:!1),{disabled:h,button:V,tooltip:c,showTooltip:v,persistent:s,tooltipVisible:y,wrapperStyle:T,formatValue:p,handleMouseEnter:z,handleMouseLeave:P,onButtonDown:_,onKeyDown:k,setPosition:K}=tl(a,m,d),{hovering:B,dragging:E}=be(m);return l({onButtonDown:_,onKeyDown:k,setPosition:K,hovering:B,dragging:E}),(L,W)=>(C(),R("div",{ref_key:"button",ref:V,class:F([t(u).e("button-wrapper"),{hover:t(B),dragging:t(E)}]),style:Z(t(T)),tabindex:t(h)?void 0:0,onMouseenter:t(z),onMouseleave:t(P),onMousedown:t(_),onFocus:t(z),onBlur:t(P),onKeydown:t(k)},[Ne(t(Ke),{ref_key:"tooltip",ref:c,visible:t(y),placement:L.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":L.tooltipClass,disabled:!t(v),persistent:t(o)},{content:Ee(()=>[q("span",null,Fe(t(p)),1)]),default:Ee(()=>[q("div",{class:F([t(u).e("button"),{hover:t(B),dragging:t(E)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled","persistent"])],46,["tabindex","onMouseenter","onMouseleave","onMousedown","onFocus","onBlur","onKeydown"]))}});var Me=Te(nl,[["__file","button.vue"]]);const ol=Ve({mark:{type:le([String,Object]),default:void 0}});var sl=oe({name:"ElSliderMarker",props:ol,setup(e){const l=we("slider"),d=f(()=>Be(e.mark)?e.mark:e.mark.label),a=f(()=>Be(e.mark)?void 0:e.mark.style);return()=>Ye("div",{class:l.e("marks-text"),style:a.value},d.value)}});const rl=(e,l,d)=>{const{form:a,formItem:u}=Xe(),m=pe(),o=J(),h=J(),V={firstButton:o,secondButton:h},c=f(()=>e.disabled||(a==null?void 0:a.disabled)||!1),v=f(()=>Math.min(l.firstValue,l.secondValue)),s=f(()=>Math.max(l.firstValue,l.secondValue)),y=f(()=>e.range?`${100*(s.value-v.value)/(e.max-e.min)}%`:`${100*(l.firstValue-e.min)/(e.max-e.min)}%`),T=f(()=>e.range?`${100*(v.value-e.min)/(e.max-e.min)}%`:"0%"),p=f(()=>e.vertical?{height:e.height}:{}),z=f(()=>e.vertical?{height:y.value,bottom:T.value}:{width:y.value,left:T.value}),P=()=>{if(m.value){const r=m.value.getBoundingClientRect();l.sliderSize=r[e.vertical?"height":"width"]}},_=r=>{const b=e.min+r*(e.max-e.min)/100;if(!e.range)return o;let S;return Math.abs(v.value-b)<Math.abs(s.value-b)?S=l.firstValue<l.secondValue?"firstButton":"secondButton":S=l.firstValue>l.secondValue?"firstButton":"secondButton",V[S]},k=r=>{const b=_(r);return b.value.setPosition(r),b},K=r=>{l.firstValue=r??e.min,E(e.range?[v.value,s.value]:r??e.min)},B=r=>{l.secondValue=r,e.range&&E([v.value,s.value])},E=r=>{d(ne,r),d(ye,r)},L=async()=>{await me(),d(Le,e.range?[v.value,s.value]:e.modelValue)},W=r=>{var b,S,H,G,Q,O;if(c.value||l.dragging)return;P();let I=0;if(e.vertical){const x=(H=(S=(b=r.touches)==null?void 0:b.item(0))==null?void 0:S.clientY)!=null?H:r.clientY;I=(m.value.getBoundingClientRect().bottom-x)/l.sliderSize*100}else{const x=(O=(Q=(G=r.touches)==null?void 0:G.item(0))==null?void 0:Q.clientX)!=null?O:r.clientX,M=m.value.getBoundingClientRect().left;I=(x-M)/l.sliderSize*100}if(!(I<0||I>100))return k(I)};return{elFormItem:u,slider:m,firstButton:o,secondButton:h,sliderDisabled:c,minValue:v,maxValue:s,runwayStyle:p,barStyle:z,resetSize:P,setPosition:k,emitChange:L,onSliderWrapperPrevent:r=>{var b,S;((b=V.firstButton.value)!=null&&b.dragging||(S=V.secondButton.value)!=null&&S.dragging)&&r.preventDefault()},onSliderClick:r=>{W(r)&&L()},onSliderDown:async r=>{const b=W(r);b&&(await me(),b.value.onButtonDown(r))},onSliderMarkerDown:r=>{if(c.value||l.dragging)return;k(r)&&L()},setFirstValue:K,setSecondValue:B}},il=(e,l,d,a)=>({stops:f(()=>{if(!e.showStops||e.min>e.max)return[];if(e.step===0)return he("ElSlider","step should not be 0."),[];const o=Math.ceil((e.max-e.min)/e.step),h=100*e.step/(e.max-e.min),V=Array.from({length:o-1}).map((c,v)=>(v+1)*h);return e.range?V.filter(c=>c<100*(d.value-e.min)/(e.max-e.min)||c>100*(a.value-e.min)/(e.max-e.min)):V.filter(c=>c>100*(l.firstValue-e.min)/(e.max-e.min))}),getStopStyle:o=>e.vertical?{bottom:`${o}%`}:{left:`${o}%`}}),ul=e=>f(()=>e.marks?Object.keys(e.marks).map(Number.parseFloat).sort((d,a)=>d-a).filter(d=>d<=e.max&&d>=e.min).map(d=>({point:d,position:(d-e.min)*100/(e.max-e.min),mark:e.marks[d]})):[]),dl=(e,l,d,a,u,m)=>{const o=c=>{u(ne,c),u(ye,c)},h=()=>e.range?![d.value,a.value].every((c,v)=>c===l.oldValue[v]):e.modelValue!==l.oldValue,V=()=>{var c,v;e.min>e.max&&We("Slider","min should not be greater than max.");const s=e.modelValue;e.range&&te(s)?s[1]<e.min?o([e.min,e.min]):s[0]>e.max?o([e.max,e.max]):s[0]<e.min?o([e.min,s[1]]):s[1]>e.max?o([s[0],e.max]):(l.firstValue=s[0],l.secondValue=s[1],h()&&(e.validateEvent&&((c=m==null?void 0:m.validate)==null||c.call(m,"change").catch(y=>he(y))),l.oldValue=s.slice())):!e.range&&ae(s)&&!Number.isNaN(s)&&(s<e.min?o(e.min):s>e.max?o(e.max):(l.firstValue=s,h()&&(e.validateEvent&&((v=m==null?void 0:m.validate)==null||v.call(m,"change").catch(y=>he(y))),l.oldValue=s)))};V(),de(()=>l.dragging,c=>{c||V()}),de(()=>e.modelValue,(c,v)=>{l.dragging||te(c)&&te(v)&&c.every((s,y)=>s===v[y])&&l.firstValue===c[0]&&l.secondValue===c[1]||V()},{deep:!0}),de(()=>[e.min,e.max],()=>{V()})},cl=(e,l,d)=>{const a=J();return $e(async()=>{e.range?(te(e.modelValue)?(l.firstValue=Math.max(e.min,e.modelValue[0]),l.secondValue=Math.min(e.max,e.modelValue[1])):(l.firstValue=e.min,l.secondValue=e.max),l.oldValue=[l.firstValue,l.secondValue]):(!ae(e.modelValue)||Number.isNaN(e.modelValue)?l.firstValue=e.min:l.firstValue=Math.min(e.max,Math.max(e.min,e.modelValue)),l.oldValue=l.firstValue),ce(window,"resize",d),await me(),d()}),{sliderWrapper:a}},ml=oe({name:"ElSlider"}),vl=oe({...ml,props:qe,emits:Je,setup(e,{expose:l,emit:d}){const a=e,u=we("slider"),{t:m}=Ue(),o=Pe({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:h,slider:V,firstButton:c,secondButton:v,sliderDisabled:s,minValue:y,maxValue:T,runwayStyle:p,barStyle:z,resetSize:P,emitChange:_,onSliderWrapperPrevent:k,onSliderClick:K,onSliderDown:B,onSliderMarkerDown:E,setFirstValue:L,setSecondValue:W}=rl(a,o,d),{stops:se,getStopStyle:$}=il(a,o,y,T),{inputId:Y,isLabeledByFormItem:U}=Oe(a,{formItemContext:h}),r=Ae(),b=f(()=>a.inputSize||r.value),S=f(()=>a.ariaLabel||m("el.slider.defaultLabel",{min:a.min,max:a.max})),H=f(()=>a.range?a.rangeStartLabel||m("el.slider.defaultRangeStartLabel"):S.value),G=f(()=>a.formatValueText?a.formatValueText(i.value):`${i.value}`),Q=f(()=>a.rangeEndLabel||m("el.slider.defaultRangeEndLabel")),O=f(()=>a.formatValueText?a.formatValueText(g.value):`${g.value}`),I=f(()=>[u.b(),u.m(r.value),u.is("vertical",a.vertical),{[u.m("with-input")]:a.showInput}]),x=ul(a);dl(a,o,y,T,d,h);const M=f(()=>{const n=[a.min,a.max,a.step].map(re=>{const A=`${re}`.split(".")[1];return A?A.length:0});return Math.max.apply(null,n)}),{sliderWrapper:N}=cl(a,o,P),{firstValue:i,secondValue:g,sliderSize:w}=be(o),D=n=>{o.dragging=n};return ce(N,"touchstart",k,{passive:!1}),ce(N,"touchmove",k,{passive:!1}),je(ze,{...be(a),sliderSize:w,disabled:s,precision:M,emitChange:_,resetSize:P,updateDragging:D}),l({onSliderClick:K}),(n,re)=>{var A,Se;return C(),R("div",{id:n.range?t(Y):void 0,ref_key:"sliderWrapper",ref:N,class:F(t(I)),role:n.range?"group":void 0,"aria-label":n.range&&!t(U)?t(S):void 0,"aria-labelledby":n.range&&t(U)?(A=t(h))==null?void 0:A.labelId:void 0},[q("div",{ref_key:"slider",ref:V,class:F([t(u).e("runway"),{"show-input":n.showInput&&!n.range},t(u).is("disabled",t(s))]),style:Z(t(p)),onMousedown:t(B),onTouchstartPassive:t(B)},[q("div",{class:F(t(u).e("bar")),style:Z(t(z))},null,6),Ne(Me,{id:n.range?void 0:t(Y),ref_key:"firstButton",ref:c,"model-value":t(i),vertical:n.vertical,"tooltip-class":n.tooltipClass,placement:n.placement,role:"slider","aria-label":n.range||!t(U)?t(H):void 0,"aria-labelledby":!n.range&&t(U)?(Se=t(h))==null?void 0:Se.labelId:void 0,"aria-valuemin":n.min,"aria-valuemax":n.range?t(g):n.max,"aria-valuenow":t(i),"aria-valuetext":t(G),"aria-orientation":n.vertical?"vertical":"horizontal","aria-disabled":t(s),"onUpdate:modelValue":t(L)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),n.range?(C(),ve(Me,{key:0,ref_key:"secondButton",ref:v,"model-value":t(g),vertical:n.vertical,"tooltip-class":n.tooltipClass,placement:n.placement,role:"slider","aria-label":t(Q),"aria-valuemin":t(i),"aria-valuemax":n.max,"aria-valuenow":t(g),"aria-valuetext":t(O),"aria-orientation":n.vertical?"vertical":"horizontal","aria-disabled":t(s),"onUpdate:modelValue":t(W)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):ie("v-if",!0),n.showStops?(C(),R("div",{key:1},[(C(!0),R(ue,null,fe(t(se),(j,ee)=>(C(),R("div",{key:ee,class:F(t(u).e("stop")),style:Z(t($)(j))},null,6))),128))])):ie("v-if",!0),t(x).length>0?(C(),R(ue,{key:2},[q("div",null,[(C(!0),R(ue,null,fe(t(x),(j,ee)=>(C(),R("div",{key:ee,style:Z(t($)(j.position)),class:F([t(u).e("stop"),t(u).e("marks-stop")])},null,6))),128))]),q("div",{class:F(t(u).e("marks"))},[(C(!0),R(ue,null,fe(t(x),(j,ee)=>(C(),ve(t(sl),{key:ee,mark:j.mark,style:Z(t($)(j.position)),onMousedown:He(gl=>t(E)(j.position),["stop"])},null,8,["mark","style","onMousedown"]))),128))],2)],64)):ie("v-if",!0)],46,["onMousedown","onTouchstartPassive"]),n.showInput&&!n.range?(C(),ve(t(Qe),{key:0,ref:"input","model-value":t(i),class:F(t(u).e("input")),step:n.step,disabled:t(s),controls:n.showInputControls,min:n.min,max:n.max,precision:t(M),size:t(b),"onUpdate:modelValue":t(L),onChange:t(_)},null,8,["model-value","class","step","disabled","controls","min","max","precision","size","onUpdate:modelValue","onChange"])):ie("v-if",!0)],10,["id","role","aria-label","aria-labelledby"])}}});var fl=Te(vl,[["__file","slider.vue"]]);const wl=Ge(fl);export{wl as E};

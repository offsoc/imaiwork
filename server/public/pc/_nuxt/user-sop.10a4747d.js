import{d as D,r as b,A as P,k as o,l as i,q as t,s as r,Z as a,m as e,t as h,J as g,K as E,Y as C,I,L as d,v as x,aH as S,y as G,ax as K,_ as O}from"./entry.f4f46cb5.js";import{E as U}from"./index.03679949.js";import{E as j}from"./el-image.01a57254.js";import{_ as q}from"./index.vue.cb61de56.js";import{_ as H}from"./index.vue.b711ba9e.js";/* empty css               */import"./el-image-viewer.c352c3bd.js";import{_ as J}from"./date.95a59cef.js";import{s as X,a as Y}from"./vue-virtual-scroller.esm.9a67c6dc.js";/* empty css                             */import{MaterialTypeEnum as v}from"./index.cf59f1a8.js";import{_ as Z}from"./mini-program-card.vue.44c1fcac.js";import{_ as Q}from"./link-card.vue.07f8b073.js";import{_ as W}from"./file-card.vue.6f668f51.js";import"./throttle.a2681779.js";import"./debounce.640f3738.js";import"./toNumber.d5c70aa7.js";const ss={class:"flex flex-col gap-4 mb-4 pb-4"},es={class:"flex items-center gap-2"},ts={class:"text-primary font-bold"},ls={class:"absolute top-0 left-0 bg-primary rounded-tl-xl rounded-br-xl"},os={class:"flex items-center gap-2 px-3 py-1"},is={class:"text-white text-xs"},ns={class:"text-white text-xs"},as={class:"absolute right-2 top-2 z-20"},rs={class:"absolute right-2 bottom-2 text-[#474747]"},ds={key:0,class:"text-xs text-[#8A8C99] line-clamp-2 content-wrapper"},cs={class:"w-[80px] flex-shrink-0"},_s={class:"mt-[3px]"},ps={key:1,class:"content-wrapper"},ms={class:"w-[80px] flex-shrink-0"},fs={key:2,class:"content-wrapper"},us={class:"w-[80px] flex-shrink-0"},xs={class:"flex-1 relative"},vs=["src"],hs=["onClick"],ks={key:3,class:"content-wrapper"},ws={class:"w-[80px] flex-shrink-0"},ys={class:"w-[50%] h-[300px]"},gs={key:4,class:"content-wrapper"},$s={class:"w-[80px] flex-shrink-0"},bs={class:"w-[50%]"},Es={key:5,class:"content-wrapper"},Cs={class:"w-[80px] flex-shrink-0"},Is={key:1,class:"h-full flex items-center justify-center mt-4 text-gray-500"},Vs=D({__name:"user-sop",props:{list:{}},emits:["edit","delete"],setup(V,{emit:z}){const F=z,_=b([]),T=(p,s)=>{_.value.includes(`${p}-${s}`)?_.value=_.value.filter(c=>c!==`${p}-${s}`):_.value.push(`${p}-${s}`)},w=b(!1),y=P(),B=async p=>{var s,c;w.value=!0,await S(),(s=y.value)==null||s.open(),(c=y.value)==null||c.setUrl(p)};return(p,s)=>{const c=G,$=K,m=U,N=j,R=q,A=H;return o(),i(g,null,[t(a(Y),{items:V.list,"min-item-size":100,"key-field":"date"},{default:r(({item:f,index:zs,active:L})=>[t(a(X),{item:f,active:L,"size-dependencies":[f.date,f.log]},{default:r(()=>[e("div",ss,[e("div",es,[s[1]||(s[1]=e("img",{src:J,class:"w-6 h-6"},null,-1)),e("span",ts,h(f.date),1)]),(o(!0),i(g,null,E(f.log,(n,k)=>(o(),i("div",{key:k,class:C(["border border-solid border-primary-light-9 rounded-xl p-4 min-h-[100px] relative pt-10",{"bg-[#F3F3F3]":n.status!=0}])},[e("div",ls,[e("div",os,[t(c,{name:"local-icon-send_plane_fill",color:"#fff"}),e("span",is,h(n.push_real_time),1),e("span",ns," ("+h(n.status==0?"待推送":n.status==1?"推送成功":"推送失败")+") ",1)])]),e("div",as,[n.status!=0?(o(),I($,{key:0,type:"danger",size:"small",onClick:l=>F("delete",n.id)},{default:r(()=>[t(c,{name:"el-icon-Delete",color:"#fff"}),s[2]||(s[2]=e("span",{class:"text-white text-xs"},"删除",-1))]),_:1},8,["onClick"])):d("",!0),t($,{type:"primary",size:"small",onClick:l=>T(n.id,k)},{default:r(()=>[t(c,{name:"el-icon-Fold",color:"#fff"}),s[3]||(s[3]=e("span",{class:"text-white text-xs"},"折叠/展开",-1))]),_:1},8,["onClick"])]),e("div",rs,"来源："+h(n.push_name),1),n.content?(o(),i("div",{key:0,class:C(["h-full flex flex-col gap-2 overflow-hidden transition-all duration-500 ease-in-out transform origin-top mb-4",[a(_).includes(`${n.id}-${k}`)?"opacity-0 max-h-0 scale-y-95":"opacity-100 max-h-[2000px] scale-y-100"]])},[(o(!0),i(g,null,E(n.content,({content:l,type:u},M)=>(o(),i("div",{key:M},[u==a(v).TEXT?(o(),i("div",ds,[e("div",cs,[t(m,null,{default:r(()=>[...s[4]||(s[4]=[x("【文本】",-1)])]),_:1})]),e("span",_s,h(l),1)])):d("",!0),u==a(v).IMAGE?(o(),i("div",ps,[e("div",ms,[t(m,null,{default:r(()=>[...s[5]||(s[5]=[x("【图片】",-1)])]),_:1})]),t(N,{src:l,"preview-src-list":[l],"preview-teleported":"",class:"w-[50%] rounded-xl"},null,8,["src","preview-src-list"])])):d("",!0),u==a(v).VIDEO?(o(),i("div",fs,[e("div",us,[t(m,null,{default:r(()=>[...s[6]||(s[6]=[x("【视频】",-1)])]),_:1})]),e("div",xs,[e("video",{src:l,class:"w-full rounded-lg"},null,8,vs),e("div",{class:"absolute top-[50%] left-[50%] translate-x-[-50%] translate-y-[-50%]",onClick:Fs=>B(l)},[t(R)],8,hs)])])):d("",!0),u==a(v).MINI_PROGRAM?(o(),i("div",ks,[e("div",ws,[t(m,null,{default:r(()=>[...s[7]||(s[7]=[x("【小程序】",-1)])]),_:1})]),e("div",ys,[t(Z,{title:l.name,pic:l.pic,link:l.link},null,8,["title","pic","link"])])])):d("",!0),u==a(v).LINK?(o(),i("div",gs,[e("div",$s,[t(m,null,{default:r(()=>[...s[8]||(s[8]=[x("【链接】",-1)])]),_:1})]),e("div",bs,[t(Q,{title:l.name,desc:l.desc,img:l.img},null,8,["title","desc","img"])])])):d("",!0),u==a(v).FILE?(o(),i("div",Es,[e("div",Cs,[t(m,null,{default:r(()=>[...s[9]||(s[9]=[x("【文件】",-1)])]),_:1})]),t(W,{name:l.name,url:l.url,"icon-size":32},null,8,["name","url"])])):d("",!0)]))),128))],2)):d("",!0),a(_).includes(`${n.id}-${k}`)?(o(),i("div",Is," 内容被折叠 ")):d("",!0)],2))),128))])]),_:2},1032,["item","active","size-dependencies"])]),_:1},8,["items"]),a(w)?(o(),I(A,{key:0,ref_key:"previewVideoRef",ref:y,onClose:s[0]||(s[0]=f=>w.value=!1)},null,512)):d("",!0)],64)}}});const Js=O(Vs,[["__scopeId","data-v-0b0f8cb2"]]);export{Js as default};

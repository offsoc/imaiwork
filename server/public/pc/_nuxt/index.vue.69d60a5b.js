import{d as F,aF as L,r as _,k as f,l as j,m as r,q as a,s as o,v as m,Z as n,aI as q,I as v,t as x,bK as U,L as w,J as G,aH as h,G as E,ax as H,y as J,au as K,cQ as Q,u as Z}from"./entry.d9d53b29.js";import{E as z,a as M}from"./index.9a037d22.js";import{E as O}from"./index.8a3302e5.js";import{E as W}from"./el-empty.03c7f5cd.js";import{_ as X}from"./index.vue.930f6062.js";/* empty css                        *//* empty css               *//* empty css                 *//* empty css                     */import{u as Y}from"./usePaging.64764a63.js";import{a6 as ee,a7 as te}from"./person_wechat.8bcf26fc.js";import{_ as ae}from"./import-data.vue.effdec65.js";import{_ as oe}from"./edit.vue.c50acb8d.js";const ne={class:"h-full flex flex-col bg-white rounded-xl"},se={class:"flex items-center justify-between p-4"},le={class:"flex items-center gap-x-2"},ie={class:"grow flex flex-col min-h-0 rounded-xl"},re={class:"grow min-h-0"},me={class:"flex justify-end p-4"},be=F({__name:"index",setup(pe){const C=Z(),g=L({tag_name:""}),{pager:p,getLists:i,resetParams:de}=Y({fetchFun:ee,params:g}),u=_(!1),c=_(),b=async()=>{var s;u.value=!0,await h(),(s=c.value)==null||s.open()},$=async s=>{var e,l;u.value=!0,await h(),(e=c.value)==null||e.open("edit"),(l=c.value)==null||l.setFormData(s)},y=_(!1),k=_(),V=async()=>{var s;y.value=!0,await h(),(s=k.value)==null||s.open()},T=s=>{C.$confirm({message:"确定删除该标签吗？",onConfirm:async()=>{try{await te({id:s}),E.msgSuccess("删除成功"),i()}catch(e){E.msgError(e)}}})};return i(),(s,e)=>{const l=H,I=J,P=K,d=z,S=O,B=W,D=M,N=X,R=Q;return f(),j(G,null,[r("div",ne,[r("div",se,[r("div",null,[a(l,{type:"primary",onClick:b},{default:o(()=>e[6]||(e[6]=[m("添加标签",-1)])),_:1,__:[6]}),a(l,{type:"primary",onClick:V},{default:o(()=>e[7]||(e[7]=[m(" 批量导入标签 ",-1)])),_:1,__:[7]})]),r("div",le,[a(P,{class:"!w-[250px]",modelValue:n(g).tag_name,"onUpdate:modelValue":e[1]||(e[1]=t=>n(g).tag_name=t),clearable:"",placeholder:"请输入标签名称",onClear:e[2]||(e[2]=t=>n(i)())},{append:o(()=>[a(l,{onClick:e[0]||(e[0]=t=>n(i)())},{default:o(()=>[a(I,{name:"el-icon-Search"})]),_:1})]),_:1},8,["modelValue"])])]),r("div",ie,[r("div",re,[q((f(),v(D,{data:n(p).lists,stripe:"",height:"100%","header-row-style":{height:"62px"},"row-style":{height:"60px"}},{empty:o(()=>[a(B,{description:"暂无数据"})]),default:o(()=>[a(d,{label:"匹配模式",width:"120"},{default:o(({row:t})=>[m(x(t.match_type==0?"模糊匹配":"精确匹配"),1)]),_:1}),a(d,{label:"匹配对象",prop:"keywords","min-width":"120"},{default:o(({row:t})=>[m(x(t.match_mode==0?"AI回复":"客户回复"),1)]),_:1}),a(d,{label:"匹配关键词",prop:"match_keywords","min-width":"200"}),a(d,{label:"匹配标签","min-width":"140"},{default:o(({row:t})=>[a(S,{type:"primary",plain:""},{default:o(()=>[m(x(t.tag_name),1)]),_:2},1024)]),_:1}),a(d,{label:"操作",width:"120",fixed:"right"},{default:o(({row:t})=>[a(l,{link:"",type:"primary",onClick:A=>$(t)},{default:o(()=>e[8]||(e[8]=[m(" 编辑 ",-1)])),_:2,__:[8]},1032,["onClick"]),a(l,{link:"",type:"danger",onClick:A=>T(t.id)},{default:o(()=>e[9]||(e[9]=[m(" 删除 ",-1)])),_:2,__:[9]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[R,n(p).loading]])]),r("div",me,[a(N,{modelValue:n(p),"onUpdate:modelValue":e[3]||(e[3]=t=>U(p)?p.value=t:null),onChange:n(i)},null,8,["modelValue","onChange"])])])]),n(u)?(f(),v(oe,{key:0,ref_key:"editPopupRef",ref:c,onClose:e[4]||(e[4]=t=>u.value=!1),onSuccess:n(i)},null,8,["onSuccess"])):w("",!0),n(y)?(f(),v(ae,{key:1,ref_key:"importDataPopupRef",ref:k,title:"批量上传标签",type:"tags",onClose:e[5]||(e[5]=t=>y.value=!1),onSuccess:n(i)},null,8,["onSuccess"])):w("",!0)],64)}}});export{be as _};

import{d as E,z as k,r as _,G as x,aF as D,bC as I,k as p,l as u,q as d,s as f,m as t,Z as r,L as b,_ as A}from"./entry.2beb4577.js";import{j as F}from"./drawing.7058a163.js";import{drawTypeEnumMap as C,DrawTypeEnum as S,FashionImageTypeEnum as H}from"./index.fb0aa6a9.js";import M from"./useCreateForm.c8aa97e1.js";import N from"./useDrawingTask.6ae92c8b.js";import T from"./result-content.b980c24a.js";import{E as O}from"./index.47b30189.js";import"./cloneDeep.a23e4277.js";import"./el-image.a83bf837.js";import"./el-image-viewer.d11cc27b.js";import"./throttle.403d4771.js";import"./debounce.dd7f88c1.js";import"./toNumber.c824a4a2.js";import"./index.vue.4c207597.js";import"./useCopy.3342ae20.js";import"./index.vue.8d512c7f.js";const j={class:"h-full relative w-full"},G={class:"px-[10px]"},L={class:"z-[22] absolute top-4 left-0 w-full flex px-4"},R={class:"flex flex-col items-center gap-5 mt-2"},Y={class:"create-image-item"},B=["src"],U={key:0,class:"create-image-item"},V=["src"],z={class:"create-image-item"},P=["src"],W=E({__name:"index",setup(q){let l;(s=>{s[s.FASHION_IMAGE=C[S.FASHION_IMAGE]]="FASHION_IMAGE"})(l||(l={}));const g=k(),{onEvent:h,setFormData:v}=M(),c=_([]),o=_(!1);h("update:formData",async s=>{if(o.value){x.msgWarning("请等待上一次任务完成");return}o.value=!0;const{type_name:n,params:e}=s,a=D({date:I().format("YYYY-MM-DD HH:mm"),tags:[n],images:[],formData:s});c.value.unshift(a);try{a.images=new Array(parseInt(e.img_count)).fill({url:"",loading:!0,progress:0,status:0,error:!1});const{result:m}=await F(e),{processDrawingTask:i}=N({type:l.FASHION_IMAGE,task_id:m.task_id,dataLists:a.images});await i({callback:w=>{a.images=w}}),g.getUser()}catch{a.images=a.images.map(i=>({...i,loading:!1,progress:0,status:4,error:!0}))}finally{o.value=!1}});const y=s=>{v(s)};return(s,n)=>(p(),u("div",j,[d(r(O),null,{default:f(()=>[t("div",G,[d(T,{"result-lists":r(c),"is-all-tasks-completed":r(o),onRetry:y},{"add-content":f(({item:e})=>[t("div",L,[t("div",R,[t("div",Y,[t("img",{src:e.formData.params.upper_clothes,class:"w-full h-full object-contain"},null,8,B)]),e.formData.type==r(H).UPPER_LOWER_CLOTHES?(p(),u("div",U,[t("img",{src:e.formData.params.lower_clothes,class:"w-full h-full object-contain"},null,8,V)])):b("",!0),t("div",z,[t("img",{src:e.formData.params.persons[0],class:"w-full h-full object-contain"},null,8,P)])])])]),_:1},8,["result-lists","is-all-tasks-completed"])])]),_:1})]))}});const ms=A(W,[["__scopeId","data-v-bf27020c"]]);export{ms as default};

import{d as de,a as ce,c as L,aF as ue,r as x,cq as pe,k as n,l,m as t,q as a,s as r,Z as s,J as p,K as E,Y as N,t as f,I as O,L as y,v as m,bz as Q,dA as fe,a8 as me,dC as _e,aH as H,G as _,y as ve,ax as ge,b5 as xe,u as ye,_ as ke}from"./entry.d7219633.js";import{E as Ce,a as Ae}from"./index.50778a9c.js";import{E as he}from"./index.1f8dde63.js";import{E as Ee}from"./el-empty.77af023a.js";import{_ as we}from"./index.dcf52bcb.js";/* empty css                  *//* empty css               *//* empty css                     *//* empty css                   */import{_ as be,R as Be}from"./recorder-control.vue.f40c3428.js";import{u as Re,d as Fe}from"./useHandleApi.95097b7e.js";import{TurnStatus as C}from"./index.0f8f6319.js";import{_ as Se}from"./index.vue.ca1cb414.js";import"./index.f15af271.js";import"./index.4953ba77.js";import"./strings.03d3529c.js";import"./debounce.085e8a4a.js";import"./_baseIteratee.5c97421a.js";import"./index.ead96a32.js";import"./usePaging.3c53b51c.js";import"./el-slider.0a90f692.js";import"./el-input-number.368c2208.js";import"./index.2311001e.js";import"./useDictOptions.2e009744.js";import"./knowledge_base.519704cc.js";import"./common.1373bb04.js";const Ie="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAKySURBVHic7ZzPahpRFId/52hKoCBSkiZPUJNAQ+y2kFcI+Aou6qLrLJJNuu06i1pw7yrgKwjddqBtimafYtPSSKBQms6cLvxTR00OJuPcWzzfyjuOlx8fc2eOXjmEW7i4lB1hlESwC2ATwOPbzv9PCAGcE+FUBM0M42Q1R2c3nUzTDnZ+yFNiHAlQmltMv6hnGa9WctQaf2NC0NeuvBDgTTq5vEIAVNbz9Hb0II8OOl05WFA5QO9iqXa6cjB+EMBCXzkTEFBZy1O1/7p3zwHjg9tYnhFhe/0RfWQAIMaR4zjeMXBCF5eyExECx3m8hAVFFl6YR/nMCKPE/SLQmIIIdhm9CtmYziZ1uiKuU/gM66csNiZIwQQpmCAFE6RgghSyrgMMCNphbFwsZBwlieNNHfS8/DM2fld76ChJHFtiCiZIwQQpmCAFE6SQymM+aIeoNa6H42KBUd57MNMctcZvBO3oXnPchVQEvW+FE3XOrATtKDZHsZDOxW9LTMEEKZggBROkkMhN2pcvmvPIkYigWuM6Fu54fzl1SUE7xMvXv4bjYiGD4/37Z7AlpmCCFEyQgglSMEEKJkjBBCkkUgeV95YALA3HLgrFXt2znPi8iQjyZYtmHjlsiSmYIAUTpGCCFFLbmx+9gd7l9+TxzzzbSOfBkIqgJHYf0tjBmIYtMQUTpGCCFEyQgglS8OYfZr7sjIzjjSBfsSWmYIIUTJCCCVIwQQqMXi8LYzohAzh3ncJXRPCFiXDqOoivMOMTi6DpOoiviKBJ367kSRih7TqMj2QYBe43F6q7DuMh9dUcnREAfL+SjT8RPuOGhksLiGQZWys5ajEA9DsvVRyH8onKoBvVsFDsd146dBbJHw5Hu1BZi65/6C26AGAtT1VE2CbgJLVo7qlnGVvjcgDlpmxtAoG/35zEUBH7LW8AAAAASUVORK5CYII=",Me={class:"real-time-page"},Te={class:"absolute top-4 left-6 z-30"},je={class:"w-[852px] mx-auto"},ze={class:"flex flex-col gap-6"},Le={class:"flex items-center"},Ne={class:"flex flex-wrap gap-4"},Oe=["onClick"],Qe={class:"flex items-center"},He={class:"flex-1"},Ve={class:"flex items-center"},Ye={class:"flex flex-wrap gap-4"},De=["onClick"],Ue={class:"mt-8 flex justify-center"},Ze={class:"flex items-center justify-center gap-x-1 mt-4"},Ke={class:"text-xs"},Pe={key:1,class:"bg-[#f7f8fc] py-6 px-4 rounded-lg"},We={key:0,class:"mt-8 flex justify-center"},Ge={class:"mt-12"},Je={class:"mt-4"},qe={key:0,class:"grid grid-cols-3 gap-4"},Xe={class:"flex items-center justify-between gap-2"},$e={class:"flex-1 overflow-hidden text-ellipsis whitespace-nowrap"},et={class:"flex justify-between items-center text-xs text-[#A5A7B9]"},tt={class:"absolute bottom-0 left-0 w-full h-[36px] flex justify-center items-center bg-white z-50 translate-y-full group-hover:translate-y-0 transition-all duration-200"},st={class:"leading-[0]"},ot={class:"flex flex-col gap-2"},nt={key:0,class:"px-2 py-1 hover:bg-primary-light-9 rounded-lg"},lt={class:"px-2 py-1 hover:bg-primary-light-9 rounded-lg"},at={key:1,class:"px-2 py-1 hover:bg-primary-light-9 rounded-lg"},it={key:1,class:"py-4"},rt={key:1,class:"mt-8 flex flex-col items-center"},dt=de({__name:"index",setup(ct){const F=ce(),S=ye(),{pager:w,userTokens:V,tokensValue:b,speakerOptions:Y,languageList:D,targetLanguageList:U,getLists:Z,handleAgain:K,handleDelete:P,handleTrain:W,formatName:G}=Re(),J=L(()=>Math.floor(V.value/3)),d=ue({language:"cn",speaker:0,translation:0,task_type:1}),I=x(),k=x(),A=x(1),M=x(null),v=x(!1),q=async()=>{var i;if(v.value=!1,await H(),(i=k.value)==null||i.resetRecord(),b.value.score<=0){_.msgPowerInsufficient();return}M.value=Be(),M.value.open(()=>{A.value=2},(e,c)=>{_.msgWarning((c?"UserNotAllow，":"")+"无法录音:"+e)})},X=async()=>{await S.$confirm({message:"确定要重新录音吗？",onConfirm:async()=>{var i,e;v.value=!1,(i=k.value)==null||i.resetRecord(),(e=k.value)==null||e.openRecorder()}})},$=L(()=>j.value||v.value),ee=async i=>{const e=`${Q().format("YYYY-MM-DD HH:mm:ss")} 记录`,{uri:c}=i;d.url=c,d.name=e,_.closeLoading(),T()},B=x(!1),R=x(),te=async i=>{W(i,async e=>{var c,u;B.value=!0,await H(),(c=R.value)==null||c.open(),(u=R.value)==null||u.setFormData(e)})},se=async()=>{_.loading("创建中...",I.value);try{await Fe({...d,translation:d.translation==0?"":d.translation}),_.msgSuccess("创建成功,即将返回列表"),setTimeout(()=>{F.back()},1e3)}catch(i){v.value=!0,_.msgError(i||"创建失败")}finally{_.closeLoading()}},{lockFn:T,isLock:j}=pe(se),oe=()=>{A.value==2&&!v.value?S.$confirm({message:"确定结束录音吗？结束后无法在本记录继续录音",onConfirm:async()=>{var i;_.loading("结束录音中..."),(i=k.value)==null||i.stopRecord()}}):F.back()};return Z(),(i,e)=>{const c=ve,u=ge,z=xe,ne=Ce,le=Ae,ae=he,ie=Ee,re=we;return n(),l(p,null,[t("div",Me,[a(z,{content:"返回"},{default:r(()=>[t("div",Te,[a(u,{circle:"",onClick:oe},{default:r(()=>[a(c,{name:"el-icon-Back"})]),_:1})])]),_:1}),t("div",je,[t("div",null,[e[8]||(e[8]=t("div",{class:"text-[32px] font-bold"},"会议实时记录转写",-1)),e[9]||(e[9]=t("div",{class:"mt-3"},"语音转文字·发言人区分·智能总结",-1)),t("div",{ref_key:"recorderContainerRef",ref:I,class:"mt-8 bg-white rounded-xl px-[60px] py-12 shadow-[2px_6px_20px_#0000001C]"},[s(A)==1?(n(),l(p,{key:0},[t("div",ze,[t("div",Le,[e[2]||(e[2]=t("div",{class:"w-[132px] text-[#737373]"},"音频文件的语音",-1)),t("div",null,[t("div",Ne,[(n(!0),l(p,null,E(s(D),(o,g)=>(n(),l("div",{key:g,class:N(["bg-[#F5F5F5] rounded-lg px-6 py-1.5 cursor-pointer",{"bg-[#f1f6ff] text-primary":s(d).language===o.code}]),onClick:h=>s(d).language=o.code},f(o.name),11,Oe))),128))])])]),t("div",Qe,[e[3]||(e[3]=t("div",{class:"w-[132px] text-[#737373]"},"翻译的目标语言",-1)),t("div",He,[a(le,{modelValue:s(d).translation,"onUpdate:modelValue":e[0]||(e[0]=o=>s(d).translation=o),placeholder:"请选择"},{default:r(()=>[(n(!0),l(p,null,E(s(U),(o,g)=>(n(),O(ne,{key:g,label:o.name,value:o.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),t("div",Ve,[e[4]||(e[4]=t("div",{class:"w-[132px] text-[#737373]"},"区分发言人",-1)),t("div",null,[t("div",Ye,[(n(!0),l(p,null,E(s(Y),(o,g)=>(n(),l("div",{key:g,class:N(["bg-[#F5F5F5] rounded-lg px-[47px] py-1.5 cursor-pointer",{"bg-primary-light-9 text-primary":s(d).speaker===o.value}]),onClick:h=>s(d).speaker=o.value},f(o.label),11,De))),128))])])])]),t("div",Ue,[a(z,null,{content:r(()=>[t("div",null,[t("div",null,f(s(b).score)+" "+f(s(b).unit),1)])]),default:r(()=>[a(u,{type:"primary",class:"!h-[48px] w-[192px] !rounded-full gap-2",onClick:q},{default:r(()=>[e[5]||(e[5]=t("span",{class:"mr-2"}," 开始录音 ",-1)),a(c,{name:"el-icon-Warning"})]),_:1,__:[5]})]),_:1})]),t("div",Ze,[a(c,{name:"el-icon-Warning"}),t("span",Ke," 您的算力目前可以转写"+f(s(J))+"分钟，算力不足时将终止录音",1)])],64)):y("",!0),s(A)==2?(n(),l("div",Pe,[a(be,{ref_key:"recorderControlRef",ref:k,disabled:s($),"is-error":s(v),onChange:ee},null,8,["disabled","is-error"]),s(v)?(n(),l("div",We,[a(u,{type:"primary",class:"!h-[48px] w-[192px] !rounded-full",loading:s(j),onClick:s(T)},{default:r(()=>e[6]||(e[6]=[m("重新上传",-1)])),_:1,__:[6]},8,["loading","onClick"]),a(u,{type:"danger",class:"!h-[48px] w-[192px] !rounded-full",onClick:X},{default:r(()=>e[7]||(e[7]=[m("重新录音",-1)])),_:1,__:[7]})])):y("",!0)])):y("",!0)],512)]),t("div",Ge,[e[15]||(e[15]=t("div",{class:"font-bold text-lg"},"最近记录",-1)),t("div",Je,[s(w).loading?(n(),l("div",rt,[a(re),e[14]||(e[14]=t("div",{class:"text-sm text-gray-500 mt-10"},"加载中...",-1))])):(n(),l(p,{key:0},[s(w).lists.length?(n(),l("div",qe,[(n(!0),l(p,null,E(s(w).lists,(o,g)=>(n(),l("div",{class:"bg-white rounded-xl p-4 h-[127px] flex flex-col justify-between relative group overflow-hidden",key:g},[t("div",Xe,[t("div",$e,f(s(G)(o.name)),1),e[10]||(e[10]=t("img",{src:Ie,class:"w-6 h-6 flex-shrink-0"},null,-1))]),t("div",et,[t("div",null,[o.status==s(C).SUCCESS?(n(),l(p,{key:0},[m(f(o.task_type==1?"音频记录":"实时记录"),1)],64)):o.status==s(C).ING?(n(),l(p,{key:1},[m(" 转写中 ")],64)):o.status==s(C).ERROR?(n(),l(p,{key:2},[m(" 转写失败 ")],64)):y("",!0)]),t("div",null,f(s(Q)(o.create_time).format("MM/DD HH:mm")),1)]),t("div",tt,[t("div",null,[a(ae,{placement:"top-start","show-arrow":!1,"popper-class":"!w-[120px] !min-w-[120px] !p-[6px] !rounded-xl ","popper-options":{modifiers:[{name:"offset",options:{offset:[-40,10]}}]}},{reference:r(()=>[t("div",st,[a(c,{name:"el-icon-MoreFilled",color:"#8f91a8",size:12})])]),default:r(()=>[t("div",ot,[[s(C).ERROR].includes(o.status)?(n(),l("div",nt,[a(u,{link:"",icon:s(fe),onClick:h=>s(K)(o.id)},{default:r(()=>e[11]||(e[11]=[m(" 重试 ",-1)])),_:2,__:[11]},1032,["icon","onClick"])])):y("",!0),t("div",lt,[a(u,{link:"",icon:s(me),onClick:h=>s(P)(o.id)},{default:r(()=>e[12]||(e[12]=[m(" 删除 ",-1)])),_:2,__:[12]},1032,["icon","onClick"])]),o.status==s(C).SUCCESS?(n(),l("div",at,[a(u,{link:"",icon:s(_e),onClick:h=>te(o)},{default:r(()=>e[13]||(e[13]=[m(" 训练知识库 ",-1)])),_:2,__:[13]},1032,["icon","onClick"])])):y("",!0)])]),_:2},1024)])])]))),128))])):(n(),l("div",it,[a(ie,{description:"暂无数据"})]))],64))])])])]),s(B)?(n(),O(Se,{key:0,ref_key:"knbBindRef",ref:R,onClose:e[1]||(e[1]=o=>B.value=!1)},null,512)):y("",!0)],64)}}});const Nt=ke(dt,[["__scopeId","data-v-2d1492af"]]);export{Nt as default};

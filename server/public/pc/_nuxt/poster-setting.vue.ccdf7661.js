import{_ as D}from"./index.vue.f38ca415.js";import{d as F,A as _,aF as R,B as E,c as N,cq as S,c_ as I,G as m,bI as L,k as x,I as j,s as n,m as e,q as o,Z as l,l as q,L as A,t as g,v as r,c$ as z,ax as G,cO as H}from"./entry.d7219633.js";import{_ as O}from"./index.55703cf7.js";import{V as Q}from"./vue-qr.ceb585bc.js";const T=["src"],Z={class:"absolute top-0 left-0 w-full h-full flex flex-col justify-center items-center"},J={class:"text-center text-white mt-[15px] text-[18px] font-bold"},K={class:"flex py-3 items-center"},M={class:"flex-1 ml-3"},P={class:"flex"},st=F({__name:"poster-setting",emits:["close","success"],setup(W,{expose:k,emit:v}){const p=v,d=_(),u=_(),s=R({id:"",apikey:"",bgUrl:"",title:"快来扫码",description:"和我的智能体对话吧"}),f=`${E()}/static/images/ai_share_bg.png`,b=N(()=>`${location.origin}${z()}/chat/${s.apikey}`),y=a=>{s.bgUrl=a.data.uri},h=()=>{s.bgUrl=f},{lockFn:w,isLock:B}=S(async()=>{try{await I(u.value,{name:`${s.title}.png`}),i(),p("success"),m.msgSuccess("海报已保存到本地")}catch{m.msgError("下载失败，请重试")}}),U=()=>{d.value.open(),s.bgUrl=f},i=()=>{p("close")};return k({open:U,setFormData:a=>L(a,s)}),(a,t)=>{const C=D,c=G,$=O,V=H;return x(),j(V,{ref_key:"popupRef",ref:d,async:"",width:"400px","confirm-button-text":"","cancel-button-text":"","header-class":"!p-0","show-close":!1},{default:n(()=>[e("div",null,[e("div",{class:"absolute w-6 h-6 right-4 top-4 cursor-pointer",onClick:i},[o(C)]),t[5]||(t[5]=e("div",{class:"text-2xl font-bold mb-5"},"生成海报",-1)),e("div",{class:"w-full h-[556px] rounded-[10px] overflow-hidden relative",ref_key:"posterRef",ref:u},[l(s).bgUrl?(x(),q("img",{key:0,class:"object-cover w-full h-full",src:l(s).bgUrl},null,8,T)):A("",!0),e("div",Z,[o(Q,{text:l(b),size:200,class:"rounded-[10px]","dot-scale":1,margin:12},null,8,["text"]),e("div",J,[e("div",null,g(l(s).title),1),e("div",null,g(l(s).description),1)])])],512),e("div",K,[o($,{limit:1,"show-file-list":!1,"show-progress":"",onSuccess:y},{default:n(()=>[o(c,{type:"primary",link:""},{default:n(()=>t[0]||(t[0]=[r("自定义背景图",-1)])),_:1,__:[0]})]),_:1}),e("div",M,[o(c,{type:"primary",link:"",onClick:h},{default:n(()=>t[1]||(t[1]=[r("使用默认图",-1)])),_:1,__:[1]})]),t[2]||(t[2]=e("div",{class:"text-tx-regular"},"背景图尺寸：430*670",-1))]),e("div",P,[o(c,{class:"!rounded-full flex-1 !h-[50px]",onClick:i},{default:n(()=>t[3]||(t[3]=[r("取消",-1)])),_:1,__:[3]}),o(c,{type:"primary",class:"!rounded-full flex-1 !h-[50px]",loading:l(B),onClick:l(w)},{default:n(()=>t[4]||(t[4]=[r(" 保存 ",-1)])),_:1,__:[4]},8,["loading","onClick"])])])]),_:1},512)}}});export{st as _};

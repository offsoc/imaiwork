import{d as Y,a as Z,A as N,r as w,o as Q,bx as X,k as n,l as a,m as e,J as _,K as D,Y as ee,t as m,q as i,Z as o,I,s as l,L as f,v as C,bz as te,aH as S,G as se,y as oe,ax as ne,_ as ie}from"./entry.d7219633.js";import{E as ae,a as le}from"./index.0a6eb9ae.js";import{E as re}from"./index.1f8dde63.js";import{E as de}from"./el-card.9dfa0fe4.js";import{E as ce}from"./el-empty.77af023a.js";import{_ as pe}from"./index.dcf52bcb.js";/* empty css                        *//* empty css               *//* empty css                   *//* empty css                 *//* empty css                     */import{TurnStatus as r}from"./index.0f8f6319.js";import{_ as me}from"./add-audio.vue.7337d9e1.js";import{u as ue}from"./useHandleApi.95097b7e.js";import{_ as _e}from"./index.vue.ca1cb414.js";import"./index.f15af271.js";import"./_baseIteratee.5c97421a.js";import"./debounce.085e8a4a.js";import"./index.ead96a32.js";import"./index.50778a9c.js";import"./index.4953ba77.js";import"./strings.03d3529c.js";/* empty css                  */import"./usePaging.3c53b51c.js";import"./el-slider.0a90f692.js";import"./el-input-number.368c2208.js";import"./index.2311001e.js";import"./useDictOptions.2e009744.js";import"./knowledge_base.519704cc.js";import"./common.1373bb04.js";const fe=""+new URL("home_txt_title.154e6c48.png",import.meta.url).href,xe=""+new URL("audio_transform.29d7ab46.gif",import.meta.url).href,ve={class:"meeting-minutes-page dynamic-scroller"},he={class:"w-[1000px] mx-auto"},ge={class:"px-8 mt-10 w-full h-[260px]"},ye={class:"flex items-start gap-x-[30px]"},ke=["onClick"],be={class:"container pt-4"},we={class:"font-bold text-[22px] title"},Ce={class:"mt-4 leading-6 desc"},Ee={class:"mt-4 font-bold text-[#27264D] group-hover:text-white invisible group-hover:visible"},Re={class:"px-8 mt-10"},Te={class:"mt-5"},Ae={class:"flex items-center gap-4"},Ie={key:0,class:"bg-[#edecff] rounded flex-shrink-0"},Be={class:"text-base overflow-hidden text-ellipsis whitespace-nowrap"},Le={class:"overflow-hidden flex flex-wrap gap-2 max-h-[20px] text-xs text-[#8f91a8]"},Ne={class:"text-xs text-[#8f91a8] px-2 flex justify-center items-center bg-[#f7f8fc] h-[20px] rounded"},De={class:"text-[#8f91a8] text-xs"},Se={class:"text-[#8f91a8] text-xs"},Me={class:"text-[#8f91a8] text-xs"},$e={class:"flex flex-col gap-2"},Ge={key:0,class:"px-2 py-1 hover:bg-primary-light-9 rounded-lg cursor-pointer flex items-center gap-2"},Fe=["onClick"],He={key:1,class:"px-2 py-1 hover:bg-primary-light-9 rounded-lg"},Ue={key:1,class:"py-4"},je={key:1,class:"mt-[100px] flex flex-col items-center"},ze={class:"fixed bottom-0 left-0 w-full flex justify-center items-center gap-1 my-2"},Ke=Y({__name:"index",emits:["openRealTime"],setup(Ve,{emit:We}){const M=Z(),$=[{title:"开启实时语音",desc1:"实时语音转文字",desc2:"同步口译，智能总结要点",class:"meeting-card"},{title:"上传音视频文件",desc1:"即刻转写文字",desc2:"智能区分发言人，掌握内容",class:"audio-card"},{title:"视频链接转写",desc1:"输入视频链接",desc2:"无需下载，智能提炼要点",class:"free-card"}],B=N(),E=w(!1),G=async u=>{var t;u==="audio-card"?(E.value=!0,await S(),(t=B.value)==null||t.open()):u==="meeting-card"?M.push("/app/meeting_minutes/realtime"):se.msgWarning("暂未开放")},{pager:g,getLists:F,handleAgain:Oe,handleDelete:H,handleItem:U,handleTrain:j,formatName:z,getDuration:K}=ue({onSuccess:u=>{k()}}),y=w(!1),R=w(),k=async()=>{await F(),g.lists.filter(t=>t.status==r.ING||t.status==r.WAITING).length>0?(y.value=!0,R.value=setTimeout(()=>{k()},2e3)):(y.value=!1,clearTimeout(R.value))},T=w(!1),A=N(),V=u=>{j(u,async t=>{var c,d;T.value=!0,await S(),(c=A.value)==null||c.open(),(d=A.value)==null||d.setFormData(t)})};return Q(async()=>{k()}),X(()=>{y.value=!1,clearTimeout(R.value)}),(u,t)=>{const c=oe,d=ae,L=ne,W=re,O=le,P=de,q=ce,J=pe;return n(),a("div",ve,[e("div",he,[t[10]||(t[10]=e("div",{class:"mt-2"},[e("img",{src:fe,class:"h-[150px] object-cover"})],-1)),e("div",ge,[e("div",ye,[(n(),a(_,null,D($,s=>e("div",{class:ee([s.class,"group"]),onClick:p=>G(s.class)},[t[2]||(t[2]=e("div",null,[e("div",{class:"icon"}),e("div",{class:"active-icon"})],-1)),e("div",be,[e("div",we,m(s.title),1),e("div",Ce,[e("div",null,m(s.desc1),1),e("div",null,m(s.desc2),1)]),e("div",Ee,[i(c,{name:"el-icon-Right",size:24})])])],10,ke)),64))])]),e("div",Re,[t[8]||(t[8]=e("div",{class:"text-lg font-bold"},"最近",-1)),e("div",Te,[!o(g).loading||o(y)?(n(),a(_,{key:0},[o(g).lists.length?(n(),I(P,{key:0,shadow:"never",class:"!rounded-xl"},{default:l(()=>[i(O,{data:o(g).lists,"row-style":{height:"80px",cursor:"pointer"},onRowClick:o(U)},{default:l(()=>[i(d,{prop:"name",label:"文件","min-width":"200","show-overflow-tooltip":""},{default:l(({row:s})=>[e("div",Ae,[s.status==o(r).ING||s.status==o(r).WAITING?(n(),a("div",Ie,t[3]||(t[3]=[e("img",{src:xe,class:"w-9 h-9"},null,-1)]))):f("",!0),e("div",Be,m(o(z)(s.name)),1)])]),_:1}),i(d,{prop:"title",label:"详情","min-width":"120px"},{default:l(({row:s})=>{var p,x,v,h;return[e("div",Le,[s.status==o(r).SUCCESS?(n(),a(_,{key:0},[(h=(v=(x=(p=s.response.Result)==null?void 0:p.MeetingAssistance)==null?void 0:x.MeetingAssistance)==null?void 0:v.Keywords)!=null&&h.length?(n(!0),a(_,{key:0},D(s.response.Result.MeetingAssistance.MeetingAssistance.Keywords,b=>(n(),a("div",Ne,m(b),1))),256)):(n(),a(_,{key:1},[C("内容为空")],64))],64)):s.status==o(r).ING||s.status==o(r).WAITING?(n(),a(_,{key:1},[C(" 处理中 ")],64)):s.status==o(r).ERROR?(n(),a(_,{key:2},[C(" 转写失败 ")],64)):f("",!0)])]}),_:1}),i(d,{prop:"title",label:"类型"},{default:l(({row:s})=>[e("div",De,m(s.task_type==1?"音频速读":"实时记录"),1)]),_:1}),i(d,{prop:"created_at",label:"时长",width:"100px"},{default:l(({row:s})=>{var p,x,v,h,b;return[e("div",Se,m(o(K)((b=(h=(v=(x=(p=s.response)==null?void 0:p.Result)==null?void 0:x.Transcription)==null?void 0:v.Transcription)==null?void 0:h.AudioInfo)==null?void 0:b.Duration)),1)]}),_:1}),i(d,{prop:"created_at",label:"创建时间",width:"140px"},{default:l(({row:s})=>[e("div",Me,m(o(te)(s.create_time).format("MM/DD HH:mm")),1)]),_:1}),i(d,{prop:"created_at",label:"操作",width:"60px"},{default:l(({row:s})=>[i(W,{"show-arrow":!1,"popper-class":"!w-[120px] !min-w-[120px] !p-[6px] !rounded-xl"},{reference:l(()=>[i(L,{link:""},{default:l(()=>[i(c,{name:"el-icon-MoreFilled",color:"#8f91a8",size:12})]),_:1})]),default:l(()=>[e("div",$e,[[o(r).ERROR].includes(s.status)?(n(),a("div",Ge,[i(c,{name:"el-icon-Refresh"}),t[4]||(t[4]=e("span",null,"重试",-1))])):f("",!0),e("div",{class:"px-2 py-1 hover:bg-primary-light-9 rounded-lg cursor-pointer flex items-center gap-2",onClick:p=>o(H)(s.id)},[i(c,{name:"el-icon-Delete"}),t[5]||(t[5]=e("span",null,"删除",-1))],8,Fe),s.status==o(r).SUCCESS?(n(),a("div",He,[i(L,{link:"",icon:"el-icon-DocumentAdd",onClick:p=>V(s)},{default:l(()=>t[6]||(t[6]=[C(" 训练知识库 ",-1)])),_:2,__:[6]},1032,["onClick"])])):f("",!0)])]),_:2},1024)]),_:1})]),_:1},8,["data","onRowClick"])]),_:1})):(n(),a("div",Ue,[i(q,{description:"暂无数据"})]))],64)):(n(),a("div",je,[i(J),t[7]||(t[7]=e("div",{class:"text-sm text-gray-500 mt-10"},"加载中...",-1))]))])]),e("div",ze,[i(c,{name:"el-icon-InfoFilled",color:"#B3B3B3"}),t[9]||(t[9]=e("span",{class:"text-[#B3B3B3] text-xs"},"免责声明：内容由AI大模型生成，请仔细甄别。",-1))])]),o(E)?(n(),I(me,{key:0,ref_key:"addAudioRef",ref:B,onClose:t[0]||(t[0]=s=>E.value=!1),onSuccess:k},null,512)):f("",!0),o(T)?(n(),I(_e,{key:1,ref_key:"knbBindRef",ref:A,onClose:t[1]||(t[1]=s=>T.value=!1)},null,512)):f("",!0)])}}});const wt=ie(Ke,[["__scopeId","data-v-1c53eb8a"]]);export{wt as default};

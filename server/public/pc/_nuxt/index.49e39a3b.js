import{d as Q,a as X,r as p,k as u,l as ee,m as o,t as w,Z as l,dj as oe,dk as te,q as s,s as a,aI as se,I as f,v as g,L as C,bK as ne,J as le,G as x,eg as P,dY as ae,ef as R,aH as I,y as re,ax as ie,cP as ce,u as de}from"./entry.d7219633.js";import{E as pe,a as ue}from"./index.0a6eb9ae.js";import{E as me}from"./index.4953ba77.js";import{E as fe}from"./index.1f8dde63.js";import{_ as ve}from"./index.vue.5e2341cc.js";/* empty css                        *//* empty css               *//* empty css                   *//* empty css                 *//* empty css                     */import{u as _e}from"./usePaging.3c53b51c.js";import{u as ge}from"./useDeviceWs.13011833.js";import{u as xe}from"./useAddDeviceAccount.8e081e6d.js";import{g as ye,d as he}from"./device.317521e4.js";import{_ as ke}from"./rpa-setting.vue.b6c1580b.js";import{_ as Ce}from"./device-add.vue.c69c5a62.js";import{_ as Ee}from"./device-progress.vue.ca193e73.js";import"./index.f15af271.js";import"./_baseIteratee.5c97421a.js";import"./debounce.085e8a4a.js";import"./index.ead96a32.js";import"./index.50778a9c.js";import"./strings.03d3529c.js";import"./useWebSocket.ba3dfe12.js";import"./useSocialPlatform.c7b710e3.js";import"./service.12abd78a.js";import"./index.9efd0300.js";/* empty css                    */const be=""+new URL("device.5646dcc8.svg",import.meta.url).href,De={class:"h-full p-4 flex flex-col"},we={class:"rounded-[20px] flex items-center gap-3 px-[30px]",style:{background:`linear-gradient(152deg, rgba(0, 101, 251, 0.88) -42.44%, rgba(255, 255, 255, 0) 12.19%)
                    rgb(255, 255, 255)`}},Re={class:"text-[#000000cc]"},Ae={class:"grow min-h-0 bg-white rounded-[20px] mt-4 flex flex-col"},$e={class:"h-[88px] px-5 flex items-center justify-between"},Be={class:"flex items-center gap-x-2"},Te={class:"text-lg font-bold"},Ne={class:"grow min-h-0"},Se={class:"flex flex-col gap-2"},Ve=["onClick"],Oe=["onClick"],Pe={class:"flex items-center justify-center"};const Ie=["onClick"],Le={class:"flex items-center justify-center h-full"},je={class:"flex justify-end p-4"},go=Q({__name:"index",setup(Ke){const L=X(),j=de(),{pager:m,getLists:d}=_e({fetchFun:ye}),y=p(!1),v=p(!1),{isConnected:K,onEvent:F,send:U}=ge(),{showAddDevice:E,addDeviceLoading:q,progressValue:A,refreshAccount:G,handleAddDeviceConfirm:M,handleRefreshAccount:$}=xe({send:U,onEvent:F,onSuccess:t=>{const{msg:e,type:r}=t;switch(e&&x.msgSuccess(e),r){case P.GET_USER_INFO:B.value="",v.value=!1,h.value=null,y.value=!1,d();break;default:d();break}},onError:t=>{v.value=!0,A.value=0;const{code:e,error:r,type:i}=t;e!=ae.CONNECT_ERROR&&i!=P.BIND_WS&&(x.msgError(r),d())}}),B=p(""),W=()=>{v.value=!1,$(h.value,R.REDBOOK)},H=t=>{B.value=t,v.value=!1,M(t)},h=p(null),T=t=>{h.value=t.device_code,G.value=t.account,y.value=!0,$(h.value,R.REDBOOK)},N=t=>{const{account:e,device_code:r,device_model:i,id:c}=t,_=e.find(D=>D.type==R.REDBOOK);_?L.push({path:`/device/${c}`,query:{account:_.account,device_code:r,device_model:i}}):T(t)},S=p(),b=p(!1),Fe=async t=>{var e;b.value=!0,await I(),(e=S.value)==null||e.open(t)},V=p(),O=async()=>{var t;if(!K.value){x.msgError("连接失败，请检查网络连接");return}E.value=!0,await I(),(t=V.value)==null||t.open()},J=t=>{j.$confirm({message:"确定删除该设备吗？",onConfirm:async()=>{try{await he({id:t.id,device_code:t.device_code}),x.msgSuccess("删除设备成功"),d()}catch(e){x.msgError(e||"删除失败")}}})};return d(),(t,e)=>{const r=re,i=ie,c=pe,_=me,D=fe,Y=ue,Z=ve,z=ce;return u(),ee(le,null,[o("div",De,[o("div",we,[e[6]||(e[6]=o("img",{src:be,class:"w-11 mt-7"},null,-1)),o("div",null,[o("div",Re,w(l(oe)[l(te).DEVICE]),1),e[5]||(e[5]=o("div",{class:"text-[#00000080]"}," 键绑定跨平台设备，激活智能流程引擎，全链路接管部门任务，让团队拥有数字化中枢管家。 ",-1))])]),o("div",Ae,[o("div",$e,[o("div",Be,[o("span",Te,"设备总数量："+w(l(m).count)+"台",1),s(i,{text:"",onClick:e[0]||(e[0]=n=>l(d)())},{default:a(()=>[s(r,{name:"el-icon-Refresh"}),e[7]||(e[7]=o("span",{class:"text-[#86909C]"},"刷新",-1))]),_:1,__:[7]})]),o("div",null,[s(i,{type:"primary",class:"!rounded-full !h-10",onClick:O},{default:a(()=>[s(r,{name:"local-icon-add_circle"}),e[8]||(e[8]=o("span",{class:"ml-2"},"添加设备",-1))]),_:1,__:[8]})])]),o("div",Ne,[se((u(),f(Y,{data:l(m).lists,height:"100%",stripe:"","row-style":{height:"60px"},"header-cell-style":{height:"63px"}},{empty:a(()=>[o("div",Le,[e[16]||(e[16]=g(" 还没有设备，",-1)),s(i,{type:"primary",link:"",onClick:O},{default:a(()=>e[15]||(e[15]=[g("点击添加设备",-1)])),_:1,__:[15]})])]),default:a(()=>[s(c,{prop:"device_model",label:"设备型号","show-overflow-tooltip":""},{default:a(({row:n})=>[s(i,{type:"primary",link:"",onClick:k=>N(n)},{default:a(()=>[g(w(n.device_model),1)]),_:2},1032,["onClick"])]),_:1}),s(c,{prop:"sdk_version",label:"当前SDK版本","show-overflow-tooltip":""}),s(c,{prop:"device_code",label:"设备码","show-overflow-tooltip":""}),s(c,{prop:"name",label:"设备状态"},{default:a(({row:n})=>[n.status===1?(u(),f(_,{key:0,type:"success","disable-transitions":!1},{default:a(()=>e[9]||(e[9]=[g("在线",-1)])),_:1,__:[9]})):(u(),f(_,{key:1,type:"danger","disable-transitions":!1},{default:a(()=>e[10]||(e[10]=[g("离线",-1)])),_:1,__:[10]}))]),_:1}),s(c,{prop:"create_time",label:"绑定时间",width:"180","show-overflow-tooltip":""}),s(c,{prop:"name",label:"操作",width:"100",fixed:"right"},{default:a(({row:n})=>[s(D,{"show-arrow":!1,"popper-class":"!w-[130px] !min-w-[130px] !p-[6px] !rounded-xl"},{reference:a(()=>[s(i,{link:""},{default:a(()=>[s(r,{name:"el-icon-MoreFilled"})]),_:1})]),default:a(()=>[o("div",Se,[o("div",{class:"px-2 py-1 hover:bg-primary-light-9 rounded-lg cursor-pointer flex items-center gap-2",onClick:k=>N(n)},[s(r,{name:"el-icon-User"}),e[11]||(e[11]=o("span",null,"账号详情",-1))],8,Ve),o("div",{class:"px-2 py-1 hover:bg-primary-light-9 rounded-lg cursor-pointer flex items-center gap-2",onClick:k=>T(n)},[o("span",Pe,[s(r,{name:"el-icon-Refresh"})]),e[12]||(e[12]=o("span",null,"更新数据",-1))],8,Oe),C("",!0),o("div",{class:"px-2 py-1 hover:bg-primary-light-9 rounded-lg cursor-pointer flex items-center gap-2",onClick:k=>J(n)},[s(r,{name:"el-icon-Delete"}),e[14]||(e[14]=o("span",null,"删除",-1))],8,Ie)])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[z,l(m).loading]])]),o("div",je,[s(Z,{modelValue:l(m),"onUpdate:modelValue":e[1]||(e[1]=n=>ne(m)?m.value=n:null),onChange:l(d)},null,8,["modelValue","onChange"])])])]),l(b)?(u(),f(ke,{key:0,ref_key:"rpaSettingRef",ref:S,onClose:e[2]||(e[2]=n=>b.value=!1)},null,512)):C("",!0),l(E)?(u(),f(Ce,{key:1,ref_key:"addDeviceRef",ref:V,"bind-loading":l(q),onClose:e[3]||(e[3]=n=>E.value=!1),onConfirm:H},null,8,["bind-loading"])):C("",!0),l(y)?(u(),f(Ee,{key:2,"progress-value":l(A),"progress-error":l(v),onClose:e[4]||(e[4]=n=>y.value=!1),onRetry:W},null,8,["progress-value","progress-error"])):C("",!0)],64)}}});export{go as default};

import{E as h,a as R}from"./el-steps.8887277b.js";import{d as q,bM as A,r as f,cq as F,k as N,I as T,s as a,m as e,q as s,Z as n,cW as V,cX as $,cY as L,v as M,cP as D,G as p,ax as G}from"./entry.d9d53b29.js";import{_ as I}from"./index.ece7f347.js";import{A as K,B as P}from"./person_wechat.8bcf26fc.js";const W={class:"mt-6"},X={class:"mt-2"},H=q({__name:"import-data",props:{title:{type:String,default:""},type:{type:String,default:"speech"}},emits:["success","close"],setup(d,{expose:m,emit:_}){const i=d,u=_,v=A(),l=f(""),c=f(),y=()=>{var o;(o=c.value)==null||o.open()},x=()=>{u("close")},g=()=>{const t=`${window.location.origin}/static/file/template/${i.type}.csv`;window.open(t,"_blank")},k=o=>{const{data:{uri:t}}=o;l.value=t},C=async()=>{var o;if(!l.value){p.msgError("请上传文件");return}try{i.type=="speech"?await K({file:l.value,robot_id:v.query.id}):i.type=="tags"&&await P({file:l.value}),u("success"),(o=c.value)==null||o.close(),p.msgSuccess("导入成功")}catch(t){p.msgError(t||"导入失败")}},{lockFn:w,isLock:b}=F(C);return m({open:y}),(o,t)=>{const r=h,E=R,S=G,B=I;return N(),T(D,{ref_key:"popupRef",ref:c,async:"",width:"656px",title:d.title,"confirm-loading":n(b),onConfirm:n(w),onClose:x},{default:a(()=>[e("div",null,[e("div",null,[s(E,{simple:"",active:-1},{default:a(()=>[s(r,{title:"上传文件",icon:n(V)},null,8,["icon"]),s(r,{title:"导入数据",icon:n($)},null,8,["icon"]),s(r,{title:"导入完成",icon:n(L)},null,8,["icon"])]),_:1})]),e("div",{class:"mt-6"},[e("div",{class:"font-bold"},[t[0]||(t[0]=e("span",null,"一、请按照数据模板的格式准备要导入的数据。",-1)),e("a",{class:"text-primary cursor-pointer",onClick:g}," 点击此处下载《话术导入模板》 ")]),t[1]||(t[1]=e("div",{class:"text-xs text-[#C4C6C8] indent-7 mt-1"},"导入文件请勿超过10MB（约100条数据）",-1))]),e("div",W,[t[3]||(t[3]=e("div",{class:"font-bold"},[e("span",null,"二、请选择需要导入的文件")],-1)),e("div",X,[s(B,{type:"file",accept:".csv","list-type":"text",limit:1,onSuccess:k},{default:a(()=>[s(S,{type:"primary"},{default:a(()=>t[2]||(t[2]=[M("上传文件",-1)])),_:1,__:[2]})]),_:1})])])])]),_:1},8,["title","confirm-loading","onConfirm"])}}});export{H as _};

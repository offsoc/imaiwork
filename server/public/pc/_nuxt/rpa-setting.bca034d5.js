import{d as B,r as _,cx as F,bb as f,k as i,I as S,s as A,m as t,aI as g,l as r,J as z,K as I,q as v,t as N,Z as p,cV as U,G as x,y as j,au as q,aH as G}from"./entry.ca4d3d61.js";import{j as H,k as J}from"./device.b7e58507.js";import{u as K}from"./useSocialPlatform.9d5915bd.js";import"./sph_icon.de3a3562.js";const O={class:"mt-6"},T={class:"flex flex-col gap-4 social-platform-list"},Z={class:"cursor-move move-icon"},$={class:"flex items-center gap-2 flex-1"},M=["src"],Q={class:"flex items-center gap-2 border border-[#EAEDF1] rounded-lg py-1 px-2"},oe=B({__name:"rpa-setting",emits:["close","success"],setup(W,{expose:k,emit:y}){const m=y,{socialPlatformList:b}=K(),n=_([]),u=_(),h=[{selector:".social-platform-list",options:{animation:150,handle:".move-icon",onEnd:({newIndex:s,oldIndex:e})=>{const o=n.value;[o[e].weight,o[s].weight]=[o[s].weight,o[e].weight];const a=n.value,l=a.splice(e,1)[0];a.splice(s,0,l),n.value=[],G(async()=>{n.value=a})}}}],w=s=>{var e;return(e=b.find(o=>o.name===s))==null?void 0:e.icon},C=async s=>{const{lists:e}=await J({device_code:s,page_size:99});n.value=e.map((o,a)=>({...o,icon:w(o.app_name)}))},D=async()=>{try{await H(n.value),x.msgSuccess("设置成功"),d(),m("success")}catch(s){x.msgError(s)}},{lockFn:E,isLock:L}=F(D),V=s=>{var e;(e=u.value)==null||e.open(),C(s)},d=()=>{m("close")};return k({open:V}),(s,e)=>{const o=j,a=q,l=f("number-input"),P=f("draggable");return i(),S(U,{ref_key:"popupRef",ref:u,title:"设置您的RPA执行顺序",width:"550px",async:"","confirm-loading":p(L),onClose:d,onConfirm:p(E)},{default:A(()=>[t("div",null,[e[2]||(e[2]=t("div",{class:"text-[#999999]"},"配置您智能设备的RPA执行顺序，程序将按照您所设定的顺序来严格执行",-1)),g((i(),r("div",O,[t("div",T,[(i(!0),r(z,null,I(p(n),c=>(i(),r("div",{key:c.type,class:"flex items-center gap-6"},[t("div",Z,[v(o,{name:"local-icon-menu",size:24})]),t("div",$,[t("img",{src:c.icon,alt:"icon",class:"w-6 h-6"},null,8,M),t("span",null,N(c.app_name),1)]),t("div",Q,[e[0]||(e[0]=t("span",null,"单轮执行时间：",-1)),g(v(a,{modelValue:c.exec_duration,"onUpdate:modelValue":R=>c.exec_duration=R,type:"number",class:"!w-[150px]"},null,8,["modelValue","onUpdate:modelValue"]),[[l,{min:0,decimal:0}]]),e[1]||(e[1]=t("span",null,"分钟",-1))])]))),128))])])),[[P,h]])])]),_:1},8,["confirm-loading","onConfirm"])}}});export{oe as default};

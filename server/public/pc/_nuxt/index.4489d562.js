import{d as J,a as Y,r as u,k as m,l as Z,m as t,t as A,Z as o,dp as z,dq as Q,q as s,s as i,aI as ee,I as _,v as g,dP as y,bM as te,L as S,J as se,em as a,ea as oe,G as w,aH as ne,y as le,ax as ie,cW as re,u as ae}from"./entry.ca4d3d61.js";import{E as ce,a as de}from"./index.9a4d38a6.js";import{E as pe}from"./index.ab577458.js";import{E as ue}from"./index.655612b0.js";import{_ as me}from"./index.vue.441733b3.js";/* empty css                        *//* empty css               *//* empty css                   *//* empty css                 *//* empty css                     */import{u as fe}from"./usePaging.15b2220c.js";import{u as ve}from"./useDeviceWs.345f0603.js";import{u as _e}from"./useAddDeviceAccount.835b9552.js";import{h as ge,l as xe}from"./device.b7e58507.js";import{_ as ye}from"./device-add.vue.c2a6ad97.js";import{_ as Ee}from"./device-progress.vue.ddec27c2.js";import"./index.8b07fb5c.js";import"./_baseIteratee.37ea2cef.js";import"./debounce.bdbfd9e6.js";import"./toNumber.33289b44.js";import"./index.d577d4c6.js";import"./raf.53a060df.js";import"./index.5f182cdf.js";import"./strings.5c02160d.js";import"./clamp.ba5ce84b.js";import"./useWebSocket.db6c7ab6.js";import"./service.9c966dd0.js";import"./usePolling.0c0a09f2.js";import"./index.62355f5a.js";/* empty css                    */const Ce=""+new URL("device.5646dcc8.svg",import.meta.url).href,he={class:"h-full p-4 flex flex-col"},ke={class:"rounded-[20px] flex items-center gap-3 px-[30px]",style:{background:`linear-gradient(152deg, rgba(0, 101, 251, 0.88) -42.44%, rgba(255, 255, 255, 0) 12.19%)
                    rgb(255, 255, 255)`}},be={class:"text-[#000000cc]"},De={class:"grow min-h-0 bg-white rounded-[20px] mt-4 flex flex-col"},Ae={class:"h-[88px] px-5 flex items-center justify-between"},we={class:"flex items-center gap-x-2"},Ne={class:"text-lg font-bold"},Te={class:"grow min-h-0"},Ie={class:"flex flex-col gap-2"},Re=["onClick"],$e=["onClick"],Oe={class:"flex items-center justify-center"},Pe=["onClick"],Se={class:"flex items-center justify-center"},Ve=["onClick"],Le={class:"flex items-center justify-center"},Ue=["onClick"],Fe={class:"flex items-center justify-center h-full"},je={class:"flex justify-end p-4"},yt=J({__name:"index",setup(Be){const V=Y(),L=ae(),{pager:f,getLists:c}=fe({fetchFun:ge}),E=u(!1),C=u(!1),N=u(""),{isConnected:U,onEvent:F,send:j}=ve(),{showAddDevice:b,addDeviceLoading:B,progressValue:T,refreshAccount:H,handleAddDeviceConfirm:He,handleRefreshAccount:I}=_e({send:j,onEvent:F,onSuccess:n=>{const{msg:e,type:r}=n;switch(r){case a.ADD_DEVICE:case a.DEVICE_ONLINE:c();break;case a.GET_USER_INFO:G.value="",C.value=!1,h.value=null,E.value=!1,c();break;case a.APP_EXEC:case a.OPEN_APP:case a.OPEN_PERSON_CENTER:case a.GET_ACCOUNT_INFO:case a.DATA_SEND:case a.GET_ACCOUNT_INFO_COMPLETE:N.value=e;break}},onError:n=>{C.value=!0,T.value=0;const{code:e,error:r,type:d}=n;e==oe.DEVICE_OFFLINE&&c()}}),G=u(""),R=u(),M=()=>{C.value=!1,I(h.value,R.value)},h=u(null),k=(n,e)=>{h.value=n.device_code,H.value=n.accounts,E.value=!0,R.value=e,I(h.value,e)},$=n=>{const{accounts:e,device_code:r,device_model:d,id:p}=n,v=e.find(D=>D.type==y.XHS);v?V.push({path:`/device/${p}`,query:{account:v.account,device_code:r,device_model:d}}):k(n,y.XHS)},O=u(),P=async()=>{var n;if(!U.value){w.msgError("连接失败，请检查网络连接");return}b.value=!0,await ne(),(n=O.value)==null||n.open()},X=n=>{L.$confirm({message:"确定删除该设备吗？",onConfirm:async()=>{try{await xe({id:n.id,device_code:n.device_code}),w.msgSuccess("删除设备成功"),c()}catch(e){w.msgError(e||"删除失败")}}})};return c(),(n,e)=>{const r=le,d=ie,p=ce,v=pe,D=ue,q=de,K=me,W=re;return m(),Z(se,null,[t("div",he,[t("div",ke,[e[5]||(e[5]=t("img",{src:Ce,class:"w-11 mt-7"},null,-1)),t("div",null,[t("div",be,A(o(z)[o(Q).DEVICE]),1),e[4]||(e[4]=t("div",{class:"text-[#00000080]"}," 键绑定跨平台设备，激活智能流程引擎，全链路接管部门任务，让团队拥有数字化中枢管家。 ",-1))])]),t("div",De,[t("div",Ae,[t("div",we,[t("span",Ne,"设备总数量："+A(o(f).count)+"台",1),s(d,{text:"",onClick:e[0]||(e[0]=l=>o(c)())},{default:i(()=>[s(r,{name:"el-icon-Refresh"}),e[6]||(e[6]=t("span",{class:"text-[#86909C]"},"刷新",-1))]),_:1})]),t("div",null,[s(d,{type:"primary",class:"!rounded-full !h-10",onClick:P},{default:i(()=>[s(r,{name:"local-icon-add_circle"}),e[7]||(e[7]=t("span",{class:"ml-2"},"添加设备",-1))]),_:1})])]),t("div",Te,[ee((m(),_(q,{data:o(f).lists,height:"100%",stripe:"","row-style":{height:"60px"},"header-cell-style":{height:"63px"}},{empty:i(()=>[t("div",Fe,[e[17]||(e[17]=g(" 还没有设备，",-1)),s(d,{type:"primary",link:"",onClick:P},{default:i(()=>[...e[16]||(e[16]=[g("点击添加设备",-1)])]),_:1})])]),default:i(()=>[s(p,{prop:"device_model",label:"设备型号","show-overflow-tooltip":""},{default:i(({row:l})=>[s(d,{type:"primary",link:"",onClick:x=>$(l)},{default:i(()=>[g(A(l.device_model),1)]),_:2},1032,["onClick"])]),_:1}),s(p,{prop:"sdk_version",label:"当前SDK版本","show-overflow-tooltip":""}),s(p,{prop:"device_code",label:"设备码","show-overflow-tooltip":""}),s(p,{label:"设备状态"},{default:i(({row:l})=>[l.status==1?(m(),_(v,{key:0,type:"success","disable-transitions":!0},{default:i(()=>[...e[8]||(e[8]=[g("在线",-1)])]),_:1})):l.status==2?(m(),_(v,{key:1,type:"primary","disable-transitions":!0},{default:i(()=>[...e[9]||(e[9]=[g("工作中",-1)])]),_:1})):(m(),_(v,{key:2,type:"danger","disable-transitions":!0},{default:i(()=>[...e[10]||(e[10]=[g("离线",-1)])]),_:1}))]),_:1}),s(p,{prop:"create_time",label:"绑定时间",width:"180","show-overflow-tooltip":""}),s(p,{prop:"name",label:"操作",width:"100",fixed:"right"},{default:i(({row:l})=>[s(D,{"show-arrow":!1,"popper-class":"!w-[130px] !min-w-[130px] !p-[6px] !rounded-xl"},{reference:i(()=>[s(d,{link:""},{default:i(()=>[s(r,{name:"el-icon-MoreFilled"})]),_:1})]),default:i(()=>[t("div",Ie,[t("div",{class:"px-2 py-1 hover:bg-primary-light-9 rounded-lg cursor-pointer flex items-center gap-2",onClick:x=>$(l)},[s(r,{name:"el-icon-User"}),e[11]||(e[11]=t("span",null,"账号详情",-1))],8,Re),t("div",{class:"px-2 py-1 hover:bg-primary-light-9 rounded-lg cursor-pointer flex items-center gap-2",onClick:x=>k(l,o(y).XHS)},[t("span",Oe,[s(r,{name:"el-icon-Refresh"})]),e[12]||(e[12]=t("span",null,"更新小红书",-1))],8,$e),t("div",{class:"px-2 py-1 hover:bg-primary-light-9 rounded-lg cursor-pointer flex items-center gap-2",onClick:x=>k(l,o(y).DOUYIN)},[t("span",Se,[s(r,{name:"el-icon-Refresh"})]),e[13]||(e[13]=t("span",null,"更新抖音",-1))],8,Pe),t("div",{class:"px-2 py-1 hover:bg-primary-light-9 rounded-lg cursor-pointer flex items-center gap-2",onClick:x=>k(l,o(y).KUAISHOU)},[t("span",Le,[s(r,{name:"el-icon-Refresh"})]),e[14]||(e[14]=t("span",null,"更新快手",-1))],8,Ve),t("div",{class:"px-2 py-1 hover:bg-primary-light-9 rounded-lg cursor-pointer flex items-center gap-2",onClick:x=>X(l)},[s(r,{name:"el-icon-Delete"}),e[15]||(e[15]=t("span",null,"删除",-1))],8,Ue)])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[W,o(f).loading]])]),t("div",je,[s(K,{modelValue:o(f),"onUpdate:modelValue":e[1]||(e[1]=l=>te(f)?f.value=l:null),onChange:o(c)},null,8,["modelValue","onChange"])])])]),o(b)?(m(),_(ye,{key:0,ref_key:"addDeviceRef",ref:O,"bind-loading":o(B),onClose:e[2]||(e[2]=l=>b.value=!1),onConfirm:o(c)},null,8,["bind-loading","onConfirm"])):S("",!0),o(E)?(m(),_(Ee,{key:1,"progress-value":o(T),"progress-error":o(C),step:o(N),onClose:e[3]||(e[3]=l=>E.value=!1),onRetry:M},null,8,["progress-value","progress-error","step"])):S("",!0)],64)}}});export{yt as default};

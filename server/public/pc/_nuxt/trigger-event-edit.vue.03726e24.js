import{E as T,a as U}from"./index.5f182cdf.js";import{d as B,r as i,aF as A,cx as D,G as k,bK as G,k as f,I as b,s as o,q as a,Z as l,v as r,L as V,l as L,J as N,ay as S,cV as q,av as O,cZ as Z,c_ as J,au as K}from"./entry.ca4d3d61.js";/* empty css                  *//* empty css               *//* empty css                     */import{aA as M,aB as z}from"./person_wechat.703f63bb.js";const ee=B({__name:"trigger-event-edit",emits:["close","success"],setup(H,{expose:v,emit:w}){const h=w,y=i("add"),g=i(),e=A({flow_id:"",stage_id:"",trigger_id:"",match_type:1,action_type:1,chat_match_mode:1,chat_match_object:1,chat_keywords:""}),E={chat_keywords:[{required:!0,message:"请输入匹配关键词",trigger:"blur"}]},n=i(),x=()=>{e.match_type==1&&(e.action_type=1),e.match_type==2&&(e.chat_match_mode=1,e.chat_match_object=1,e.chat_keywords="")},{lockFn:F,isLock:C}=D(async()=>{var t,s;await((t=g.value)==null?void 0:t.validate());let m={flow_id:e.flow_id,stage_id:e.stage_id,trigger_id:e.trigger_id,match_type:e.match_type};m={...m,action_type:e.match_type==1?e.action_type:"",chat_match_mode:e.match_type==2?e.chat_match_mode:"",chat_match_object:e.match_type==2?e.chat_match_object:"",chat_keywords:e.match_type==2?e.chat_keywords:""};try{e.trigger_id?await M(m):await z(m),(s=n.value)==null||s.close(),h("success"),k.msgSuccess("操作成功")}catch(p){k.msgError(p)}}),R=m=>{var t;y.value=m,(t=n.value)==null||t.open()},j=()=>{h("close")};return v({open:R,setFormData:m=>{G(m,e)}}),(m,t)=>{const s=T,p=U,c=O,_=Z,u=J,I=K;return f(),b(q,{ref_key:"popupRef",ref:n,title:l(y)==="add"?"新建匹配条件":"编辑匹配条件",width:"610px",async:"","confirm-loading":l(C),onClose:j,onConfirm:l(F)},{default:o(()=>[a(l(S),{ref_key:"formRef",ref:g,model:l(e),rules:E,"label-position":"top"},{default:o(()=>[a(c,{label:"匹配类型",prop:"match_type"},{default:o(()=>[a(p,{modelValue:l(e).match_type,"onUpdate:modelValue":t[0]||(t[0]=d=>l(e).match_type=d),placeholder:"请选择匹配类型",onChange:x},{default:o(()=>[a(s,{label:"动作匹配",value:1}),a(s,{label:"聊天内容匹配",value:2})]),_:1},8,["modelValue"])]),_:1}),l(e).match_type==1?(f(),b(c,{key:0,label:"动作类型",prop:"action_type"},{default:o(()=>[a(u,{modelValue:l(e).action_type,"onUpdate:modelValue":t[1]||(t[1]=d=>l(e).action_type=d)},{default:o(()=>[a(_,{value:1},{default:o(()=>[...t[5]||(t[5]=[r("刚成为好友",-1)])]),_:1}),a(_,{value:2,disabled:""},{default:o(()=>[...t[6]||(t[6]=[r("更多",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})):V("",!0),l(e).match_type==2?(f(),L(N,{key:1},[a(c,{label:"匹配模式",prop:"chat_match_mode"},{default:o(()=>[a(u,{modelValue:l(e).chat_match_mode,"onUpdate:modelValue":t[2]||(t[2]=d=>l(e).chat_match_mode=d)},{default:o(()=>[a(_,{value:1},{default:o(()=>[...t[7]||(t[7]=[r("模糊匹配",-1)])]),_:1}),a(_,{value:2},{default:o(()=>[...t[8]||(t[8]=[r("精确匹配",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(c,{label:"匹配对象",prop:"chat_match_object"},{default:o(()=>[a(u,{modelValue:l(e).chat_match_object,"onUpdate:modelValue":t[3]||(t[3]=d=>l(e).chat_match_object=d)},{default:o(()=>[a(_,{value:1},{default:o(()=>[...t[9]||(t[9]=[r("AI回复",-1)])]),_:1}),a(_,{value:2},{default:o(()=>[...t[10]||(t[10]=[r("客户回复",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(c,{label:"匹配关键词",prop:"chat_keywords"},{default:o(()=>[a(I,{modelValue:l(e).chat_keywords,"onUpdate:modelValue":t[4]||(t[4]=d=>l(e).chat_keywords=d),placeholder:"请输入匹配关键词",maxlength:"100"},null,8,["modelValue"])]),_:1})],64)):V("",!0)]),_:1},8,["model"])]),_:1},8,["title","confirm-loading","onConfirm"])}}});export{ee as _};

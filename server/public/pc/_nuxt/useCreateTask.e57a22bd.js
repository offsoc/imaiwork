import{u as k}from"./useDictOptions.795b1a54.js";import{at as h,c as v,r as c,A as R,aH as m,G as d}from"./entry.ca4d3d61.js";import{h as T}from"./device.b7e58507.js";import{z as _}from"./person_wechat.703f63bb.js";function q(t){const l=h(),u=v(()=>l.config.wechat_remarks||[]),o=c(0),f=e=>e.getTime()<new Date().getTime()-24*60*60*1e3,{optionsData:p}=k({deviceLists:{api:T,params:{page_size:1e3},transformData:e=>e.lists},wechatLists:{api:_,params:{page_size:1e3},transformData:e=>e.lists}}),g=(e,n)=>{o.value=n,t.task_frep=e},s=c(!1),i=R(),a=c(-1);return{getWechatRemarks:u,deviceOptions:p,currentFrequency:o,disabledDate:f,handleFrequency:g,isAddRemarkGen:s,remarkPopupRef:i,editRemarkIndex:a,handleAddRemark:async()=>{var e;s.value=!0,await m(),(e=i.value)==null||e.open()},handleAddRemarkConfirm:e=>{a.value==-1?t.remarks.push(e):t.remarks[a.value]=e,a.value=-1,s.value=!1},handleEditRemark:async(e,n)=>{var r;s.value=!0,a.value=n,await m(),(r=i.value)==null||r.open(e)},handleDeleteRemark:e=>{t.remarks.splice(e,1)},checkTimeConfig:()=>{if(!t.time_config[0]||!t.time_config[1])return d.msgWarning("请选择执行时间"),!1;if(t.time_config[0]&&t.time_config[1]){const e=new Date(`2000/01/01 ${t.time_config[0]}`);if(new Date(`2000/01/01 ${t.time_config[1]}`).getTime()-e.getTime()<15*60*1e3)return d.msgWarning("结束时间不能小于开始时间15分钟"),!1}return!0}}}export{q as useCreateTask};

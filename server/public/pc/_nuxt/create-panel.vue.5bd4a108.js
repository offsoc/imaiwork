import{d as q,bM as C,a as S,z as A,aG as N,c as _,aF as T,A as L,cq as D,D as G,k as p,l as f,m as t,q as d,s as x,Z as s,bK as K,v as y,J as j,t as U,L as $,dt as z,G as I,y as J,ax as M}from"./entry.d9d53b29.js";import{E as O}from"./index.050c9b6b.js";/* empty css                     */import{d as P,e as W}from"./knowledge_base.519704cc.js";import{KnTypeEnum as Z}from"./index.5bd136e1.js";import H from"./base-form.c59b6255.js";const Q={class:"p-4 h-full"},X={class:"h-full flex flex-col bg-white rounded-xl"},Y={class:"flex-shrink-0 flex items-center justify-between px-[14px] h-[88px] border-b border-[#0000000d]"},ee={class:"grow min-h-0 mt-4 flex flex-col w-[456px] mx-auto"},te={class:"flex-shrink min-h-0 mt-[23px]"},se={class:"px-2"},oe={class:"flex justify-center my-[30px]"},me=q({__name:"create-panel",emits:["success","back"],setup(ae,{emit:k}){const b=k,r=C(),v=S(),m=A(),{getTokenByScene:g}=m,{userTokens:h}=N(m),c=_(()=>{var o;return(o=g(z.KNOWLEDGE_CREATE))==null?void 0:o.score}),i=_(()=>r.query.type==Z.RAG),a=T({name:"",description:"",cover:"",type:r.query.type}),u=L(),w=async()=>{await u.value.validateForm();try{const{name:o,description:e,cover:l}=a,n=i.value?await P({name:o,description:e,image:l}):await W({name:o,intro:e,image:l,documents_model_id:2,documents_model_sub_id:2,embedding_model_id:3,embedding_model_sub_id:3});v.replace({path:`/knowledge_base/detail/${n.id}`,query:{kn_type:a.type,index_id:n.index_id,category_id:n.category_id,kn_name:n.name}})}catch(o){I.msgError(o||"操作失败")}},E=()=>{b("back")},{lockFn:R,isLock:B}=D(w);return G(()=>r.query,()=>{a.type=r.query.type}),(o,e)=>{const l=J,n=O,F=M;return p(),f("div",Q,[t("div",X,[t("div",Y,[t("div",{class:"flex items-center gap-2 cursor-pointer",onClick:E},[d(l,{name:"el-icon-ArrowLeft"}),e[1]||(e[1]=t("div",null,"返回上一步",-1))])]),t("div",ee,[e[3]||(e[3]=t("div",{class:"text-[20px] font-bold mt-6"},"创建新的知识库",-1)),t("div",te,[d(n,null,{default:x(()=>[t("div",se,[d(H,{ref_key:"baseFormRef",ref:u,modelValue:s(a),"onUpdate:modelValue":e[0]||(e[0]=V=>K(a)?a.value=V:null)},null,8,["modelValue"])])]),_:1})]),t("div",oe,[d(F,{type:"primary",class:"!h-[50px] !rounded-full w-[318px]",loading:s(B),disabled:s(h)<s(c)&&s(i),onClick:s(R)},{default:x(()=>[e[2]||(e[2]=y(" 创建知识库 ",-1)),s(c)&&s(i)?(p(),f(j,{key:0},[y("("+U(s(c))+"算力)",1)],64)):$("",!0)]),_:1,__:[2]},8,["loading","disabled","onClick"])])])])])}}});export{me as _};

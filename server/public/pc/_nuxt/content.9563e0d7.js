import{E as J}from"./index.8b07fb5c.js";import{d as Z,a as O,at as Q,r as g,c as U,aF as X,cz as ee,o as se,k as o,l as a,m as s,q as c,s as d,J as u,K as D,Y as L,Z as i,t as h,aI as R,I,a0 as te,v as N,L as w,G as E,cA as oe,aH as ne,bC as ae,y as ie,ax as re,cW as le,u as ce,_ as de}from"./entry.ca4d3d61.js";import{E as pe}from"./index.655612b0.js";import{E as _e}from"./el-card.d39efca2.js";import{E as me}from"./el-empty.355e6a02.js";/* empty css                     *//* empty css                   */import{u as ue}from"./usePaging.15b2220c.js";import{_ as fe}from"./index.vue.9508e575.js";import{E as ve}from"./index.b6d81f77.js";import"./index.5f182cdf.js";import"./index.ab577458.js";import"./strings.5c02160d.js";import"./_baseIteratee.37ea2cef.js";import"./toNumber.33289b44.js";import"./clamp.ba5ce84b.js";import"./index.d577d4c6.js";import"./el-slider.ebeb6bda.js";import"./el-input-number.5d96f707.js";import"./index.4fbaf6cb.js";import"./debounce.bdbfd9e6.js";/* empty css                  *//* empty css               */import"./useDictOptions.795b1a54.js";import"./knowledge_base.519704cc.js";import"./common.1373bb04.js";import"./throttle.da389ed1.js";const ge={class:"h-full"},he={class:""},xe={class:"flex items-center gap-2 pb-4"},ye=["onClick"],ke={class:"text-base"},be=["infinite-scroll-disabled"],Ce={class:"pb-6"},we={class:"grid grid-cols-2 gap-3 md:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-6"},Ee={class:"flex flex-col rounded-lg w-full flex-grow gap-4 group relative h-[130px]"},$e={class:"font-bold"},Se={class:"line-clamp-3 grow"},Be={class:"text-tx-primary text-sm"},De={class:"rotate-90 origin-center p-1"},Le={class:"flex flex-col gap-2"},Re=["onClick"],Ie=["onClick"],Ne={key:0,class:"text-center py-4 text-gray-500"},Ae={key:0,class:"mt-20"},Fe=Z({__name:"content",setup(He){var B;const A=O(),F=ce(),H=Q(),p=g(0),x=g(""),y=U(()=>[{name:"全部",id:""}].concat(H.menuList)),f=X({page_no:1,scene_id:(B=y.value[p.value])==null?void 0:B.id}),{pager:l,getLists:$,resetPage:M}=ue({size:25,fetchFun:ee,params:f,isScroll:!0}),P=n=>{var e;n!=p.value&&(p.value=n,f.page_no=1,f.scene_id=(e=y.value[p.value])==null?void 0:e.id,M())},S=(n,e)=>{n?x.value=e:x.value=""},Y=n=>{const{assistant_id:e,task_id:r,robot_id:C,robot_name:v}=n;e==0?A.push(`/?task_id=${r}&agent_id=${C}&agent_name=${v}`):E.msgWarning("相关助理已经暂停使用啦~")},T=async(n,e)=>{await F.$confirm({message:"确定删除此记录吗？",onConfirm:async()=>{try{await oe({task_id:n}),E.msgSuccess("删除成功"),l.lists.splice(e,1)}catch(r){E.msgError(r||"删除失败")}}})},k=g(!1),b=g(),V=async n=>{var e,r;k.value=!0,await ne(),(e=b.value)==null||e.open(),(r=b.value)==null||r.setFormData({type:"txt",fileName:`${ae().format("YYYYMMDDHHmmss")}`,content:n.message})},j=async()=>{f.page_no+=1,await $()};return se(async()=>{$()}),(n,e)=>{const r=J,C=ie,v=re,z=pe,q=_e,K=me,W=le,G=ve;return o(),a(u,null,[s("div",ge,[s("div",he,[c(r,null,{default:d(()=>[s("div",xe,[(o(!0),a(u,null,D(i(y),(t,_)=>(o(),a("div",{class:L(["px-2 py-1 rounded-md cursor-pointer whitespace-nowrap",[i(p)==_?"text-[#000000] font-bold bg-[rgba(120,96,254,.08)]":"bg-[rgba(139,95,95,0.04)]"]]),onClick:m=>P(_)},[s("span",ke,h(t.name),1)],10,ye))),256))])]),_:1})]),R((o(),a("div",{class:"mt-2","infinite-scroll-distance":10,"infinite-scroll-immediate":!1,"infinite-scroll-disabled":!i(l).isLoad},[R((o(),a("div",Ce,[i(l).lists.length?(o(),a(u,{key:0},[s("div",we,[(o(!0),a(u,null,D(i(l).lists,(t,_)=>(o(),I(q,{class:"cursor-pointer !rounded-xl relative hover:scale-[1.02] !p-0",shadow:"never",key:_,onClick:m=>Y(t)},{default:d(()=>[s("div",Ee,[s("div",$e,h(t.scene_name),1),s("div",Se,h(t.message||t.file_info.name),1),s("div",Be,h(t.create_time),1),s("div",{class:L(["ml-2 h-full invisible group-hover:visible absolute -right-2 -top-1",[i(x)==t.task_id?"!visible":""]]),onClick:e[0]||(e[0]=te(()=>{},["stop"]))},[c(z,{"show-arrow":!1,"popper-class":"!w-[120px] !min-w-[120px] !p-[6px] !rounded-xl",onShow:m=>S(!0,t.task_id),onHide:m=>S(!1,t.task_id)},{reference:d(()=>[s("div",De,[c(C,{name:"el-icon-MoreFilled"})])]),default:d(()=>[s("div",Le,[s("div",{class:"px-2 py-1 hover:bg-primary-light-9 rounded-lg cursor-pointer",onClick:m=>T(t.task_id,_)},[c(v,{link:"",icon:"el-icon-Delete",class:"w-full !justify-start"},{default:d(()=>[...e[2]||(e[2]=[N("删除",-1)])]),_:1})],8,Re),s("div",{class:"px-2 py-1 hover:bg-primary-light-9 rounded-lg cursor-pointer flex items-center gap-1.5",onClick:m=>V(t)},[c(v,{link:"",icon:"el-icon-DocumentAdd",class:"w-full !justify-start"},{default:d(()=>[...e[3]||(e[3]=[N("训练知识库",-1)])]),_:1})],8,Ie)])]),_:2},1032,["onShow","onHide"])],2)])]),_:2},1032,["onClick"]))),128))]),i(l).isLoad?w("",!0):(o(),a("div",Ne,"暂无更多了"))],64)):(o(),a(u,{key:1},[i(l).loading?w("",!0):(o(),a("div",Ae,[c(K)]))],64))])),[[W,i(l).loading]])],8,be)),[[G,j]])]),i(k)?(o(),I(fe,{key:0,ref_key:"knbBindRef",ref:b,onClose:e[1]||(e[1]=t=>k.value=!1)},null,512)):w("",!0)],64)}}});const ds=de(Fe,[["__scopeId","data-v-5885856d"]]);export{ds as default};

import{_ as P}from"./index.vue.f38ca415.js";import{d as T,z as q,aG as z,r as c,A as G,cq as N,k as l,l as a,m as o,q as n,s as d,J as j,K as A,t as M,v,Z as i,L as U,bK as K,Y as H,G as x,dn as J,ax as W,au as Y,_ as Z}from"./entry.d7219633.js";import{E as O}from"./index.f15af271.js";/* empty css                     */import{u as Q}from"./useCopy.8e0a0b1f.js";const X={class:"absolute w-[350px] h-full bg-app-bg-3 rounded-tr-[20px] rounded-br-[20px] shadow-[0_0_0_1px_#333333] left-full flex flex-col py-[16px] z-20"},ee={class:"grow min-h-0 mt-[50px]"},te={class:"px-[16px] content-box"},oe={class:"text-[#ffffff4d]"},se={class:"mt-4"},re={class:"mt-4 flex justify-end"},le={key:0,class:"chat-loader mt-2 text-white"},ae={class:"flex-shrink-0 px-[16px] mt-4"},ne={class:"relative rounded-md shadow-[0_0_0_1px_var(--app-border-color-2)] bg-app-bg-3"},ie={class:"flex justify-end"},pe={xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 30 30",fill:"currentColor"},ce=["opacity"],de=T({__name:"prompt-dialog",emits:["use","close"],setup(ue,{expose:b,emit:C}){const u=C,E=q(),{userTokens:F}=z(E),s=c(""),_=c([]),h=c(),p=c(!1),g=async t=>{if(F.value<=0){x.msgPowerInsufficient();return}if(!p.value){if(!t&&!s.value){x.msgWarning("请输入创意描述");return}try{p.value=!0;const{reply:e}=await J({message:t||s.value,prompt_id:h.value});s.value="",_.value.push(e),setTimeout(()=>{y()},500)}catch(e){x.msgError(e||"生成提示词失败")}finally{p.value=!1,setTimeout(()=>{y()},500)}}},V=t=>{h.value=t.promptId,L(t.prompt)},k=G(),y=()=>{var t;(t=k.value)==null||t.scrollTo(document.querySelector(".content-box").clientHeight)},{copy:B}=Q(),R=t=>{_.value.splice(t,1)},I=t=>{u("use",t),u("close")},{lockFn:L,isLock:_e}=N(g);return b({startGenerate:V}),(t,e)=>{const S=P,m=W,$=O,D=Y;return l(),a("div",X,[o("div",{class:"absolute w-6 h-6 top-4 right-4 cursor-pointer",onClick:e[0]||(e[0]=r=>u("close"))},[n(S)]),o("div",ee,[n($,{ref_key:"scrollRef",ref:k},{default:d(()=>[o("div",te,[e[6]||(e[6]=o("div",{class:"text-white"},"Deepseek- R1 灵感版",-1)),(l(!0),a(j,null,A(i(_),(r,f)=>(l(),a("div",{key:f,class:"mt-4"},[(l(),a("div",{class:"rounded-md border border-app-border-2 bg-app-bg-3 mt-[11px] relative p-3",key:f},[o("div",oe,M(r),1),o("div",se,[n(m,{class:"shadow-[0_0_0_1px_var(--app-border-color-2)] !h-[26px]",color:"#1F1F1F",onClick:w=>R(f)},{default:d(()=>e[3]||(e[3]=[v("删除",-1)])),_:2,__:[3]},1032,["onClick"]),n(m,{class:"shadow-[0_0_0_1px_var(--app-border-color-2)] !h-[26px]",color:"#1F1F1F",onClick:w=>i(B)(r)},{default:d(()=>e[4]||(e[4]=[v("复制",-1)])),_:2,__:[4]},1032,["onClick"])])])),o("div",re,[n(m,{type:"primary",class:"!h-[26px]",onClick:w=>I(r)},{default:d(()=>e[5]||(e[5]=[v("使用提示词",-1)])),_:2,__:[5]},1032,["onClick"])])]))),128)),i(p)?(l(),a("div",le)):U("",!0)])]),_:1},512)]),o("div",ae,[o("div",ne,[n(D,{modelValue:i(s),"onUpdate:modelValue":e[1]||(e[1]=r=>K(s)?s.value=r:null),placeholder:"请输入创意描述",type:"textarea",resize:"none",rows:4},null,8,["modelValue"]),o("div",ie,[o("div",{class:H(["cursor-pointer m-2",i(s)?"text-primary-light-9":"text-[#f4f4f4]"]),onClick:e[2]||(e[2]=r=>g())},[(l(),a("svg",pe,[e[7]||(e[7]=o("rect",{opacity:"0.05",width:"30",height:"30",rx:"15",fill:"currentColor"},null,-1)),o("path",{opacity:i(s)?"1":"0.3",d:"M10 14L15 9M15 9L20 14M15 9V21",stroke:"white","stroke-width":"1.4","stroke-linecap":"square","stroke-linejoin":"round"},null,8,ce)]))],2)])])])])}}});const ge=Z(de,[["__scopeId","data-v-f419a991"]]);export{ge as default};

import{d as q,bM as h,r as u,c as B,aF as D,cq as G,k as N,I as T,s,q as l,Z as t,v as f,m as U,cO as $,G as _,cS as K,cT as L,av as S,au as A,ay as M}from"./entry.d7219633.js";import{$ as O,a0 as Z}from"./person_wechat.8bcf26fc.js";import j from"./add-content.15e8798c.js";const z={class:"h-[600px] w-full overflow-hidden"},X=q({__name:"keywords-edit",emits:["close","success"],setup(H,{expose:y,emit:k}){const m=k,v=h(),d=u(),n=u("add"),w=B(()=>n.value==="add"?"新增关键词回复":"编辑关键词回复"),c=u(),o=D({id:"",match_type:0,keyword:"",reply:[]}),R={keyword:[{required:!0,message:"请输入匹配内容"}],reply:[{required:!0,message:"请输入回复内容"}]},V=a=>{var e;n.value=a?"edit":"add",(e=d.value)==null||e.open()},E=()=>{m("close")},b=async()=>{var a;await c.value.validate();try{o.id?await O(o):await Z({...o,robot_id:v.query.id}),_.msgSuccess(`${n.value==="add"?"新增":"编辑"}成功`),(a=d.value)==null||a.close(),m("success")}catch(e){_.msgError(e||`${n.value==="add"?"新增":"编辑"}失败`)}},{lockFn:C,isLock:F}=G(b);return y({open:V,setFormData:async a=>{for(const e in o)a[e]!=null&&a[e]!=null&&(o[e]=a[e]);o.reply=o.reply.map(e=>({...e,type:parseInt(e.type)}))}}),(a,e)=>{const i=K,x=L,p=S,g=A,I=M;return N(),T($,{ref_key:"popupRef",ref:d,async:"",width:"550px",title:t(w),"confirm-loading":t(F),onConfirm:t(C),onClose:E},{default:s(()=>[l(I,{ref_key:"formRef",ref:c,model:t(o),rules:R,"label-position":"top"},{default:s(()=>[l(p,{label:"匹配方式",prop:"match_type"},{default:s(()=>[l(x,{modelValue:t(o).match_type,"onUpdate:modelValue":e[0]||(e[0]=r=>t(o).match_type=r)},{default:s(()=>[l(i,{value:0},{default:s(()=>e[3]||(e[3]=[f("模糊匹配",-1)])),_:1,__:[3]}),l(i,{value:1},{default:s(()=>e[4]||(e[4]=[f("精确匹配",-1)])),_:1,__:[4]})]),_:1},8,["modelValue"])]),_:1}),l(p,{label:"匹配内容",prop:"keyword"},{default:s(()=>[l(g,{modelValue:t(o).keyword,"onUpdate:modelValue":e[1]||(e[1]=r=>t(o).keyword=r),placeholder:"回复内容支持多词组匹配，以分号相隔; 例如：你好;你好啊;你好呀"},null,8,["modelValue"])]),_:1}),l(p,{label:"回复内容",prop:"reply"},{default:s(()=>[U("div",z,[l(j,{ref:"addContentRef",modelValue:t(o).reply,"onUpdate:modelValue":e[2]||(e[2]=r=>t(o).reply=r),"show-preview":!1},null,8,["modelValue"])])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","confirm-loading","onConfirm"])}}});export{X as _};

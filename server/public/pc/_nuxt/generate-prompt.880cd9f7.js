import{d as q,z as F,aG as $,r as d,c as D,A as K,cq as M,I as J,s as r,Z as o,bK as x,k as c,q as a,m as t,v as w,a0 as O,l as u,J as W,K as Y,t as Z,L as k,G as E,y as Q,ax as X,au as ee,_ as te}from"./entry.d7219633.js";import{E as se}from"./el-segmented.e135a089.js";import{E as oe}from"./index.f15af271.js";import{E as le}from"./index.1f8dde63.js";/* empty css                     *//* empty css                   */import{a as ae}from"./digital_human.b276942f.js";import{CopywritingTypeEnum as ne}from"./chatEnum.1c450e0f.js";const re={class:"gap-1 flex items-center justify-center"},ie={class:"rounded-xl"},de={class:"flex items-center justify-between"},ce={class:"flex items-center gap-2"},fe={class:"w-5 h-5 flex items-center justify-center rounded bg-[#ffffff0d]"},pe={class:"mt-4 relative"},ue={class:"flex items-center justify-between mt-2"},me={class:"flex justify-center"},be={key:0,class:"mt-4"},_e={class:"!text-xs max-h-[30vh]"},ve={class:"flex flex-col gap-2 content-box"},xe={class:"text-white"},ge={class:"justify-end flex mt-2"},ye={key:1,class:"chat-loader mt-2 !text-white"},he=q({__name:"generate-prompt",props:{promptType:{default:ne.AI_DIGITAL_HUMAN_COPYWRITING},maxSize:{default:0},disabled:{type:Boolean,default:!1}},emits:["use-content"],setup(C,{emit:I}){const V=C,P=I,g=F(),{userTokens:S}=$(g),f=d(!1),n=d(""),m=d([]),b=d(!1),p=[{id:1,label:"短",value:150,disabled:!1},{id:2,label:"中",value:300,disabled:!1},{id:3,label:"长",value:1e3,disabled:!1}],i=d(p[0].value),B=D(()=>(p.forEach(s=>{s.value>V.maxSize?s.disabled=!0:s.disabled=!1}),p)),L=()=>{i.value=p[0].value},R=async()=>{if(S.value<=0){E.msgPowerInsufficient();return}try{b.value=!0;const{content:s}=await ae({keywords:n.value,number:i.value});m.value.push(s),n.value=""}catch(s){E.msgError(s||"生成失败，请重试")}finally{b.value=!1,g.getUser(),setTimeout(()=>{T()},500)}},y=K(),T=()=>{var s;(s=y.value)==null||s.scrollTo(document.querySelector(".content-box").clientHeight)},j=s=>{P("use-content",s)},{lockFn:z,isLock:h}=M(R);return(s,e)=>{const _=Q,v=X,G=ee,A=se,N=oe,U=le;return c(),J(U,{visible:o(f),"onUpdate:visible":e[3]||(e[3]=l=>x(f)?f.value=l:null),placement:"right",trigger:"click",width:"375","show-arrow":!1,disabled:s.disabled,"popper-options":{modifiers:[{name:"offset",options:{offset:[-90,40]}}]},onHide:L,"popper-class":"!rounded-xl !bg-app-bg-2 !shadow-none !border-none"},{reference:r(()=>[a(v,{type:"primary",size:"small",color:"rgba(255, 255, 255, 0.1)",class:"!px-3 !border !border-[var(--app-border-color-1)]",disabled:s.disabled},{default:r(()=>[t("div",re,[a(_,{name:"local-icon-fabang",color:"#ffffff"}),e[4]||(e[4]=t("span",{class:"text-white text-xs"},"AI生成文案",-1))])]),_:1},8,["disabled"])]),default:r(()=>[t("div",ie,[t("div",de,[t("div",ce,[t("span",fe,[a(_,{name:"local-icon-robot2"})]),e[5]||(e[5]=t("span",{class:"text-white text-[20px] font-bold"},"智能（AI）生成文案",-1))]),t("div",{class:"absolute right-4 top-4 w-6 h-6 rounded-full bg-[#ffffff0d] flex items-center justify-center cursor-pointer hover:bg-[#ffffff1a]",onClick:e[0]||(e[0]=l=>f.value=!1)},[a(_,{name:"el-icon-Close",color:"#8B9199"})])]),t("div",pe,[e[7]||(e[7]=t("div",{class:"mb-[10px]"},[t("span",{class:"text-[#ff3c26]"},"*"),t("span",{class:"text-white font-bold"},"输入文案")],-1)),a(G,{modelValue:o(n),"onUpdate:modelValue":e[1]||(e[1]=l=>x(n)?n.value=l:null),class:"content-input",type:"textarea","input-style":"color: #ffffff",rows:8,autosize:{minRows:8},disabled:o(h),placeholder:"请在此输入您需要生成文案的关键词或内容 ..."},null,8,["modelValue","disabled"]),t("div",ue,[a(A,{modelValue:o(i),"onUpdate:modelValue":e[2]||(e[2]=l=>x(i)?i.value=l:null),class:"w-full !bg-app-bg-1 !h-11 !rounded-full",props:{},options:o(B)},null,8,["modelValue","options"])]),t("div",me,[a(v,{type:"primary",size:"small",class:"!rounded-full !h-[50px] !w-[298px] mt-[18px]",disabled:o(h)||!o(n),onClick:O(o(z),["stop"])},{default:r(()=>e[6]||(e[6]=[w(" 立即生成 ",-1)])),_:1,__:[6]},8,["disabled","onClick"])])]),o(m).length?(c(),u("div",be,[a(N,{ref_key:"scrollRef",ref:y},{default:r(()=>[t("div",_e,[t("div",ve,[(c(!0),u(W,null,Y(o(m),(l,H)=>(c(),u("div",{key:H,class:"border border-[var(--app-border-color-1)] bg-app-bg-1 leading-[22px] rounded-lg p-4"},[t("div",xe,Z(l),1),t("div",ge,[a(v,{type:"primary",size:"small",onClick:we=>j(l)},{default:r(()=>e[8]||(e[8]=[w("使用文案",-1)])),_:2,__:[8]},1032,["onClick"])])]))),128))])])]),_:1},512)])):k("",!0),o(b)?(c(),u("div",ye)):k("",!0)])]),_:1},8,["visible","disabled"])}}});const Le=te(he,[["__scopeId","data-v-b1cb8392"]]);export{Le as default};

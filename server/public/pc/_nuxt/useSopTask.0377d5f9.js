import{J as p,K as m}from"./person_wechat.8bcf26fc.js";import d from"./useHandle.78641a31.js";import{r as n}from"./entry.2beb4577.js";import"./index.cf59f1a8.js";const{wechatAiInfo:_}=d();function b(){const o=n({}),t=n({});return{getSopGreetInfo:async()=>{const e=await p();o.value=e},createStopTask:async e=>{const{WeChatId:a,FriendId:s,NickName:g,Memo:l}=e,r=`${a}${s}`;if(t.value[r])return;const{open_ai:c}=_.value[a]||{},{is_enable:i,interval_time:u,greet_after_ai_enable:f}=o.value;c==1&&f==1&&i==1&&(t.value[r]=setTimeout(()=>{m({wechat_id:a,friend_id:s,friend_remark:l})},u*1e3*60))},deleteStopTask:e=>{const{friend_greet_is_reply:a}=o.value;t.value[e]&&a!=1&&clearTimeout(t.value[e])},deleteAllStopTask:()=>{Object.values(t.value).forEach(e=>{clearTimeout(e)})}}}export{b as default};

import{d as G,z as L,aG as N,r as p,A as U,cq as j,I as q,s as r,Z as o,bK as g,k as i,q as l,m as e,a0 as F,l as m,J as $,K as D,t as H,v as K,L as x,G as k,dq as M,y as J,ax as O,au as W}from"./entry.d9d53b29.js";import{E as Y}from"./index.050c9b6b.js";import{E as Z}from"./index.890e9d1e.js";/* empty css                     *//* empty css                   */import{CopywritingTypeEnum as Q}from"./chatEnum.1c450e0f.js";const X={class:"gap-1 flex items-center justify-center"},ee={class:"rounded-xl"},se={class:"flex items-center justify-between"},te={class:"flex items-center gap-2"},oe={class:"mt-4 relative"},le={class:"flex items-center justify-between mt-2"},ae={class:"flex items-center gap-2"},ne={key:0,class:"mt-4"},re={class:"!text-xs max-h-[500px]"},ie={class:"flex flex-col gap-2 content-box"},ce={class:"justify-end flex mt-2"},de={key:1,class:"chat-loader mt-2"},ye=G({__name:"generate-prompt",props:{promptType:{default:Q.AI_DIGITAL_HUMAN_COPYWRITING},maxSize:{default:0},disabled:{type:Boolean,default:!1}},emits:["use-content"],setup(h,{emit:w}){const C=h,E=w,v=L(),{userTokens:I}=N(v),c=p(!1),n=p(""),u=p([]),f=p(!1),T=async()=>{if(I.value<=0){k.msgPowerInsufficient();return}try{f.value=!0;const{reply:t}=await M({message:n.value,prompt_id:C.promptType});u.value.push(t),n.value=""}catch(t){k.msgError(t||"生成失败，请重试")}finally{f.value=!1,v.getUser(),setTimeout(()=>{z()},500)}},b=U(),z=()=>{var t;(t=b.value)==null||t.scrollTo(document.querySelector(".content-box").clientHeight)},B=t=>{E("use-content",t)},{lockFn:R,isLock:y}=j(T);return(t,s)=>{const d=J,_=O,S=W,V=Y,P=Z;return i(),q(P,{visible:o(c),"onUpdate:visible":s[2]||(s[2]=a=>g(c)?c.value=a:null),placement:"right",trigger:"click",width:"375","show-arrow":!1,disabled:t.disabled,"popper-options":{modifiers:[{name:"offset",options:{offset:[-90,40]}}]},"popper-class":"!rounded-xl",class:""},{reference:r(()=>[l(_,{type:"primary",size:"small",class:"!px-1",disabled:t.disabled},{default:r(()=>[e("div",X,[l(d,{name:"local-icon-fabang"}),s[3]||(s[3]=e("span",null,"AI生成文案",-1))])]),_:1},8,["disabled"])]),default:r(()=>[e("div",ee,[e("div",se,[e("div",te,[l(d,{name:"local-icon-fabang",color:"var(--color-primary)",size:22}),s[4]||(s[4]=e("span",{class:"text-primary font-bold"},"AI生成文案",-1))]),e("div",{class:"cursor-pointer leading-[0] hover:bg-token-light-8 rounded-full p-1",onClick:s[0]||(s[0]=a=>c.value=!1)},[l(d,{name:"el-icon-Close",size:22})])]),e("div",oe,[l(S,{modelValue:o(n),"onUpdate:modelValue":s[1]||(s[1]=a=>g(n)?n.value=a:null),type:"textarea",rows:8,autosize:{minRows:8},disabled:o(y),placeholder:"请在此输入您需要生成文案的关键词或内容"},null,8,["modelValue","disabled"]),e("div",le,[l(_,{type:"primary",size:"small",class:"!px-1",disabled:o(y)||!o(n),onClick:F(o(R),["stop"])},{default:r(()=>[e("div",ae,[l(d,{name:"local-icon-fabang",color:"#ffffff"}),s[5]||(s[5]=e("span",null," 开始生成 ",-1))])]),_:1},8,["disabled","onClick"])])]),o(u).length?(i(),m("div",ne,[l(V,{ref_key:"scrollRef",ref:b},{default:r(()=>[e("div",re,[e("div",ie,[(i(!0),m($,null,D(o(u),(a,A)=>(i(),m("div",{key:A,class:"border border-token-primary rounded-lg p-4"},[e("div",null,H(a),1),e("div",ce,[l(_,{size:"small",onClick:pe=>B(a)},{default:r(()=>s[6]||(s[6]=[K("使用文案",-1)])),_:2,__:[6]},1032,["onClick"])])]))),128))])])]),_:1},512)])):x("",!0),o(f)?(i(),m("div",de)):x("",!0)])]),_:1},8,["visible","disabled"])}}});export{ye as default};

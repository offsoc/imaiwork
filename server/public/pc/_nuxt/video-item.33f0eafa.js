import{d as R,at as L,c as $,r as I,A as N,k as o,l as i,m as s,a3 as F,t as m,L as r,Y as j,Z as n,q as l,s as g,J as d,v as b,I as H,G as c,dj as M,aH as U,y as q,_ as G}from"./entry.46557796.js";import{E as J}from"./index.816355b6.js";import{_ as Y}from"./index.vue.4fd7b3ea.js";import{_ as Z}from"./index.vue.7b7084b3.js";/* empty css                   */import{u as K}from"./useTemplate.afda57ca.js";const O={class:"video-item card-gradient group"},Q={class:"w-full px-3 mt-1 break-all"},W={class:"text-white line-clamp-1"},X={key:0,class:"text-[10px] text-white"},ee={class:"rotate-90 origin-center mr-1 cursor-pointer"},te={class:"flex flex-col gap-2 text-white"},se={class:"h-11 px-3 rounded-lg cursor-pointer flex items-center gap-3 hover:shadow-[0_0_0_1px_rgba(42,42,42,1)] hover:bg-app-bg-1"},oe={class:"flex w-5 h-5 rounded bg-[#ffffff0d] items-center justify-center"},ie={class:"text-[#ffffffcc]"},le={class:"w-12 h-12"},ne={key:0,class:"absolute bottom-[80px] left-0 w-full z-[51] text-[#ffffff80] text-center"},ae={key:1,class:"absolute z-[88] px-4 bg-[#0000005E] w-full h-full top-0 flex flex-col items-center justify-center"},re={class:"flex justify-center items-center flex-col gap-2"},de={class:"w-6 h-6 flex items-center justify-center rounded-full bg-error"},fe={class:"text-white text-center"},me={class:"w-6 h-6 flex items-center justify-center rounded-full bg-primary"},ce={class:"absolute bottom-0 left-0 w-full z-[51]"},ue={key:0,class:"flex justify-center"},pe={class:"py-1 w-full flex justify-center z-50"},ve={class:"text-base text-[#ffffff80]"},_e=R({__name:"video-item",props:{item:{default:()=>({id:0,name:"",pic:"",status:0,video_url:"",model_version:"",remark:"",create_time:"",automatic_clip:0,clip_status:0,clip_video_url:""})},showVersion:{type:Boolean,default:!0},isCreate:{type:Boolean,default:!1}},emits:["delete","retry"],setup(ye,{emit:z}){const k=z,V=L(),S=$(()=>{var e;return(e=V.getDigitalHumanConfig)==null?void 0:e.channel}),w=$(()=>S.value.reduce((e,t)=>(e[t.id]=t.name,e),{})),p=I(),h=(e,t)=>{e?p.value=t:p.value=void 0},A=e=>{k("retry",e)},C=e=>{c.loading("保存中"),M(e).then(()=>{c.closeLoading(),c.msgSuccess("下载成功")}).catch(()=>{c.closeLoading(),c.msgError("下载失败")})},B=async e=>{k("delete",e)},v=N(),_=I(!1),y=async e=>{_.value=!0,await U(),v.value.open(),v.value.setUrl(e)},{DefineTemplate:x,UseTemplate:f}=K();return(e,t)=>{const u=q,E=J,T=Y,D=Z;return o(),i(d,null,[s("div",O,[s("div",{class:"grow min-h-0 relative",style:F({background:`linear-gradient(180deg, rgba(0,0,0,0.00) 50%, #000 100%), url(${e.item.pic}) no-repeat `,backgroundSize:"cover"})},[s("div",Q,[s("div",W,m(e.item.name),1),e.item.automatic_clip==1?(o(),i("div",X,"AI剪辑")):r("",!0)]),s("div",{class:j(["absolute right-2 top-2 z-[1000] w-9 h-9 flex items-center justify-center bg-[#ffffff33] rounded-full invisible group-hover:visible",[n(p)==e.item.id?"!visible":""]]),style:{"backdrop-filter":"blur(5px)"}},[l(E,{"popper-class":"!w-[212px] !min-w-[212px] !p-2 !rounded-xl !border-[#333333] !bg-app-bg-2","show-arrow":!1,"popper-options":{modifiers:[{name:"offset",options:{offset:[100,20]}}]},onShow:t[6]||(t[6]=a=>h(!0,e.item.id)),onHide:t[7]||(t[7]=a=>h(!1,e.item.id))},{reference:g(()=>[s("div",ee,[l(u,{name:"el-icon-MoreFilled",color:"#ffffff"})])]),default:g(()=>[s("div",te,[l(n(x),null,{default:g(({label:a,icon:P})=>[s("div",se,[s("span",oe,[l(u,{name:P,color:"#ffffff"},null,8,["name"])]),s("span",ie,m(a),1)])]),_:1}),e.item.status==1&&e.isCreate?(o(),i("div",{key:0,onClick:t[0]||(t[0]=a=>y(e.item.video_url))},[l(n(f),{label:"查看数字人克隆视频",icon:"local-icon-play"})])):r("",!0),e.item.status==1?(o(),i("div",{key:1,onClick:t[1]||(t[1]=a=>C(e.item.video_url))},[l(n(f),{label:"下载视频",icon:"local-icon-download"})])):r("",!0),e.item.automatic_clip==1&&e.item.clip_status==3?(o(),i(d,{key:2},[s("div",{onClick:t[2]||(t[2]=a=>C(e.item.clip_video_url))},[l(n(f),{label:"下载剪辑视频",icon:"local-icon-download"})]),s("div",{onClick:t[3]||(t[3]=a=>y(e.item.clip_video_url))},[l(n(f),{label:"播放剪辑视频",icon:"local-icon-play"})])],64)):r("",!0),[2,5].includes(e.item.status)?(o(),i("div",{key:3,onClick:t[4]||(t[4]=a=>A(e.item.id))},[l(n(f),{label:"重试视频",icon:"el-icon-Refresh"})])):r("",!0),s("div",{onClick:t[5]||(t[5]=a=>B(e.item.id))},[l(n(f),{label:"删除视频",icon:"local-icon-delete"})])])]),_:1})],2),e.item.status==1?(o(),i(d,{key:0},[s("div",{class:"absolute top-[50%] left-[50%] translate-x-[-50%] translate-y-[-50%] z-[99]",onClick:t[8]||(t[8]=a=>y(e.item.clip_video_url||e.item.video_url))},[s("div",le,[l(T)])]),e.item.automatic_clip==1?(o(),i("div",ne,[e.item.clip_status==1||e.item.clip_status==2?(o(),i(d,{key:0},[b(" AI智能剪辑中... ")],64)):r("",!0),e.item.clip_status==3?(o(),i(d,{key:1},[b("AI智能剪辑完成")],64)):r("",!0),e.item.clip_status==4?(o(),i(d,{key:2},[b("AI智能剪辑失败")],64)):r("",!0)])):r("",!0)],64)):(o(),i("div",ae,[s("div",re,[l(n(x)),e.item.status==2?(o(),i(d,{key:0},[s("span",de,[l(u,{name:"local-icon-video2",color:"#fff"})]),s("span",fe,m(e.item.remark||"生成失败"),1),t[10]||(t[10]=s("span",{class:"text-[#ffffff80] text-center"}," （请检查训练的视频文件） ",-1))],64)):(o(),i(d,{key:1},[s("span",me,[l(u,{name:"local-icon-pic2",color:"#fff"})]),t[11]||(t[11]=s("span",{class:"text-white"},"正在生成中",-1)),t[12]||(t[12]=s("span",{class:"text-[#ffffff80] text-center"},"几分钟即可生成视频",-1))],64))])])),s("div",ce,[n(w)[e.item.model_version]?(o(),i("div",ue,[s("div",{class:j(["digital-human-tag !py-1.5 !px-5",`digital-human-tag-${e.item.model_version}`])},m(n(w)[e.item.model_version]),3)])):r("",!0),s("div",pe,[s("div",ve,m(e.item.create_time),1)])])],4)]),n(_)?(o(),H(D,{key:0,ref_key:"videoPlayerRef",ref:v,onClose:t[9]||(t[9]=a=>_.value=!1)},null,512)):r("",!0)],64)}}});const xe=G(_e,[["__scopeId","data-v-a7db72c3"]]);export{xe as default};

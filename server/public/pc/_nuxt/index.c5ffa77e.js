import{d as Q,as as X,x as ee,aF as oe,r as g,A as N,cq as te,o as se,k as _,l as le,m as o,q as s,s as n,Z as a,bK as K,Y as A,a0 as R,L as k,v as d,aI as ne,I as E,t as ae,J as ie,aH as h,G as m,y as re,ax as de,cP as me,u as ce,_ as pe}from"./entry.d7219633.js";import{E as ue,a as fe}from"./el-collapse.b07aa8b4.js";import{E as _e}from"./el-empty.77af023a.js";import{E as ve}from"./el-slider.0a90f692.js";import{E as we}from"./el-input-number.368c2208.js";import{E as xe,a as ye}from"./index.0a6eb9ae.js";import{_ as ge}from"./index.vue.5e2341cc.js";import{E as ke}from"./index.f15af271.js";/* empty css                        *//* empty css               *//* empty css                 *//* empty css                     */import{u as Ee}from"./usePaging.3c53b51c.js";import{t as he,v as Ce}from"./agent.a3fcedc5.js";import{_ as be}from"./keywords-edit.vue.f0c88c16.js";import{_ as Ve}from"./workflow-edit.vue.df451265.js";import{_ as Ne}from"./import-data.vue.ecd7e3a9.js";import"./index.3ba5baa2.js";import"./debounce.085e8a4a.js";import"./index.2311001e.js";import"./_baseIteratee.5c97421a.js";import"./index.ead96a32.js";import"./index.50778a9c.js";import"./index.4953ba77.js";import"./strings.03d3529c.js";import"./index.vue.f38ca415.js";import"./add-content.15e8798c.js";import"./el-tabs.f915a42a.js";import"./index.35988ce8.js";import"./el-alert.eaf47690.js";import"./index.1f8dde63.js";import"./index.vue.38c569b2.js";import"./index.55703cf7.js";import"./index.3adcf74a.js";import"./index.9efd0300.js";import"./cloneDeep.1f319c9b.js";/* empty css                  *//* empty css                    *//* empty css                  */import"./el-image.37ed17f2.js";import"./el-image-viewer.960ba8e6.js";import"./throttle.70466628.js";import"./position.cb246d7d.js";import"./index.vue.c82b4b26.js";/* empty css                   */import"./arrow_down.70a5466c.js";import"./dom.7f5b5a10.js";import"./index.cf59f1a8.js";import"./emoji.vue.e454bd86.js";import"./useHandle.2b5b26f8.js";import"./person_wechat.8bcf26fc.js";import"./mini-program-card.vue.dd66cb8d.js";import"./material-picker.vue.2a46b32f.js";import"./index.vue.d7039e6a.js";import"./sidebar.31e3d91b.js";import"./useMaterial.a92b4ad4.js";import"./container.ddfb785b.js";/* empty css                  */import"./upload.5cfd2344.js";import"./preview.vue.f85b38ac.js";import"./link-card.vue.5b27e20b.js";import"./file-card.vue.7b9fc004.js";import"./el-steps.662296a8.js";const Be={class:"h-full flex flex-col py-6"},Se={class:"grow min-h-0"},Ie={class:"px-[30px]"},$e={class:"mt-3"},De={class:"leading-5"},Fe={class:"flex items-center gap-x-2"};const Ke={class:"leading-5"},Ae={class:"flex items-center gap-x-2"},Re={class:"flex items-center justify-between gap-x-6 mb-2 px-4"},je={class:"flex items-center w-full gap-x-4"},ze={class:"flex-1"},Le={class:"border border-[var(--el-border-color-lighter)] rounded-lg"},Me={class:"h-[64px] flex justify-center items-center"},Pe={class:"flex items-center justify-center mt-4"},Ue=Q({__name:"index",props:X({modelValue:{},agentId:{default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(B){const v=B,S=ce(),r=ee(B,"modelValue"),j=oe({keyword:"",robot_id:v.agentId}),{pager:c,getLists:p}=Ee({fetchFun:he,params:j}),u=g([]),C=g(!1),b=N(),We=async l=>{var e,i;C.value=!0,await h(),(e=b.value)==null||e.open(),l&&((i=b.value)==null||i.setFormData(l))},z=l=>{v.modelValue.flow_status=1,v.modelValue.flow_config=l},Te=()=>{S.$confirm({message:"确定删除该工作流吗？",onConfirm:async()=>{try{r.value.flow_status=0,r.value.flow_config={workflow_id:"",bot_id:"",app_id:"",api_token:""},m.msgSuccess("删除成功")}catch{m.msgError("删除失败")}}})},w=g(!1),x=N(),L=async()=>{var l;w.value=!0,await h(),(l=x.value)==null||l.open()},I=async l=>{var e,i;w.value=!0,await h(),(e=x.value)==null||e.open(),(i=x.value)==null||i.setFormData(l)},M=async l=>{await S.$confirm({message:"确定删除该问答话术吗？",onConfirm:async()=>{try{await Ce({id:l}),m.msgSuccess("删除成功"),p()}catch{m.msgError("删除失败")}}})},V=g(!1),$=N(),P=async()=>{var l;V.value=!0,await h(),(l=$.value)==null||l.open()},U=async()=>{try{m.msgSuccess("保存成功")}catch(l){m.msgError(l||"提交失败")}},{lockFn:W,isLock:T}=te(U);return se(()=>{p()}),(l,e)=>{const i=re,D=ue,qe=_e,q=ve,G=we,f=de,y=xe,H=ye,J=ge,Y=fe,Z=ke,O=me;return _(),le(ie,null,[o("div",Be,[o("div",Se,[s(Z,null,{default:n(()=>[o("div",Ie,[e[24]||(e[24]=o("div",{class:"font-bold"},"技能",-1)),o("div",$e,[s(Y,{modelValue:a(u),"onUpdate:modelValue":e[8]||(e[8]=t=>K(u)?u.value=t:null)},{default:n(()=>[s(D,{name:"1",disabled:""},{title:n(()=>[o("div",De,[o("div",Fe,[o("span",{class:A(["transition-all duration-300",{"rotate-180":a(u).includes("1")}])},[s(i,{name:"el-icon-ArrowUp",color:"#00000080"})],2),e[12]||(e[12]=o("span",null,"插件",-1)),e[13]||(e[13]=o("span",{class:"text-xs text-white bg-[#FF8D1A] px-[6px] py-[2px] rounded inline-block"}," 功能开发中 ",-1))]),e[14]||(e[14]=o("div",{class:"text-[#00000080] mt-1"}," 插件能够让智能体调用外部 API，例如搜索信息、浏览网页、生成图片等，扩展智能体的能力和使用场景。 ",-1))])]),icon:n(()=>[o("div",{class:"w-5 h-5 bg-[#ECECEC] flex items-center justify-center rounded",onClick:e[0]||(e[0]=R(()=>{},["stop"]))},[s(i,{name:"el-icon-Plus",size:12})])]),_:1}),k("",!0),s(D,{name:"3"},{title:n(()=>[o("div",Ke,[o("div",Ae,[o("span",{class:A(["transition-all duration-300",{"rotate-180":a(u).includes("3")}])},[s(i,{name:"el-icon-ArrowUp",color:"#00000080"})],2),e[17]||(e[17]=o("span",null,"固定话术",-1))]),e[18]||(e[18]=o("div",{class:"text-[#00000080] mt-1"}," 固定话术是智能体在对话过程中，根据用户输入的特定关键词，自动回复的固定内容。 ",-1))])]),icon:n(()=>[o("div",{class:"w-5 h-5 bg-[#ECECEC] flex items-center justify-center rounded cursor-pointer",onClick:e[3]||(e[3]=R(t=>L(),["stop"]))},[s(i,{name:"el-icon-Plus",size:12})])]),default:n(()=>[o("div",Re,[o("div",je,[e[19]||(e[19]=o("div",null,"模糊匹配阈值",-1)),o("div",ze,[s(q,{modelValue:r.value.threshold,"onUpdate:modelValue":e[4]||(e[4]=t=>r.value.threshold=t),min:0,max:1,step:.01},null,8,["modelValue"])]),s(G,{modelValue:r.value.threshold,"onUpdate:modelValue":e[5]||(e[5]=t=>r.value.threshold=t),"controls-position":"right",min:0,max:1,step:.01},null,8,["modelValue"])]),s(f,{type:"primary",onClick:e[6]||(e[6]=t=>P())},{default:n(()=>e[20]||(e[20]=[d("批量导入",-1)])),_:1,__:[20]})]),o("div",Le,[ne((_(),E(H,{data:a(c).lists,stripe:"","header-row-style":{height:"62px"},"row-style":{height:"50px"},"max-height":"300px"},{default:n(()=>[s(y,{label:"匹配模式",width:"120"},{default:n(({row:t})=>[d(ae(t.match_type===0?"模糊匹配":"精确匹配"),1)]),_:1}),s(y,{label:"匹配内容",prop:"keyword","min-width":"200"}),s(y,{label:"回复内容","min-width":"300"},{default:n(({row:t})=>[s(f,{link:"",type:"primary",onClick:F=>I(t)},{default:n(()=>e[21]||(e[21]=[d(" 点击查看 ",-1)])),_:2,__:[21]},1032,["onClick"])]),_:1}),s(y,{label:"操作",width:"120",fixed:"right"},{default:n(({row:t})=>[s(f,{link:"",type:"primary",onClick:F=>I(t)},{default:n(()=>e[22]||(e[22]=[d(" 编辑 ",-1)])),_:2,__:[22]},1032,["onClick"]),s(f,{link:"",type:"danger",onClick:F=>M(t.id)},{default:n(()=>e[23]||(e[23]=[d(" 删除 ",-1)])),_:2,__:[23]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[O,a(c).loading]])]),o("div",Me,[s(J,{modelValue:a(c),"onUpdate:modelValue":e[7]||(e[7]=t=>K(c)?c.value=t:null),layout:"prev, pager, next",onChange:a(p)},null,8,["modelValue","onChange"])])]),_:1})]),_:1},8,["modelValue"])])])]),_:1})]),o("div",Pe,[s(f,{type:"primary",class:"w-[318px] !rounded-full !h-[50px]",loading:a(T),onClick:a(W)},{default:n(()=>e[25]||(e[25]=[d(" 保存 ",-1)])),_:1,__:[25]},8,["loading","onClick"])])]),a(w)?(_(),E(be,{key:0,ref_key:"keywordsEditRef",ref:x,onClose:e[9]||(e[9]=t=>w.value=!1),onSuccess:a(p)},null,8,["onSuccess"])):k("",!0),a(C)?(_(),E(Ve,{key:1,ref_key:"workflowEditRef",ref:b,onClose:e[10]||(e[10]=t=>C.value=!1),onSuccess:z},null,512)):k("",!0),a(V)?(_(),E(Ne,{key:2,ref_key:"importKeywordsRef",ref:$,title:"批量导入关键词","agent-id":v.agentId,onClose:e[11]||(e[11]=t=>V.value=!1),onSuccess:a(p)},null,8,["agent-id","onSuccess"])):k("",!0)],64)}}});const tt=pe(Ue,[["__scopeId","data-v-4c912762"]]);export{tt as default};

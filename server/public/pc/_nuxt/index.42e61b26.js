import{d as E,z as k,r as _,G as x,aF as D,bz as I,k as p,l as u,q as d,s as f,m as t,Z as r,L as b,_ as A}from"./entry.d7219633.js";import{j as F}from"./drawing.7058a163.js";import{drawTypeEnumMap as S,DrawTypeEnum as C,FashionImageTypeEnum as H}from"./index.fb0aa6a9.js";import M from"./useCreateForm.02078254.js";import N from"./useDrawingTask.8cf66f93.js";import T from"./result-content.20d28cd2.js";import{E as O}from"./index.f15af271.js";import"./cloneDeep.1f319c9b.js";import"./el-image.37ed17f2.js";import"./el-image-viewer.960ba8e6.js";import"./throttle.70466628.js";import"./debounce.085e8a4a.js";import"./position.cb246d7d.js";import"./index.vue.38c569b2.js";import"./useCopy.8e0a0b1f.js";import"./index.vue.c82b4b26.js";const j={class:"h-full relative w-full"},G={class:"px-[10px]"},L={class:"z-[22] absolute top-4 left-0 w-full flex px-4"},R={class:"flex flex-col items-center gap-5 mt-2"},Y={class:"create-image-item"},z=["src"],B={key:0,class:"create-image-item"},U=["src"],V={class:"create-image-item"},P=["src"],W=E({__name:"index",setup(q){let l;(s=>{s[s.FASHION_IMAGE=S[C.FASHION_IMAGE]]="FASHION_IMAGE"})(l||(l={}));const g=k(),{onEvent:h,setFormData:v}=M(),c=_([]),o=_(!1);h("update:formData",async s=>{if(o.value){x.msgWarning("请等待上一次任务完成");return}o.value=!0;const{type_name:n,params:e}=s,a=D({date:I().format("YYYY-MM-DD HH:mm"),tags:[n],images:[],formData:s});c.value.unshift(a);try{a.images=new Array(parseInt(e.img_count)).fill({url:"",loading:!0,progress:0,status:0,error:!1});const{result:m}=await F(e),{processDrawingTask:i}=N({type:l.FASHION_IMAGE,task_id:m.task_id,dataLists:a.images});await i({callback:w=>{a.images=w}}),g.getUser()}catch{a.images=a.images.map(i=>({...i,loading:!1,progress:0,status:4,error:!0}))}finally{o.value=!1}});const y=s=>{v(s)};return(s,n)=>(p(),u("div",j,[d(r(O),null,{default:f(()=>[t("div",G,[d(T,{"result-lists":r(c),"is-all-tasks-completed":r(o),onRetry:y},{"add-content":f(({item:e})=>[t("div",L,[t("div",R,[t("div",Y,[t("img",{src:e.formData.params.upper_clothes,class:"w-full h-full object-contain"},null,8,z)]),e.formData.type==r(H).UPPER_LOWER_CLOTHES?(p(),u("div",B,[t("img",{src:e.formData.params.lower_clothes,class:"w-full h-full object-contain"},null,8,U)])):b("",!0),t("div",V,[t("img",{src:e.formData.params.persons[0],class:"w-full h-full object-contain"},null,8,P)])])])]),_:1},8,["result-lists","is-all-tasks-completed"])])]),_:1})]))}});const ms=A(W,[["__scopeId","data-v-bf27020c"]]);export{ms as default};

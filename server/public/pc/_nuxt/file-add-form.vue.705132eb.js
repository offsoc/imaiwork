import{d as P,r as f,c as S,b6 as J,k as p,l as c,q as a,s as r,m as s,J as b,K as x,Y as B,Z as l,t as d,I as X,aI as _,L as I,bK as N,v as Y,ay as O,G as j,av as Z,au as K,y as G,b5 as q}from"./entry.d7219633.js";import{E as W,a as T}from"./index.50778a9c.js";import{E as $}from"./el-slider.0a90f692.js";/* empty css                  *//* empty css               *//* empty css                     */import"./el-input-number.368c2208.js";import{p as ee}from"./common.1373bb04.js";import te from"./upload-file.e2d0fbfb.js";const le=""+new URL("auto_chunk.d171d34e.png",import.meta.url).href,se="data:image/png;base64,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",oe={class:"flex gap-4 w-full"},ae=["onClick"],re={class:"flex items-center gap-x-4"},ne=["src"],ie={class:"text-lg font-bold"},de={class:"text-xs leading-5 mt-4"},ue={class:"font-bold"},pe={class:"absolute -top-[33px] left-[90px]"},me={class:"absolute top-0 right-0 cursor-pointer"},ce={class:"h-[200px] bg-primary-light-9 flex flex-col items-center justify-center"},ge={class:"w-[70%] mt-4 text-center text-xs text-[#524B6B] leading-5 break-all"},w=20,F=".pdf,.docx,.doc,.txt,.md,.pptx,.ppt,.xlsx,.xls,.png,.jpg,.jpeg,.bmp,.gif",Ue=P({__name:"file-add-form",props:{modelValue:{default:()=>({})}},emits:["update:modelValue"],setup(U,{expose:D,emit:V}){const H=U,E=V,A=f(),o=S({get(){return H.modelValue},set(n){E("update:modelValue",n)}}),y={documents:[{required:!0,message:"请输入上传文件",trigger:"blur"}],separator:[{required:!0,message:"请选择切割符号",trigger:"blur"}],chunk_size:[{required:!0,message:"请输入切割长度",trigger:"blur"}],overlap_size:[{required:!0,message:"请输入切割重叠度",trigger:"blur"}]},L=[{id:1,title:"智能切分",image:le,desc:"在通用文档上的最优chunk切分方法，经过评测可在多数文档上获得最佳的检索效果"},{id:2,title:"自定义切分",image:se,desc:"完全开放的chunk切分配置，按照实际文档情况自由配置，通过调试获得更好的检索效果"}],u=f([]),k=f(),C=n=>{u.value=n.fileList},z=n=>{o.value.documents=n};return D({validateForm:()=>new Promise((n,t)=>{var m;if(u.value.some(g=>g.status=="uploading")){j.msgError("文件上传中，请稍后再试");return}(m=A.value)==null||m.validate().then(n).catch(t)}),clearUploadFile:()=>{var n;(n=k.value)==null||n.clear()}}),(n,t)=>{const i=Z,m=W,g=T,v=K,Q=$,R=G,M=q,h=J("number-input");return p(),c("div",null,[a(l(O),{ref_key:"formRef",ref:A,model:l(o),rules:y,"label-position":"top"},{default:r(()=>[a(i,{label:"切割策略",prop:"name"},{default:r(()=>[s("div",oe,[(p(),c(b,null,x(L,e=>s("div",{class:B(["rounded-lg py-4 px-6 w-full relative border cursor-pointer",l(o).strategy==e.id?"border-primary-light-5 bg-primary-light-9":"border-[#e6e6e6]"]),key:e.id,onClick:Ae=>l(o).strategy=e.id},[s("div",{class:B(["absolute top-2 right-2 w-4 h-4 rounded-full flex items-center justify-center",l(o).strategy==e.id?"bg-primary":"bg-white shadow-[0_0_0px_1px_rgba(0,0,0,0.1)]"])},t[5]||(t[5]=[s("div",{class:"w-[6px] h-[6px] bg-white rounded-full"},null,-1)]),2),s("div",re,[s("img",{src:e.image,class:"w-6 h-6"},null,8,ne),s("div",ie,d(e.title),1)]),s("div",de,d(e.desc),1)],10,ae)),64))])]),_:1}),l(o).strategy==2?(p(),c(b,{key:0},[a(i,{label:"切割符号",prop:"separator"},{default:r(()=>[a(g,{modelValue:l(o).separator,"onUpdate:modelValue":t[0]||(t[0]=e=>l(o).separator=e),multiple:"",clearable:"",placeholder:"请选择切割符号"},{default:r(()=>[(p(!0),c(b,null,x(l(ee),e=>(p(),X(m,{key:e.value,label:`${e.label}：${e.value}`,value:e.value},{default:r(()=>[s("span",null,d(e.label)+"：",1),s("span",ue,d(e.value),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(i,{label:"切割长度",prop:"chunk_size"},{default:r(()=>[_(a(v,{modelValue:l(o).chunk_size,"onUpdate:modelValue":t[1]||(t[1]=e=>l(o).chunk_size=e),type:"number",placeholder:"请输入切割长度"},null,8,["modelValue"]),[[h,{decimalPlaces:0,min:1,max:1024}]])]),_:1}),a(i,{label:"切割重叠度",prop:"overlap_size"},{default:r(()=>[_(a(v,{modelValue:l(o).overlap_size,"onUpdate:modelValue":t[2]||(t[2]=e=>l(o).overlap_size=e),type:"number",placeholder:"请输入切割重叠度"},null,8,["modelValue"]),[[h,{decimalPlaces:0,min:1,max:2048}]])]),_:1}),a(i,{label:"相似度阈值",prop:"rerank_min_score"},{default:r(()=>[a(Q,{modelValue:l(o).rerank_min_score,"onUpdate:modelValue":t[3]||(t[3]=e=>l(o).rerank_min_score=e),min:0,max:1,step:.01,size:"small","show-input":""},null,8,["modelValue"]),s("div",pe,[a(M,{"popper-class":"w-[200px]"},{content:r(()=>t[6]||(t[6]=[s("div",null," 设定最低分数标准，只有达到或超过这个阈值的检索结果才会被考虑用于后续的排序和生成过程 ",-1)])),default:r(()=>[s("div",me,[a(R,{name:"el-icon-QuestionFilled",color:"#858585"})])]),_:1})])]),_:1})],64)):I("",!0),a(i,{label:"上传本地文件",prop:"documents"},{default:r(()=>[a(te,{ref_key:"fileUploadRef",ref:k,class:"w-full",modelValue:l(u),"onUpdate:modelValue":[t[4]||(t[4]=e=>N(u)?u.value=e:null),z],drag:"",multiple:"",type:"file",data:{indexid:l(o).index_id},limit:w,accept:F,onOnProgress:C},{default:r(()=>[s("div",ce,[a(R,{name:"local-icon-upload_cloud",size:48,color:"#67656E"}),t[7]||(t[7]=s("div",{class:"mt-2 text-[#67656E]"},[Y("拽上传文件或"),s("span",{class:"text-primary"},"点击上传")],-1)),s("div",ge," 支持"+d(F)+"格式单文档最大限制10MB，单图片最大限制10MB最多支持（"+d(l(u).length)+"/ "+d(w)+"）个 ",1)])]),_:1},8,["modelValue","data"])]),_:1})]),_:1},8,["model"])])}}});export{Ue as _};

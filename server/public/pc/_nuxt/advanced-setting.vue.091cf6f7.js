import{_ as $}from"./index.vue.3e248b2d.js";import{E as z}from"./el-switch.d7a8c51d.js";import{a as J,E as P}from"./index.79f7263c.js";import{d as K,as as L,aF as T,r as w,x as q,A as G,bw as g,bI as H,k as a,l as n,q as c,s as m,m as t,Z as i,J as u,bK as W,K as y,I as V,L as _,t as Z,v as Q,G as X,y as Y,ax as ee,aH as oe}from"./entry.d9d53b29.js";import{_ as te}from"./index.ece7f347.js";import{E as se}from"./index.890e9d1e.js";import{E as le}from"./index.050c9b6b.js";import{E as ae}from"./index.b40f47a5.js";/* empty css                  *//* empty css               *//* empty css                     *//* empty css                   *//* empty css                  */import{A as ce}from"./choose-audio.1c12a500.js";import{ClipStyleMap as ie}from"./indexEnum.66dc19ba.js";const ne={class:"h-full flex flex-col"},re={class:"mx-4 border-b border-app-border-1 pb-4"},pe={class:"flex justify-between items-center"},fe={class:"mt-3"};const de={key:0,class:"grow min-h-0 pb-[100px]"},me={class:"flex flex-col gap-y-2 px-4"},ue={class:"flex-1 flex items-center gap-x-2"},_e={class:"w-5 h-5 flex items-center justify-center rounded bg-[#ffffff0d]"},he={class:"text-white text-base line-clamp-1"},xe=["onClick"],ve={class:"absolute bottom-0 left-0 right-0 h-[80px] flex items-center px-4 shadow-[0_-1px_0_0_var(--app-border-color-1)] bg-app-bg-2"},$e=K({__name:"advanced-setting",props:{show:{type:Boolean},showModifiers:{}},emits:L(["close","success"],["update:show"]),setup(E,{expose:B,emit:N}){const x=N,s=T({automatic_clip:0,music:[],clip:[]}),p=w([]),f=q(E,"show"),h=w(!1),v=G(),be=async()=>{h.value=!0,await oe(),v.value.open()},we=o=>{const{uri:e,name:d}=o.data;s.music.push({url:e,name:d})},k=o=>{s.music.splice(o,1)},C=o=>{s.music.push(...o.map(e=>({url:e.url,name:e.name})))},S=o=>{s.clip=o.map(e=>({type:e}))},M=()=>{if(s.automatic_clip==1&&s.clip.length==0){X.msgWarning("请选择剪辑风格");return}b(),x("success",s)},A=()=>{f.value=!0},b=()=>{f.value=!1,x("close")};return B({open:A,setFormData:o=>{o.clip=g(o.clip)?o.clip:JSON.parse(o.clip),o.music=g(o.music)?o.music:JSON.parse(o.music),H(o,s),o.clip&&o.clip.length>0&&(p.value=o.clip.map(e=>e.type))}}),(o,e)=>{const d=$,D=z,I=P,j=J,U=Y,ge=te,ye=se,F=le,O=ee,R=ae;return a(),n(u,null,[c(R,{modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=l=>f.value=l),"body-class":"bg-app-bg-2 !p-0",size:"450px","with-header":!1},{default:m(()=>[t("div",ne,[t("div",{class:"absolute w-6 h-6 top-6 right-6",onClick:b},[c(d)]),e[12]||(e[12]=t("div",{class:"flex-shrink-0 h-[80px] flex items-center px-4 text-white text-lg font-bold"},"高级设置",-1)),t("div",re,[t("div",pe,[e[4]||(e[4]=t("div",{class:"text-xs text-white"},"AI智能剪辑",-1)),c(D,{modelValue:i(s).automatic_clip,"onUpdate:modelValue":e[0]||(e[0]=l=>i(s).automatic_clip=l),style:{"--el-switch-off-color":"#333333"},"active-value":1,"inactive-value":0},null,8,["modelValue"])]),i(s).automatic_clip==1?(a(),n(u,{key:0},[t("div",fe,[e[5]||(e[5]=t("div",{class:"text-xs text-white mb-3"},"剪辑风格选择：",-1)),t("div",null,[c(j,{modelValue:i(p),"onUpdate:modelValue":e[1]||(e[1]=l=>W(p)?p.value=l:null),class:"!h-11","popper-class":"dark-select-popper",multiple:"","collapse-tags":"","collapse-tags-tooltip":"",placeholder:"请选择剪辑风格","show-arrow":!1,onChange:S},{default:m(()=>[(a(!0),n(u,null,y(i(ie),(l,r)=>(a(),V(I,{key:r,label:l,value:r},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),_("",!0)],64)):_("",!0)]),i(s).automatic_clip?(a(),n("div",de,[c(F,null,{default:m(()=>[t("div",me,[(a(!0),n(u,null,y(i(s).music,(l,r)=>(a(),n("div",{key:r,class:"rounded-md h-11 px-3 border border-app-border-1 bg-app-bg-2 flex items-center justify-between gap-x-2 cursor-pointer hover:bg-[#ffffff0d]"},[t("div",ue,[t("div",_e,[c(U,{name:"local-icon-music",size:14,color:"#ffffff"})]),t("div",he,Z(l.name),1)]),e[10]||(e[10]=t("div",{class:"w-[1px] h-[12px] bg-[#ffffff1a]"},null,-1)),t("div",null,[t("div",{class:"w-4 h-4",onClick:Ve=>k(r)},[c(d,{"icon-size":10})],8,xe)])]))),128))])]),_:1})])):_("",!0),t("div",ve,[c(O,{type:"primary",class:"w-full !h-[50px] !rounded-full",onClick:M},{default:m(()=>e[11]||(e[11]=[Q("确定",-1)])),_:1,__:[11]})])])]),_:1},8,["modelValue"]),i(h)?(a(),V(ce,{key:0,ref_key:"audioMaterialRef",ref:v,multiple:"",onClose:e[3]||(e[3]=l=>h.value=!1),onConfirm:C},null,512)):_("",!0)],64)}}});export{$e as _};

import{d as F,z as U,aG as H,r as f,c as v,aF as $,D as j,k as A,l as q,m as t,I as y,aq as z,Z as l,v as x,t as u,q as g,s as G,L as Y,Y as Z,G as J,b5 as K,ax as Q,bI as W,aH as ee,dt as o}from"./entry.46557796.js";import{SidebarEnum as a,drawTypeEnumMap as R,DrawTypeEnum as V,ModelEnum as n,GenerateVideoTypeEnum as S}from"./index.fb0aa6a9.js";import{_ as te}from"./generation-image-form.vue.ad8da617.js";import{_ as se}from"./goods-image-form.vue.5dab384b.js";import{_ as oe}from"./fashion-image-form.vue.dc325d56.js";import{_ as ne}from"./poster-image-form.vue.26e6191a.js";import{_ as ae}from"./generation-video-form.vue.53136db0.js";import re from"./prompt-dialog.c82c61fb.js";import le from"./useCreateForm.91aa09b3.js";const ie={class:"grow min-h-0"},_e={class:"flex-shrink-0 px-6"},pe={class:"flex items-center justify-between"},Ee={class:"text-[#ffffff80]"},ce={class:"text-white"},me={class:"w-[246px]"},fe={class:"text-xs text-[#ffffff99] mt-2"},ue={class:"flex items-center justify-between"},de={class:"flex items-center justify-between"},Te={class:"flex items-center justify-between"},Ie={class:"mt-4 mb-4"},Re=F({__name:"create-panel",props:{type:{}},setup(k){const r=k,d=U(),{userTokens:w}=H(d),T=f(),I=f(0),c=f(""),M=v(()=>(p.img_count||1)*I.value),C=()=>{let s=0;c.value="";const e={[a.IMAGE_GENERATION]:{[R[V.TXT2IMAGE]]:{[n.HIDREAMAI]:o.TEXT_TO_IMAGE,[n.GENERAL]:o.VOLC_TEXT_TO_IMAGE,[n.SEEDREAM]:o.VOLC_TEXT_TO_IMAGE_V2},[R[V.IMAGE2IMAGE]]:{[n.HIDREAMAI]:o.IMAGE_TO_IMAGE,[n.SEEDREAM]:o.VOLC_IMAGE_TO_IMAGE_V2}},[a.POSTER_IMAGE]:{[n.HIDREAMAI]:o.TEXT_TO_IMAGE,[n.GENERAL]:o.VOLC_TEXT_TO_POSTERIMG,[n.SEEDREAM]:o.VOLC_TEXT_TO_POSTERIMG_V2},[a.VIDEO_GENERATION]:{[S.TXT2VIDEO]:{[n.GENERAL]:o.VOLC_TEXT_TO_VIDEO,[n.SEEDANCE]:o.DOUBAO_TEXT_TO_VIDEO},[S.IMG2VIDEO]:{[n.GENERAL]:o.VOLC_IMAGE_TO_VIDEO,[n.SEEDANCE]:o.DOUBAO_IMAGE_TO_VIDEO}}},i={[a.GOODS_IMAGE]:o.GOODS_IMAGE,[a.FASHION_IMAGE]:o.MODEL_IMAGE};if(i[r.type]){const{score:E,unit:_}=d.getTokenByScene(i[r.type]);s=E,c.value=_}else if(r.type==a.POSTER_IMAGE){const E=e[r.type],{score:_,unit:O}=d.getTokenByScene(E[p.model]);s=_,c.value=O}else if(e[r.type]){const _=e[r.type][p.type];if(_){const O=_[p.model];if(O){const{score:B,unit:X}=d.getTokenByScene(O);s=B,c.value=X}}}I.value=s},p=$({img_count:1,model:"",type:""}),N=v(()=>({[a.IMAGE_GENERATION]:te,[a.GOODS_IMAGE]:se,[a.FASHION_IMAGE]:oe,[a.POSTER_IMAGE]:ne,[a.VIDEO_GENERATION]:ae})[r.type]),D=f(),m=f(!1),P=s=>{W(s,p),C()},L=async s=>{var e;m.value=!0,await ee(),(e=D.value)==null||e.startGenerate(s)},b=s=>{var e;(e=T.value)==null||e.setPrompt(s)},h=async()=>{var s,e;if(w.value<M.value){J.msgPowerInsufficient();return}try{await((s=T.value)==null?void 0:s.validateForm());const i=(e=T.value)==null?void 0:e.getFormData();le().setFormData(i)}catch{}};return j(()=>r.type,s=>{m.value=!1}),(s,e)=>{const i=K,E=Q;return A(),q("div",{class:Z(["w-[350px] h-full rounded-[20px] shadow-[0_0_0_1px_#333333] bg-app-bg-2 flex flex-col relative",{"rounded-tr-none rounded-br-none":l(m)}])},[t("div",ie,[(A(),y(z(l(N)),{ref_key:"createPanelRef",ref:T,"onUpdate:formData":P,onGeneratePrompt:L},null,544))]),t("div",_e,[t("div",pe,[t("div",Ee,[e[1]||(e[1]=x(" 算力消耗：",-1)),t("span",ce,u(l(I))+u(l(c)),1)]),g(i,{placement:"top","popper-class":"!rounded-xl !p-3"},{content:G(()=>[t("div",me,[e[5]||(e[5]=t("div",{class:"text-white text-sm"},"算力消耗明细",-1)),t("div",fe,[t("div",ue,[e[2]||(e[2]=t("span",null,"参考生成",-1)),t("span",null,u(l(I)),1)]),t("div",de,[e[3]||(e[3]=t("span",null,"生成数量",-1)),t("span",null,"X"+u(l(p).img_count||1),1)]),t("div",Te,[e[4]||(e[4]=t("span",null,"总计：",-1)),t("span",null,u(l(M)),1)])])])]),default:G(()=>[e[6]||(e[6]=t("div",{class:"text-[#ffffff80] cursor-pointer"},"查看明细",-1))]),_:1,__:[6]})]),t("div",Ie,[g(E,{type:"primary",class:"w-full !h-[50px] !rounded-full",onClick:h},{default:G(()=>e[7]||(e[7]=[x("立即生成",-1)])),_:1,__:[7]})])]),l(m)?(A(),y(re,{key:0,ref_key:"promptDialogRef",ref:D,onUse:b,onClose:e[0]||(e[0]=_=>m.value=!1)},null,512)):Y("",!0)],2)}}});export{Re as _};

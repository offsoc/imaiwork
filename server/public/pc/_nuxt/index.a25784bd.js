import{E as D,a as N}from"./index.79f7263c.js";import{d as T,aF as U,k as d,l as w,m as b,q as e,s as l,Z as o,J as k,K as x,I as h,v as g,L as I,bK as R,G as v,av as S,ax as W,ay as z,u as O,_ as P}from"./entry.d9d53b29.js";import{E as q,a as K}from"./index.9a037d22.js";import{E as j}from"./el-empty.03c7f5cd.js";import{_ as G}from"./index.vue.930f6062.js";/* empty css                  *//* empty css               *//* empty css                     *//* empty css                        *//* empty css                 */import{u as J}from"./usePaging.64764a63.js";import{u as Z}from"./useDictOptions.794690b5.js";import{k as H,g as M,r as Q,l as X}from"./service.12abd78a.js";import{z as Y}from"./person_wechat.8bcf26fc.js";import"./index.050c9b6b.js";import"./index.8a3302e5.js";import"./strings.fbd015b4.js";import"./debounce.39f38609.js";import"./_baseIteratee.73cb21ab.js";import"./index.4538c991.js";const ee={class:"flex flex-col h-full bg-white rounded-[20px]"},te={class:"p-4"},ae={class:"grow min-h-0"},le={class:"flex justify-end p-4"},oe=T({__name:"index",setup(se){const y=O(),s=U({account:"",wechat_no:"",action:"",status:""}),{pager:c,getLists:m,resetParams:V}=J({fetchFun:H,params:s}),{optionsData:E}=Z({redbookLists:{api:M,params:{page_size:999},transformData:r=>r.lists},wechatLists:{api:Y,params:{page_size:999},transformData:r=>r.lists}}),C=r=>{y.$confirm({message:"确定重试该记录吗？",onConfirm:async()=>{try{await Q({id:r}),m(),v.msgSuccess("重试成功")}catch(t){v.msgError(t||"重试失败")}}})},A=r=>{y.$confirm({message:"确定删除该记录吗？",onConfirm:async()=>{try{await X({id:r}),m(),v.msgSuccess("删除成功")}catch(t){v.msgError(t||"删除失败")}}})};return m(),(r,t)=>{const i=D,_=N,u=S,f=W,L=z,n=q,F=j,B=K,$=G;return d(),w("div",ee,[b("div",te,[e(L,{model:o(s),inline:"",class:"w-full"},{default:l(()=>[e(u,{label:"来源账号"},{default:l(()=>[e(_,{modelValue:o(s).account,"onUpdate:modelValue":t[0]||(t[0]=a=>o(s).account=a),class:"!w-[200px]",placeholder:"请选择来源账号"},{default:l(()=>[(d(!0),w(k,null,x(o(E).redbookLists,(a,p)=>(d(),h(i,{key:p,label:a.nickname,value:a.account},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"执行微信"},{default:l(()=>[e(_,{modelValue:o(s).wechat_no,"onUpdate:modelValue":t[1]||(t[1]=a=>o(s).wechat_no=a),class:"!w-[200px]",placeholder:"请选择执行微信"},{default:l(()=>[(d(!0),w(k,null,x(o(E).wechatLists,(a,p)=>(d(),h(i,{key:p,label:a.wechat_nickname,value:a.wechat_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"执行动作"},{default:l(()=>[e(_,{modelValue:o(s).action,"onUpdate:modelValue":t[2]||(t[2]=a=>o(s).action=a),class:"!w-[200px]",placeholder:"请选择执行动作","empty-values":[null,void 0]},{default:l(()=>[e(i,{label:"自动添加",value:""})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"执行结果"},{default:l(()=>[e(_,{modelValue:o(s).status,"onUpdate:modelValue":t[3]||(t[3]=a=>o(s).status=a),class:"!w-[200px]",placeholder:"请选择执行结果","empty-values":[null,void 0]},{default:l(()=>[e(i,{label:"全部",value:""}),e(i,{label:"成功",value:"1"}),e(i,{label:"失败",value:"2"})]),_:1},8,["modelValue"])]),_:1}),e(u,null,{default:l(()=>[e(f,{type:"primary",onClick:t[4]||(t[4]=a=>o(m)())},{default:l(()=>t[6]||(t[6]=[g(" 搜索 ",-1)])),_:1,__:[6]}),e(f,{onClick:o(V)},{default:l(()=>t[7]||(t[7]=[g(" 重置 ",-1)])),_:1,__:[7]},8,["onClick"])]),_:1})]),_:1},8,["model"])]),b("div",ae,[e(B,{data:o(c).lists,height:"100%","row-style":{height:"60px"}},{empty:l(()=>[e(F,{description:"暂无数据"})]),default:l(()=>[e(n,{prop:"device_code",label:"设备码",width:"180"}),e(n,{prop:"account",label:"来源账号",width:"150"}),e(n,{prop:"user_account",label:"小红书用户信息","min-width":"180"}),e(n,{prop:"original_message",label:"私信内容","min-width":"180"}),e(n,{prop:"reg_wechat",label:"匹配微信号","min-width":"180"}),e(n,{prop:"wechat_name",label:"执行微信","min-width":"160"}),e(n,{label:"执行动作",width:"120"},{default:l(({row:a})=>t[8]||(t[8]=[b("div",null,"自动添加",-1)])),_:1}),e(n,{prop:"result",label:"加微结果","min-width":"180"}),e(n,{label:"操作",fixed:"right",width:"100"},{default:l(({row:a})=>[a.status==0?(d(),h(f,{key:0,type:"primary",link:"",onClick:p=>C(a.id)},{default:l(()=>t[9]||(t[9]=[g("重试",-1)])),_:2,__:[9]},1032,["onClick"])):I("",!0),e(f,{type:"danger",link:"",onClick:p=>A(a.id)},{default:l(()=>t[10]||(t[10]=[g("删除",-1)])),_:2,__:[10]},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),b("div",le,[e($,{modelValue:o(c),"onUpdate:modelValue":t[5]||(t[5]=a=>R(c)?c.value=a:null),onChange:o(m)},null,8,["modelValue","onChange"])])])}}});const Ce=P(oe,[["__scopeId","data-v-93a6359c"]]);export{Ce as default};

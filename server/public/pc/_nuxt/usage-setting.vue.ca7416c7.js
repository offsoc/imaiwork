import{_ as R}from"./index.vue.c578915d.js";import{d as U,A as y,aF as g,cx as N,G as v,bK as L,bb as S,k as A,I as G,s,m as i,q as t,aI as k,Z as o,v as r,au as K,av as T,ay as Z,ax as $,cV as j}from"./entry.ca4d3d61.js";import{q as z}from"./agent.e14901d7.js";const H={class:"flex"},P=U({__name:"usage-setting",props:{type:{},agentId:{}},emits:["close","success"],setup(V,{expose:h,emit:w}){const d=V,p=w,_=y(),l=g({id:"",robot_id:d.agentId,limit_today_chat:0,limit_total_chat:0,limit_exceed:"",type:d.type}),f=y(),E=g({limit_total_chat:[{required:!0,message:"请输入总对话数限制"}],limit_today_chat:[{required:!0,message:"请输入每日对话数限制"}],limit_exceed:[{required:!0,message:"请输入超出限制后的回复内容"}]}),{lockFn:F,isLock:I}=N(async()=>{await f.value.validate();try{await z(l),v.msgSuccess("保存成功"),m(),p("success")}catch(n){v.msgError(n)}}),C=()=>{_.value.open()},m=()=>{p("close")};return h({open:C,setFormData:n=>L(n,l)}),(n,e)=>{const q=R,u=K,c=T,B=Z,x=$,D=j,b=S("number-input");return A(),G(D,{ref_key:"popupRef",ref:_,async:"",width:"550px","confirm-button-text":"","cancel-button-text":"","header-class":"!p-0","show-close":!1},{default:s(()=>[i("div",null,[i("div",{class:"absolute w-6 h-6 right-4 top-4 cursor-pointer",onClick:m},[t(q)]),e[7]||(e[7]=i("div",{class:"text-2xl font-bold mb-5"},"用量设置",-1)),t(B,{model:o(l),rules:o(E),ref_key:"formRef",ref:f,"label-position":"top"},{default:s(()=>[t(c,{label:"限制每个用户总对话数",prop:"limit_total_chat"},{default:s(()=>[k(t(u,{class:"!w-64 mr-4 !h-11",modelValue:o(l).limit_total_chat,"onUpdate:modelValue":e[0]||(e[0]=a=>o(l).limit_total_chat=a),type:"number"},null,8,["modelValue"]),[[b,{min:0}]]),e[3]||(e[3]=r("条 ",-1))]),_:1}),t(c,{label:"限制每个用户每天总对话数",prop:"limit_today_chat"},{default:s(()=>[k(t(u,{class:"!w-64 mr-4 !h-11",modelValue:o(l).limit_today_chat,"onUpdate:modelValue":e[1]||(e[1]=a=>o(l).limit_today_chat=a),type:"number"},null,8,["modelValue"]),[[b,{min:0}]]),e[4]||(e[4]=r("条 ",-1))]),_:1}),t(c,{label:"超出将默认回复",prop:"limit_exceed"},{default:s(()=>[t(u,{modelValue:o(l).limit_exceed,"onUpdate:modelValue":e[2]||(e[2]=a=>o(l).limit_exceed=a),class:"!h-11 !w-68",placeholder:"超出将默认回复"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),i("div",H,[t(x,{class:"!rounded-full flex-1 !h-[50px]",onClick:m},{default:s(()=>[...e[5]||(e[5]=[r("取消",-1)])]),_:1}),t(x,{type:"primary",class:"!rounded-full flex-1 !h-[50px]",loading:o(I),onClick:o(F)},{default:s(()=>[...e[6]||(e[6]=[r(" 保存 ",-1)])]),_:1},8,["loading","onClick"])])])]),_:1},512)}}});export{P as _};

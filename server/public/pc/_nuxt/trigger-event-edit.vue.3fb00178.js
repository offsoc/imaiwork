import{E as T,a as U}from"./index.79f7263c.js";import{d as B,r as i,aF as q,cq as A,G as k,bI as D,k as f,I as b,s as o,q as a,Z as l,v as r,L as V,l as G,J as L,ay as N,cP as S,av as O,cT as J,cU as M,au as P}from"./entry.d9d53b29.js";/* empty css                  *//* empty css               *//* empty css                     */import{aA as Z,aB as z}from"./person_wechat.8bcf26fc.js";const ee=B({__name:"trigger-event-edit",emits:["close","success"],setup(H,{expose:v,emit:w}){const h=w,y=i("add"),g=i(),e=q({flow_id:"",stage_id:"",trigger_id:"",match_type:1,action_type:1,chat_match_mode:1,chat_match_object:1,chat_keywords:""}),E={chat_keywords:[{required:!0,message:"请输入匹配关键词",trigger:"blur"}]},n=i(),F=()=>{e.match_type==1&&(e.action_type=1),e.match_type==2&&(e.chat_match_mode=1,e.chat_match_object=1,e.chat_keywords="")},{lockFn:x,isLock:C}=A(async()=>{var t,s;await((t=g.value)==null?void 0:t.validate());let _={flow_id:e.flow_id,stage_id:e.stage_id,trigger_id:e.trigger_id,match_type:e.match_type};_={..._,action_type:e.match_type==1?e.action_type:"",chat_match_mode:e.match_type==2?e.chat_match_mode:"",chat_match_object:e.match_type==2?e.chat_match_object:"",chat_keywords:e.match_type==2?e.chat_keywords:""};try{e.trigger_id?await Z(_):await z(_),(s=n.value)==null||s.close(),h("success"),k.msgSuccess("操作成功")}catch(p){k.msgError(p)}}),R=_=>{var t;y.value=_,(t=n.value)==null||t.open()},j=()=>{h("close")};return v({open:R,setFormData:_=>{D(_,e)}}),(_,t)=>{const s=T,p=U,c=O,d=J,u=M,I=P;return f(),b(S,{ref_key:"popupRef",ref:n,title:l(y)==="add"?"新建匹配条件":"编辑匹配条件",width:"610px",async:"","confirm-loading":l(C),onClose:j,onConfirm:l(x)},{default:o(()=>[a(l(N),{ref_key:"formRef",ref:g,model:l(e),rules:E,"label-position":"top"},{default:o(()=>[a(c,{label:"匹配类型",prop:"match_type"},{default:o(()=>[a(p,{modelValue:l(e).match_type,"onUpdate:modelValue":t[0]||(t[0]=m=>l(e).match_type=m),placeholder:"请选择匹配类型",onChange:F},{default:o(()=>[a(s,{label:"动作匹配",value:1}),a(s,{label:"聊天内容匹配",value:2})]),_:1},8,["modelValue"])]),_:1}),l(e).match_type==1?(f(),b(c,{key:0,label:"动作类型",prop:"action_type"},{default:o(()=>[a(u,{modelValue:l(e).action_type,"onUpdate:modelValue":t[1]||(t[1]=m=>l(e).action_type=m)},{default:o(()=>[a(d,{value:1},{default:o(()=>t[5]||(t[5]=[r("刚成为好友",-1)])),_:1,__:[5]}),a(d,{value:2,disabled:""},{default:o(()=>t[6]||(t[6]=[r("更多",-1)])),_:1,__:[6]})]),_:1},8,["modelValue"])]),_:1})):V("",!0),l(e).match_type==2?(f(),G(L,{key:1},[a(c,{label:"匹配模式",prop:"chat_match_mode"},{default:o(()=>[a(u,{modelValue:l(e).chat_match_mode,"onUpdate:modelValue":t[2]||(t[2]=m=>l(e).chat_match_mode=m)},{default:o(()=>[a(d,{value:1},{default:o(()=>t[7]||(t[7]=[r("模糊匹配",-1)])),_:1,__:[7]}),a(d,{value:2},{default:o(()=>t[8]||(t[8]=[r("精确匹配",-1)])),_:1,__:[8]})]),_:1},8,["modelValue"])]),_:1}),a(c,{label:"匹配对象",prop:"chat_match_object"},{default:o(()=>[a(u,{modelValue:l(e).chat_match_object,"onUpdate:modelValue":t[3]||(t[3]=m=>l(e).chat_match_object=m)},{default:o(()=>[a(d,{value:1},{default:o(()=>t[9]||(t[9]=[r("AI回复",-1)])),_:1,__:[9]}),a(d,{value:2},{default:o(()=>t[10]||(t[10]=[r("客户回复",-1)])),_:1,__:[10]})]),_:1},8,["modelValue"])]),_:1}),a(c,{label:"匹配关键词",prop:"chat_keywords"},{default:o(()=>[a(I,{modelValue:l(e).chat_keywords,"onUpdate:modelValue":t[4]||(t[4]=m=>l(e).chat_keywords=m),placeholder:"请输入匹配关键词",maxlength:"100"},null,8,["modelValue"])]),_:1})],64)):V("",!0)]),_:1},8,["model"])]),_:1},8,["title","confirm-loading","onConfirm"])}}});export{ee as _};

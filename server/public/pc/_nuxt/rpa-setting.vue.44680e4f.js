import{d as B,r as _,cq as F,b6 as f,k as i,I as S,s as A,m as t,aI as g,l as r,J as q,K as z,q as v,t as I,Z as p,cP as N,G as x,y as U,au as G,aH as H}from"./entry.d9d53b29.js";import{u as J,b as K}from"./device.317521e4.js";import{u as O}from"./useSocialPlatform.2a31f125.js";const T={class:"mt-6"},Z={class:"flex flex-col gap-4 social-platform-list"},$={class:"cursor-move move-icon"},j={class:"flex items-center gap-2 flex-1"},M=["src"],Q={class:"flex items-center gap-2 border border-[#EAEDF1] rounded-lg py-1 px-2"},se=B({__name:"rpa-setting",emits:["close","success"],setup(W,{expose:y,emit:b}){const m=b,{socialPlatformList:h}=O(),n=_([]),u=_(),k=[{selector:".social-platform-list",options:{animation:150,handle:".move-icon",onEnd:({newIndex:s,oldIndex:e})=>{const o=n.value;[o[e].weight,o[s].weight]=[o[s].weight,o[e].weight];const a=n.value,l=a.splice(e,1)[0];a.splice(s,0,l),n.value=[],H(async()=>{n.value=a})}}}],w=s=>{var e;return(e=h.find(o=>o.name===s))==null?void 0:e.icon},C=async s=>{const{lists:e}=await K({device_code:s,page_size:99});n.value=e.map((o,a)=>({...o,icon:w(o.app_name)}))},D=async()=>{try{await J(n.value),x.msgSuccess("设置成功"),d(),m("success")}catch(s){x.msgError(s)}},{lockFn:E,isLock:L}=F(D),P=s=>{var e;(e=u.value)==null||e.open(),C(s)},d=()=>{m("close")};return y({open:P}),(s,e)=>{const o=U,a=G,l=f("number-input"),V=f("draggable");return i(),S(N,{ref_key:"popupRef",ref:u,title:"设置您的RPA执行顺序",width:"550px",async:"","confirm-loading":p(L),onClose:d,onConfirm:p(E)},{default:A(()=>[t("div",null,[e[2]||(e[2]=t("div",{class:"text-[#999999]"},"配置您智能设备的RPA执行顺序，程序将按照您所设定的顺序来严格执行",-1)),g((i(),r("div",T,[t("div",Z,[(i(!0),r(q,null,z(p(n),c=>(i(),r("div",{key:c.type,class:"flex items-center gap-6"},[t("div",$,[v(o,{name:"local-icon-menu",size:24})]),t("div",j,[t("img",{src:c.icon,alt:"icon",class:"w-6 h-6"},null,8,M),t("span",null,I(c.app_name),1)]),t("div",Q,[e[0]||(e[0]=t("span",null,"单轮执行时间：",-1)),g(v(a,{modelValue:c.exec_duration,"onUpdate:modelValue":R=>c.exec_duration=R,type:"number",class:"!w-[150px]"},null,8,["modelValue","onUpdate:modelValue"]),[[l,{min:0,decimal:0}]]),e[1]||(e[1]=t("span",null,"分钟",-1))])]))),128))])])),[[V,k]])])]),_:1},8,["confirm-loading","onConfirm"])}}});export{se as _};

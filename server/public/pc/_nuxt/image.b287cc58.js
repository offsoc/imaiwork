import{E as X}from"./el-image.37ed17f2.js";import{d as Y,r as f,c as Z,aF as Q,A as W,o as ee,k as i,l as r,m as o,J as g,K as N,Y as A,Z as n,t as D,aI as G,I as E,s as k,q as _,a0 as se,L as y,aH as oe,cr as te,u as ie,G as T,y as ne,cP as ae,_ as le}from"./entry.d7219633.js";import{E as re}from"./index.1f8dde63.js";import{E as ce}from"./el-card.9dfa0fe4.js";import{E as de}from"./el-empty.77af023a.js";import{E as pe}from"./el-image-viewer.960ba8e6.js";import{_ as _e}from"./index.vue.c82b4b26.js";/* empty css                   */import{u as ue}from"./usePaging.3c53b51c.js";import{t as fe,u as me,v as ve,w as ge}from"./drawing.7058a163.js";import{drawTypeEnumMap as a,DrawTypeEnum as l}from"./index.fb0aa6a9.js";import{E as Ee}from"./index.15764a88.js";import"./position.cb246d7d.js";import"./throttle.70466628.js";import"./debounce.085e8a4a.js";const ye={class:"h-full"},we={class:"flex items-center gap-2"},he=["onClick"],xe={class:"text-base"},Ie=["infinite-scroll-disabled"],ke={class:"pb-6"},Ve={class:"grid grid-cols-2 gap-4 md:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6"},be={class:"flex flex-col rounded-lg w-full flex-grow gap-2 group relative"},Ce={class:"flex items-center justify-center relative group"},Oe=["src"],Ne={class:"bg-[rgba(0,0,0,0.35)] absolute z-40 w-full h-full rounded-lg invisible group-hover:visible flex items-center justify-center gap-2"},Ae=["onClick"],De={class:"flex justify-between items-center p-2"},Ge={class:"text-tx-primary text-sm"},Te={class:"rotate-90 origin-center p-1"},Re={class:"flex flex-col gap-2"},Me=["onClick"],Se=["onClick"],$e={key:0,class:"text-center py-4 text-gray-500"},Pe={key:0,class:"mt-20"},Le=Y({__name:"image",setup(Fe){const c=f(a[l.GOODS_IMAGE]),V=f(""),R=Z(()=>[{name:"商品图",id:1,type:a[l.GOODS_IMAGE]},{name:"服饰图",id:2,type:a[l.FASHION_IMAGE]},{name:"文生图",id:3,type:a[l.TXT2IMAGE]},{name:"图生图",id:4,type:a[l.IMAGE2IMAGE]},{name:"海报图",id:5,type:a[l.POSTER_IMAGE]},{name:"视频",id:6,type:a[l.VIDEO_GENERATION]}]),u=Q({page_no:1,type:c.value}),M=e=>c.value===a[l.VIDEO_GENERATION]?fe(e):me(e),{pager:d,getLists:b,resetPage:S}=ue({size:25,fetchFun:M,params:u,isScroll:!0}),w=f(!1),h=f(!1),C=f([]),x=W(),$=async e=>{c.value===a[l.VIDEO_GENERATION]?(h.value=!0,await oe(),x.value.open(),x.value.setUrl(e.video_url)):(w.value=!0,C.value=[e.image])},O=(e,s)=>{V.value=e?s:""},P=e=>{const p=c.value===a[l.VIDEO_GENERATION]?e.video_url:e.image;te(p)},L=e=>{e!==c.value&&(c.value=e,u.page_no=1,e===a[l.VIDEO_GENERATION]?delete u.type:u.type=e,S())},F=async(e,s)=>{ie().$confirm({message:"确定删除此条记录吗？",onConfirm:async()=>{try{c.value===a[l.VIDEO_GENERATION]?await ve({id:e}):await ge({log_id:e}),T.msgSuccess("删除成功"),d.lists.splice(s,1)}catch(p){T.msgError(p||"删除失败")}}})},z=async()=>{u.page_no+=1,await b()};return ee(()=>{b()}),(e,s)=>{const p=X,m=ne,j=re,B=ce,H=de,q=pe,J=_e,K=ae,U=Ee;return i(),r("div",ye,[o("div",we,[(i(!0),r(g,null,N(n(R),t=>(i(),r("div",{key:t.id,class:A(["px-2 py-1 rounded-md cursor-pointer",[n(c)==t.type?"text-[#000000] font-bold bg-[rgba(120,96,254,.08)]":"bg-[rgba(139,95,95,0.04)]"]]),onClick:I=>L(t.type)},[o("span",xe,D(t.name),1)],10,he))),128))]),G((i(),r("div",{class:"mt-4","infinite-scroll-distance":10,"infinite-scroll-immediate":!1,"infinite-scroll-disabled":!n(d).isLoad},[G((i(),r("div",ke,[n(d).lists.length?(i(),r(g,{key:0},[o("div",Ve,[(i(!0),r(g,null,N(n(d).lists,(t,I)=>(i(),E(B,{class:"cursor-pointer !rounded-xl !bg-[#f7f9ff] relative hover:scale-[1.02] !p-0",shadow:"never",key:I},{default:k(()=>[o("div",be,[o("div",Ce,[n(c)==n(a)[n(l).VIDEO_GENERATION]?(i(),r("video",{key:0,src:t.video_url,class:"w-full h-44 object-cover"},null,8,Oe)):(i(),E(p,{key:1,src:t.image,lazy:"",class:"w-full h-44",fit:"cover"},null,8,["src"])),o("div",Ne,[o("div",{class:"cursor-pointer flex gap-2 items-center",onClick:v=>$(t)},[_(m,{name:"el-icon-View",color:"#ffffff",size:"20"}),s[3]||(s[3]=o("div",{class:"text-white"},"预览",-1))],8,Ae)])]),o("div",De,[o("div",Ge,D(t.create_time),1),o("div",{class:A(["invisible group-hover:visible",[n(V)==t.id?"!visible":""]]),onClick:s[0]||(s[0]=se(()=>{},["stop"]))},[_(j,{"show-arrow":!1,"popper-class":"!w-[120px] !min-w-[120px] !p-[6px] !rounded-xl",onShow:v=>O(!0,t.id),onHide:v=>O(!1,t.id)},{reference:k(()=>[o("div",Te,[_(m,{name:"el-icon-MoreFilled"})])]),default:k(()=>[o("div",Re,[o("div",{class:"px-2 py-1 hover:bg-primary-light-9 rounded-lg cursor-pointer flex items-center gap-2",onClick:v=>P(t)},[_(m,{name:"el-icon-Download"}),s[4]||(s[4]=o("span",null,"下载",-1))],8,Me),o("div",{class:"px-2 py-1 hover:bg-primary-light-9 rounded-lg cursor-pointer flex items-center gap-2",onClick:v=>F(t.id,I)},[_(m,{name:"el-icon-Delete"}),s[5]||(s[5]=o("span",null,"删除记录",-1))],8,Se)])]),_:2},1032,["onShow","onHide"])],2)])])]),_:2},1024))),128))]),n(d).isLoad?y("",!0):(i(),r("div",$e,"暂无更多了"))],64)):(i(),r(g,{key:1},[n(d).loading?y("",!0):(i(),r("div",Pe,[_(H)]))],64))])),[[K,n(d).loading]])],8,Ie)),[[U,z]]),n(w)?(i(),E(q,{key:0,"initial-index":0,"url-list":n(C),onClose:s[1]||(s[1]=t=>w.value=!1)},null,8,["url-list"])):y("",!0),n(h)?(i(),E(J,{key:1,ref_key:"previewVideoRef",ref:x,onClose:s[2]||(s[2]=t=>h.value=!1)},null,512)):y("",!0)])}}});const os=le(Le,[["__scopeId","data-v-cd7fa94f"]]);export{os as default};

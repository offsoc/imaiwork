import{db as Ae,Q as q,S as Y,U as te,d as D,ab as re,N as ie,W as Z,r as y,D as W,aH as j,az as se,b as pe,k as ge,l as ye,Y as _e,Z as O,a3 as Fe,aa as Ne,aS as ne,dc as Le,dd as Ve,A as Ie,c as x,de as fe,o as Me,bl as We,d3 as De,q as f,a1 as U,cq as He,cr as Ke,a6 as Ue,aY as le,aZ as A,ai as Ye,df as je,H as oe,b_ as qe,a_ as Te,ap as Ze,aV as Xe,aD as Ce,c9 as Je,dg as me,aF as Qe,dh as Ge,aI as ea,aJ as aa,L as ta,am as sa,bg as na}from"./entry.f4f46cb5.js";import{c as la,r as oa}from"./raf.787400b1.js";import{c as F}from"./strings.87cef2c7.js";import{c as ra}from"./clamp.6295a89e.js";import{u as ia}from"./index.6f68e864.js";const ca="horizontal",ua="vertical",da={[ca]:"deltaX",[ua]:"deltaY"},va=({atEndEdge:e,atStartEdge:r,layout:h},p)=>{let a,i=0;const _=d=>d<0&&r.value||d>0&&e.value;return{hasReachedEdge:_,onWheel:d=>{la(a);const v=d[da[h.value]];_(i)&&_(i+v)||(i+=v,Ae()||d.preventDefault(),a=oa(()=>{p(i),i=0}))}}},X=Symbol("tabsRootContextKey"),ba=q({tabs:{type:Y(Array),default:()=>te([])},tabRefs:{type:Y(Object),default:()=>te({})}}),Ee="ElTabBar",fa=D({name:Ee}),ma=D({...fa,props:ba,setup(e,{expose:r}){const h=e,p=re(X);p||ie(Ee,"<el-tabs><el-tab-bar /></el-tabs>");const a=Z("tabs"),i=y(),_=y(),m=()=>{let s=0,c=0;const E=["top","bottom"].includes(p.props.tabPosition)?"width":"height",o=E==="width"?"x":"y",B=o==="x"?"left":"top";return h.tabs.every(w=>{if(ne(w.paneName))return!1;const N=h.tabRefs[w.paneName];if(!N)return!1;if(!w.active)return!0;s=N[`offset${F(B)}`],c=N[`client${F(E)}`];const t=window.getComputedStyle(N);return E==="width"&&(c-=Number.parseFloat(t.paddingLeft)+Number.parseFloat(t.paddingRight),s+=Number.parseFloat(t.paddingLeft)),!1}),{[E]:`${c}px`,transform:`translate${F(o)}(${s}px)`}},d=()=>_.value=m(),v=[],S=()=>{v.forEach(s=>s.stop()),v.length=0,Object.values(h.tabRefs).forEach(s=>{v.push(se(s,d))})};W(()=>h.tabs,async()=>{await j(),d(),S()},{immediate:!0});const g=se(i,()=>d());return pe(()=>{v.forEach(s=>s.stop()),v.length=0,g.stop()}),r({ref:i,update:d}),(s,c)=>(ge(),ye("div",{ref_key:"barRef",ref:i,class:_e([O(a).e("active-bar"),O(a).is(O(p).props.tabPosition)]),style:Fe(_.value)},null,6))}});var ha=Ne(ma,[["__file","tab-bar.vue"]]);const pa=q({panes:{type:Y(Array),default:()=>te([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean,tabindex:{type:[String,Number],default:void 0}}),ga={tabClick:(e,r,h)=>h instanceof Event,tabRemove:(e,r)=>r instanceof Event},he="ElTabNav",ya=D({name:he,props:pa,emits:ga,setup(e,{expose:r,emit:h}){const p=re(X);p||ie(he,"<el-tabs><tab-nav /></el-tabs>");const a=Z("tabs"),i=Le(),_=Ve(),m=y(),d=y(),v=y(),S=y({}),g=y(),s=y(!1),c=y(0),E=y(!1),o=y(!0),B=Ie(),w=x(()=>["top","bottom"].includes(p.props.tabPosition)),N=x(()=>w.value?"width":"height"),t=x(()=>({transform:`translate${N.value==="width"?"X":"Y"}(-${c.value}px)`})),{width:T,height:P}=fe(m),{width:L,height:M}=fe(d,{width:0,height:0},{box:"border-box"}),H=x(()=>w.value?T.value:P.value),V=x(()=>w.value?L.value:M.value),{onWheel:I}=va({atStartEdge:x(()=>c.value<=0),atEndEdge:x(()=>V.value-c.value<=H.value),layout:x(()=>w.value?"horizontal":"vertical")},n=>{c.value=ra(c.value+n,0,V.value-H.value)}),J=()=>{if(!m.value)return;const n=m.value[`offset${F(N.value)}`],b=c.value;if(!b)return;const l=b>n?b-n:0;c.value=l},Pe=()=>{if(!m.value||!d.value)return;const n=d.value[`offset${F(N.value)}`],b=m.value[`offset${F(N.value)}`],l=c.value;if(n-l<=b)return;const u=n-l>b*2?l+b:n-b;c.value=u},ce=async()=>{const n=d.value;if(!s.value||!v.value||!m.value||!n)return;await j();const b=S.value[e.currentName];if(!b)return;const l=m.value,u=b.getBoundingClientRect(),C=l.getBoundingClientRect(),R=w.value?n.offsetWidth-C.width:n.offsetHeight-C.height,k=c.value;let $=k;w.value?(u.left<C.left&&($=k-(C.left-u.left)),u.right>C.right&&($=k+u.right-C.right)):(u.top<C.top&&($=k-(C.top-u.top)),u.bottom>C.bottom&&($=k+(u.bottom-C.bottom))),$=Math.max($,0),c.value=Math.min($,R)},ue=()=>{var n;if(!d.value||!m.value)return;e.stretch&&((n=g.value)==null||n.update());const b=d.value[`offset${F(N.value)}`],l=m.value[`offset${F(N.value)}`],u=c.value;l<b?(s.value=s.value||{},s.value.prev=u,s.value.next=u+l<b,b-u<l&&(c.value=b-l)):(s.value=!1,u>0&&(c.value=0))},Re=n=>{const b=le(n);let l=0;switch(b){case A.left:case A.up:l=-1;break;case A.right:case A.down:l=1;break;default:return}const u=Array.from(n.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let R=u.indexOf(n.target)+l;R<0?R=u.length-1:R>=u.length&&(R=0),u[R].focus({preventScroll:!0}),u[R].click(),de()},de=()=>{o.value&&(E.value=!0)},Q=()=>E.value=!1,xe=(n,b)=>{S.value[b]=n},$e=async()=>{await j();const n=S.value[e.currentName];n==null||n.focus({preventScroll:!0})};return W(i,n=>{n==="hidden"?o.value=!1:n==="visible"&&setTimeout(()=>o.value=!0,50)}),W(_,n=>{n?setTimeout(()=>o.value=!0,50):o.value=!1}),se(v,ue),Me(()=>setTimeout(()=>ce(),0)),We(()=>ue()),r({scrollToActiveTab:ce,removeFocus:Q,focusActiveTab:$e,tabListRef:d,tabBarRef:g,scheduleRender:()=>De(B)}),()=>{const n=s.value?[f("span",{class:[a.e("nav-prev"),a.is("disabled",!s.value.prev)],onClick:J},[f(U,null,{default:()=>[f(He,null,null)]})]),f("span",{class:[a.e("nav-next"),a.is("disabled",!s.value.next)],onClick:Pe},[f(U,null,{default:()=>[f(Ke,null,null)]})])]:null,b=e.panes.map((l,u)=>{var C,R,k,$,ve;const Oe=l.uid,G=l.props.disabled,K=(R=(C=l.props.name)!=null?C:l.index)!=null?R:`${u}`,ee=!G&&(l.isClosable||l.props.closable!==!1&&e.editable);l.index=`${u}`;const Be=ee?f(U,{class:"is-icon-close",onClick:z=>h("tabRemove",l,z)},{default:()=>[f(Ue,null,null)]}):null,ke=(($=(k=l.slots).label)==null?void 0:$.call(k))||l.props.label,ze=!G&&l.active?(ve=e.tabindex)!=null?ve:p.props.tabindex:-1;return f("div",{ref:z=>xe(z,K),class:[a.e("item"),a.is(p.props.tabPosition),a.is("active",l.active),a.is("disabled",G),a.is("closable",ee),a.is("focus",E.value)],id:`tab-${K}`,key:`tab-${Oe}`,"aria-controls":`pane-${K}`,role:"tab","aria-selected":l.active,tabindex:ze,onFocus:()=>de(),onBlur:()=>Q(),onClick:z=>{Q(),h("tabClick",l,K,z)},onKeydown:z=>{const be=le(z);ee&&(be===A.delete||be===A.backspace)&&h("tabRemove",l,z)}},[ke,Be])});return B.value,f("div",{ref:v,class:[a.e("nav-wrap"),a.is("scrollable",!!s.value),a.is(p.props.tabPosition)]},[n,f("div",{class:a.e("nav-scroll"),ref:m},[e.panes.length>0?f("div",{class:[a.e("nav"),a.is(p.props.tabPosition),a.is("stretch",e.stretch&&["top","bottom"].includes(p.props.tabPosition))],ref:d,style:t.value,role:"tablist",onKeydown:Re,onWheel:I},[e.type?null:f(ha,{ref:g,tabs:[...e.panes],tabRefs:S.value},null),b]):null])])}}}),_a=q({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:Y(Function),default:()=>!0},stretch:Boolean,tabindex:{type:[String,Number],default:0}}),ae=e=>Ze(e)||Xe(e),Na={[Te]:e=>ae(e),tabClick:(e,r)=>r instanceof Event,tabChange:e=>ae(e),edit:(e,r)=>["remove","add"].includes(r),tabRemove:e=>ae(e),tabAdd:()=>!0},Ta=D({name:"ElTabs",props:_a,emits:Na,setup(e,{emit:r,slots:h,expose:p}){var a;const i=Z("tabs"),_=x(()=>["left","right"].includes(e.tabPosition)),{children:m,addChild:d,removeChild:v,ChildrenSorter:S}=ia(Ce(),"ElTabPane"),g=y(),s=y((a=e.modelValue)!=null?a:"0"),c=async(t,T=!1)=>{var P,L,M,H;if(!(s.value===t||ne(t)))try{let V;if(e.beforeLeave){const I=e.beforeLeave(t,s.value);V=I instanceof Promise?await I:I}else V=!0;if(V!==!1){const I=(P=m.value.find(J=>J.paneName===s.value))==null?void 0:P.isFocusInsidePane();s.value=t,T&&(r(Te,t),r("tabChange",t)),(M=(L=g.value)==null?void 0:L.removeFocus)==null||M.call(L),I&&((H=g.value)==null||H.focusActiveTab())}}catch{}},E=(t,T,P)=>{t.props.disabled||(r("tabClick",t,P),c(T,!0))},o=(t,T)=>{t.props.disabled||ne(t.props.name)||(T.stopPropagation(),r("edit",t.props.name,"remove"),r("tabRemove",t.props.name))},B=()=>{r("edit",void 0,"add"),r("tabAdd")},w=t=>{const T=le(t);[A.enter,A.numpadEnter].includes(T)&&B()},N=t=>{const T=t.el.firstChild,P=["bottom","right"].includes(e.tabPosition)?t.children[0].el:t.children[1].el;T!==P&&T.before(P)};return W(()=>e.modelValue,t=>c(t)),W(s,async()=>{var t;await j(),(t=g.value)==null||t.scrollToActiveTab()}),Ye(X,{props:e,currentName:s,registerPane:d,unregisterPane:v,nav$:g}),p({currentName:s,get tabNavRef(){return je(g.value,["scheduleRender"])}}),()=>{const t=h["add-icon"],T=e.editable||e.addable?f("div",{class:[i.e("new-tab"),_.value&&i.e("new-tab-vertical")],tabindex:e.tabindex,onClick:B,onKeydown:w},[t?oe(h,"add-icon"):f(U,{class:i.is("icon-plus")},{default:()=>[f(qe,null,null)]})]):null,P=()=>f(ya,{ref:g,currentName:s.value,editable:e.editable,type:e.type,panes:m.value,stretch:e.stretch,onTabClick:E,onTabRemove:o},null),L=f("div",{class:[i.e("header"),_.value&&i.e("header-vertical"),i.is(e.tabPosition)]},[f(S,null,{default:P,$stable:!0}),T]),M=f("div",{class:i.e("content")},[oe(h,"default")]);return f("div",{class:[i.b(),i.m(e.tabPosition),{[i.m("card")]:e.type==="card",[i.m("border-card")]:e.type==="border-card"}],onVnodeMounted:N,onVnodeUpdated:N},[M,L])}}});var Ca=Ta;const Ea=q({label:{type:String,default:""},name:{type:[String,Number]},closable:{type:Boolean,default:void 0},disabled:Boolean,lazy:Boolean}),we="ElTabPane",wa=D({name:we}),Sa=D({...wa,props:Ea,setup(e){const r=e,h=Ce(),p=Je(),a=re(X);a||ie(we,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const i=Z("tab-pane"),_=y(),m=y(),d=x(()=>{var o;return(o=r.closable)!=null?o:a.props.closable}),v=me(()=>{var o;return a.currentName.value===((o=r.name)!=null?o:m.value)}),S=y(v.value),g=x(()=>{var o;return(o=r.name)!=null?o:m.value}),s=me(()=>!r.lazy||S.value||v.value),c=()=>{var o;return(o=_.value)==null?void 0:o.contains(document.activeElement)};W(v,o=>{o&&(S.value=!0)});const E=Qe({uid:h.uid,getVnode:()=>h.vnode,slots:p,props:r,paneName:g,active:v,index:m,isClosable:d,isFocusInsidePane:c});return a.registerPane(E),pe(()=>{a.unregisterPane(E)}),Ge(()=>{var o;p.label&&((o=a.nav$.value)==null||o.scheduleRender())}),(o,B)=>O(s)?ea((ge(),ye("div",{key:0,id:`pane-${O(g)}`,ref_key:"paneRef",ref:_,class:_e(O(i).b()),role:"tabpanel","aria-hidden":!O(v),"aria-labelledby":`tab-${O(g)}`},[oe(o.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[aa,O(v)]]):ta("v-if",!0)}});var Se=Ne(Sa,[["__file","tab-pane.vue"]]);const Ba=sa(Ca,{TabPane:Se}),ka=na(Se);export{ka as E,Ba as a};

import{E as Q}from"./index.304400de.js";import{d as W,a as Z,at as O,r as g,c as U,aF as X,ct as ee,o as se,k as o,l as a,m as s,q as c,s as d,J as u,K as D,Y as L,Z as i,t as h,aI as R,I,a0 as te,v as N,L as C,G as E,cu as oe,aH as ne,bz as ae,y as ie,ax as re,cQ as le,u as ce,_ as de}from"./entry.46557796.js";import{E as pe}from"./index.816355b6.js";import{E as _e}from"./el-card.f1e662fb.js";import{E as me}from"./el-empty.db5857ba.js";/* empty css                     *//* empty css                   */import{u as ue}from"./usePaging.3ef28349.js";import{_ as fe}from"./index.vue.f0b5f45c.js";import{E as ve}from"./index.c34f420e.js";import"./index.52e544f1.js";import"./index.c76cd001.js";import"./strings.1c189114.js";import"./debounce.22e3311f.js";import"./_baseIteratee.6084bee0.js";import"./index.1d76ef55.js";import"./el-slider.239593a3.js";import"./el-input-number.2848ce7e.js";import"./index.08e202f9.js";/* empty css                  *//* empty css               */import"./useDictOptions.7ecf8788.js";import"./knowledge_base.519704cc.js";import"./common.1373bb04.js";import"./position.bb07cf08.js";import"./throttle.f2fe0ca7.js";const ge={class:"h-full"},he={class:""},xe={class:"flex items-center gap-2 pb-4"},ye=["onClick"],ke={class:"text-base"},be=["infinite-scroll-disabled"],we={class:"pb-6"},Ce={class:"grid grid-cols-2 gap-3 md:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-6"},Ee={class:"flex flex-col rounded-lg w-full flex-grow gap-4 group relative h-[130px]"},$e={class:"font-bold"},Se={class:"line-clamp-3 grow"},Be={class:"text-tx-primary text-sm"},De={class:"rotate-90 origin-center p-1"},Le={class:"flex flex-col gap-2"},Re=["onClick"],Ie=["onClick"],Ne={key:0,class:"text-center py-4 text-gray-500"},Fe={key:0,class:"mt-20"},He=W({__name:"content",setup(Me){var B;const F=Z(),H=ce(),M=O(),p=g(0),x=g(""),y=U(()=>[{name:"全部",id:""}].concat(M.menuList)),f=X({page_no:1,scene_id:(B=y.value[p.value])==null?void 0:B.id}),{pager:l,getLists:$,resetPage:P}=ue({size:25,fetchFun:ee,params:f,isScroll:!0}),Y=n=>{var e;n!=p.value&&(p.value=n,f.page_no=1,f.scene_id=(e=y.value[p.value])==null?void 0:e.id,P())},S=(n,e)=>{n?x.value=e:x.value=""},A=n=>{const{assistant_id:e,task_id:r,robot_id:w,robot_name:v}=n;e==0?F.push(`/?task_id=${r}&agent_id=${w}&agent_name=${v}`):E.msgWarning("相关助理已经暂停使用啦~")},T=async(n,e)=>{await H.$confirm({message:"确定删除此记录吗？",onConfirm:async()=>{try{await oe({task_id:n}),E.msgSuccess("删除成功"),l.lists.splice(e,1)}catch(r){E.msgError(r||"删除失败")}}})},k=g(!1),b=g(),V=async n=>{var e,r;k.value=!0,await ne(),(e=b.value)==null||e.open(),(r=b.value)==null||r.setFormData({type:"txt",fileName:`${ae().format("YYYYMMDDHHmmss")}`,content:n.message})},j=async()=>{f.page_no+=1,await $()};return se(async()=>{$()}),(n,e)=>{const r=Q,w=ie,v=re,z=pe,q=_e,K=me,G=le,J=ve;return o(),a(u,null,[s("div",ge,[s("div",he,[c(r,null,{default:d(()=>[s("div",xe,[(o(!0),a(u,null,D(i(y),(t,_)=>(o(),a("div",{class:L(["px-2 py-1 rounded-md cursor-pointer whitespace-nowrap",[i(p)==_?"text-[#000000] font-bold bg-[rgba(120,96,254,.08)]":"bg-[rgba(139,95,95,0.04)]"]]),onClick:m=>Y(_)},[s("span",ke,h(t.name),1)],10,ye))),256))])]),_:1})]),R((o(),a("div",{class:"mt-2","infinite-scroll-distance":10,"infinite-scroll-immediate":!1,"infinite-scroll-disabled":!i(l).isLoad},[R((o(),a("div",we,[i(l).lists.length?(o(),a(u,{key:0},[s("div",Ce,[(o(!0),a(u,null,D(i(l).lists,(t,_)=>(o(),I(q,{class:"cursor-pointer !rounded-xl relative hover:scale-[1.02] !p-0",shadow:"never",key:_,onClick:m=>A(t)},{default:d(()=>[s("div",Ee,[s("div",$e,h(t.scene_name),1),s("div",Se,h(t.message||t.file_info.name),1),s("div",Be,h(t.create_time),1),s("div",{class:L(["ml-2 h-full invisible group-hover:visible absolute -right-2 -top-1",[i(x)==t.task_id?"!visible":""]]),onClick:e[0]||(e[0]=te(()=>{},["stop"]))},[c(z,{"show-arrow":!1,"popper-class":"!w-[120px] !min-w-[120px] !p-[6px] !rounded-xl",onShow:m=>S(!0,t.task_id),onHide:m=>S(!1,t.task_id)},{reference:d(()=>[s("div",De,[c(w,{name:"el-icon-MoreFilled"})])]),default:d(()=>[s("div",Le,[s("div",{class:"px-2 py-1 hover:bg-primary-light-9 rounded-lg cursor-pointer",onClick:m=>T(t.task_id,_)},[c(v,{link:"",icon:"el-icon-Delete",class:"w-full !justify-start"},{default:d(()=>e[2]||(e[2]=[N("删除",-1)])),_:1,__:[2]})],8,Re),s("div",{class:"px-2 py-1 hover:bg-primary-light-9 rounded-lg cursor-pointer flex items-center gap-1.5",onClick:m=>V(t)},[c(v,{link:"",icon:"el-icon-DocumentAdd",class:"w-full !justify-start"},{default:d(()=>e[3]||(e[3]=[N("训练知识库",-1)])),_:1,__:[3]})],8,Ie)])]),_:2},1032,["onShow","onHide"])],2)])]),_:2},1032,["onClick"]))),128))]),i(l).isLoad?C("",!0):(o(),a("div",Ne,"暂无更多了"))],64)):(o(),a(u,{key:1},[i(l).loading?C("",!0):(o(),a("div",Fe,[c(K)]))],64))])),[[G,i(l).loading]])],8,be)),[[J,j]])]),i(k)?(o(),I(fe,{key:0,ref_key:"knbBindRef",ref:b,onClose:e[1]||(e[1]=t=>k.value=!1)},null,512)):C("",!0)],64)}}});const cs=de(He,[["__scopeId","data-v-f32e7d7f"]]);export{cs as default};

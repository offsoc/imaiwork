import{bW as h1,d as m1,c as b1,A as d1,r as Ce,o as x1,aH as p1,bA as S1,k as w1,l as M1,m as Te,t as Ye,Z as qe,q as Ge,s as Je,G as $e,d$ as A1,y as T1,ba as B1,u as R1}from"./entry.f4f46cb5.js";import{u as E1}from"./useHandleApi.b94dfed5.js";var f1={exports:{}};(function(P0){(function(ue){var j0=typeof window=="object"&&!!window.document,a0=j0?window:Object;ue(a0,j0),P0.exports&&(P0.exports=a0.Recorder)})(function(ue,j0){var a0=function(){},ie=function(p){return typeof p=="number"},xe=function(p){return JSON.stringify(p)},Y=function(p){return new fe(p)},U=Y.LM="2025-01-11 09:28",N0="https://github.com/xiangyuecn/Recorder",d0="Recorder",S0="getUserMedia",T0="srcSampleRate",w0="sampleRate",k0="bitRate",W="catch",J=ue[d0];if(J&&J.LM==U){J.CLog(J.i18n.$T("K8zP::重复导入{1}",0,d0),3);return}Y.IsOpen=function(){var p=Y.Stream;if(p){var A=Y0(p),t=A[0];if(t){var D=t.readyState;return D=="live"||D==t.LIVE}}return!1},Y.BufferSize=4096,Y.Destroy=function(){B0(d0+" Destroy"),v0();for(var p in m0)m0[p]()};var m0={};Y.BindDestroy=function(p,A){m0[p]=A},Y.Support=function(){if(!j0)return!1;var p=navigator.mediaDevices||{};return p[S0]||(p=navigator,p[S0]||(p[S0]=p.webkitGetUserMedia||p.mozGetUserMedia||p.msGetUserMedia)),!(!p[S0]||(Y.Scope=p,!Y.GetContext()))},Y.GetContext=function(p){if(!j0)return null;var A=window.AudioContext;if(A||(A=window.webkitAudioContext),!A)return null;var t=Y.Ctx,D=0;return t||(t=Y.Ctx=new A,D=1,Y.NewCtxs=Y.NewCtxs||[],Y.BindDestroy("Ctx",function(){var P=Y.Ctx;P&&P.close&&(y0(P),Y.Ctx=0);var $=Y.NewCtxs;Y.NewCtxs=[];for(var Q=0;Q<$.length;Q++)y0($[Q])})),p&&t.close&&(D||(t._useC||y0(t),t=new A),t._useC=1,Y.NewCtxs.push(t)),t},Y.CloseNewCtx=function(p){if(p&&p.close){y0(p);for(var A=Y.NewCtxs||[],t=A.length,D=0;D<A.length;D++)if(A[D]==p){A.splice(D,1);break}B0(s0("mSxV::剩{1}个GetContext未close",0,t+"-1="+A.length),A.length?3:0)}};var y0=function(p){if(p&&p.close&&!p._isC&&(p._isC=1,p.state!="closed"))try{p.close()}catch(A){B0("ctx close err",1,A)}},q=Y.ResumeCtx=function(p,A,t,D){var P=0,$=0,Q=0,u0=0,f0="EventListener",c0="ResumeCtx ",i0=function(F0,x0){$&&$0(),P||(P=1,F0&&D(F0,u0),x0&&t(u0)),x0&&(!p._LsSC&&p["add"+f0]&&p["add"+f0]("statechange",I0),p._LsSC=1,Q=1)},$0=function(F0){if(!(F0&&$)){$=F0?1:0;for(var x0=["focus","mousedown","mouseup","touchstart","touchend"],G0=0;G0<x0.length;G0++)window[(F0?"add":"remove")+f0](x0[G0],I0,!0)}},I0=function(){var F0=p.state,x0=p0(F0);if(!P&&!A(x0?++u0:u0))return i0();x0?(Q&&B0(c0+"sc "+F0,3),$0(1),p.resume().then(function(){Q&&B0(c0+"sc "+p.state),i0(0,1)})[W](function(G0){B0(c0+"error",1,G0),p0(p.state)||i0(G0.message||"error")})):F0=="closed"?(Q&&!p._isC&&B0(c0+"sc "+F0,1),i0("ctx closed")):i0(0,1)};I0()},p0=Y.CtxSpEnd=function(p){return p=="suspended"||p=="interrupted"},H0=function(p){var A=p.state,t="ctx.state="+A;return p0(A)&&(t+=s0("nMIy::（注意：ctx不是running状态，rec.open和start至少要有一个在用户操作(触摸、点击等)时进行调用，否则将在rec.start时尝试进行ctx.resume，可能会产生兼容性问题(仅iOS)，请参阅文档中runningContext配置）")),t},V0="ConnectEnableWebM";Y[V0]=!0;var O0="ConnectEnableWorklet";Y[O0]=!1;var Q0=function(p){var A=p.BufferSize||Y.BufferSize,t=p.Stream,D=t._c,P=D[w0],$={},Q=Y0(t),u0=Q[0],f0=null,c0="";if(u0&&u0.getSettings){f0=u0.getSettings();var i0=f0[w0];i0&&i0!=P&&(c0=s0("eS8i::Stream的采样率{1}不等于{2}，将进行采样率转换（注意：音质不会变好甚至可能变差），主要在移动端未禁用回声消除时会产生此现象，浏览器有回声消除时可能只会返回16k采样率的音频数据，",0,i0,P))}t._ts=f0,B0(c0+"Stream TrackSet: "+xe(f0),c0?3:0);var $0=function(M){var e=t._m=D.createMediaStreamSource(t),i=D.destination,h="createMediaStreamDestination";D[h]&&(i=t._d=D[h]()),e.connect(M),M.connect(i)},I0,F0,x0,G0="",f=t._call,k=function(M,e){for(var i in f){if(e!=P){$.index=0,$=Y.SampleData([M],e,P,$,{_sum:1});var h=$.data,T=$._sum}else{$={};for(var c=M.length,h=new Int16Array(c),T=0,l=0;l<c;l++){var v=Math.max(-1,Math.min(1,M[l]));v=v<0?v*32768:v*32767,h[l]=v,T+=Math.abs(v)}}for(var s in f)f[s](h,T);return}},H="ScriptProcessor",S="audioWorklet",z=d0+" "+S,b="RecProc",C="MediaRecorder",K=C+".WebM.PCM",w=D.createScriptProcessor||D.createJavaScriptNode,F=s0("ZGlf::。由于{1}内部1秒375次回调，在移动端可能会有性能问题导致回调丢失录音变短，PC端无影响，暂不建议开启{1}。",0,S),d=function(){F0=t.isWorklet=!1,le(t),B0(s0("7TU0::Connect采用老的{1}，",0,H)+ve.get(Y[O0]?s0("JwCL::但已设置{1}尝试启用{2}",2):s0("VGjB::可设置{1}尝试启用{2}",2),[d0+"."+O0+"=true",S])+G0+F,3);var M=t._p=w.call(D,A,1,1);$0(M),M.onaudioprocess=function(e){var i=e.inputBuffer.getChannelData(0);k(i,P)}},X=function(){I0=t.isWebM=!1,g0(t),F0=t.isWorklet=!w||Y[O0];var M=window.AudioWorkletNode;if(!(F0&&D[S]&&M)){d();return}var e=function(){var l=function(s){return s.toString().replace(/^function|DEL_/g,"").replace(/\$RA/g,z)},v="class "+b+" extends AudioWorkletProcessor{";return v+="constructor "+l(function(s){DEL_super(s);var x=this,r=s.processorOptions.bufferSize;x.bufferSize=r,x.buffer=new Float32Array(r*2),x.pos=0,x.port.onmessage=function(I){I.data.kill&&(x.kill=!0,$C.log("$RA kill call"))},$C.log("$RA .ctor call",s)}),v+="process "+l(function(s,x,r){var I=this,_=I.bufferSize,o=I.buffer,u=I.pos;if(s=(s[0]||[])[0]||[],s.length){o.set(s,u),u+=s.length;var m=~~(u/_)*_;if(m){this.port.postMessage({val:o.slice(0,m)});var B=o.subarray(m,u);o=new Float32Array(_*2),o.set(B),u=B.length,I.buffer=o}I.pos=u}return!I.kill}),v+='}try{registerProcessor("'+b+'", '+b+')}catch(e){$C.error("'+z+' Reg Error",e)}',v=v.replace(/\$C\./g,"console."),"data:text/javascript;base64,"+btoa(unescape(encodeURIComponent(v)))},i=function(){return F0&&t._na},h=t._na=function(){x0!==""&&(clearTimeout(x0),x0=setTimeout(function(){x0=0,i()&&(B0(s0("MxX1::{1}未返回任何音频，恢复使用{2}",0,S,H),3),w&&d())},500))},T=function(){if(i()){var l=t._n=new M(D,b,{processorOptions:{bufferSize:A}});$0(l),l.port.onmessage=function(v){x0&&(clearTimeout(x0),x0=""),i()?k(v.data.val,P):F0||B0(s0("XUap::{1}多余回调",0,S),3)},B0(s0("yOta::Connect采用{1}，设置{2}可恢复老式{3}",0,S,d0+"."+O0+"=false",H)+G0+F,3)}},c=function(){if(i()){if(D[b]){T();return}var l=e();D[S].addModule(l).then(function(v){i()&&(D[b]=1,T(),x0&&h())})[W](function(v){B0(S+".addModule Error",1,v),i()&&d()})}};q(D,function(){return i()},c,c)},R=function(){var M=window[C],e="ondataavailable",i="audio/webm; codecs=pcm";I0=t.isWebM=Y[V0];var h=M&&e in M.prototype&&M.isTypeSupported(i);if(G0=h?"":s0("VwPd::（此浏览器不支持{1}）",0,K),!I0||!h){X();return}var T=function(){return I0&&t._ra};t._ra=function(){x0!==""&&(clearTimeout(x0),x0=setTimeout(function(){T()&&(B0(s0("vHnb::{1}未返回任何音频，降级使用{2}",0,C,S),3),X())},500))};var c=Object.assign({mimeType:i},Y.ConnectWebMOptions),l=t._r=new M(t,c),v=t._rd={};l[e]=function(s){var x=new FileReader;x.onloadend=function(){if(T()){var r=we(new Uint8Array(x.result),v);if(!r)return;if(r==-1){X();return}x0&&(clearTimeout(x0),x0=""),k(r,v.webmSR)}else I0||B0(s0("O9P7::{1}多余回调",0,C),3)},x.readAsArrayBuffer(s.data)};try{l.start(~~(A/48)),B0(s0("LMEm::Connect采用{1}，设置{2}可恢复使用{3}或老式{4}",0,K,d0+"."+V0+"=false",S,H))}catch(s){B0("mr start err",1,s),X()}};R()},U0=function(p){p._na&&p._na(),p._ra&&p._ra()},le=function(p){p._na=null,p._n&&(p._n.port.postMessage({kill:!0}),p._n.disconnect(),p._n=null)},g0=function(p){if(p._ra=null,p._r){try{p._r.stop()}catch(A){B0("mr stop err",1,A)}p._r=null}},v0=function(p){p=p||Y;var A=p==Y,t=p.Stream;t&&(t._m&&(t._m.disconnect(),t._m=null),!t._RC&&t._c&&Y.CloseNewCtx(t._c),t._RC=null,t._c=null,t._d&&(L(t._d.stream),t._d=null),t._p&&(t._p.disconnect(),t._p.onaudioprocess=t._p=null),le(t),g0(t),A&&L(t)),p.Stream=0},L=Y.StopS_=function(p){for(var A=Y0(p),t=0;t<A.length;t++){var D=A[t];D.stop&&D.stop()}p.stop&&p.stop()},Y0=function(p){var A=0,t=0,D=[];p.getAudioTracks&&(A=p.getAudioTracks(),t=p.getVideoTracks()),A||(A=p.audioTracks,t=p.videoTracks);for(var P=0,$=A?A.length:0;P<$;P++)D.push(A[P]);for(var P=0,$=t?t.length:0;P<$;P++)D.push(t[P]);return D};Y.SampleData=function(p,A,t,D,P){var $="SampleData";D||(D={});var Q=D.index||0,u0=D.offset||0,f0=D.raisePrev||0,c0=D.filter;if(c0&&c0.fn&&(c0.sr&&c0.sr!=A||c0.srn&&c0.srn!=t)&&(c0=null,B0(s0("d48C::{1}的filter采样率变了，重设滤波",0,$),3)),!c0)if(t<=A){var i0=t>A*3/4?0:t/2*3/4;c0={fn:i0?Y.IIRFilter(!0,A,i0):0}}else{var i0=A>t*3/4?0:A/2*3/4;c0={fn:i0?Y.IIRFilter(!0,t,i0):0}}c0.sr=A,c0.srn=t;var $0=c0.fn,I0=D.frameNext||[];P||(P={});var F0=P.frameSize||1;P.frameType&&(F0=P.frameType=="mp3"?1152:1);var x0=P._sum,G0=0,f=p.length;Q>f+1&&B0(s0("tlbC::{1}似乎传入了未重置chunk {2}",0,$,Q+">"+f),3);for(var k=0,H=Q;H<f;H++)k+=p[H].length;var S=A/t;if(S>1)k=Math.max(0,k-Math.floor(u0)),k=Math.floor(k/S);else if(S<1){var z=1/S;k=Math.floor(k*z)}k+=I0.length;for(var b=new Int16Array(k),C=0,H=0;H<I0.length;H++)b[C]=I0[H],C++;for(;Q<f;Q++){var K=p[Q],w=K instanceof Float32Array,H=u0,F=K.length,d=$0&&$0.Embed,X=0,R=0,M=0,e=0;if(S<1){for(var i=C+H,h=f0,T=0;T<F;T++){var c=K[T];w&&(c=Math.max(-1,Math.min(1,c)),c=c<0?c*32768:c*32767);var l=Math.floor(i);i+=z;for(var v=Math.floor(i),s=(c-h)/(v-l),x=1;l<v;l++,x++){var r=Math.floor(h+x*s);d?(M=r,e=d.b0*M+d.b1*d.x1+d.b0*d.x2-d.a1*d.y1-d.a2*d.y2,d.x2=d.x1,d.x1=M,d.y2=d.y1,d.y1=e,r=e):r=$0?$0(r):r,r>32767?r=32767:r<-32768&&(r=-32768),x0&&(G0+=Math.abs(r)),b[l]=r,C++}h=f0=c,H+=z}u0=H%1;continue}for(var T=0,I=0;T<F;T++,I++){if(I<F){var c=K[I];w&&(c=Math.max(-1,Math.min(1,c)),c=c<0?c*32768:c*32767),d?(M=c,e=d.b0*M+d.b1*d.x1+d.b0*d.x2-d.a1*d.y1-d.a2*d.y2,d.x2=d.x1,d.x1=M,d.y2=d.y1,d.y1=e):e=$0?$0(c):c}if(X=R,R=e,I==0){T--;continue}var _=Math.floor(H);if(T==_){var o=Math.ceil(H),u=H-_,m=X,B=o<F?R:m,a=m+(B-m)*u;a>32767?a=32767:a<-32768&&(a=-32768),x0&&(G0+=Math.abs(a)),b[C]=a,C++,H+=S}}u0=Math.max(0,H-F)}S<1&&C+1==k&&(k--,b=new Int16Array(b.buffer.slice(0,k*2))),C-1!=k&&C!=k&&B0($+" idx:"+C+" != size:"+k,3),I0=null;var n=k%F0;if(n>0){var V=(k-n)*2;I0=new Int16Array(b.buffer.slice(V)),b=new Int16Array(b.buffer.slice(0,V))}var E={index:Q,offset:u0,raisePrev:f0,filter:c0,frameNext:I0,sampleRate:t,data:b};return x0&&(E._sum=G0),E},Y.IIRFilter=function(p,A,t){var D=2*Math.PI*t/A,P=Math.sin(D),$=Math.cos(D),Q=P/2,u0=1+Q,f0=-2*$/u0,c0=(1-Q)/u0;if(p)var i0=(1-$)/2/u0,$0=(1-$)/u0;else var i0=(1+$)/2/u0,$0=-(1+$)/u0;var I0=0,F0=0,x0=0,G0=0,f=0,k=function(H){return x0=i0*H+$0*I0+i0*F0-f0*G0-c0*f,F0=I0,I0=H,f=G0,G0=x0,x0};return k.Embed={x1:0,x2:0,y1:0,y2:0,b0:i0,b1:$0,a1:f0,a2:c0},k},Y.PowerLevel=function(p,A){var t=p/A||0,D;return t<1251?D=Math.round(t/1250*10):D=Math.round(Math.min(100,Math.max(0,(1+Math.log(t/1e4)/Math.log(10))*100))),D},Y.PowerDBFS=function(p){var A=Math.max(.1,p||0),t=32767;return A=Math.min(A,t),A=20*Math.log(A/t)/Math.log(10),Math.max(-100,Math.round(A))},Y.CLog=function(p,A){if(typeof console=="object"){var t=new Date,D=("0"+t.getMinutes()).substr(-2)+":"+("0"+t.getSeconds()).substr(-2)+"."+("00"+t.getMilliseconds()).substr(-3),P=this&&this.envIn&&this.envCheck&&this.id,$=["["+D+" "+d0+(P?":"+P:"")+"]"+p],Q=arguments,u0=Y.CLog,f0=2,c0=u0.log||console.log;for(ie(A)?c0=A==1?u0.error||console.error:A==3?u0.warn||console.warn:c0:f0=1;f0<Q.length;f0++)$.push(Q[f0]);C0?c0&&c0("[IsLoser]"+$[0],$.length>1?$:""):c0.apply(console,$)}};var B0=function(){Y.CLog.apply(this,arguments)},C0=!0;try{C0=!console.log.apply}catch{}var be=0;function fe(p){var A=this;A.id=++be,Fe();var t={type:"mp3",onProcess:a0};for(var D in p)t[D]=p[D];A.set=t;var P=t[k0],$=t[w0];(P&&!ie(P)||$&&!ie($))&&A.CLog(s0.G("IllegalArgs-1",[s0("VtS4::{1}和{2}必须是数值",0,w0,k0)]),1,p),t[k0]=+P||16,t[w0]=+$||16e3,A.state=0,A._S=9,A.Sync={O:9,C:9}}Y.Sync={O:9,C:9},Y.prototype=fe.prototype={CLog:B0,_streamStore:function(){return this.set.sourceStream?this:Y},_streamGet:function(){return this._streamStore().Stream},_streamCtx:function(){var p=this._streamGet();return p&&p._c},open:function(p,A){var t=this,D=t.set,P=t._streamStore(),$=0;p=p||a0;var Q=function(w,F){F=!!F,t.CLog(s0("5tWi::录音open失败：")+w+",isUserNotAllow:"+F,1),$&&Y.CloseNewCtx($),A&&A(w,F)};t._streamTag=S0;var u0=function(){t.CLog("open ok, id:"+t.id+" stream:"+t._streamTag),p(),t._SO=0},f0=P.Sync,c0=++f0.O,i0=f0.C;t._O=t._O_=c0,t._SO=t._S;var $0=function(){if(i0!=f0.C||!t._O){var w=s0("dFm8::open被取消");return c0==f0.O?t.close():w=s0("VtJO::open被中断"),Q(w),!0}};if(!j0){Q(s0.G("NonBrowser-1",["open"])+s0("EMJq::，可尝试使用RecordApp解决方案")+"("+N0+"/tree/master/app-support-sample)");return}var I0=t.envCheck({envName:"H5",canProcess:!0});if(I0){Q(s0("A5bm::不能录音：")+I0);return}var F0,x0=function(){F0=D.runningContext,F0||(F0=$=Y.GetContext(!0))};if(D.sourceStream){if(t._streamTag="set.sourceStream",!Y.GetContext()){Q(s0("1iU7::不支持此浏览器从流中获取录音"));return}x0(),v0(P);var G0=t.Stream=D.sourceStream;G0._c=F0,G0._RC=D.runningContext,G0._call={};try{Q0(P)}catch(w){v0(P),Q(s0("BTW2::从流中打开录音失败：")+w.message);return}u0();return}var f=function(w,F){try{window.top.a}catch{Q(s0("Nclz::无权录音(跨域，请尝试给iframe添加麦克风访问策略，如{1})",0,'allow="camera;microphone"'));return}k(1,w)&&(/Found/i.test(w)?Q(F+s0("jBa9::，无可用麦克风")):Q(F))},k=function(w,F){if(/Permission|Allow/i.test(F))w&&Q(s0("gyO5::用户拒绝了录音权限"),!0);else if(window.isSecureContext===!1)w&&Q(s0("oWNo::浏览器禁止不安全页面录音，可开启https解决"));else return 1};if(Y.IsOpen()){u0();return}if(!Y.Support()){f("",s0("COxc::此浏览器不支持录音"));return}x0();var H=function(w){setTimeout(function(){w._call={};var F=Y.Stream;F&&(v0(),w._call=F._call),Y.Stream=w,w._c=F0,w._RC=D.runningContext,!$0()&&(Y.IsOpen()?(F&&t.CLog(s0("upb8::发现同时多次调用open"),1),Q0(P),u0()):Q(s0("Q1GA::录音功能无效：无音频流")))},100)},S=function(w){var F=w.name||w.message||w.code+":"+w,d="";z==1&&k(0,F)&&(d=s0("KxE2::，将尝试禁用回声消除后重试"));var X=s0("xEQR::请求录音权限错误"),R=s0("bDOG::无法录音：");t.CLog(X+d+"|"+w,d||C?3:1,w),d?(b=F,C=w,K(1)):C?(t.CLog(X+"|"+C,1,C),f(b,R+C)):f(F,R+w)},z=0,b,C,K=function(w){z++;var F="audioTrackSet",d="autoGainControl",X="echoCancellation",R="noiseSuppression",M=F+":{"+X+","+R+","+d+"}",e=JSON.parse(xe(D[F]||!0));t.CLog("open... "+z+" "+F+":"+xe(e)),w&&(typeof e!="object"&&(e={}),e[d]=!1,e[X]=!1,e[R]=!1),e[w0]&&t.CLog(s0("IjL3::注意：已配置{1}参数，可能会出现浏览器不能正确选用麦克风、移动端无法启用回声消除等现象",0,F+"."+w0),3);var i={audio:e,video:D.videoTrackSet||!1};try{var h=Y.Scope[S0](i,H,S)}catch(T){t.CLog(S0,3,T),i={audio:!0,video:!1},h=Y.Scope[S0](i,H,S)}t.CLog(S0+"("+xe(i)+") "+H0(F0)+s0("RiWe::，未配置 {1} 时浏览器可能会自动启用回声消除，移动端未禁用回声消除时可能会降低系统播放音量（关闭录音后可恢复）和仅提供16k采样率的音频流（不需要回声消除时可明确配置成禁用来获得48k高音质的流），请参阅文档中{2}配置",0,M,F)+"("+N0+") LM:"+U+" UA:"+navigator.userAgent),h&&h.then&&h.then(H)[W](S)};K()},close:function(p){p=p||a0;var A=this,t=A._streamStore();A._stop();var D=" stream:"+A._streamTag,P=t.Sync;if(A._O=0,A._O_!=P.O){A.CLog(s0("hWVz::close被忽略（因为同时open了多个rec，只有最后一个会真正close）")+D,3),p();return}P.C++,v0(t),A.CLog("close,"+D),p()},mock:function(p,A){var t=this;return t._stop(),t.isMock=1,t.mockEnvInfo=null,t.buffers=[p],t.recSize=p.length,t._setSrcSR(A),t._streamTag="mock",t},_setSrcSR:function(p){var A=this,t=A.set,D=t[w0];D>p?t[w0]=p:D=0,A[T0]=p,A.CLog(T0+": "+p+" set."+w0+": "+t[w0]+(D?" "+s0("UHvm::忽略")+": "+D:""),D?3:0)},envCheck:function(p){var A,t=this,D=t.set,P="CPU_BE";if(!A&&!Y[P]&&typeof Int8Array=="function"&&!new Int8Array(new Int32Array([1]).buffer)[0]&&(Fe(P),A=s0("Essp::不支持{1}架构",0,P)),!A){var $=D.type,Q=t[$+"_envCheck"];D.takeoffEncodeChunk&&(Q?p.canProcess||(A=s0("7uMV::{1}环境不支持实时处理",0,p.envName)):A=s0("2XBl::{1}类型不支持设置takeoffEncodeChunk",0,$)+(t[$]?"":s0("LG7e::(未加载编码器)"))),!A&&Q&&(A=t[$+"_envCheck"](p,D))}return A||""},envStart:function(p,A){var t=this,D=t.set;if(t.isMock=p?1:0,t.mockEnvInfo=p,t.buffers=[],t.recSize=0,p&&(t._streamTag="env$"+p.envName),t.state=1,t.envInLast=0,t.envInFirst=0,t.envInFix=0,t.envInFixTs=[],t._setSrcSR(A),t.engineCtx=0,t[D.type+"_start"]){var P=t.engineCtx=t[D.type+"_start"](D);P&&(P.pcmDatas=[],P.pcmSize=0)}},envResume:function(){this.envInFixTs=[]},envIn:function(p,A){var t=this,D=t.set,P=t.engineCtx;if(t.state!=1){t.state||t.CLog("envIn at state=0",3);return}var $=t[T0],Q=p.length,u0=Y.PowerLevel(A,Q),f0=t.buffers,c0=f0.length;f0.push(p);var i0=f0,$0=c0,I0=Date.now(),F0=Math.round(Q/$*1e3);t.envInLast=I0,t.buffers.length==1&&(t.envInFirst=I0-F0);var x0=t.envInFixTs;x0.splice(0,0,{t:I0,d:F0});for(var G0=I0,f=0,k=0;k<x0.length;k++){var H=x0[k];if(I0-H.t>3e3){x0.length=k;break}G0=H.t,f+=H.d}var S=x0[1],z=I0-G0,b=z-f;if(b>z/3&&(S&&z>1e3||x0.length>=6)){var C=I0-S.t-F0;if(C>F0/5){var K=!D.disableEnvInFix;if(t.CLog("["+I0+"]"+ve.get(s0(K?"4Kfd::补偿{1}ms":"bM5i::未补偿{1}ms",1),[C]),3),t.envInFix+=C,K){var w=new Int16Array(C*$/1e3);Q+=w.length,f0.push(w)}}}var F=t.recSize,d=Q,X=F+d;if(t.recSize=X,P){var R=Y.SampleData(f0,$,D[w0],P.chunkInfo);P.chunkInfo=R,F=P.pcmSize,d=R.data.length,X=F+d,P.pcmSize=X,f0=P.pcmDatas,c0=f0.length,f0.push(R.data),$=R[w0]}var M=Math.round(X/$*1e3),e=f0.length,i=i0.length,h=function(){for(var s=T?0:-d,x=f0[0]==null,r=c0;r<e;r++){var I=f0[r];I==null?x=1:(s+=I.length,P&&I.length&&t[D.type+"_encode"](P,I))}if(x&&P){var r=$0;for(i0[0]&&(r=0);r<i;r++)i0[r]=null}x&&(s=T?d:0,f0[0]=null),P?P.pcmSize+=s:t.recSize+=s},T=0,c="rec.set.onProcess";try{T=D.onProcess(f0,u0,M,$,c0,h),T=T===!0}catch(s){console.error(c+s0("gFUF::回调出错是不允许的，需保证不会抛异常"),s)}var l=Date.now()-I0;if(l>10&&t.envInFirst-I0>1e3&&t.CLog(c+s0("2ghS::低性能，耗时{1}ms",0,l),3),T){for(var v=0,k=c0;k<e;k++)f0[k]==null?v=1:f0[k]=new Int16Array(0);v?t.CLog(s0("ufqH::未进入异步前不能清除buffers"),3):P?P.pcmSize-=d:t.recSize-=d}else h()},start:function(){var p=this,A=1;if(p.set.sourceStream?p.Stream||(A=0):Y.IsOpen()||(A=0),!A){p.CLog(s0("6WmN::start失败：未open"),1);return}var t=p._streamCtx();if(p.CLog(s0("kLDN::start 开始录音，")+H0(t)+" stream:"+p._streamTag),p._stop(),p.envStart(null,t[w0]),p.state=3,p._SO&&p._SO+1!=p._S){p.CLog(s0("Bp2y::start被中断"),3);return}p._SO=0;var D=function(){p.state==3&&(p.state=1,p.resume())},P="AudioContext resume: ",$=p._streamGet();$._call[p.id]=function(){p.CLog(P+t.state+"|stream ok"),D()},q(t,function(Q){return Q&&p.CLog(P+"wait..."),p.state==3},function(Q){Q&&p.CLog(P+t.state),D()},function(Q){p.CLog(P+t.state+s0("upkE::，可能无法录音：")+Q,1),D()})},pause:function(){var p=this,A=p._streamGet();p.state&&(p.state=2,p.CLog("pause"),A&&delete A._call[p.id])},resume:function(){var p=this,A=p._streamGet(),t="resume",D=t+"(wait ctx)";if(p.state==3)p.CLog(D);else if(p.state){p.state=1,p.CLog(t),p.envResume(),A&&(A._call[p.id]=function($,Q){p.state==1&&p.envIn($,Q)},U0(A));var P=p._streamCtx();P&&q(P,function($){return $&&p.CLog(D+"..."),p.state==1},function($){$&&p.CLog(D+P.state),U0(A)},function($){p.CLog(D+P.state+"[err]"+$,1)})}},_stop:function(p){var A=this,t=A.set;A.isMock||A._S++,A.state&&(A.pause(),A.state=0),!p&&A[t.type+"_stop"]&&(A[t.type+"_stop"](A.engineCtx),A.engineCtx=0)},stop:function(p,A,t){var D=this,P=D.set,$,Q=D.envInLast-D.envInFirst,u0=Q&&D.buffers.length;D.CLog(s0("Xq4s::stop 和start时差:")+(Q?Q+"ms "+s0("3CQP::补偿:")+D.envInFix+"ms envIn:"+u0+" fps:"+(u0/Q*1e3).toFixed(1):"-")+" stream:"+D._streamTag+" ("+N0+") LM:"+U);var f0=function(){D._stop(),t&&D.close()},c0=function(H){D.CLog(s0("u8JG::结束录音失败：")+H,1),A&&A(H),f0()},i0=function(H,S,z){var b="blob",C="arraybuffer",K="dataType",w="DefaultDataType",F=D[K]||Y[w]||b,d=K+"="+F,X=H instanceof ArrayBuffer,R=0,M=X?H.byteLength:H.size;if(F==C?X||(R=1):F==b?typeof Blob!="function"?R=s0.G("NonBrowser-1",[d])+s0("1skY::，请设置{1}",0,d0+"."+w+'="'+C+'"'):(X&&(H=new Blob([H],{type:S})),H instanceof Blob||(R=1),S=H.type||S):R=s0.G("NotSupport-1",[d]),D.CLog(s0("Wv7l::结束录音 编码花{1}ms 音频时长{2}ms 文件大小{3}b",0,Date.now()-$,z,M)+" "+d+","+S),R){c0(R!=1?R:s0("Vkbd::{1}编码器返回的不是{2}",0,P.type,F)+", "+d);return}if(P.takeoffEncodeChunk)D.CLog(s0("QWnr::启用takeoffEncodeChunk后stop返回的blob长度为0不提供音频数据"),3);else if(M<Math.max(50,z/5)){c0(s0("Sz2H::生成的{1}无效",0,P.type));return}p&&p(H,z,S),f0()};if(!D.isMock){var $0=D.state==3;if(!D.state||$0){c0(s0("wf9t::未开始录音")+($0?s0("Dl2c::，开始录音前无用户交互导致AudioContext未运行"):""));return}}D._stop(!0);var I0=D.recSize;if(!I0){c0(s0("Ltz3::未采集到录音"));return}if(!D[P.type]){c0(s0("xGuI::未加载{1}编码器，请尝试到{2}的src/engine内找到{1}的编码器并加载",0,P.type,d0));return}if(D.isMock){var F0=D.envCheck(D.mockEnvInfo||{envName:"mock",canProcess:!1});if(F0){c0(s0("AxOH::录音错误：")+F0);return}}var x0=D.engineCtx;if(D[P.type+"_complete"]&&x0){var k=Math.round(x0.pcmSize/P[w0]*1e3);$=Date.now(),D[P.type+"_complete"](x0,function(S,z){i0(S,z,k)},c0);return}if($=Date.now(),!D.buffers[0]){c0(s0("xkKd::音频buffers被释放"));return}var G0=Y.SampleData(D.buffers,D[T0],P[w0]);P[w0]=G0[w0];var f=G0.data,k=Math.round(f.length/P[w0]*1e3);D.CLog(s0("CxeT::采样:{1} 花:{2}ms",0,I0+"->"+f.length,Date.now()-$)),setTimeout(function(){$=Date.now(),D[P.type](f,function(H,S){i0(H,S,k)},function(H){c0(H)})})}};var we=function(p,A){A.pos||(A.pos=[0],A.tracks={},A.bytes=[]);var t=A.tracks,D=[A.pos[0]],P=function(){A.pos[0]=D[0]},$=A.bytes.length,Q=new Uint8Array($+p.length);if(Q.set(A.bytes),Q.set(p,$),A.bytes=Q,!A._ht){if(K0(Q,D),Be(Q,D),!de(K0(Q,D),[24,83,128,103]))return;for(K0(Q,D);D[0]<Q.length;){var u0=K0(Q,D),f0=Be(Q,D),c0=[0],i0=0;if(!f0)return;if(de(u0,[22,84,174,107])){for(;c0[0]<f0.length;){var $0=K0(f0,c0),I0=Be(f0,c0),F0=[0],x0={channels:0,sampleRate:0};if(de($0,[174]))for(;F0[0]<I0.length;){var G0=K0(I0,F0),f=Be(I0,F0),k=[0];if(de(G0,[215])){var H=J0(f);x0.number=H,t[H]=x0}else if(de(G0,[131])){var H=J0(f);H==1?x0.type="video":H==2?(x0.type="audio",i0||(A.track0=x0),x0.idx=i0++):x0.type="Type-"+H}else if(de(G0,[134])){for(var S="",z=0;z<f.length;z++)S+=String.fromCharCode(f[z]);x0.codec=S}else if(de(G0,[225]))for(;k[0]<f.length;){var b=K0(f,k),C=Be(f,k);if(de(b,[181])){var H=0,K=new Uint8Array(C.reverse()).buffer;C.length==4?H=new Float32Array(K)[0]:C.length==8?H=new Float64Array(K)[0]:B0("WebM Track !Float",1,C),x0[w0]=Math.round(H)}else de(b,[98,100])?x0.bitDepth=J0(C):de(b,[159])&&(x0.channels=J0(C))}}}A._ht=1,B0("WebM Tracks",t),P();break}}}var w=A.track0;if(w){var F=w[w0];if(A.webmSR=F,w.bitDepth==16&&/FLOAT/i.test(w.codec)&&(w.bitDepth=32,B0("WebM 16->32 bit",3)),F<8e3||w.bitDepth!=32||w.channels<1||!/(\b|_)PCM\b/i.test(w.codec))return A.bytes=[],A.bad||B0("WebM Track Unexpected",3,A),A.bad=1,-1;for(var d=[],X=0;D[0]<Q.length;){var $0=K0(Q,D),I0=Be(Q,D);if(!I0)break;if(de($0,[163])){var R=I0[0]&15,x0=t[R];if(x0){if(x0.idx===0){for(var M=new Uint8Array(I0.length-4),z=4;z<I0.length;z++)M[z-4]=I0[z];d.push(M),X+=M.length}}else return B0("WebM !Track"+R,1,t),-1}P()}if(X){var e=new Uint8Array(Q.length-A.pos[0]);e.set(Q.subarray(A.pos[0])),A.bytes=e,A.pos[0]=0;for(var M=new Uint8Array(X),z=0,i=0;z<d.length;z++)M.set(d[z],i),i+=d[z].length;var K=new Float32Array(M.buffer);if(w.channels>1){for(var h=[],z=0;z<K.length;)h.push(K[z]),z+=w.channels;K=new Float32Array(h)}return K}}},de=function(p,A){if(!p||p.length!=A.length)return!1;if(p.length==1)return p[0]==A[0];for(var t=0;t<p.length;t++)if(p[t]!=A[t])return!1;return!0},J0=function(p){for(var A="",t=0;t<p.length;t++){var D=p[t];A+=(D<16?"0":"")+D.toString(16)}return parseInt(A,16)||0},K0=function(p,A,t){var D=A[0];if(!(D>=p.length)){var P=p[D],$=("0000000"+P.toString(2)).substr(-8),Q=/^(0*1)(\d*)$/.exec($);if(Q){var u0=Q[1].length,f0=[];if(!(D+u0>p.length)){for(var c0=0;c0<u0;c0++)f0[c0]=p[D],D++;return t&&(f0[0]=parseInt(Q[2]||"0",2)),A[0]=D,f0}}}},Be=function(p,A){var t=K0(p,A,1);if(t){var D=J0(t),P=A[0],$=[];if(D<2147483647){if(P+D>p.length)return;for(var Q=0;Q<D;Q++)$[Q]=p[P],P++}return A[0]=P,$}},ve=Y.i18n={lang:"zh-CN",alias:{"zh-CN":"zh","en-US":"en"},locales:{},data:{},put:function(p,A){var t=d0+".i18n.put: ",D=p.overwrite;D=D==null||D;var P=p.lang;if(P=ve.alias[P]||P,!P)throw new Error(t+"set.lang?");var $=ve.locales[P];$||($={},ve.locales[P]=$);for(var Q=/^([\w\-]+):/,u0,f0=0;f0<A.length;f0++){var i0=A[f0];if(u0=Q.exec(i0),!u0){B0(t+"'key:'? "+i0,3,p);continue}var c0=u0[1],i0=i0.substr(c0.length+1);!D&&$[c0]||($[c0]=i0)}},get:function(){return ve.v_G.apply(null,arguments)},v_G:function(p,A,t){A=A||[],t=t||ve.lang,t=ve.alias[t]||t;var D=ve.locales[t],P=D&&D[p]||"";return!P&&t!="zh"?t=="en"?ve.v_G(p,A,"zh"):ve.v_G(p,A,"en"):(ve.lastLang=t,P=="=Empty"?"":P.replace(/\{(\d+)(\!?)\}/g,function($,Q,u0){return Q=+Q||0,$=A[Q-1],(Q<1||Q>A.length)&&($="{?}",B0("i18n["+p+"] no {"+Q+"}: "+P,3)),u0?"":$}))},$T:function(){return ve.v_T.apply(null,arguments)},v_T:function(){for(var p=arguments,A="",t=[],D=0,P=d0+".i18n.$T:",$=/^([\w\-]*):/,Q,u0=0;u0<p.length;u0++){var f0=p[u0];if(u0==0){if(Q=$.exec(f0),A=Q&&Q[1],!A)throw new Error(P+"0 'key:'?");f0=f0.substr(A.length+1)}if(D===-1)t.push(f0);else{if(D)throw new Error(P+" bad args");if(f0===0)D=-1;else if(ie(f0)){if(f0<1)throw new Error(P+" bad args");D=f0}else{var c0=u0==1?"en":u0?"":"zh";if(Q=$.exec(f0),Q&&(c0=Q[1]||c0,f0=f0.substr(Q[1].length+1)),!Q||!c0)throw new Error(P+u0+" 'lang:'?");ve.put({lang:c0,overwrite:!1},[A+":"+f0])}}}return A?D>0?A:ve.v_G(A,t):""}},s0=ve.$T;s0.G=ve.get,s0("NonBrowser-1::非浏览器环境，不支持{1}",1),s0("IllegalArgs-1::参数错误：{1}",1),s0("NeedImport-2::调用{1}需要先导入{2}",2),s0("NotSupport-1::不支持：{1}",1),Y.TrafficImgUrl="//ia.51.la/go1?id=20469973&pvFlag=1";var Fe=Y.Traffic=function(p){if(j0){p=p?"/"+d0+"/Report/"+p:"";var A=Y.TrafficImgUrl;if(A){var t=Y.Traffic,D=/^(https?:..[^\/#]*\/?)[^#]*/i.exec(location.href)||[],P=D[1]||"http://file/",$=(D[0]||P)+p;if(A.indexOf("//")==0&&(/^https:/i.test($)?A="https:"+A:A="http:"+A),p&&(A=A+"&cu="+encodeURIComponent(P+p)),!t[$]){t[$]=1;var Q=new Image;Q.src=A,B0("Traffic Analysis Image: "+(p||d0+".TrafficImgUrl="+Y.TrafficImgUrl))}}}};J&&(B0(s0("8HO5::覆盖导入{1}",0,d0),1),J.Destroy()),ue[d0]=Y})})(f1);var y1=f1.exports;const e1=h1(y1);(function(P0){var ue=typeof window=="object"&&!!window.document,j0=ue?window:Object,a0=j0.Recorder,ie=a0.i18n;P0(a0,ie,ie.$T,ue)})(function(P0,ue,j0,a0){var ie="48000, 44100, 32000, 24000, 22050, 16000, 12000, 11025, 8000",xe="8, 16, 24, 32, 40, 48, 56, 64, 80, 96, 112, 128, 144, 160, 192, 224, 256, 320";P0.prototype.enc_mp3={stable:!0,takeEC:"full",getTestMsg:function(){return j0("Zm7L::采样率范围：{1}；比特率范围：{2}（不同比特率支持的采样率范围不同，小于32kbps时采样率需小于32000）",0,ie,xe)}};var Y=function(W){var J=W.bitRate,m0=W.sampleRate,y0=m0;if((" "+xe+",").indexOf(" "+J+",")==-1&&P0.CLog(j0("eGB9::{1}不在mp3支持的取值范围：{2}",0,"bitRate="+J,xe),3),(" "+ie+",").indexOf(" "+m0+",")==-1){for(var q=ie.split(", "),p0=[],H0=0;H0<q.length;H0++)p0.push({v:+q[H0],s:Math.abs(q[H0]-m0)});p0.sort(function(V0,O0){return V0.s-O0.s}),y0=p0[0].v,W.sampleRate=y0,P0.CLog(j0("zLTa::sampleRate已更新为{1}，因为{2}不在mp3支持的取值范围：{3}",0,y0,m0,ie),3)}},U=function(){return j0.G("NeedImport-2",["mp3.js","src/engine/mp3-engine.js"])},N0=a0&&typeof Worker=="function";P0.prototype.mp3=function(W,J,m0){var y0=this,q=y0.set,p0=W.length;if(!P0.lamejs){m0(U());return}if(N0){var H0=y0.mp3_start(q);if(H0){if(H0.isW){y0.mp3_encode(H0,W),y0.mp3_complete(H0,J,m0,1);return}y0.mp3_stop(H0)}}Y(q);var V0=new P0.lamejs.Mp3Encoder(1,q.sampleRate,q.bitRate),O0=57600,Q0=new Int8Array(5e5),U0=0,le=0,g0=0,v0=function(){try{if(le<p0)var L=V0.encodeBuffer(W.subarray(le,le+O0));else{g0=1;var L=V0.flush()}}catch(fe){if(console.error(fe),!g0)try{V0.flush()}catch(we){console.error(we)}m0("MP3 Encoder: "+fe.message);return}var Y0=L.length;if(Y0>0){if(U0+Y0>Q0.length){var B0=new Int8Array(Q0.length+Math.max(5e5,Y0));B0.set(Q0.subarray(0,U0)),Q0=B0}Q0.set(L,U0),U0+=Y0}if(le<p0)le+=O0,setTimeout(v0);else{var C0=[Q0.buffer.slice(0,U0)],be=w0.fn(C0,U0,p0,q.sampleRate);k0(be,q),J(C0[0]||new ArrayBuffer(0),"audio/mp3")}};v0()};var d0;P0.BindDestroy("mp3Worker",function(){d0&&(P0.CLog("mp3Worker Destroy"),d0.terminate(),d0=null)}),P0.prototype.mp3_envCheck=function(W,J){var m0="";return J.takeoffEncodeChunk&&(T0()||(m0=j0("yhUs::当前浏览器版本太低，无法实时处理"))),!m0&&!P0.lamejs&&(m0=U()),m0},P0.prototype.mp3_start=function(W){return T0(W)};var S0={id:0},T0=function(W,J){var m0=function(g0){var v0=g0.data,L=p0.wkScope.wk_ctxs,Y0=p0.wkScope.wk_lame,B0=p0.wkScope.wk_mp3TrimFix,C0=L[v0.id];if(v0.action=="init")L[v0.id]={sampleRate:v0.sampleRate,bitRate:v0.bitRate,takeoff:v0.takeoff,pcmSize:0,memory:new Int8Array(5e5),mOffset:0,encObj:new Y0.Mp3Encoder(1,v0.sampleRate,v0.bitRate)};else if(!C0)return;var be=function(J0){var K0=J0.length;if(C0.mOffset+K0>C0.memory.length){var Be=new Int8Array(C0.memory.length+Math.max(5e5,K0));Be.set(C0.memory.subarray(0,C0.mOffset)),C0.memory=Be}C0.memory.set(J0,C0.mOffset),C0.mOffset+=K0};switch(v0.action){case"stop":if(!C0.isCp)try{C0.encObj.flush()}catch(J0){console.error(J0)}C0.encObj=null,delete L[v0.id];break;case"encode":if(C0.isCp)break;C0.pcmSize+=v0.pcm.length;try{var fe=C0.encObj.encodeBuffer(v0.pcm)}catch(J0){C0.err=J0,console.error(J0)}fe&&fe.length>0&&(C0.takeoff?H0.onmessage({action:"takeoff",id:v0.id,chunk:fe}):be(fe));break;case"complete":C0.isCp=1;try{var fe=C0.encObj.flush()}catch(J0){C0.err=J0,console.error(J0)}if(fe&&fe.length>0&&(C0.takeoff?H0.onmessage({action:"takeoff",id:v0.id,chunk:fe}):be(fe)),C0.err){H0.onmessage({action:v0.action,id:v0.id,err:"MP3 Encoder: "+C0.err.message});break}var we=[C0.memory.buffer.slice(0,C0.mOffset)],de=B0.fn(we,C0.mOffset,C0.pcmSize,C0.sampleRate);H0.onmessage({action:v0.action,id:v0.id,blob:we[0]||new ArrayBuffer(0),meta:de});break}},y0=function(g0){H0.onmessage=function(v0){var L=v0;g0&&(L=v0.data);var Y0=S0[L.id];Y0&&(L.action=="takeoff"?Y0.set.takeoffEncodeChunk(new Uint8Array(L.chunk.buffer)):(Y0.call&&Y0.call(L),Y0.call=null))}},q=function(){var g0={worker:H0,set:W};return W?(g0.id=++S0.id,S0[g0.id]=g0,Y(W),H0.postMessage({action:"init",id:g0.id,sampleRate:W.sampleRate,bitRate:W.bitRate,takeoff:!!W.takeoffEncodeChunk,x:new Int16Array(5)})):H0.postMessage({x:new Int16Array(5)}),g0},p0,H0=d0;if(J||!N0)return P0.CLog(j0("k9PT::当前环境不支持Web Worker，mp3实时编码器运行在主线程中"),3),H0={postMessage:function(g0){m0({data:g0})}},p0={wkScope:{wk_ctxs:{},wk_lame:P0.lamejs,wk_mp3TrimFix:w0}},y0(),q();try{if(!H0){var V0=(m0+"").replace(/[\w\$]+\.onmessage/g,"self.postMessage");V0=V0.replace(/[\w\$]+\.wkScope/g,"wkScope");var O0=");wk_lame();self.onmessage="+V0;O0+=";var wkScope={ wk_ctxs:{},wk_lame:wk_lame",O0+=",wk_mp3TrimFix:{rm:"+w0.rm+",fn:"+w0.fn+"} }";var Q0=P0.lamejs.toString(),U0=(window.URL||webkitURL).createObjectURL(new Blob(["var wk_lame=(",Q0,O0],{type:"text/javascript"}));H0=new Worker(U0),setTimeout(function(){(window.URL||webkitURL).revokeObjectURL(U0)},1e4),y0(1)}var le=q();return le.isW=1,d0=H0,le}catch(g0){return H0&&H0.terminate(),console.error(g0),T0(W,1)}};P0.prototype.mp3_stop=function(W){if(W&&W.worker){W.worker.postMessage({action:"stop",id:W.id}),W.worker=null,delete S0[W.id];var J=-1;for(var m0 in S0)J++;J&&P0.CLog(j0("fT6M::mp3 worker剩{1}个未stop",0,J),3)}},P0.prototype.mp3_encode=function(W,J){W&&W.worker&&W.worker.postMessage({action:"encode",id:W.id,pcm:J})},P0.prototype.mp3_complete=function(W,J,m0,y0){var q=this;W&&W.worker?(W.call=function(p0){y0&&q.mp3_stop(W),p0.err?m0(p0.err):(k0(p0.meta,W.set),J(p0.blob,"audio/mp3"))},W.worker.postMessage({action:"complete",id:W.id})):m0(j0("mPxH::mp3编码器未start"))},P0.mp3ReadMeta=function(W,J){var m0=typeof window<"u"&&window.parseInt||typeof self<"u"&&self.parseInt||parseInt,y0=new Uint8Array(W[0]||[]);if(y0.length<4)return null;var q=function(J0,K0){return("0000000"+((K0||y0)[J0]||0).toString(2)).substr(-8)},p0=q(0)+q(1),H0=q(2)+q(3);if(!/^1{11}/.test(p0))return null;var V0={"00":2.5,10:2,11:1}[p0.substr(11,2)],O0={"01":3}[p0.substr(13,2)],Q0={1:[44100,48e3,32e3],2:[22050,24e3,16e3],"2.5":[11025,12e3,8e3]}[V0];Q0&&(Q0=Q0[m0(H0.substr(4,2),2)]);var U0=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320]][V0==1?1:0][m0(H0.substr(0,4),2)];if(!V0||!O0||!U0||!Q0)return null;for(var le=Math.round(J*8/U0),g0=O0==1?384:O0==2||V0==1?1152:576,v0=g0/Q0*1e3,L=Math.floor(g0*U0/8/Q0*1e3),Y0=0,B0=0,C0=0;C0<W.length;C0++){var be=W[C0];if(B0+=be.byteLength,B0>=L+3){var fe=new Uint8Array(be),we=be.byteLength-(B0-(L+3)+1),de=q(we,fe);Y0=de.charAt(6)=="1";break}}return Y0&&L++,{version:V0,layer:O0,sampleRate:Q0,bitRate:U0,duration:le,size:J,hasPadding:Y0,frameSize:L,frameDurationFloat:v0}};var w0={rm:P0.mp3ReadMeta,fn:function(W,J,m0,y0){var q=this.rm(W,J);if(!q)return{size:J,err:"mp3 unknown format"};var p0=Math.round(m0/y0*1e3),H0=Math.floor((q.duration-p0)/q.frameDurationFloat);if(H0>0){var V0=H0*q.frameSize-(q.hasPadding?1:0);J-=V0;for(var O0=0,Q0=[],U0=0;U0<W.length;U0++){var le=W[U0];if(V0<=0)break;V0>=le.byteLength?(V0-=le.byteLength,Q0.push(le),W.splice(U0,1),U0--):(W[U0]=le.slice(V0),O0=le,V0=0)}var g0=this.rm(W,J);if(!g0){O0&&(W[0]=O0);for(var U0=0;U0<Q0.length;U0++)W.splice(U0,0,Q0[U0]);q.err="mp3 fix error: 已还原，错误原因不明"}var v0=q.trimFix={};v0.remove=H0,v0.removeDuration=Math.round(H0*q.frameDurationFloat),v0.duration=Math.round(J*8/q.bitRate)}return q}},k0=function(W,J){var m0="MP3 Info: ";(W.sampleRate&&W.sampleRate!=J.sampleRate||W.bitRate&&W.bitRate!=J.bitRate)&&(P0.CLog(m0+j0("uY9i::和设置的不匹配{1}，已更新成{2}",0,"set:"+J.bitRate+"kbps "+J.sampleRate+"hz","set:"+W.bitRate+"kbps "+W.sampleRate+"hz"),3,J),J.sampleRate=W.sampleRate,J.bitRate=W.bitRate);var y0=W.trimFix;y0?(m0+=j0("iMSm::Fix移除{1}帧",0,y0.remove)+" "+y0.removeDuration+"ms -> "+y0.duration+"ms",y0.remove>2&&(W.err=(W.err?W.err+", ":"")+j0("b9zm::移除帧数过多"))):m0+=(W.duration||"-")+"ms",W.err?P0.CLog(m0,W.size?1:0,W.err,W):P0.CLog(m0,W)}});(function(P0){var ue=typeof window=="object"&&!!window.document,j0=ue?window:Object,a0=j0.Recorder;P0(a0)})(function(P0){function ue(){var j0=function(f){return Math.log(f)/Math.log(10)},a0=function(f){throw new Error("abort("+f+")")};function ie(f){return new Int8Array(f)}function xe(f){return new Int16Array(f)}function Y(f){return new Int32Array(f)}function U(f){return new Float32Array(f)}function N0(f){return new Float64Array(f)}function d0(f){if(f.length==1)return U(f[0]);var k=f[0];f=f.slice(1);for(var H=[],S=0;S<k;S++)H.push(d0(f));return H}function S0(f){if(f.length==1)return Y(f[0]);var k=f[0];f=f.slice(1);for(var H=[],S=0;S<k;S++)H.push(S0(f));return H}function T0(f){if(f.length==1)return xe(f[0]);var k=f[0];f=f.slice(1);for(var H=[],S=0;S<k;S++)H.push(T0(f));return H}function w0(f){if(f.length==1)return new Array(f[0]);var k=f[0];f=f.slice(1);for(var H=[],S=0;S<k;S++)H.push(w0(f));return H}var k0={};k0.fill=function(f,k,H,S){if(arguments.length==2)for(var z=0;z<f.length;z++)f[z]=arguments[1];else for(var z=k;z<H;z++)f[z]=S};var W={};W.arraycopy=function(f,k,H,S,z){for(var b=k+z;k<b;)H[S++]=f[k++]};var J={};J.SQRT2=1.4142135623730951,J.FAST_LOG10=function(f){return j0(f)},J.FAST_LOG10_X=function(f,k){return j0(f)*k};function m0(f){this.ordinal=f}m0.short_block_allowed=new m0(0),m0.short_block_coupled=new m0(1),m0.short_block_dispensed=new m0(2),m0.short_block_forced=new m0(3);var y0={};y0.MAX_VALUE=34028235e31;function q(f){this.ordinal=f}q.vbr_off=new q(0),q.vbr_mt=new q(1),q.vbr_rh=new q(2),q.vbr_abr=new q(3),q.vbr_mtrh=new q(4),q.vbr_default=q.vbr_mtrh;function p0(f){var k=f;this.ordinal=function(){return k}}p0.STEREO=new p0(0),p0.JOINT_STEREO=new p0(1),p0.DUAL_CHANNEL=new p0(2),p0.MONO=new p0(3),p0.NOT_SET=new p0(4);function H0(){var f=3,k=98,H=4;this.getLameShortVersion=function(){return f+"."+k+"."+H}}function V0(){var f=null;this.qupvt=null,this.setModules=function(_){this.qupvt=_,f=_};function k(_){this.bits=0|_}var H=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function S(_,o,u,m,B,a){var n=.5946/o;for(_=_>>1;_--!=0;)B[a++]=n>u[m++]?0:1,B[a++]=n>u[m++]?0:1}function z(_,o,u,m,B,a){_=_>>1;var n=_%2;for(_=_>>1;_--!=0;){var V,E,O,G,Z,e0,b0,R0;V=u[m++]*o,E=u[m++]*o,Z=0|V,O=u[m++]*o,e0=0|E,G=u[m++]*o,b0=0|O,V+=f.adj43[Z],R0=0|G,E+=f.adj43[e0],B[a++]=0|V,O+=f.adj43[b0],B[a++]=0|E,G+=f.adj43[R0],B[a++]=0|O,B[a++]=0|G}if(n!=0){var V,E,Z,e0;V=u[m++]*o,E=u[m++]*o,Z=0|V,e0=0|E,V+=f.adj43[Z],E+=f.adj43[e0],B[a++]=0|V,B[a++]=0|E}}function b(_,o,u,m,B){var a,n,V=0,E,O=0,G=0,Z=0,e0=o,b0=0,R0=e0,M0=0,se=_,_e=0;for(E=B!=null&&m.global_gain==B.global_gain,m.block_type==t.SHORT_TYPE?n=38:n=21,a=0;a<=n;a++){var ee=-1;if((E||m.block_type==t.NORM_TYPE)&&(ee=m.global_gain-(m.scalefac[a]+(m.preflag!=0?f.pretab[a]:0)<<m.scalefac_scale+1)-m.subblock_gain[m.window[a]]*8),E&&B.step[a]==ee)O!=0&&(z(O,u,se,_e,R0,M0),O=0),G!=0&&a0();else{var re=m.width[a];if(V+m.width[a]>m.max_nonzero_coeff){var ce;ce=m.max_nonzero_coeff-V+1,k0.fill(o,m.max_nonzero_coeff,576,0),re=ce,re<0&&(re=0),a=n+1}if(O==0&&G==0&&(R0=e0,M0=b0,se=_,_e=Z),B!=null&&B.sfb_count1>0&&a>=B.sfb_count1&&B.step[a]>0&&ee>=B.step[a]?(O!=0&&(z(O,u,se,_e,R0,M0),O=0,R0=e0,M0=b0,se=_,_e=Z),G+=re):(G!=0&&(S(G,u,se,_e,R0,M0),G=0,R0=e0,M0=b0,se=_,_e=Z),O+=re),re<=0){G!=0&&a0(),O!=0&&a0();break}}a<=n&&(b0+=m.width[a],Z+=m.width[a],V+=m.width[a])}O!=0&&(z(O,u,se,_e,R0,M0),O=0),G!=0&&a0()}function C(_,o,u){var m=0,B=0;do{var a=_[o++],n=_[o++];m<a&&(m=a),B<n&&(B=n)}while(o<u);return m<B&&(m=B),m}function K(_,o,u,m,B,a){var n=L.ht[m].xlen*65536+L.ht[B].xlen,V=0,E;do{var O=_[o++],G=_[o++];O!=0&&(O>14&&(O=15,V+=n),O*=16),G!=0&&(G>14&&(G=15,V+=n),O+=G),V+=L.largetbl[O]}while(o<u);return E=V&65535,V>>=16,V>E&&(V=E,m=B),a.bits+=V,m}function w(_,o,u,m){var B=0,a=L.ht[1].hlen;do{var n=_[o+0]*2+_[o+1];o+=2,B+=a[n]}while(o<u);return m.bits+=B,1}function F(_,o,u,m,B){var a=0,n,V=L.ht[m].xlen,E;m==2?E=L.table23:E=L.table56;do{var O=_[o+0]*V+_[o+1];o+=2,a+=E[O]}while(o<u);return n=a&65535,a>>=16,a>n&&(a=n,m++),B.bits+=a,m}function d(_,o,u,m,B){var a=0,n=0,V=0,E=L.ht[m].xlen,O=L.ht[m].hlen,G=L.ht[m+1].hlen,Z=L.ht[m+2].hlen;do{var e0=_[o+0]*E+_[o+1];o+=2,a+=O[e0],n+=G[e0],V+=Z[e0]}while(o<u);var b0=m;return a>n&&(a=n,b0++),a>V&&(a=V,b0=m+2),B.bits+=a,b0}var X=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function R(_,o,u,m){var B=C(_,o,u);switch(B){case 0:return B;case 1:return w(_,o,u,m);case 2:case 3:return F(_,o,u,X[B-1],m);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return d(_,o,u,X[B-1],m);default:B>K0.IXMAX_VAL&&a0(),B-=15;var a;for(a=24;a<32&&!(L.ht[a].linmax>=B);a++);var n;for(n=a-8;n<24&&!(L.ht[n].linmax>=B);n++);return K(_,o,u,n,a,m)}}this.noquant_count_bits=function(_,o,u){var m=o.l3_enc,B=Math.min(576,o.max_nonzero_coeff+2>>1<<1);for(u!=null&&(u.sfb_count1=0);B>1&&!(m[B-1]|m[B-2]);B-=2);o.count1=B;for(var a=0,n=0;B>3;B-=4){var V;if(((m[B-1]|m[B-2]|m[B-3]|m[B-4])&2147483647)>1)break;V=((m[B-4]*2+m[B-3])*2+m[B-2])*2+m[B-1],a+=L.t32l[V],n+=L.t33l[V]}var E=a;if(o.count1table_select=0,a>n&&(E=n,o.count1table_select=1),o.count1bits=E,o.big_values=B,B==0)return E;if(o.block_type==t.SHORT_TYPE)a=3*_.scalefac_band.s[3],a>o.big_values&&(a=o.big_values),n=o.big_values;else if(o.block_type==t.NORM_TYPE){if(a=o.region0_count=_.bv_scf[B-2],n=o.region1_count=_.bv_scf[B-1],n=_.scalefac_band.l[a+n+2],a=_.scalefac_band.l[a+1],n<B){var O=new k(E);o.table_select[2]=R(m,n,B,O),E=O.bits}}else o.region0_count=7,o.region1_count=t.SBMAX_l-1-7-1,a=_.scalefac_band.l[7+1],n=B,a>n&&(a=n);if(a=Math.min(a,B),n=Math.min(n,B),0<a){var O=new k(E);o.table_select[0]=R(m,0,a,O),E=O.bits}if(a<n){var O=new k(E);o.table_select[1]=R(m,a,n,O),E=O.bits}if(_.use_best_huffman==2&&a0(),u!=null&&o.block_type==t.NORM_TYPE){for(var G=0;_.scalefac_band.l[G]<o.big_values;)G++;u.sfb_count1=G}return E},this.count_bits=function(_,o,u,m){var B=u.l3_enc,a=K0.IXMAX_VAL/f.IPOW20(u.global_gain);return u.xrpow_max>a?K0.LARGE_BITS:(b(o,B,f.IPOW20(u.global_gain),u,m),_.substep_shaping&2&&a0(),this.noquant_count_bits(_,u,m))};function M(_,o,u,m,B,a,n){for(var V=o.big_values,E=0;E<=7+15;E++)m[E]=K0.LARGE_BITS;for(var E=0;E<16;E++){var O=_.scalefac_band.l[E+1];if(O>=V)break;var G=0,Z=new k(G),e0=R(u,0,O,Z);G=Z.bits;for(var b0=0;b0<8;b0++){var R0=_.scalefac_band.l[E+b0+2];if(R0>=V)break;var M0=G;Z=new k(M0);var se=R(u,O,R0,Z);M0=Z.bits,m[E+b0]>M0&&(m[E+b0]=M0,B[E+b0]=E,a[E+b0]=e0,n[E+b0]=se)}}}function e(_,o,u,m,B,a,n,V){for(var E=o.big_values,O=2;O<t.SBMAX_l+1;O++){var G=_.scalefac_band.l[O];if(G>=E)break;var Z=B[O-2]+o.count1bits;if(u.part2_3_length<=Z)break;var e0=new k(Z),b0=R(m,G,E,e0);Z=e0.bits,!(u.part2_3_length<=Z)&&(u.assign(o),u.part2_3_length=Z,u.region0_count=a[O-2],u.region1_count=O-2-a[O-2],u.table_select[0]=n[O-2],u.table_select[1]=V[O-2],u.table_select[2]=b0)}}this.best_huffman_divide=function(_,o){var u=new ve,m=o.l3_enc,B=Y(7+15+1),a=Y(7+15+1),n=Y(7+15+1),V=Y(7+15+1);if(!(o.block_type==t.SHORT_TYPE&&_.mode_gr==1)){u.assign(o),o.block_type==t.NORM_TYPE&&(M(_,o,m,B,a,n,V),e(_,u,o,m,B,a,n,V));var E=u.big_values;if(!(E==0||(m[E-2]|m[E-1])>1)&&(E=o.count1+2,!(E>576))){u.assign(o),u.count1=E;for(var O=0,G=0;E>u.big_values;E-=4){var Z=((m[E-4]*2+m[E-3])*2+m[E-2])*2+m[E-1];O+=L.t32l[Z],G+=L.t33l[Z]}if(u.big_values=E,u.count1table_select=0,O>G&&(O=G,u.count1table_select=1),u.count1bits=O,u.block_type==t.NORM_TYPE)e(_,u,o,m,B,a,n,V);else{if(u.part2_3_length=O,O=_.scalefac_band.l[7+1],O>E&&(O=E),O>0){var e0=new k(u.part2_3_length);u.table_select[0]=R(m,0,O,e0),u.part2_3_length=e0.bits}if(E>O){var e0=new k(u.part2_3_length);u.table_select[1]=R(m,O,E,e0),u.part2_3_length=e0.bits}o.part2_3_length>u.part2_3_length&&o.assign(u)}}}};var i=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],h=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],T=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],c=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];V0.slen1_tab=T,V0.slen2_tab=c;function l(_,o){for(var u,m=o.tt[1][_],B=o.tt[0][_],a=0;a<L.scfsi_band.length-1;a++){for(u=L.scfsi_band[a];u<L.scfsi_band[a+1]&&!(B.scalefac[u]!=m.scalefac[u]&&m.scalefac[u]>=0);u++);if(u==L.scfsi_band[a+1]){for(u=L.scfsi_band[a];u<L.scfsi_band[a+1];u++)m.scalefac[u]=-1;o.scfsi[_][a]=1}}var n=0,V=0;for(u=0;u<11;u++)m.scalefac[u]!=-1&&(V++,n<m.scalefac[u]&&(n=m.scalefac[u]));for(var E=0,O=0;u<t.SBPSY_l;u++)m.scalefac[u]!=-1&&(O++,E<m.scalefac[u]&&(E=m.scalefac[u]));for(var a=0;a<16;a++)if(n<i[a]&&E<h[a]){var G=T[a]*V+c[a]*O;m.part2_length>G&&(m.part2_length=G,m.scalefac_compress=a)}}this.best_scalefac_store=function(_,o,u,m){var B=m.tt[o][u],a,n,V,E,O=0;for(V=0,a=0;a<B.sfbmax;a++){var G=B.width[a];for(V+=G,E=-G;E<0&&B.l3_enc[E+V]==0;E++);E==0&&(B.scalefac[a]=O=-2)}if(B.scalefac_scale==0&&B.preflag==0){var Z=0;for(a=0;a<B.sfbmax;a++)B.scalefac[a]>0&&(Z|=B.scalefac[a]);if(!(Z&1)&&Z!=0){for(a=0;a<B.sfbmax;a++)B.scalefac[a]>0&&(B.scalefac[a]>>=1);B.scalefac_scale=O=1}}if(B.preflag==0&&B.block_type!=t.SHORT_TYPE&&_.mode_gr==2){for(a=11;a<t.SBPSY_l&&!(B.scalefac[a]<f.pretab[a]&&B.scalefac[a]!=-2);a++);if(a==t.SBPSY_l){for(a=11;a<t.SBPSY_l;a++)B.scalefac[a]>0&&(B.scalefac[a]-=f.pretab[a]);B.preflag=O=1}}for(n=0;n<4;n++)m.scfsi[u][n]=0;for(_.mode_gr==2&&o==1&&m.tt[0][u].block_type!=t.SHORT_TYPE&&m.tt[1][u].block_type!=t.SHORT_TYPE&&(l(u,m),O=0),a=0;a<B.sfbmax;a++)B.scalefac[a]==-2&&(B.scalefac[a]=0);O!=0&&(_.mode_gr==2?this.scale_bitcount(B):this.scale_bitcount_lsf(_,B))};var v=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],s=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],x=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(_){var o,u,m=0,B=0,a,n=_.scalefac;if(_.block_type==t.SHORT_TYPE)a=v,_.mixed_block_flag!=0&&(a=s);else if(a=x,_.preflag==0){for(u=11;u<t.SBPSY_l&&!(n[u]<f.pretab[u]);u++);if(u==t.SBPSY_l)for(_.preflag=1,u=11;u<t.SBPSY_l;u++)n[u]-=f.pretab[u]}for(u=0;u<_.sfbdivide;u++)m<n[u]&&(m=n[u]);for(;u<_.sfbmax;u++)B<n[u]&&(B=n[u]);for(_.part2_length=K0.LARGE_BITS,o=0;o<16;o++)m<i[o]&&B<h[o]&&_.part2_length>a[o]&&(_.part2_length=a[o],_.scalefac_compress=o);return _.part2_length==K0.LARGE_BITS};var r=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(_,o){var u,m,B,a,n,V,E,O,G=Y(4),Z=o.scalefac;for(o.preflag!=0?u=2:u=0,E=0;E<4;E++)G[E]=0;if(o.block_type==t.SHORT_TYPE){m=1;var e0=f.nr_of_sfb_block[u][m];for(O=0,B=0;B<4;B++)for(a=e0[B]/3,E=0;E<a;E++,O++)for(n=0;n<3;n++)Z[O*3+n]>G[B]&&(G[B]=Z[O*3+n])}else{m=0;var e0=f.nr_of_sfb_block[u][m];for(O=0,B=0;B<4;B++)for(a=e0[B],E=0;E<a;E++,O++)Z[O]>G[B]&&(G[B]=Z[O])}for(V=!1,B=0;B<4;B++)G[B]>r[u][B]&&(V=!0);if(!V){var b0,R0,M0,se;for(o.sfb_partition_table=f.nr_of_sfb_block[u][m],B=0;B<4;B++)o.slen[B]=I[G[B]];switch(b0=o.slen[0],R0=o.slen[1],M0=o.slen[2],se=o.slen[3],u){case 0:o.scalefac_compress=(b0*5+R0<<4)+(M0<<2)+se;break;case 1:o.scalefac_compress=400+(b0*5+R0<<2)+M0;break;case 2:o.scalefac_compress=500+b0*3+R0;break}}if(!V)for(o.part2_length=0,B=0;B<4;B++)o.part2_length+=o.slen[B]*o.sfb_partition_table[B];return V};var I=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(_){for(var o=2;o<=576;o+=2){for(var u=0,m;_.scalefac_band.l[++u]<o;);for(m=H[u][0];_.scalefac_band.l[m+1]>o;)m--;for(m<0&&(m=H[u][0]),_.bv_scf[o-2]=m,m=H[u][1];_.scalefac_band.l[m+_.bv_scf[o-2]+2]>o;)m--;m<0&&(m=H[u][1]),_.bv_scf[o-1]=m}}}O0.STEPS_per_dB=100,O0.MAX_dB=120,O0.GAIN_NOT_ENOUGH_SAMPLES=-24601,O0.GAIN_ANALYSIS_ERROR=0,O0.GAIN_ANALYSIS_OK=1,O0.INIT_GAIN_ANALYSIS_ERROR=0,O0.INIT_GAIN_ANALYSIS_OK=1,O0.YULE_ORDER=10,O0.MAX_ORDER=O0.YULE_ORDER,O0.MAX_SAMP_FREQ=48e3,O0.RMS_WINDOW_TIME_NUMERATOR=1,O0.RMS_WINDOW_TIME_DENOMINATOR=20,O0.MAX_SAMPLES_PER_WINDOW=O0.MAX_SAMP_FREQ*O0.RMS_WINDOW_TIME_NUMERATOR/O0.RMS_WINDOW_TIME_DENOMINATOR+1;function O0(){}function Q0(){function f(b,C,K,w,F,d,X,R,M,e,i,h,T,c){this.quant_comp=C,this.quant_comp_s=K,this.safejoint=w,this.nsmsfix=F,this.st_lrm=d,this.st_s=X,this.nsbass=R,this.scale=M,this.masking_adj=e,this.ath_lower=i,this.ath_curve=h,this.interch=T,this.sfscale=c}var k;this.setModules=function(b){k=b};function H(b,C,K){a0()}var S=[new f(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new f(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new f(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new f(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new f(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new f(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new f(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new f(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new f(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new f(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new f(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new f(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new f(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new f(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new f(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new f(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new f(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function z(b,C,K){var w=C,F=k.nearestBitrateFullIndex(C);if(b.VBR=q.vbr_abr,b.VBR_mean_bitrate_kbps=w,b.VBR_mean_bitrate_kbps=Math.min(b.VBR_mean_bitrate_kbps,320),b.VBR_mean_bitrate_kbps=Math.max(b.VBR_mean_bitrate_kbps,8),b.brate=b.VBR_mean_bitrate_kbps,b.VBR_mean_bitrate_kbps>320&&(b.disable_reservoir=!0),S[F].safejoint>0&&(b.exp_nspsytune=b.exp_nspsytune|2),S[F].sfscale>0&&(b.internal_flags.noise_shaping=2),Math.abs(S[F].nsbass)>0){var d=int(S[F].nsbass*4);d<0&&(d+=64),b.exp_nspsytune=b.exp_nspsytune|d<<2}return K!=0?b.quant_comp=S[F].quant_comp:Math.abs(b.quant_comp- -1)>0||(b.quant_comp=S[F].quant_comp),K!=0?b.quant_comp_short=S[F].quant_comp_s:Math.abs(b.quant_comp_short- -1)>0||(b.quant_comp_short=S[F].quant_comp_s),K!=0?b.msfix=S[F].nsmsfix:Math.abs(b.msfix- -1)>0||(b.msfix=S[F].nsmsfix),K!=0?b.internal_flags.nsPsy.attackthre=S[F].st_lrm:Math.abs(b.internal_flags.nsPsy.attackthre- -1)>0||(b.internal_flags.nsPsy.attackthre=S[F].st_lrm),K!=0?b.internal_flags.nsPsy.attackthre_s=S[F].st_s:Math.abs(b.internal_flags.nsPsy.attackthre_s- -1)>0||(b.internal_flags.nsPsy.attackthre_s=S[F].st_s),K!=0?b.scale=S[F].scale:Math.abs(b.scale- -1)>0||(b.scale=S[F].scale),K!=0?b.maskingadjust=S[F].masking_adj:Math.abs(b.maskingadjust-0)>0||(b.maskingadjust=S[F].masking_adj),S[F].masking_adj>0?K!=0?b.maskingadjust_short=S[F].masking_adj*.9:Math.abs(b.maskingadjust_short-0)>0||(b.maskingadjust_short=S[F].masking_adj*.9):K!=0?b.maskingadjust_short=S[F].masking_adj*1.1:Math.abs(b.maskingadjust_short-0)>0||(b.maskingadjust_short=S[F].masking_adj*1.1),K!=0?b.ATHlower=-S[F].ath_lower/10:Math.abs(-b.ATHlower*10-0)>0||(b.ATHlower=-S[F].ath_lower/10),K!=0?b.ATHcurve=S[F].ath_curve:Math.abs(b.ATHcurve- -1)>0||(b.ATHcurve=S[F].ath_curve),K!=0?b.interChRatio=S[F].interch:Math.abs(b.interChRatio- -1)>0||(b.interChRatio=S[F].interch),C}this.apply_preset=function(b,C,K){switch(C){case i0.R3MIX:{C=i0.V3,b.VBR=q.vbr_mtrh;break}case i0.MEDIUM:{C=i0.V4,b.VBR=q.vbr_rh;break}case i0.MEDIUM_FAST:{C=i0.V4,b.VBR=q.vbr_mtrh;break}case i0.STANDARD:{C=i0.V2,b.VBR=q.vbr_rh;break}case i0.STANDARD_FAST:{C=i0.V2,b.VBR=q.vbr_mtrh;break}case i0.EXTREME:{C=i0.V0,b.VBR=q.vbr_rh;break}case i0.EXTREME_FAST:{C=i0.V0,b.VBR=q.vbr_mtrh;break}case i0.INSANE:return C=320,b.preset=C,z(b,C,K),b.VBR=q.vbr_off,C}switch(b.preset=C,C){case i0.V9:return H(),C;case i0.V8:return H(),C;case i0.V7:return H(),C;case i0.V6:return H(),C;case i0.V5:return H(),C;case i0.V4:return H(),C;case i0.V3:return H(),C;case i0.V2:return H(),C;case i0.V1:return H(),C;case i0.V0:return H(),C}return 8<=C&&C<=320?z(b,C,K):(b.preset=0,C)}}function U0(){var f;this.setModules=function(k){f=k},this.ResvFrameBegin=function(k,H){var S=k.internal_flags,z,b=S.l3_side,C=f.getframebits(k);H.bits=(C-S.sideinfo_len*8)/S.mode_gr;var K=8*256*S.mode_gr-8;k.brate>320?a0():(z=8*1440,k.strict_ISO&&a0()),S.ResvMax=z-C,S.ResvMax>K&&(S.ResvMax=K),(S.ResvMax<0||k.disable_reservoir)&&(S.ResvMax=0);var w=H.bits*S.mode_gr+Math.min(S.ResvSize,S.ResvMax);return w>z&&(w=z),b.resvDrain_pre=0,S.pinfo!=null&&a0(),w},this.ResvMaxBits=function(k,H,S,z){var b=k.internal_flags,C,K=b.ResvSize,w=b.ResvMax;z!=0&&(K+=H),b.substep_shaping&1&&(w*=.9),S.bits=H,K*10>w*9?(C=K-w*9/10,S.bits+=C,b.substep_shaping|=128):(C=0,b.substep_shaping&=127,!k.disable_reservoir&&!(b.substep_shaping&1)&&(S.bits-=.1*H));var F=K<b.ResvMax*6/10?K:b.ResvMax*6/10;return F-=C,F<0&&(F=0),F},this.ResvAdjust=function(k,H){k.ResvSize-=H.part2_3_length+H.part2_length},this.ResvFrameEnd=function(k,H){var S,z=k.l3_side;k.ResvSize+=H*k.mode_gr;var b=0;z.resvDrain_post=0,z.resvDrain_pre=0,(S=k.ResvSize%8)!=0&&(b+=S),S=k.ResvSize-b-k.ResvMax,S>0&&(b+=S);{var C=Math.min(z.main_data_begin*8,b)/8;z.resvDrain_pre+=8*C,b-=8*C,k.ResvSize-=8*C,z.main_data_begin-=C}z.resvDrain_post+=b,k.ResvSize-=b}}le.NUMTOCENTRIES=100,le.MAXFRAMESIZE=2880;function le(){this.setModules=function(H,S,z){};var f=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function k(H,S){var z=S^H;return S=S>>8^f[z&255],S}this.updateMusicCRC=function(H,S,z,b){for(var C=0;C<b;++C)H[0]=k(S[z+C],H[0])}}g0.EQ=function(f,k){return Math.abs(f)>Math.abs(k)?Math.abs(f-k)<=Math.abs(f)*1e-6:Math.abs(f-k)<=Math.abs(k)*1e-6},g0.NEQ=function(f,k){return!g0.EQ(f,k)};function g0(){var f=this,k=null,H=null;this.setModules=function(l,v,s,x){k=s,H=x};var S=null,z=0,b=0,C=0;this.getframebits=function(l){var v=l.internal_flags,s;v.bitrate_index!=0?s=L.bitrate_table[l.version][v.bitrate_index]:s=l.brate;var x=0|(l.version+1)*72e3*s/l.out_samplerate+v.padding;return 8*x};function K(l){W.arraycopy(l.header[l.w_ptr].buf,0,S,b,l.sideinfo_len),b+=l.sideinfo_len,z+=l.sideinfo_len*8,l.w_ptr=l.w_ptr+1&u0.MAX_HEADER_BUF-1}function w(l,v,s){for(;s>0;){var x;C==0&&(C=8,b++,l.header[l.w_ptr].write_timing==z&&K(l),S[b]=0),x=Math.min(s,C),s-=x,C-=x,S[b]|=v>>s<<C,z+=x}}function F(l,v){var s=l.internal_flags,x;if(v>=8&&(w(s,76,8),v-=8),v>=8&&(w(s,65,8),v-=8),v>=8&&(w(s,77,8),v-=8),v>=8&&(w(s,69,8),v-=8),v>=32){var r=k.getLameShortVersion();if(v>=32)for(x=0;x<r.length&&v>=8;++x)v-=8,w(s,r.charCodeAt(x),8)}for(;v>=1;v-=1)w(s,s.ancillary_flag,1),s.ancillary_flag^=l.disable_reservoir?0:1}function d(l,v,s){for(var x=l.header[l.h_ptr].ptr;s>0;){var r=Math.min(s,8-(x&7));s-=r,l.header[l.h_ptr].buf[x>>3]|=v>>s<<8-(x&7)-r,x+=r}l.header[l.h_ptr].ptr=x}function X(l,v){var s=l.internal_flags,x,r,I;if(x=s.l3_side,s.header[s.h_ptr].ptr=0,k0.fill(s.header[s.h_ptr].buf,0,s.sideinfo_len,0),l.out_samplerate<16e3?d(s,4094,12):d(s,4095,12),d(s,l.version,1),d(s,4-3,2),d(s,l.error_protection?0:1,1),d(s,s.bitrate_index,4),d(s,s.samplerate_index,2),d(s,s.padding,1),d(s,l.extension,1),d(s,l.mode.ordinal(),2),d(s,s.mode_ext,2),d(s,l.copyright,1),d(s,l.original,1),d(s,l.emphasis,2),l.error_protection&&d(s,0,16),l.version==1){for(d(s,x.main_data_begin,9),s.channels_out==2?d(s,x.private_bits,3):d(s,x.private_bits,5),I=0;I<s.channels_out;I++){var _;for(_=0;_<4;_++)d(s,x.scfsi[I][_],1)}for(r=0;r<2;r++)for(I=0;I<s.channels_out;I++){var o=x.tt[r][I];d(s,o.part2_3_length+o.part2_length,12),d(s,o.big_values/2,9),d(s,o.global_gain,8),d(s,o.scalefac_compress,4),o.block_type!=t.NORM_TYPE?(d(s,1,1),d(s,o.block_type,2),d(s,o.mixed_block_flag,1),o.table_select[0]==14&&(o.table_select[0]=16),d(s,o.table_select[0],5),o.table_select[1]==14&&(o.table_select[1]=16),d(s,o.table_select[1],5),d(s,o.subblock_gain[0],3),d(s,o.subblock_gain[1],3),d(s,o.subblock_gain[2],3)):(d(s,0,1),o.table_select[0]==14&&(o.table_select[0]=16),d(s,o.table_select[0],5),o.table_select[1]==14&&(o.table_select[1]=16),d(s,o.table_select[1],5),o.table_select[2]==14&&(o.table_select[2]=16),d(s,o.table_select[2],5),d(s,o.region0_count,4),d(s,o.region1_count,3)),d(s,o.preflag,1),d(s,o.scalefac_scale,1),d(s,o.count1table_select,1)}}else for(d(s,x.main_data_begin,8),d(s,x.private_bits,s.channels_out),r=0,I=0;I<s.channels_out;I++){var o=x.tt[r][I];d(s,o.part2_3_length+o.part2_length,12),d(s,o.big_values/2,9),d(s,o.global_gain,8),d(s,o.scalefac_compress,9),o.block_type!=t.NORM_TYPE?(d(s,1,1),d(s,o.block_type,2),d(s,o.mixed_block_flag,1),o.table_select[0]==14&&(o.table_select[0]=16),d(s,o.table_select[0],5),o.table_select[1]==14&&(o.table_select[1]=16),d(s,o.table_select[1],5),d(s,o.subblock_gain[0],3),d(s,o.subblock_gain[1],3),d(s,o.subblock_gain[2],3)):(d(s,0,1),o.table_select[0]==14&&(o.table_select[0]=16),d(s,o.table_select[0],5),o.table_select[1]==14&&(o.table_select[1]=16),d(s,o.table_select[1],5),o.table_select[2]==14&&(o.table_select[2]=16),d(s,o.table_select[2],5),d(s,o.region0_count,4),d(s,o.region1_count,3)),d(s,o.scalefac_scale,1),d(s,o.count1table_select,1)}l.error_protection&&a0();{var u=s.h_ptr;s.h_ptr=u+1&u0.MAX_HEADER_BUF-1,s.header[s.h_ptr].write_timing=s.header[u].write_timing+v,s.h_ptr==s.w_ptr}}function R(l,v){var s=L.ht[v.count1table_select+32],x,r=0,I=v.big_values,_=v.big_values;for(x=(v.count1-v.big_values)/4;x>0;--x){var o=0,u=0,m;m=v.l3_enc[I+0],m!=0&&(u+=8,v.xr[_+0]<0&&o++),m=v.l3_enc[I+1],m!=0&&(u+=4,o*=2,v.xr[_+1]<0&&o++),m=v.l3_enc[I+2],m!=0&&(u+=2,o*=2,v.xr[_+2]<0&&o++),m=v.l3_enc[I+3],m!=0&&(u++,o*=2,v.xr[_+3]<0&&o++),I+=4,_+=4,w(l,o+s.table[u],s.hlen[u]),r+=s.hlen[u]}return r}function M(l,v,s,x,r){var I=L.ht[v],_=0;if(v==0)return _;for(var o=s;o<x;o+=2){var u=0,m=0,B=I.xlen,a=I.xlen,n=0,V=r.l3_enc[o],E=r.l3_enc[o+1];if(V!=0&&(r.xr[o]<0&&n++,u--),v>15){if(V>14){var O=V-15;n|=O<<1,m=B,V=15}if(E>14){var G=E-15;n<<=B,n|=G,m+=B,E=15}a=16}E!=0&&(n<<=1,r.xr[o+1]<0&&n++,u--),V=V*a+E,m-=u,u+=I.hlen[V],w(l,I.table[V],u),w(l,n,m),_+=u+m}return _}function e(l,v){var s=3*l.scalefac_band.s[3];s>v.big_values&&(s=v.big_values);var x=M(l,v.table_select[0],0,s,v);return x+=M(l,v.table_select[1],s,v.big_values,v),x}function i(l,v){var s,x,r,I;s=v.big_values;var _=v.region0_count+1;return r=l.scalefac_band.l[_],_+=v.region1_count+1,I=l.scalefac_band.l[_],r>s&&(r=s),I>s&&(I=s),x=M(l,v.table_select[0],0,r,v),x+=M(l,v.table_select[1],r,I,v),x+=M(l,v.table_select[2],I,s,v),x}function h(l){var v,s,x,r,I=0,_=l.internal_flags,o=_.l3_side;if(l.version==1)for(v=0;v<2;v++)for(s=0;s<_.channels_out;s++){var u=o.tt[v][s],m=V0.slen1_tab[u.scalefac_compress],B=V0.slen2_tab[u.scalefac_compress];for(r=0,x=0;x<u.sfbdivide;x++)u.scalefac[x]!=-1&&(w(_,u.scalefac[x],m),r+=m);for(;x<u.sfbmax;x++)u.scalefac[x]!=-1&&(w(_,u.scalefac[x],B),r+=B);u.block_type==t.SHORT_TYPE?r+=e(_,u):r+=i(_,u),r+=R(_,u),I+=r}else for(v=0,s=0;s<_.channels_out;s++){var u=o.tt[v][s],a,n,V=0;if(r=0,x=0,n=0,u.block_type==t.SHORT_TYPE){for(;n<4;n++){var E=u.sfb_partition_table[n]/3,O=u.slen[n];for(a=0;a<E;a++,x++)w(_,Math.max(u.scalefac[x*3+0],0),O),w(_,Math.max(u.scalefac[x*3+1],0),O),w(_,Math.max(u.scalefac[x*3+2],0),O),V+=3*O}r+=e(_,u)}else{for(;n<4;n++){var E=u.sfb_partition_table[n],O=u.slen[n];for(a=0;a<E;a++,x++)w(_,Math.max(u.scalefac[x],0),O),V+=O}r+=i(_,u)}r+=R(_,u),I+=V+r}return I}function T(){this.total=0}function c(l,v){var s=l.internal_flags,x,r,I;return s.w_ptr,I=s.h_ptr-1,I==-1&&(I=u0.MAX_HEADER_BUF-1),x=s.header[I].write_timing-z,v.total=x,x>=0&&a0(),r=f.getframebits(l),x+=r,v.total+=r,v.total%8!=0?v.total=1+v.total/8:v.total=v.total/8,v.total+=b+1,x}this.flush_bitstream=function(l){var v=l.internal_flags,s,x;v.h_ptr-1,s=v.l3_side,!((x=c(l,new T))<0)&&(F(l,x),v.ResvSize=0,s.main_data_begin=0,v.findReplayGain&&a0(),v.findPeakSample&&a0())},this.format_bitstream=function(l){var v=l.internal_flags,s;s=v.l3_side;var x=this.getframebits(l);F(l,s.resvDrain_pre),X(l,x);var r=8*v.sideinfo_len;if(r+=h(l),F(l,s.resvDrain_post),r+=s.resvDrain_post,s.main_data_begin+=(x-r)/8,c(l,new T)!=v.ResvSize,s.main_data_begin*8!=v.ResvSize&&(v.ResvSize=s.main_data_begin*8),z>1e9){var I;for(I=0;I<u0.MAX_HEADER_BUF;++I)v.header[I].write_timing-=z;z=0}return 0},this.copy_buffer=function(l,v,s,x,r){var I=b+1;if(I<=0)return 0;if(x!=0&&I>x)return-1;if(W.arraycopy(S,0,v,s,I),b=-1,C=0,r!=0){var _=Y(1);_[0]=l.nMusicCRC,H.updateMusicCRC(_,v,s,I),l.nMusicCRC=_[0],I>0&&(l.VBR_seek_table.nBytesWritten+=I),l.decode_on_the_fly&&a0()}return I},this.init_bit_stream_w=function(l){S=ie(i0.LAME_MAXMP3BUFFER),l.h_ptr=l.w_ptr=0,l.header[l.h_ptr].write_timing=0,b=-1,C=0,z=0}}function v0(f,k,H,S){this.xlen=f,this.linmax=k,this.table=H,this.hlen=S}var L={};L.t1HB=[1,1,1,0],L.t2HB=[1,2,1,3,1,1,3,2,0],L.t3HB=[3,2,1,1,1,1,3,2,0],L.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0],L.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0],L.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0],L.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0],L.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0],L.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0],L.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0],L.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0],L.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1],L.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0],L.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3],L.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3],L.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16],L.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0],L.t1l=[1,4,3,5],L.t2l=[1,4,7,4,5,7,6,7,8],L.t3l=[2,3,7,4,4,7,6,7,8],L.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10],L.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9],L.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12],L.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13],L.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11],L.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13],L.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12],L.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12],L.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18],L.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15],L.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12],L.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10],L.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6],L.t32l=[1+0,4+1,4+1,5+2,4+1,6+2,5+2,6+3,4+1,5+2,5+2,6+3,5+2,6+3,6+3,6+4],L.t33l=[4+0,4+1,4+1,4+2,4+1,4+2,4+2,4+3,4+1,4+2,4+2,4+3,4+2,4+3,4+3,4+4],L.ht=[new v0(0,0,null,null),new v0(2,0,L.t1HB,L.t1l),new v0(3,0,L.t2HB,L.t2l),new v0(3,0,L.t3HB,L.t3l),new v0(0,0,null,null),new v0(4,0,L.t5HB,L.t5l),new v0(4,0,L.t6HB,L.t6l),new v0(6,0,L.t7HB,L.t7l),new v0(6,0,L.t8HB,L.t8l),new v0(6,0,L.t9HB,L.t9l),new v0(8,0,L.t10HB,L.t10l),new v0(8,0,L.t11HB,L.t11l),new v0(8,0,L.t12HB,L.t12l),new v0(16,0,L.t13HB,L.t13l),new v0(0,0,null,L.t16_5l),new v0(16,0,L.t15HB,L.t15l),new v0(1,1,L.t16HB,L.t16l),new v0(2,3,L.t16HB,L.t16l),new v0(3,7,L.t16HB,L.t16l),new v0(4,15,L.t16HB,L.t16l),new v0(6,63,L.t16HB,L.t16l),new v0(8,255,L.t16HB,L.t16l),new v0(10,1023,L.t16HB,L.t16l),new v0(13,8191,L.t16HB,L.t16l),new v0(4,15,L.t24HB,L.t24l),new v0(5,31,L.t24HB,L.t24l),new v0(6,63,L.t24HB,L.t24l),new v0(7,127,L.t24HB,L.t24l),new v0(8,255,L.t24HB,L.t24l),new v0(9,511,L.t24HB,L.t24l),new v0(11,2047,L.t24HB,L.t24l),new v0(13,8191,L.t24HB,L.t24l),new v0(0,0,L.t32HB,L.t32l),new v0(0,0,L.t33HB,L.t33l)],L.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366],L.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296],L.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369],L.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]],L.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]],L.scfsi_band=[0,6,11,16,21];function Y0(f){this.bits=f}function B0(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}function C0(){this.setModules=function(f,k){}}function be(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=U(t.SBMAX_l),this.s=U(t.SBMAX_s),this.psfb21=U(t.PSFB21),this.psfb12=U(t.PSFB12),this.cb_l=U(t.CBANDS),this.cb_s=U(t.CBANDS),this.eql_w=U(t.BLKSIZE/2)}function fe(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=p0.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}function we(f){var k=f;this.quantize=k,this.iteration_loop=function(H,S,z,b){var C=H.internal_flags,K=U(s0.SFBMAX),w=U(576),F=Y(2),d=0,X=C.l3_side,R=new Y0(d);this.quantize.rv.ResvFrameBegin(H,R),d=R.bits;for(var M=0;M<C.mode_gr;M++){this.quantize.qupvt.on_pe(H,S,F,d,M,M),C.mode_ext==t.MPG_MD_MS_LR&&a0();for(var e=0;e<C.channels_out;e++){var i,h,T=X.tt[M][e];T.block_type!=t.SHORT_TYPE?(i=0,h=C.PSY.mask_adjust-i):(i=0,h=C.PSY.mask_adjust_short-i),C.masking_lower=Math.pow(10,h*.1),this.quantize.init_outer_loop(C,T),this.quantize.init_xrpow(C,T,w)&&(this.quantize.qupvt.calc_xmin(H,b[M][e],T,K),this.quantize.outer_loop(H,T,K,w,e,F[e])),this.quantize.iteration_finish_one(C,M,e)}}this.quantize.rv.ResvFrameEnd(C,d)}}function de(){}function J0(f,k,H,S){this.l=Y(1+t.SBMAX_l),this.s=Y(1+t.SBMAX_s),this.psfb21=Y(1+t.PSFB21),this.psfb12=Y(1+t.PSFB12);var z=this.l,b=this.s;arguments.length==4&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],W.arraycopy(this.arrL,0,z,0,Math.min(this.arrL.length,this.l.length)),W.arraycopy(this.arrS,0,b,0,Math.min(this.arrS.length,this.s.length)),W.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),W.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}K0.Q_MAX=256+1,K0.Q_MAX2=116,K0.LARGE_BITS=1e5,K0.IXMAX_VAL=8206;function K0(){var f=null,k=null,H=null;this.setModules=function(c,l,v){f=c,k=l,H=v};function S(c){return X[c+K0.Q_MAX2]}this.IPOW20=function(c){return R[c]};var z=2220446049250313e-31,b=K0.IXMAX_VAL,C=b+2,K=K0.Q_MAX,w=K0.Q_MAX2,F=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var d=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=d,this.sfBandIndex=[new J0([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new J0([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new J0([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new J0([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new J0([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new J0([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new J0([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new J0([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new J0([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0/3,24/3,48/3,72/3,108/3,156/3,216/3,288/3,372/3,480/3,486/3,492/3,498/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var X=U(K+w+1),R=U(K),M=U(C),e=U(C);this.adj43=e;function i(c,l){var v=H.ATHformula(l,c);return v-=F,v=Math.pow(10,v/10+c.ATHlower),v}function h(c){for(var l=c.internal_flags.ATH.l,v=c.internal_flags.ATH.psfb21,s=c.internal_flags.ATH.s,x=c.internal_flags.ATH.psfb12,r=c.internal_flags,I=c.out_samplerate,_=0;_<t.SBMAX_l;_++){var o=r.scalefac_band.l[_],u=r.scalefac_band.l[_+1];l[_]=y0.MAX_VALUE;for(var m=o;m<u;m++){var B=m*I/1152,a=i(c,B);l[_]=Math.min(l[_],a)}}for(var _=0;_<t.PSFB21;_++){var o=r.scalefac_band.psfb21[_],u=r.scalefac_band.psfb21[_+1];v[_]=y0.MAX_VALUE;for(var m=o;m<u;m++){var B=m*I/1152,a=i(c,B);v[_]=Math.min(v[_],a)}}for(var _=0;_<t.SBMAX_s;_++){var o=r.scalefac_band.s[_],u=r.scalefac_band.s[_+1];s[_]=y0.MAX_VALUE;for(var m=o;m<u;m++){var B=m*I/384,a=i(c,B);s[_]=Math.min(s[_],a)}s[_]*=r.scalefac_band.s[_+1]-r.scalefac_band.s[_]}for(var _=0;_<t.PSFB12;_++){var o=r.scalefac_band.psfb12[_],u=r.scalefac_band.psfb12[_+1];x[_]=y0.MAX_VALUE;for(var m=o;m<u;m++){var B=m*I/384,a=i(c,B);x[_]=Math.min(x[_],a)}x[_]*=r.scalefac_band.s[13]-r.scalefac_band.s[12]}c.noATH&&a0(),r.ATH.floor=10*j0(i(c,-1))}this.iteration_init=function(c){var l=c.internal_flags,v=l.l3_side,s;if(l.iteration_init_init==0){for(l.iteration_init_init=1,v.main_data_begin=0,h(c),M[0]=0,s=1;s<C;s++)M[s]=Math.pow(s,4/3);for(s=0;s<C-1;s++)e[s]=s+1-Math.pow(.5*(M[s]+M[s+1]),.75);for(e[s]=.5,s=0;s<K;s++)R[s]=Math.pow(2,(s-210)*-.1875);for(s=0;s<=K+w;s++)X[s]=Math.pow(2,(s-210-w)*.25);f.huffman_init(l);{var x,r,I,_;for(s=c.exp_nspsytune>>2&63,s>=32&&(s-=64),x=Math.pow(10,s/4/10),s=c.exp_nspsytune>>8&63,s>=32&&(s-=64),r=Math.pow(10,s/4/10),s=c.exp_nspsytune>>14&63,s>=32&&(s-=64),I=Math.pow(10,s/4/10),s=c.exp_nspsytune>>20&63,s>=32&&(s-=64),_=I*Math.pow(10,s/4/10),s=0;s<t.SBMAX_l;s++){var o;s<=6?o=x:s<=13?o=r:s<=20?o=I:o=_,l.nsPsy.longfact[s]=o}for(s=0;s<t.SBMAX_s;s++){var o;s<=5?o=x:s<=10?o=r:s<=11?o=I:o=_,l.nsPsy.shortfact[s]=o}}}},this.on_pe=function(c,l,v,s,x,r){var I=c.internal_flags,_=0,o,u=Y(2),m,B=new Y0(_),a=k.ResvMaxBits(c,s,B,r);_=B.bits;var n=_+a;for(n>u0.MAX_BITS_PER_GRANULE&&(n=u0.MAX_BITS_PER_GRANULE),o=0,m=0;m<I.channels_out;++m)v[m]=Math.min(u0.MAX_BITS_PER_CHANNEL,_/I.channels_out),u[m]=0|v[m]*l[x][m]/700-v[m],u[m]>s*3/4&&(u[m]=s*3/4),u[m]<0&&(u[m]=0),u[m]+v[m]>u0.MAX_BITS_PER_CHANNEL&&(u[m]=Math.max(0,u0.MAX_BITS_PER_CHANNEL-v[m])),o+=u[m];if(o>a)for(m=0;m<I.channels_out;++m)u[m]=a*u[m]/o;for(m=0;m<I.channels_out;++m)v[m]+=u[m],a-=u[m];for(o=0,m=0;m<I.channels_out;++m)o+=v[m];return o>u0.MAX_BITS_PER_GRANULE&&a0(),n},this.athAdjust=function(c,l,v){var s=90.30873362,x=94.82444863,r=J.FAST_LOG10_X(l,10),I=c*c,_=0;return r-=v,I>1e-20&&(_=1+J.FAST_LOG10_X(I,10/s)),_<0&&(_=0),r*=_,r+=v+s-x,Math.pow(10,.1*r)},this.calc_xmin=function(c,l,v,s){var x=0,r=c.internal_flags,I,_=0,o=0,u=r.ATH,m=v.xr,B=c.VBR==q.vbr_mtrh?1:0,a=r.masking_lower;for((c.VBR==q.vbr_mtrh||c.VBR==q.vbr_mt)&&(a=1),I=0;I<v.psy_lmax;I++){var n,V,E,O,G,Z;c.VBR==q.vbr_rh||c.VBR==q.vbr_mtrh?V=athAdjust(u.adjust,u.l[I],u.floor):V=u.adjust*u.l[I],G=v.width[I],E=V/G,O=z,Z=G>>1,n=0;do{var e0,b0;e0=m[_]*m[_],n+=e0,O+=e0<E?e0:E,_++,b0=m[_]*m[_],n+=b0,O+=b0<E?b0:E,_++}while(--Z>0);if(n>V&&o++,I==t.SBPSY_l&&a0(),B!=0&&(V=O),!c.ATHonly){var R0=l.en.l[I];if(R0>0){var M0;M0=n*l.thm.l[I]*a/R0,B!=0&&(M0*=r.nsPsy.longfact[I]),V<M0&&(V=M0)}}B!=0?s[x++]=V:s[x++]=V*r.nsPsy.longfact[I]}var se=575;if(v.block_type!=t.SHORT_TYPE)for(var _e=576;_e--!=0&&g0.EQ(m[_e],0);)se=_e;v.max_nonzero_coeff=se;for(var ee=v.sfb_smin;I<v.psymax;ee++,I+=3){var G,re,ce;for(c.VBR==q.vbr_rh||c.VBR==q.vbr_mtrh?ce=athAdjust(u.adjust,u.s[ee],u.floor):ce=u.adjust*u.s[ee],G=v.width[I],re=0;re<3;re++){var n=0,V,E,O,Z=G>>1;E=ce/G,O=z;do{var e0,b0;e0=m[_]*m[_],n+=e0,O+=e0<E?e0:E,_++,b0=m[_]*m[_],n+=b0,O+=b0<E?b0:E,_++}while(--Z>0);if(n>ce&&o++,ee==t.SBPSY_s&&a0(),B!=0?V=O:V=ce,!c.ATHonly&&!c.ATHshort){var R0=l.en.s[ee][re];if(R0>0){var M0;M0=n*l.thm.s[ee][re]*a/R0,B!=0&&(M0*=r.nsPsy.shortfact[ee]),V<M0&&(V=M0)}}B!=0?s[x++]=V:s[x++]=V*r.nsPsy.shortfact[ee]}c.useTemporal&&(s[x-3]>s[x-3+1]&&(s[x-3+1]+=(s[x-3]-s[x-3+1])*r.decay),s[x-3+1]>s[x-3+2]&&(s[x-3+2]+=(s[x-3+1]-s[x-3+2])*r.decay))}return o};function T(c){this.s=c}this.calc_noise_core=function(c,l,v,s){var x=0,r=l.s,I=c.l3_enc;if(r>c.count1)for(;v--!=0;){var _;_=c.xr[r],r++,x+=_*_,_=c.xr[r],r++,x+=_*_}else if(r>c.big_values){var o=U(2);for(o[0]=0,o[1]=s;v--!=0;){var _;_=Math.abs(c.xr[r])-o[I[r]],r++,x+=_*_,_=Math.abs(c.xr[r])-o[I[r]],r++,x+=_*_}}else for(;v--!=0;){var _;_=Math.abs(c.xr[r])-M[I[r]]*s,r++,x+=_*_,_=Math.abs(c.xr[r])-M[I[r]]*s,r++,x+=_*_}return l.s=r,x},this.calc_noise=function(c,l,v,s,x){var r=0,I=0,_,o,u=0,m=0,B=0,a=-20,n=0,V=c.scalefac,E=0;for(s.over_SSD=0,_=0;_<c.psymax;_++){var O=c.global_gain-(V[E++]+(c.preflag!=0?d[_]:0)<<c.scalefac_scale+1)-c.subblock_gain[c.window[_]]*8,G=0;if(x!=null&&x.step[_]==O)G=x.noise[_],n+=c.width[_],v[r++]=G/l[I++],G=x.noise_log[_];else{var Z=S(O);if(o=c.width[_]>>1,n+c.width[_]>c.max_nonzero_coeff){var e0;e0=c.max_nonzero_coeff-n+1,e0>0?o=e0>>1:o=0}var b0=new T(n);G=this.calc_noise_core(c,b0,o,Z),n=b0.s,x!=null&&(x.step[_]=O,x.noise[_]=G),G=v[r++]=G/l[I++],G=J.FAST_LOG10(Math.max(G,1e-20)),x!=null&&(x.noise_log[_]=G)}if(x!=null&&(x.global_gain=c.global_gain),B+=G,G>0){var R0;R0=Math.max(0|G*10+.5,1),s.over_SSD+=R0*R0,u++,m+=G}a=Math.max(a,G)}return s.over_count=u,s.tot_noise=B,s.over_noise=m,s.max_noise=a,u}}function Be(){this.global_gain=0,this.sfb_count1=0,this.step=Y(39),this.noise=U(39),this.noise_log=U(39)}function ve(){this.xr=U(576),this.l3_enc=Y(576),this.scalefac=Y(s0.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=Y(3),this.subblock_gain=Y(3+1),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=Y(s0.SFBMAX),this.window=Y(s0.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=Y(4),this.max_nonzero_coeff=0;var f=this;function k(S){return new Int32Array(S)}function H(S){return new Float32Array(S)}this.assign=function(S){f.xr=H(S.xr),f.l3_enc=k(S.l3_enc),f.scalefac=k(S.scalefac),f.xrpow_max=S.xrpow_max,f.part2_3_length=S.part2_3_length,f.big_values=S.big_values,f.count1=S.count1,f.global_gain=S.global_gain,f.scalefac_compress=S.scalefac_compress,f.block_type=S.block_type,f.mixed_block_flag=S.mixed_block_flag,f.table_select=k(S.table_select),f.subblock_gain=k(S.subblock_gain),f.region0_count=S.region0_count,f.region1_count=S.region1_count,f.preflag=S.preflag,f.scalefac_scale=S.scalefac_scale,f.count1table_select=S.count1table_select,f.part2_length=S.part2_length,f.sfb_lmax=S.sfb_lmax,f.sfb_smin=S.sfb_smin,f.psy_lmax=S.psy_lmax,f.sfbmax=S.sfbmax,f.psymax=S.psymax,f.sfbdivide=S.sfbdivide,f.width=k(S.width),f.window=k(S.window),f.count1bits=S.count1bits,f.sfb_partition_table=S.sfb_partition_table.slice(0),f.slen=k(S.slen),f.max_nonzero_coeff=S.max_nonzero_coeff}}var s0={};s0.SFBMAX=t.SBMAX_s*3;function Fe(){this.rv=null;var f;this.qupvt=null;var k,H=new C0,S;this.setModules=function(e,i,h,T){f=i,this.rv=i,k=h,this.qupvt=h,S=T,H.setModules(k,S)};function z(e,i,h,T){T=0;for(var c=0;c<=h;++c){var l=Math.abs(e.xr[c]);T+=l,i[c]=Math.sqrt(l*Math.sqrt(l)),i[c]>e.xrpow_max&&(e.xrpow_max=i[c])}return T}this.init_xrpow=function(e,i,h){var T=0,c=0|i.max_nonzero_coeff;if(i.xrpow_max=0,k0.fill(h,c,576,0),T=z(i,h,c,T),T>1e-20){var l=0;e.substep_shaping&2&&(l=1);for(var v=0;v<i.psymax;v++)e.pseudohalf[v]=l;return!0}return k0.fill(i.l3_enc,0,576,0),!1};function b(e,i){var h=e.ATH,T=i.xr;if(i.block_type!=t.SHORT_TYPE)for(var c=!1,l=t.PSFB21-1;l>=0&&!c;l--){var v=e.scalefac_band.psfb21[l],s=e.scalefac_band.psfb21[l+1],x=k.athAdjust(h.adjust,h.psfb21[l],h.floor);e.nsPsy.longfact[21]>1e-12&&(x*=e.nsPsy.longfact[21]);for(var r=s-1;r>=v;r--)if(Math.abs(T[r])<x)T[r]=0;else{c=!0;break}}else for(var I=0;I<3;I++)for(var c=!1,l=t.PSFB12-1;l>=0&&!c;l--){var v=e.scalefac_band.s[12]*3+(e.scalefac_band.s[13]-e.scalefac_band.s[12])*I+(e.scalefac_band.psfb12[l]-e.scalefac_band.psfb12[0]),s=v+(e.scalefac_band.psfb12[l+1]-e.scalefac_band.psfb12[l]),_=k.athAdjust(h.adjust,h.psfb12[l],h.floor);e.nsPsy.shortfact[12]>1e-12&&(_*=e.nsPsy.shortfact[12]);for(var r=s-1;r>=v;r--)if(Math.abs(T[r])<_)T[r]=0;else{c=!0;break}}}this.init_outer_loop=function(e,i){i.part2_3_length=0,i.big_values=0,i.count1=0,i.global_gain=210,i.scalefac_compress=0,i.table_select[0]=0,i.table_select[1]=0,i.table_select[2]=0,i.subblock_gain[0]=0,i.subblock_gain[1]=0,i.subblock_gain[2]=0,i.subblock_gain[3]=0,i.region0_count=0,i.region1_count=0,i.preflag=0,i.scalefac_scale=0,i.count1table_select=0,i.part2_length=0,i.sfb_lmax=t.SBPSY_l,i.sfb_smin=t.SBPSY_s,i.psy_lmax=e.sfb21_extra?t.SBMAX_l:t.SBPSY_l,i.psymax=i.psy_lmax,i.sfbmax=i.sfb_lmax,i.sfbdivide=11;for(var h=0;h<t.SBMAX_l;h++)i.width[h]=e.scalefac_band.l[h+1]-e.scalefac_band.l[h],i.window[h]=3;if(i.block_type==t.SHORT_TYPE){var T=U(576);i.sfb_smin=0,i.sfb_lmax=0,i.mixed_block_flag!=0&&a0(),i.psymax=i.sfb_lmax+3*((e.sfb21_extra?t.SBMAX_s:t.SBPSY_s)-i.sfb_smin),i.sfbmax=i.sfb_lmax+3*(t.SBPSY_s-i.sfb_smin),i.sfbdivide=i.sfbmax-18,i.psy_lmax=i.sfb_lmax;var c=e.scalefac_band.l[i.sfb_lmax];W.arraycopy(i.xr,0,T,0,576);for(var h=i.sfb_smin;h<t.SBMAX_s;h++)for(var l=e.scalefac_band.s[h],v=e.scalefac_band.s[h+1],s=0;s<3;s++)for(var x=l;x<v;x++)i.xr[c++]=T[3*x+s];for(var r=i.sfb_lmax,h=i.sfb_smin;h<t.SBMAX_s;h++)i.width[r]=i.width[r+1]=i.width[r+2]=e.scalefac_band.s[h+1]-e.scalefac_band.s[h],i.window[r]=0,i.window[r+1]=1,i.window[r+2]=2,r+=3}i.count1bits=0,i.sfb_partition_table=k.nr_of_sfb_block[0][0],i.slen[0]=0,i.slen[1]=0,i.slen[2]=0,i.slen[3]=0,i.max_nonzero_coeff=575,k0.fill(i.scalefac,0),b(e,i)};function C(e){this.ordinal=e}C.BINSEARCH_NONE=new C(0),C.BINSEARCH_UP=new C(1),C.BINSEARCH_DOWN=new C(2);function K(e,i,h,T,c){var l,v=e.CurrentStep[T],s=!1,x=e.OldValue[T],r=C.BINSEARCH_NONE;for(i.global_gain=x,h-=i.part2_length;;){var I;if(l=S.count_bits(e,c,i,null),v==1||l==h)break;l>h?(r==C.BINSEARCH_DOWN&&(s=!0),s&&(v/=2),r=C.BINSEARCH_UP,I=v):(r==C.BINSEARCH_UP&&(s=!0),s&&(v/=2),r=C.BINSEARCH_DOWN,I=-v),i.global_gain+=I,i.global_gain<0&&a0(),i.global_gain>255&&a0()}for(;l>h&&i.global_gain<255;)i.global_gain++,l=S.count_bits(e,c,i,null);return e.CurrentStep[T]=x-i.global_gain>=4?4:2,e.OldValue[T]=i.global_gain,i.part2_3_length=l,l}function w(e){for(var i=0;i<e.sfbmax;i++)if(e.scalefac[i]+e.subblock_gain[e.window[i]]==0)return!1;return!0}function F(e,i,h,T,c){var l;switch(e){default:case 9:{i.over_count>0?(l=h.over_SSD<=i.over_SSD,h.over_SSD==i.over_SSD&&(l=h.bits<i.bits)):l=h.max_noise<0&&h.max_noise*10+h.bits<=i.max_noise*10+i.bits;break}case 0:l=h.over_count<i.over_count||h.over_count==i.over_count&&h.over_noise<i.over_noise||h.over_count==i.over_count&&g0.EQ(h.over_noise,i.over_noise)&&h.tot_noise<i.tot_noise;break;case 8:a0();case 1:l=h.max_noise<i.max_noise;break;case 2:l=h.tot_noise<i.tot_noise;break;case 3:l=h.tot_noise<i.tot_noise&&h.max_noise<i.max_noise;break;case 4:l=h.max_noise<=0&&i.max_noise>.2||h.max_noise<=0&&i.max_noise<0&&i.max_noise>h.max_noise-.2&&h.tot_noise<i.tot_noise||h.max_noise<=0&&i.max_noise>0&&i.max_noise>h.max_noise-.2&&h.tot_noise<i.tot_noise+i.over_noise||h.max_noise>0&&i.max_noise>-.05&&i.max_noise>h.max_noise-.1&&h.tot_noise+h.over_noise<i.tot_noise+i.over_noise||h.max_noise>0&&i.max_noise>-.1&&i.max_noise>h.max_noise-.15&&h.tot_noise+h.over_noise+h.over_noise<i.tot_noise+i.over_noise+i.over_noise;break;case 5:l=h.over_noise<i.over_noise||g0.EQ(h.over_noise,i.over_noise)&&h.tot_noise<i.tot_noise;break;case 6:l=h.over_noise<i.over_noise||g0.EQ(h.over_noise,i.over_noise)&&(h.max_noise<i.max_noise||g0.EQ(h.max_noise,i.max_noise)&&h.tot_noise<=i.tot_noise);break;case 7:l=h.over_count<i.over_count||h.over_noise<i.over_noise;break}return i.over_count==0&&(l=l&&h.bits<i.bits),l}function d(e,i,h,T,c){var l=e.internal_flags,v;i.scalefac_scale==0?v=1.2968395546510096:v=1.6817928305074292;for(var s=0,x=0;x<i.sfbmax;x++)s<h[x]&&(s=h[x]);var r=l.noise_shaping_amp;switch(r==3&&a0(),r){case 2:break;case 1:s>1?s=Math.pow(s,.5):s*=.95;break;case 0:default:s>1?s=1:s*=.95;break}for(var I=0,x=0;x<i.sfbmax;x++){var _=i.width[x],o;if(I+=_,!(h[x]<s)){for(l.substep_shaping&2&&a0(),i.scalefac[x]++,o=-_;o<0;o++)T[I+o]*=v,T[I+o]>i.xrpow_max&&(i.xrpow_max=T[I+o]);if(l.noise_shaping_amp==2)return}}}function X(e,i){for(var h=1.2968395546510096,T=0,c=0;c<e.sfbmax;c++){var l=e.width[c],v=e.scalefac[c];if(e.preflag!=0&&(v+=k.pretab[c]),T+=l,v&1){v++;for(var s=-l;s<0;s++)i[T+s]*=h,i[T+s]>e.xrpow_max&&(e.xrpow_max=i[T+s])}e.scalefac[c]=v>>1}e.preflag=0,e.scalefac_scale=1}function R(e,i,h){var T,c=i.scalefac;for(T=0;T<i.sfb_lmax;T++)if(c[T]>=16)return!0;for(var l=0;l<3;l++){var v=0,s=0;for(T=i.sfb_lmax+l;T<i.sfbdivide;T+=3)v<c[T]&&(v=c[T]);for(;T<i.sfbmax;T+=3)s<c[T]&&(s=c[T]);if(!(v<16&&s<8)){if(i.subblock_gain[l]>=7)return!0;i.subblock_gain[l]++;var x=e.scalefac_band.l[i.sfb_lmax];for(T=i.sfb_lmax+l;T<i.sfbmax;T+=3){var r,I=i.width[T],_=c[T];if(_=_-(4>>i.scalefac_scale),_>=0){c[T]=_,x+=I*3;continue}c[T]=0;{var o=210+(_<<i.scalefac_scale+1);r=k.IPOW20(o)}x+=I*(l+1);for(var u=-I;u<0;u++)h[x+u]*=r,h[x+u]>i.xrpow_max&&(i.xrpow_max=h[x+u]);x+=I*(3-l-1)}{var r=k.IPOW20(202);x+=i.width[T]*(l+1);for(var u=-i.width[T];u<0;u++)h[x+u]*=r,h[x+u]>i.xrpow_max&&(i.xrpow_max=h[x+u])}}}return!1}function M(e,i,h,T,c){var l=e.internal_flags;d(e,i,h,T);var v=w(i);return v?!1:(l.mode_gr==2?v=S.scale_bitcount(i):v=S.scale_bitcount_lsf(l,i),v?(l.noise_shaping>1&&(k0.fill(l.pseudohalf,0),i.scalefac_scale==0?(X(i,T),v=!1):i.block_type==t.SHORT_TYPE&&l.subblock_gain>0&&(v=R(l,i,T)||w(i))),v||(l.mode_gr==2?v=S.scale_bitcount(i):v=S.scale_bitcount_lsf(l,i)),!v):!0)}this.outer_loop=function(e,i,h,T,c,l){var v=e.internal_flags,s=new ve,x=U(576),r=U(s0.SFBMAX),I=new B0,_,o=new Be,u=9999999,m=!1,B=!1,a=0;if(K(v,i,l,c,T),v.noise_shaping==0)return 100;k.calc_noise(i,h,r,I,o),I.bits=i.part2_3_length,s.assign(i);var n=0;for(W.arraycopy(T,0,x,0,576);!m;){do{var V=new B0,E,O=255;if(v.substep_shaping&2?E=20:E=3,v.sfb21_extra&&a0(),!M(e,s,r,T))break;s.scalefac_scale!=0&&(O=254);var G=l-s.part2_length;if(G<=0)break;for(;(s.part2_3_length=S.count_bits(v,T,s,o))>G&&s.global_gain<=O;)s.global_gain++;if(s.global_gain>O)break;if(I.over_count==0){for(;(s.part2_3_length=S.count_bits(v,T,s,o))>u&&s.global_gain<=O;)s.global_gain++;if(s.global_gain>O)break}if(k.calc_noise(s,h,r,V,o),V.bits=s.part2_3_length,i.block_type!=t.SHORT_TYPE?_=e.quant_comp:_=e.quant_comp_short,_=F(_,I,V)?1:0,_!=0)u=i.part2_3_length,I=V,i.assign(s),n=0,W.arraycopy(T,0,x,0,576);else if(v.full_outer_loop==0&&(++n>E&&I.over_count==0||v.noise_shaping_amp==3&&B&&n>30||v.noise_shaping_amp==3&&B&&s.global_gain-a>15))break}while(s.global_gain+s.scalefac_scale<255);v.noise_shaping_amp==3?a0():m=!0}return e.VBR==q.vbr_rh||e.VBR==q.vbr_mtrh?W.arraycopy(x,0,T,0,576):v.substep_shaping&1&&a0(),I.over_count},this.iteration_finish_one=function(e,i,h){var T=e.l3_side,c=T.tt[i][h];S.best_scalefac_store(e,i,h,T),e.use_best_huffman==1&&S.best_huffman_divide(e,c),f.ResvAdjust(e,c)}}function p(){var f=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*J.SQRT2*.5/2384e-9,.017876148*J.SQRT2*.5/2384e-9,.003134727*J.SQRT2*.5/2384e-9,.002457142*J.SQRT2*.5/2384e-9,971317e-9*J.SQRT2*.5/2384e-9,218868e-9*J.SQRT2*.5/2384e-9,101566e-9*J.SQRT2*.5/2384e-9,13828e-9*J.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],k=12,H=36,S=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],z=S[t.SHORT_TYPE],b=S[t.SHORT_TYPE],C=S[t.SHORT_TYPE],K=S[t.SHORT_TYPE],w=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function F(R,M,e){for(var i=10,h=M+238-14-286,T=-15;T<0;T++){var c,l,v;c=f[i+-10],l=R[h+-224]*c,v=R[M+224]*c,c=f[i+-9],l+=R[h+-160]*c,v+=R[M+160]*c,c=f[i+-8],l+=R[h+-96]*c,v+=R[M+96]*c,c=f[i+-7],l+=R[h+-32]*c,v+=R[M+32]*c,c=f[i+-6],l+=R[h+32]*c,v+=R[M+-32]*c,c=f[i+-5],l+=R[h+96]*c,v+=R[M+-96]*c,c=f[i+-4],l+=R[h+160]*c,v+=R[M+-160]*c,c=f[i+-3],l+=R[h+224]*c,v+=R[M+-224]*c,c=f[i+-2],l+=R[M+-256]*c,v-=R[h+256]*c,c=f[i+-1],l+=R[M+-192]*c,v-=R[h+192]*c,c=f[i+0],l+=R[M+-128]*c,v-=R[h+128]*c,c=f[i+1],l+=R[M+-64]*c,v-=R[h+64]*c,c=f[i+2],l+=R[M+0]*c,v-=R[h+0]*c,c=f[i+3],l+=R[M+64]*c,v-=R[h+-64]*c,c=f[i+4],l+=R[M+128]*c,v-=R[h+-128]*c,c=f[i+5],l+=R[M+192]*c,v-=R[h+-192]*c,l*=f[i+6],c=v-l,e[30+T*2]=v+l,e[31+T*2]=f[i+7]*c,i+=18,M--,h++}{var l,v,s,x;v=R[M+-16]*f[i+-10],l=R[M+-32]*f[i+-2],v+=(R[M+-48]-R[M+16])*f[i+-9],l+=R[M+-96]*f[i+-1],v+=(R[M+-80]+R[M+48])*f[i+-8],l+=R[M+-160]*f[i+0],v+=(R[M+-112]-R[M+80])*f[i+-7],l+=R[M+-224]*f[i+1],v+=(R[M+-144]+R[M+112])*f[i+-6],l-=R[M+32]*f[i+2],v+=(R[M+-176]-R[M+144])*f[i+-5],l-=R[M+96]*f[i+3],v+=(R[M+-208]+R[M+176])*f[i+-4],l-=R[M+160]*f[i+4],v+=(R[M+-240]-R[M+208])*f[i+-3],l-=R[M+224],s=l-v,x=l+v,v=e[14],l=e[15]-v,e[31]=x+v,e[30]=s+l,e[15]=s-l,e[14]=x-v}{var r;r=e[28]-e[0],e[0]+=e[28],e[28]=r*f[i+-2*18+7],r=e[29]-e[1],e[1]+=e[29],e[29]=r*f[i+-2*18+7],r=e[26]-e[2],e[2]+=e[26],e[26]=r*f[i+-4*18+7],r=e[27]-e[3],e[3]+=e[27],e[27]=r*f[i+-4*18+7],r=e[24]-e[4],e[4]+=e[24],e[24]=r*f[i+-6*18+7],r=e[25]-e[5],e[5]+=e[25],e[25]=r*f[i+-6*18+7],r=e[22]-e[6],e[6]+=e[22],e[22]=r*J.SQRT2,r=e[23]-e[7],e[7]+=e[23],e[23]=r*J.SQRT2-e[7],e[7]-=e[6],e[22]-=e[7],e[23]-=e[22],r=e[6],e[6]=e[31]-r,e[31]=e[31]+r,r=e[7],e[7]=e[30]-r,e[30]=e[30]+r,r=e[22],e[22]=e[15]-r,e[15]=e[15]+r,r=e[23],e[23]=e[14]-r,e[14]=e[14]+r,r=e[20]-e[8],e[8]+=e[20],e[20]=r*f[i+-10*18+7],r=e[21]-e[9],e[9]+=e[21],e[21]=r*f[i+-10*18+7],r=e[18]-e[10],e[10]+=e[18],e[18]=r*f[i+-12*18+7],r=e[19]-e[11],e[11]+=e[19],e[19]=r*f[i+-12*18+7],r=e[16]-e[12],e[12]+=e[16],e[16]=r*f[i+-14*18+7],r=e[17]-e[13],e[13]+=e[17],e[17]=r*f[i+-14*18+7],r=-e[20]+e[24],e[20]+=e[24],e[24]=r*f[i+-12*18+7],r=-e[21]+e[25],e[21]+=e[25],e[25]=r*f[i+-12*18+7],r=e[4]-e[8],e[4]+=e[8],e[8]=r*f[i+-12*18+7],r=e[5]-e[9],e[5]+=e[9],e[9]=r*f[i+-12*18+7],r=e[0]-e[12],e[0]+=e[12],e[12]=r*f[i+-4*18+7],r=e[1]-e[13],e[1]+=e[13],e[13]=r*f[i+-4*18+7],r=e[16]-e[28],e[16]+=e[28],e[28]=r*f[i+-4*18+7],r=-e[17]+e[29],e[17]+=e[29],e[29]=r*f[i+-4*18+7],r=J.SQRT2*(e[2]-e[10]),e[2]+=e[10],e[10]=r,r=J.SQRT2*(e[3]-e[11]),e[3]+=e[11],e[11]=r,r=J.SQRT2*(-e[18]+e[26]),e[18]+=e[26],e[26]=r-e[18],r=J.SQRT2*(-e[19]+e[27]),e[19]+=e[27],e[27]=r-e[19],r=e[2],e[19]-=e[3],e[3]-=r,e[2]=e[31]-r,e[31]+=r,r=e[3],e[11]-=e[19],e[18]-=r,e[3]=e[30]-r,e[30]+=r,r=e[18],e[27]-=e[11],e[19]-=r,e[18]=e[15]-r,e[15]+=r,r=e[19],e[10]-=r,e[19]=e[14]-r,e[14]+=r,r=e[10],e[11]-=r,e[10]=e[23]-r,e[23]+=r,r=e[11],e[26]-=r,e[11]=e[22]-r,e[22]+=r,r=e[26],e[27]-=r,e[26]=e[7]-r,e[7]+=r,r=e[27],e[27]=e[6]-r,e[6]+=r,r=J.SQRT2*(e[0]-e[4]),e[0]+=e[4],e[4]=r,r=J.SQRT2*(e[1]-e[5]),e[1]+=e[5],e[5]=r,r=J.SQRT2*(e[16]-e[20]),e[16]+=e[20],e[20]=r,r=J.SQRT2*(e[17]-e[21]),e[17]+=e[21],e[21]=r,r=-J.SQRT2*(e[8]-e[12]),e[8]+=e[12],e[12]=r-e[8],r=-J.SQRT2*(e[9]-e[13]),e[9]+=e[13],e[13]=r-e[9],r=-J.SQRT2*(e[25]-e[29]),e[25]+=e[29],e[29]=r-e[25],r=-J.SQRT2*(e[24]+e[28]),e[24]-=e[28],e[28]=r-e[24],r=e[24]-e[16],e[24]=r,r=e[20]-r,e[20]=r,r=e[28]-r,e[28]=r,r=e[25]-e[17],e[25]=r,r=e[21]-r,e[21]=r,r=e[29]-r,e[29]=r,r=e[17]-e[1],e[17]=r,r=e[9]-r,e[9]=r,r=e[25]-r,e[25]=r,r=e[5]-r,e[5]=r,r=e[21]-r,e[21]=r,r=e[13]-r,e[13]=r,r=e[29]-r,e[29]=r,r=e[1]-e[0],e[1]=r,r=e[16]-r,e[16]=r,r=e[17]-r,e[17]=r,r=e[8]-r,e[8]=r,r=e[9]-r,e[9]=r,r=e[24]-r,e[24]=r,r=e[25]-r,e[25]=r,r=e[4]-r,e[4]=r,r=e[5]-r,e[5]=r,r=e[20]-r,e[20]=r,r=e[21]-r,e[21]=r,r=e[12]-r,e[12]=r,r=e[13]-r,e[13]=r,r=e[28]-r,e[28]=r,r=e[29]-r,e[29]=r,r=e[0],e[0]+=e[31],e[31]-=r,r=e[1],e[1]+=e[30],e[30]-=r,r=e[16],e[16]+=e[15],e[15]-=r,r=e[17],e[17]+=e[14],e[14]-=r,r=e[8],e[8]+=e[23],e[23]-=r,r=e[9],e[9]+=e[22],e[22]-=r,r=e[24],e[24]+=e[7],e[7]-=r,r=e[25],e[25]+=e[6],e[6]-=r,r=e[4],e[4]+=e[27],e[27]-=r,r=e[5],e[5]+=e[26],e[26]-=r,r=e[20],e[20]+=e[11],e[11]-=r,r=e[21],e[21]+=e[10],e[10]-=r,r=e[12],e[12]+=e[19],e[19]-=r,r=e[13],e[13]+=e[18],e[18]-=r,r=e[28],e[28]+=e[3],e[3]-=r,r=e[29],e[29]+=e[2],e[2]-=r}}function d(R,M){for(var e=0;e<3;e++){var i,h,T,c,l,v;c=R[M+2*3]*S[t.SHORT_TYPE][0]-R[M+5*3],i=R[M+0*3]*S[t.SHORT_TYPE][2]-R[M+3*3],h=c+i,T=c-i,c=R[M+5*3]*S[t.SHORT_TYPE][0]+R[M+2*3],i=R[M+3*3]*S[t.SHORT_TYPE][2]+R[M+0*3],l=c+i,v=-c+i,i=(R[M+1*3]*S[t.SHORT_TYPE][1]-R[M+4*3])*2069978111953089e-26,c=(R[M+4*3]*S[t.SHORT_TYPE][1]+R[M+1*3])*2069978111953089e-26,R[M+3*0]=h*190752519173728e-25+i,R[M+3*5]=-l*190752519173728e-25+c,T=T*.8660254037844387*1907525191737281e-26,l=l*.5*1907525191737281e-26+c,R[M+3*1]=T-l,R[M+3*2]=T+l,h=h*.5*1907525191737281e-26-i,v=v*.8660254037844387*1907525191737281e-26,R[M+3*3]=h+v,R[M+3*4]=h-v,M++}}function X(R,M,e){var i,h;{var T,c,l,v,s,x,r,I;T=e[17]-e[9],l=e[15]-e[11],v=e[14]-e[12],s=e[0]+e[8],x=e[1]+e[7],r=e[2]+e[6],I=e[3]+e[5],R[M+17]=s+r-I-(x-e[4]),h=(s+r-I)*b[12+7]+(x-e[4]),i=(T-l-v)*b[12+6],R[M+5]=i+h,R[M+6]=i-h,c=(e[16]-e[10])*b[12+6],x=x*b[12+7]+e[4],i=T*b[12+0]+c+l*b[12+1]+v*b[12+2],h=-s*b[12+4]+x-r*b[12+5]+I*b[12+3],R[M+1]=i+h,R[M+2]=i-h,i=T*b[12+1]-c-l*b[12+2]+v*b[12+0],h=-s*b[12+5]+x-r*b[12+3]+I*b[12+4],R[M+9]=i+h,R[M+10]=i-h,i=T*b[12+2]-c+l*b[12+0]-v*b[12+1],h=s*b[12+3]-x+r*b[12+4]-I*b[12+5],R[M+13]=i+h,R[M+14]=i-h}{var _,o,u,m,B,a,n,V;_=e[8]-e[0],u=e[6]-e[2],m=e[5]-e[3],B=e[17]+e[9],a=e[16]+e[10],n=e[15]+e[11],V=e[14]+e[12],R[M+0]=B+n+V+(a+e[13]),i=(B+n+V)*b[12+7]-(a+e[13]),h=(_-u+m)*b[12+6],R[M+11]=i+h,R[M+12]=i-h,o=(e[7]-e[1])*b[12+6],a=e[13]-a*b[12+7],i=B*b[12+3]-a+n*b[12+4]+V*b[12+5],h=_*b[12+2]+o+u*b[12+0]+m*b[12+1],R[M+3]=i+h,R[M+4]=i-h,i=-B*b[12+5]+a-n*b[12+3]-V*b[12+4],h=_*b[12+1]+o-u*b[12+2]-m*b[12+0],R[M+7]=i+h,R[M+8]=i-h,i=-B*b[12+4]+a-n*b[12+5]-V*b[12+3],h=_*b[12+0]-o+u*b[12+1]-m*b[12+2],R[M+15]=i+h,R[M+16]=i-h}}this.mdct_sub48=function(R,M,e){for(var i=M,h=286,T=0;T<R.channels_out;T++){for(var c=0;c<R.mode_gr;c++){for(var l,v=R.l3_side.tt[c][T],s=v.xr,x=0,r=R.sb_sample[T][1-c],I=0,_=0;_<18/2;_++)for(F(i,h,r[I]),F(i,h+32,r[I+1]),I+=2,h+=64,l=1;l<32;l+=2)r[I-1][l]*=-1;for(l=0;l<32;l++,x+=18){var o=v.block_type,u=R.sb_sample[T][c],m=R.sb_sample[T][1-c];if(v.mixed_block_flag!=0&&l<2&&(o=0),R.amp_filter[l]<1e-12)k0.fill(s,x+0,x+18,0);else if(R.amp_filter[l]<1&&a0(),o==t.SHORT_TYPE){for(var _=-k/4;_<0;_++){var B=S[t.SHORT_TYPE][_+3];s[x+_*3+9]=u[9+_][w[l]]*B-u[8-_][w[l]],s[x+_*3+18]=u[14-_][w[l]]*B+u[15+_][w[l]],s[x+_*3+10]=u[15+_][w[l]]*B-u[14-_][w[l]],s[x+_*3+19]=m[2-_][w[l]]*B+m[3+_][w[l]],s[x+_*3+11]=m[3+_][w[l]]*B-m[2-_][w[l]],s[x+_*3+20]=m[8-_][w[l]]*B+m[9+_][w[l]]}d(s,x)}else{for(var a=U(18),_=-H/4;_<0;_++){var n,V;n=S[o][_+27]*m[_+9][w[l]]+S[o][_+36]*m[8-_][w[l]],V=S[o][_+9]*u[_+9][w[l]]-S[o][_+18]*u[8-_][w[l]],a[_+9]=n-V*z[3+_+9],a[_+18]=n*z[3+_+9]+V}X(s,x,a)}if(o!=t.SHORT_TYPE&&l!=0)for(var _=7;_>=0;--_){var E,O;E=s[x+_]*C[20+_]+s[x+-1-_]*K[28+_],O=s[x+_]*K[28+_]-s[x+-1-_]*C[20+_],s[x+-1-_]=E,s[x+_]=O}}}if(i=e,h=286,R.mode_gr==1)for(var G=0;G<18;G++)W.arraycopy(R.sb_sample[T][1][G],0,R.sb_sample[T][0][G],0,32)}}}function A(){this.thm=new $,this.en=new $}t.ENCDELAY=576,t.POSTDELAY=1152,t.MDCTDELAY=48,t.FFTOFFSET=224+t.MDCTDELAY,t.DECDELAY=528,t.SBLIMIT=32,t.CBANDS=64,t.SBPSY_l=21,t.SBPSY_s=12,t.SBMAX_l=22,t.SBMAX_s=13,t.PSFB21=6,t.PSFB12=6,t.BLKSIZE=1024,t.HBLKSIZE=t.BLKSIZE/2+1,t.BLKSIZE_s=256,t.HBLKSIZE_s=t.BLKSIZE_s/2+1,t.NORM_TYPE=0,t.START_TYPE=1,t.SHORT_TYPE=2,t.STOP_TYPE=3,t.MPG_MD_LR_LR=0,t.MPG_MD_LR_I=1,t.MPG_MD_MS_LR=2,t.MPG_MD_MS_I=3,t.fircoef=[-.0207887*5,-.0378413*5,-.0432472*5,-.031183*5,779609e-23*5,.0467745*5,.10091*5,.151365*5,.187098*5];function t(){var f=t.MPG_MD_MS_LR,k=null;this.psy=null;var H=null,S=null;this.setModules=function(w,F,d,X){k=w,this.psy=F,H=F,S=X};var z=new p;function b(w){var F,d;if(w.ATH.useAdjust==0){w.ATH.adjust=1;return}if(d=w.loudness_sq[0][0],F=w.loudness_sq[1][0],w.channels_out==2?a0():(d+=d,F+=F),w.mode_gr==2&&(d=Math.max(d,F)),d*=.5,d*=w.ATH.aaSensitivityP,d>.03125)w.ATH.adjust>=1?w.ATH.adjust=1:w.ATH.adjust<w.ATH.adjustLimit&&(w.ATH.adjust=w.ATH.adjustLimit),w.ATH.adjustLimit=1;else{var X=31.98*d+625e-6;w.ATH.adjust>=X?(w.ATH.adjust*=X*.075+.925,w.ATH.adjust<X&&(w.ATH.adjust=X)):w.ATH.adjustLimit>=X?w.ATH.adjust=X:w.ATH.adjust<w.ATH.adjustLimit&&(w.ATH.adjust=w.ATH.adjustLimit),w.ATH.adjustLimit=X}}function C(w){var F,d;for(w.bitrate_stereoMode_Hist[w.bitrate_index][4]++,w.bitrate_stereoMode_Hist[15][4]++,w.channels_out==2&&a0(),F=0;F<w.mode_gr;++F)for(d=0;d<w.channels_out;++d){var X=w.l3_side.tt[F][d].block_type|0;w.l3_side.tt[F][d].mixed_block_flag!=0&&(X=4),w.bitrate_blockType_Hist[w.bitrate_index][X]++,w.bitrate_blockType_Hist[w.bitrate_index][5]++,w.bitrate_blockType_Hist[15][X]++,w.bitrate_blockType_Hist[15][5]++}}function K(w,F){var d=w.internal_flags,X,R;if(d.lame_encode_frame_init==0){var M,e,i=U(2014),h=U(286+1152+576);for(d.lame_encode_frame_init=1,M=0,e=0;M<286+576*(1+d.mode_gr);++M)M<576*d.mode_gr?(i[M]=0,d.channels_out==2&&(h[M]=0)):(i[M]=F[0][e],d.channels_out==2&&(h[M]=F[1][e]),++e);for(R=0;R<d.mode_gr;R++)for(X=0;X<d.channels_out;X++)d.l3_side.tt[R][X].block_type=t.SHORT_TYPE;z.mdct_sub48(d,i,h)}}this.lame_encode_mp3_frame=function(w,F,d,X,R,M){var e,i=w0([2,2]);i[0][0]=new A,i[0][1]=new A,i[1][0]=new A,i[1][1]=new A;var h=w0([2,2]);h[0][0]=new A,h[0][1]=new A,h[1][0]=new A,h[1][1]=new A;var T,c=[null,null],l=w.internal_flags,v=d0([2,4]),s=[.5,.5],x=[[0,0],[0,0]],r=[[0,0],[0,0]],I,_,o;if(c[0]=F,c[1]=d,l.lame_encode_frame_init==0&&K(w,c),l.padding=0,(l.slot_lag-=l.frac_SpF)<0&&(l.slot_lag+=w.out_samplerate,l.padding=1),l.psymodel!=0){var u,m=[null,null],B=0,a=Y(2);for(o=0;o<l.mode_gr;o++){for(_=0;_<l.channels_out;_++)m[_]=c[_],B=576+o*576-t.FFTOFFSET;if(w.VBR==q.vbr_mtrh||w.VBR==q.vbr_mt?a0():u=H.L3psycho_anal_ns(w,m,B,o,i,h,x[o],r[o],v[o],a),u!=0)return-4;for(w.mode==p0.JOINT_STEREO&&a0(),_=0;_<l.channels_out;_++){var n=l.l3_side.tt[o][_];n.block_type=a[_],n.mixed_block_flag=0}}}else a0();if(b(l),z.mdct_sub48(l,c[0],c[1]),l.mode_ext=t.MPG_MD_LR_LR,w.force_ms?l.mode_ext=t.MPG_MD_MS_LR:w.mode==p0.JOINT_STEREO&&a0(),l.mode_ext==f?(T=h,I=r):(T=i,I=x),w.analysis&&l.pinfo!=null&&a0(),w.VBR==q.vbr_off||w.VBR==q.vbr_abr){var V,E;for(V=0;V<18;V++)l.nsPsy.pefirbuf[V]=l.nsPsy.pefirbuf[V+1];for(E=0,o=0;o<l.mode_gr;o++)for(_=0;_<l.channels_out;_++)E+=I[o][_];for(l.nsPsy.pefirbuf[18]=E,E=l.nsPsy.pefirbuf[9],V=0;V<9;V++)E+=(l.nsPsy.pefirbuf[V]+l.nsPsy.pefirbuf[18-V])*t.fircoef[V];for(E=670*5*l.mode_gr*l.channels_out/E,o=0;o<l.mode_gr;o++)for(_=0;_<l.channels_out;_++)I[o][_]*=E}return l.iteration_loop.iteration_loop(w,I,s,T),k.format_bitstream(w),e=k.copy_buffer(l,X,R,M,1),w.bWriteVbrTag&&S.addVbrFrame(w),w.analysis&&l.pinfo!=null&&a0(),C(l),e}}function D(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}function P(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[Y(4),Y(4)];for(var f=0;f<2;f++)for(var k=0;k<2;k++)this.tt[f][k]=new ve}function $(){this.l=U(t.SBMAX_l),this.s=d0([t.SBMAX_s,3]);var f=this;this.assign=function(k){W.arraycopy(k.l,0,f.l,0,t.SBMAX_l);for(var H=0;H<t.SBMAX_s;H++)for(var S=0;S<3;S++)f.s[H][S]=k.s[H][S]}}function Q(){this.last_en_subshort=d0([4,9]),this.lastAttacks=Y(4),this.pefirbuf=U(19),this.longfact=U(t.SBMAX_l),this.shortfact=U(t.SBMAX_s),this.attackthre=0,this.attackthre_s=0}u0.MFSIZE=3*1152+t.ENCDELAY-t.MDCTDELAY,u0.MAX_HEADER_BUF=256,u0.MAX_BITS_PER_CHANNEL=4095,u0.MAX_BITS_PER_GRANULE=7680,u0.BPC=320;function u0(){var f=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=d0([2,u0.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new P,this.ms_ratio=U(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=Y(2),this.CurrentStep=Y(2),this.masking_lower=0,this.bv_scf=Y(576),this.pseudohalf=Y(s0.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*u0.BPC+1),this.itime=N0(2),this.sideinfo_len=0,this.sb_sample=d0([2,2,18,t.SBLIMIT]),this.amp_filter=U(32);function k(){this.write_timing=0,this.ptr=0,this.buf=ie(f)}this.header=new Array(u0.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new J0,this.minval_l=U(t.CBANDS),this.minval_s=U(t.CBANDS),this.nb_1=d0([4,t.CBANDS]),this.nb_2=d0([4,t.CBANDS]),this.nb_s1=d0([4,t.CBANDS]),this.nb_s2=d0([4,t.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=U(4),this.loudness_sq=d0([2,2]),this.loudness_sq_save=U(2),this.mld_l=U(t.SBMAX_l),this.mld_s=U(t.SBMAX_s),this.bm_l=Y(t.SBMAX_l),this.bo_l=Y(t.SBMAX_l),this.bm_s=Y(t.SBMAX_s),this.bo_s=Y(t.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=S0([t.CBANDS,2]),this.s3ind_s=S0([t.CBANDS,2]),this.numlines_s=Y(t.CBANDS),this.numlines_l=Y(t.CBANDS),this.rnumlines_l=U(t.CBANDS),this.mld_cb_l=U(t.CBANDS),this.mld_cb_s=U(t.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=U(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=Y(2),this.nsPsy=new Q,this.VBR_seek_table=new D,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=S0([16,4+1]),this.bitrate_blockType_Hist=S0([16,4+1+1]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var H=0;H<this.en.length;H++)this.en[H]=new $;for(var H=0;H<this.thm.length;H++)this.thm[H]=new $;for(var H=0;H<this.header.length;H++)this.header[H]=new k}function f0(){var f=U(t.BLKSIZE),k=U(t.BLKSIZE_s/2),H=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function S(b,C,K){var w=0,F,d,X;K<<=1;var R=C+K;F=4;do{var M,e,i,h,T,c,l;l=F>>1,h=F,T=F<<1,c=T+h,F=T<<1,d=C,X=d+l;do{var v,s,x,r;s=b[d+0]-b[d+h],v=b[d+0]+b[d+h],r=b[d+T]-b[d+c],x=b[d+T]+b[d+c],b[d+T]=v-x,b[d+0]=v+x,b[d+c]=s-r,b[d+h]=s+r,s=b[X+0]-b[X+h],v=b[X+0]+b[X+h],r=J.SQRT2*b[X+c],x=J.SQRT2*b[X+T],b[X+T]=v-x,b[X+0]=v+x,b[X+c]=s-r,b[X+h]=s+r,X+=F,d+=F}while(d<R);for(e=H[w+0],M=H[w+1],i=1;i<l;i++){var I,_;I=1-2*M*M,_=2*M*e,d=C+i,X=C+h-i;do{var o,u,m,v,s,B,x,a,r,n;u=_*b[d+h]-I*b[X+h],o=I*b[d+h]+_*b[X+h],s=b[d+0]-o,v=b[d+0]+o,B=b[X+0]-u,m=b[X+0]+u,u=_*b[d+c]-I*b[X+c],o=I*b[d+c]+_*b[X+c],r=b[d+T]-o,x=b[d+T]+o,n=b[X+T]-u,a=b[X+T]+u,u=M*x-e*n,o=e*x+M*n,b[d+T]=v-o,b[d+0]=v+o,b[X+c]=B-u,b[X+h]=B+u,u=e*a-M*r,o=M*a+e*r,b[X+T]=m-o,b[X+0]=m+o,b[d+c]=s-u,b[d+h]=s+u,X+=F,d+=F}while(d<R);I=e,e=I*H[w+0]-M*H[w+1],M=I*H[w+1]+M*H[w+0]}w+=2}while(F<K)}var z=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(b,C,K,w,F){for(var d=0;d<3;d++){var X=t.BLKSIZE_s/2,R=65535&576/3*(d+1),M=t.BLKSIZE_s/8-1;do{var e,i,h,T,c,l=z[M<<2]&255;e=k[l]*w[K][F+l+R],c=k[127-l]*w[K][F+l+R+128],i=e-c,e=e+c,h=k[l+64]*w[K][F+l+R+64],c=k[63-l]*w[K][F+l+R+192],T=h-c,h=h+c,X-=4,C[d][X+0]=e+h,C[d][X+2]=e-h,C[d][X+1]=i+T,C[d][X+3]=i-T,e=k[l+1]*w[K][F+l+R+1],c=k[126-l]*w[K][F+l+R+129],i=e-c,e=e+c,h=k[l+65]*w[K][F+l+R+65],c=k[62-l]*w[K][F+l+R+193],T=h-c,h=h+c,C[d][X+t.BLKSIZE_s/2+0]=e+h,C[d][X+t.BLKSIZE_s/2+2]=e-h,C[d][X+t.BLKSIZE_s/2+1]=i+T,C[d][X+t.BLKSIZE_s/2+3]=i-T}while(--M>=0);S(C[d],X,t.BLKSIZE_s/2)}},this.fft_long=function(b,C,K,w,F){var d=t.BLKSIZE/8-1,X=t.BLKSIZE/2;do{var R,M,e,i,h,T=z[d]&255;R=f[T]*w[K][F+T],h=f[T+512]*w[K][F+T+512],M=R-h,R=R+h,e=f[T+256]*w[K][F+T+256],h=f[T+768]*w[K][F+T+768],i=e-h,e=e+h,X-=4,C[X+0]=R+e,C[X+2]=R-e,C[X+1]=M+i,C[X+3]=M-i,R=f[T+1]*w[K][F+T+1],h=f[T+513]*w[K][F+T+513],M=R-h,R=R+h,e=f[T+257]*w[K][F+T+257],h=f[T+769]*w[K][F+T+769],i=e-h,e=e+h,C[X+t.BLKSIZE/2+0]=R+e,C[X+t.BLKSIZE/2+2]=R-e,C[X+t.BLKSIZE/2+1]=M+i,C[X+t.BLKSIZE/2+3]=M-i}while(--d>=0);S(C,X,t.BLKSIZE/2)},this.init_fft=function(b){for(var C=0;C<t.BLKSIZE;C++)f[C]=.42-.5*Math.cos(2*Math.PI*(C+.5)/t.BLKSIZE)+.08*Math.cos(4*Math.PI*(C+.5)/t.BLKSIZE);for(var C=0;C<t.BLKSIZE_s/2;C++)k[C]=.5*(1-Math.cos(2*Math.PI*(C+.5)/t.BLKSIZE_s))}}function c0(){var f=new f0,k=2.302585092994046,H=2,S=16,z=2,b=16,C=.34,K=1/(14752*14752)/(t.BLKSIZE/2),w=.01,F=.8,d=.6,X=.3,R=3.5,M=21,e=.2302585093;function i(g,y){for(var N=0,l0=0;l0<t.BLKSIZE/2;++l0)N+=g[l0]*y.ATH.eql_w[l0];return N*=K,N}function h(g,y,N,l0,t0,j,r0,n0,_0,L0,o0){var ae=g.internal_flags;_0<2?(f.fft_long(ae,l0[t0],_0,L0,o0),f.fft_short(ae,j[r0],_0,L0,o0)):_0==2&&a0(),y[0]=l0[t0+0][0],y[0]*=y[0];for(var X0=t.BLKSIZE/2-1;X0>=0;--X0){var Z0=l0[t0+0][t.BLKSIZE/2-X0],ne=l0[t0+0][t.BLKSIZE/2+X0];y[t.BLKSIZE/2-X0]=(Z0*Z0+ne*ne)*.5}for(var q0=2;q0>=0;--q0){N[q0][0]=j[r0+0][q0][0],N[q0][0]*=N[q0][0];for(var X0=t.BLKSIZE_s/2-1;X0>=0;--X0){var Z0=j[r0+0][q0][t.BLKSIZE_s/2-X0],ne=j[r0+0][q0][t.BLKSIZE_s/2+X0];N[q0][t.BLKSIZE_s/2-X0]=(Z0*Z0+ne*ne)*.5}}{for(var E0=0,X0=11;X0<t.HBLKSIZE;X0++)E0+=y[X0];ae.tot_ener[_0]=E0}g.analysis&&a0(),g.athaa_loudapprox==2&&_0<2&&(ae.loudness_sq[n0][_0]=ae.loudness_sq_save[_0],ae.loudness_sq_save[_0]=i(y,ae))}var T=8,c=23,l=15,v,s,x,r=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749];function I(){v=Math.pow(10,(T+1)/16),s=Math.pow(10,(c+1)/16),x=Math.pow(10,l/10)}var _=[3.3246*3.3246,3.23837*3.23837,3.15437*3.15437,3.00412*3.00412,2.86103*2.86103,2.65407*2.65407,2.46209*2.46209,2.284*2.284,2.11879*2.11879,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,1.56911*1.56911,1.46658*1.46658,1.37074*1.37074,1.31036*1.31036,1.25264*1.25264,1.20648*1.20648,1.16203*1.16203,1.12765*1.12765,1.09428*1.09428,1.0659*1.0659,1.03826*1.03826,1.01895*1.01895,1],o=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1],u=[2.35364*2.35364,2.29259*2.29259,2.23313*2.23313,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,1.49999*1.49999,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.11084*1.11084,1.03826*1.03826];function m(g,y,N,l0,t0,j){var r0;if(y>g)if(y<g*s)r0=y/g;else return g+y;else{if(g>=y*s)return g+y;r0=g/y}if(g+=y,l0+3<=3+3){if(r0>=v)return g;var n0=0|J.FAST_LOG10_X(r0,16);return g*o[n0]}var n0=0|J.FAST_LOG10_X(r0,16);if(j!=0?y=t0.ATH.cb_s[N]*t0.ATH.adjust:y=t0.ATH.cb_l[N]*t0.ATH.adjust,g<x*y){if(g>y){var _0,L0;return _0=1,n0<=13&&(_0=u[n0]),L0=J.FAST_LOG10_X(g/y,10/15),g*((_[n0]-_0)*L0+_0)}return n0>13?g:g*u[n0]}return g*_[n0]}function B(g,y,N,l0,t0){var j,r0,n0=0,_0=0;for(j=r0=0;j<t.SBMAX_s;++r0,++j){for(var L0=g.bo_s[j],o0=g.npart_s,ae=L0<o0?L0:o0;r0<ae;)n0+=y[r0],_0+=N[r0],r0++;if(g.en[l0].s[j][t0]=n0,g.thm[l0].s[j][t0]=_0,r0>=o0){++j;break}{var X0=g.PSY.bo_s_weight[j],Z0=1-X0;n0=X0*y[r0],_0=X0*N[r0],g.en[l0].s[j][t0]+=n0,g.thm[l0].s[j][t0]+=_0,n0=Z0*y[r0],_0=Z0*N[r0]}}for(;j<t.SBMAX_s;++j)g.en[l0].s[j][t0]=0,g.thm[l0].s[j][t0]=0}function a(g,y,N,l0){var t0,j,r0=0,n0=0;for(t0=j=0;t0<t.SBMAX_l;++j,++t0){for(var _0=g.bo_l[t0],L0=g.npart_l,o0=_0<L0?_0:L0;j<o0;)r0+=y[j],n0+=N[j],j++;if(g.en[l0].l[t0]=r0,g.thm[l0].l[t0]=n0,j>=L0){++t0;break}{var ae=g.PSY.bo_l_weight[t0],X0=1-ae;r0=ae*y[j],n0=ae*N[j],g.en[l0].l[t0]+=r0,g.thm[l0].l[t0]+=n0,r0=X0*y[j],n0=X0*N[j]}}for(;t0<t.SBMAX_l;++t0)g.en[l0].l[t0]=0,g.thm[l0].l[t0]=0}function n(g,y,N,l0,t0,j){var r0=g.internal_flags,n0,_0;for(_0=n0=0;_0<r0.npart_s;++_0){for(var L0=0,o0=r0.numlines_s[_0],ae=0;ae<o0;++ae,++n0){var X0=y[j][n0];L0+=X0}N[_0]=L0}for(n0=_0=0;_0<r0.npart_s;_0++){var Z0=r0.s3ind_s[_0][0],ne=r0.s3_ss[n0++]*N[Z0];for(++Z0;Z0<=r0.s3ind_s[_0][1];)ne+=r0.s3_ss[n0]*N[Z0],++n0,++Z0;{var q0=z*r0.nb_s1[t0][_0];l0[_0]=Math.min(ne,q0)}if(r0.blocktype_old[t0&1]==t.SHORT_TYPE){var q0=b*r0.nb_s2[t0][_0],E0=l0[_0];l0[_0]=Math.min(q0,E0)}r0.nb_s2[t0][_0]=r0.nb_s1[t0][_0],r0.nb_s1[t0][_0]=ne}for(;_0<=t.CBANDS;++_0)N[_0]=0,l0[_0]=0}function V(g,y,N,l0){var t0=g.internal_flags;g.short_blocks==m0.short_block_coupled&&!(y[0]!=0&&y[1]!=0)&&(y[0]=y[1]=0);for(var j=0;j<t0.channels_out;j++)l0[j]=t.NORM_TYPE,g.short_blocks==m0.short_block_dispensed&&(y[j]=1),g.short_blocks==m0.short_block_forced&&(y[j]=0),y[j]!=0?t0.blocktype_old[j]==t.SHORT_TYPE&&(l0[j]=t.STOP_TYPE):(l0[j]=t.SHORT_TYPE,t0.blocktype_old[j]==t.NORM_TYPE&&(t0.blocktype_old[j]=t.START_TYPE),t0.blocktype_old[j]==t.STOP_TYPE&&(t0.blocktype_old[j]=t.SHORT_TYPE)),N[j]=t0.blocktype_old[j],t0.blocktype_old[j]=l0[j]}function E(g,y,N){return N>=1?g:N<=0?y:y>0?Math.pow(g/y,N)*y:0}var O=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function G(g,y){for(var N=309.07,l0=0;l0<t.SBMAX_s-1;l0++)for(var t0=0;t0<3;t0++){var j=g.thm.s[l0][t0];if(j>0){var r0=j*y,n0=g.en.s[l0][t0];n0>r0&&(n0>r0*1e10?N+=O[l0]*(10*k):N+=O[l0]*J.FAST_LOG10(n0/r0))}}return N}var Z=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function e0(g,y){for(var N=281.0575,l0=0;l0<t.SBMAX_l-1;l0++){var t0=g.thm.l[l0];if(t0>0){var j=t0*y,r0=g.en.l[l0];r0>j&&(r0>j*1e10?N+=Z[l0]*(10*k):N+=Z[l0]*J.FAST_LOG10(r0/j))}}return N}function b0(g,y,N,l0,t0){var j,r0;for(j=r0=0;j<g.npart_l;++j){var n0=0,_0=0,L0;for(L0=0;L0<g.numlines_l[j];++L0,++r0){var o0=y[r0];n0+=o0,_0<o0&&(_0=o0)}N[j]=n0,l0[j]=_0,t0[j]=n0*g.rnumlines_l[j]}}function R0(g,y,N,l0){var t0=r.length-1,j=0,r0=N[j]+N[j+1];if(r0>0){var n0=y[j];n0<y[j+1]&&(n0=y[j+1]),r0=20*(n0*2-r0)/(r0*(g.numlines_l[j]+g.numlines_l[j+1]-1));var _0=0|r0;_0>t0&&(_0=t0),l0[j]=_0}else l0[j]=0;for(j=1;j<g.npart_l-1;j++)if(r0=N[j-1]+N[j]+N[j+1],r0>0){var n0=y[j-1];n0<y[j]&&(n0=y[j]),n0<y[j+1]&&(n0=y[j+1]),r0=20*(n0*3-r0)/(r0*(g.numlines_l[j-1]+g.numlines_l[j]+g.numlines_l[j+1]-1));var _0=0|r0;_0>t0&&(_0=t0),l0[j]=_0}else l0[j]=0;if(r0=N[j-1]+N[j],r0>0){var n0=y[j-1];n0<y[j]&&(n0=y[j]),r0=20*(n0*2-r0)/(r0*(g.numlines_l[j-1]+g.numlines_l[j]-1));var _0=0|r0;_0>t0&&(_0=t0),l0[j]=_0}else l0[j]=0}var M0=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];this.L3psycho_anal_ns=function(g,y,N,l0,t0,j,r0,n0,_0,L0){var o0=g.internal_flags,ae=d0([2,t.BLKSIZE]),X0=d0([2,3,t.BLKSIZE_s]),Z0=U(t.CBANDS+1),ne=U(t.CBANDS+1),q0=U(t.CBANDS+2),E0=Y(2),z0=Y(2),he,h0,D0,A0,te,Ee,pe,W0,ge=d0([2,576]),Me,ke=Y(t.CBANDS+2),De=Y(t.CBANDS+2);for(k0.fill(De,0),he=o0.channels_out,g.mode==p0.JOINT_STEREO&&(he=4),g.VBR==q.vbr_off?Me=o0.ResvMax==0?0:o0.ResvSize/o0.ResvMax*.5:g.VBR==q.vbr_rh||g.VBR==q.vbr_mtrh||g.VBR==q.vbr_mt?Me=.6:Me=1,h0=0;h0<o0.channels_out;h0++){var He=y[h0],Oe=N+576-350-M+192;for(A0=0;A0<576;A0++){var je,We;for(je=He[Oe+A0+10],We=0,te=0;te<(M-1)/2-1;te+=2)je+=M0[te]*(He[Oe+A0+te]+He[Oe+A0+M-te]),We+=M0[te+1]*(He[Oe+A0+te+1]+He[Oe+A0+M-te-1]);ge[h0][A0]=je+We}t0[l0][h0].en.assign(o0.en[h0]),t0[l0][h0].thm.assign(o0.thm[h0]),he>2&&a0()}for(h0=0;h0<he;h0++){var a1,t1,Ae=U(12),ye=[0,0,0,0],Ue=U(12),r1=1,n1,s1=U(t.CBANDS),i1=U(t.CBANDS),oe=[0,0,0,0],l1=U(t.HBLKSIZE),_1=d0([3,t.HBLKSIZE_s]);for(A0=0;A0<3;A0++)Ae[A0]=o0.nsPsy.last_en_subshort[h0][A0+6],Ue[A0]=Ae[A0]/o0.nsPsy.last_en_subshort[h0][A0+4],ye[0]+=Ae[A0];h0==2&&a0();{var o1=ge[h0&1],Ne=0;for(A0=0;A0<9;A0++){for(var c1=Ne+64,me=1;Ne<c1;Ne++)me<Math.abs(o1[Ne])&&(me=Math.abs(o1[Ne]));o0.nsPsy.last_en_subshort[h0][A0]=Ae[A0+3]=me,ye[1+A0/3]+=me,me>Ae[A0+3-2]?me=me/Ae[A0+3-2]:Ae[A0+3-2]>me*10?me=Ae[A0+3-2]/(me*10):me=0,Ue[A0+3]=me}}for(g.analysis&&a0(),n1=h0==3?o0.nsPsy.attackthre_s:o0.nsPsy.attackthre,A0=0;A0<12;A0++)oe[A0/3]==0&&Ue[A0]>n1&&(oe[A0/3]=A0%3+1);for(A0=1;A0<4;A0++){var ze;ye[A0-1]>ye[A0]?ze=ye[A0-1]/ye[A0]:ze=ye[A0]/ye[A0-1],ze<1.7&&(oe[A0]=0,A0==1&&(oe[0]=0))}for(oe[0]!=0&&o0.nsPsy.lastAttacks[h0]!=0&&(oe[0]=0),(o0.nsPsy.lastAttacks[h0]==3||oe[0]+oe[1]+oe[2]+oe[3]!=0)&&(r1=0,oe[1]!=0&&oe[0]!=0&&(oe[1]=0),oe[2]!=0&&oe[1]!=0&&(oe[2]=0),oe[3]!=0&&oe[2]!=0&&(oe[3]=0)),h0<2?z0[h0]=r1:a0(),_0[h0]=o0.tot_ener[h0],t1=X0,a1=ae,h(g,l1,_1,a1,h0&1,t1,h0&1,l0,h0,y,N),b0(o0,l1,Z0,s1,i1),R0(o0,s1,i1,ke),W0=0;W0<3;W0++){var Ke,Se;for(n(g,_1,ne,q0,h0,W0),B(o0,ne,q0,h0,W0),pe=0;pe<t.SBMAX_s;pe++){if(Se=o0.thm[h0].s[pe][W0],Se*=F,oe[W0]>=2||oe[W0+1]==1){var Ve=W0!=0?W0-1:2,me=E(o0.thm[h0].s[pe][Ve],Se,d*Me);Se=Math.min(Se,me)}if(oe[W0]==1){var Ve=W0!=0?W0-1:2,me=E(o0.thm[h0].s[pe][Ve],Se,X*Me);Se=Math.min(Se,me)}else if(W0!=0&&oe[W0-1]==3||W0==0&&o0.nsPsy.lastAttacks[h0]==3){var Ve=W0!=2?W0+1:0,me=E(o0.thm[h0].s[pe][Ve],Se,X*Me);Se=Math.min(Se,me)}Ke=Ae[W0*3+3]+Ae[W0*3+4]+Ae[W0*3+5],Ae[W0*3+5]*6<Ke&&(Se*=.5,Ae[W0*3+4]*6<Ke&&(Se*=.5)),o0.thm[h0].s[pe][W0]=Se}}for(o0.nsPsy.lastAttacks[h0]=oe[2],Ee=0,D0=0;D0<o0.npart_l;D0++){for(var Le=o0.s3ind[D0][0],Ze=Z0[Le]*r[ke[Le]],Ie=o0.s3_ll[Ee++]*Ze;++Le<=o0.s3ind[D0][1];)Ze=Z0[Le]*r[ke[Le]],Ie=m(Ie,o0.s3_ll[Ee++]*Ze,Le,Le-D0,o0,0);Ie*=.158489319246111,o0.blocktype_old[h0&1]==t.SHORT_TYPE?q0[D0]=Ie:q0[D0]=E(Math.min(Ie,Math.min(H*o0.nb_1[h0][D0],S*o0.nb_2[h0][D0])),Ie,Me),o0.nb_2[h0][D0]=o0.nb_1[h0][D0],o0.nb_1[h0][D0]=Ie}for(;D0<=t.CBANDS;++D0)Z0[D0]=0,q0[D0]=0;a(o0,Z0,q0,h0)}for((g.mode==p0.STEREO||g.mode==p0.JOINT_STEREO)&&a0(),g.mode==p0.JOINT_STEREO&&a0(),V(g,z0,L0,E0),h0=0;h0<he;h0++){var Pe,Xe=0,v1,Qe;h0>1?a0():(Pe=r0,Xe=0,v1=L0[h0],Qe=t0[l0][h0]),v1==t.SHORT_TYPE?Pe[Xe+h0]=G(Qe,o0.masking_lower):Pe[Xe+h0]=e0(Qe,o0.masking_lower),g.analysis&&(o0.pinfo.pe[l0][h0]=Pe[Xe+h0])}return 0};function se(g){var y,N,l0,t0;return y=g,y>=0?y*=3:y*=1.5,y>=.5&&y<=2.5?(t0=y-.5,N=8*(t0*t0-2*t0)):N=0,y+=.474,l0=15.811389+7.5*y-17.5*Math.sqrt(1+y*y),l0<=-60?0:(y=Math.exp((N+l0)*e),y/=.6609193,y)}function _e(g){return g<0&&(g=0),g=g*.001,13*Math.atan(.76*g)+3.5*Math.atan(g*g/(7.5*7.5))}function ee(g,y,N,l0,t0,j,r0,n0,_0,L0,o0,ae){var X0=U(t.CBANDS+1),Z0=n0/(ae>15?2*576:2*192),ne=Y(t.HBLKSIZE),q0;n0/=_0;var E0=0,z0=0;for(q0=0;q0<t.CBANDS;q0++){var he,h0;for(he=_e(n0*E0),X0[q0]=n0*E0,h0=E0;_e(n0*h0)-he<C&&h0<=_0/2;h0++);for(g[q0]=h0-E0,z0=q0+1;E0<h0;)ne[E0++]=q0;if(E0>_0/2){E0=_0/2,++q0;break}}X0[q0]=n0*E0;for(var D0=0;D0<ae;D0++){var A0,te,Ee,pe,W0;Ee=L0[D0],pe=L0[D0+1],A0=0|Math.floor(.5+o0*(Ee-.5)),A0<0&&(A0=0),te=0|Math.floor(.5+o0*(pe-.5)),te>_0/2&&(te=_0/2),N[D0]=(ne[A0]+ne[te])/2,y[D0]=ne[te];var ge=Z0*pe;r0[D0]=(ge-X0[y[D0]])/(X0[y[D0]+1]-X0[y[D0]]),r0[D0]<0?r0[D0]=0:r0[D0]>1&&(r0[D0]=1),W0=_e(n0*L0[D0]*o0),W0=Math.min(W0,15.5)/15.5,j[D0]=Math.pow(10,1.25*(1-Math.cos(Math.PI*W0))-2.5)}E0=0;for(var Me=0;Me<z0;Me++){var ke=g[Me],he,De;he=_e(n0*E0),De=_e(n0*(E0+ke-1)),l0[Me]=.5*(he+De),he=_e(n0*(E0-.5)),De=_e(n0*(E0+ke-.5)),t0[Me]=De-he,E0+=ke}return z0}function re(g,y,N,l0,t0,j){var r0=d0([t.CBANDS,t.CBANDS]),n0,_0=0;if(j)for(var L0=0;L0<y;L0++)for(n0=0;n0<y;n0++){var o0=se(N[L0]-N[n0])*l0[n0];r0[L0][n0]=o0*t0[L0]}else a0();for(var L0=0;L0<y;L0++){for(n0=0;n0<y&&!(r0[L0][n0]>0);n0++);for(g[L0][0]=n0,n0=y-1;n0>0&&!(r0[L0][n0]>0);n0--);g[L0][1]=n0,_0+=g[L0][1]-g[L0][0]+1}for(var ae=U(_0),X0=0,L0=0;L0<y;L0++)for(n0=g[L0][0];n0<=g[L0][1];n0++)ae[X0++]=r0[L0][n0];return ae}function ce(g){var y=_e(g);return y=Math.min(y,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*y))-2.5)}this.psymodel_init=function(g){var y=g.internal_flags,N,l0=!0,t0=13,j=24,r0=0,n0=0,_0=-8.25,L0=-4.5,o0=U(t.CBANDS),ae=U(t.CBANDS),X0=U(t.CBANDS),Z0=g.out_samplerate;switch(g.experimentalZ){default:case 0:l0=!0;break;case 1:l0=!(g.VBR==q.vbr_mtrh||g.VBR==q.vbr_mt);break;case 2:l0=!1;break;case 3:t0=8,r0=-1.75,n0=-.0125,_0=-8.25,L0=-2.25;break}for(y.ms_ener_ratio_old=.25,y.blocktype_old[0]=y.blocktype_old[1]=t.NORM_TYPE,N=0;N<4;++N){for(var E0=0;E0<t.CBANDS;++E0)y.nb_1[N][E0]=1e20,y.nb_2[N][E0]=1e20,y.nb_s1[N][E0]=y.nb_s2[N][E0]=1;for(var ne=0;ne<t.SBMAX_l;ne++)y.en[N].l[ne]=1e20,y.thm[N].l[ne]=1e20;for(var E0=0;E0<3;++E0){for(var ne=0;ne<t.SBMAX_s;ne++)y.en[N].s[ne][E0]=1e20,y.thm[N].s[ne][E0]=1e20;y.nsPsy.lastAttacks[N]=0}for(var E0=0;E0<9;E0++)y.nsPsy.last_en_subshort[N][E0]=10}for(y.loudness_sq_save[0]=y.loudness_sq_save[1]=0,y.npart_l=ee(y.numlines_l,y.bo_l,y.bm_l,o0,ae,y.mld_l,y.PSY.bo_l_weight,Z0,t.BLKSIZE,y.scalefac_band.l,t.BLKSIZE/(2*576),t.SBMAX_l),N=0;N<y.npart_l;N++){var q0=r0;o0[N]>=t0&&(q0=n0*(o0[N]-t0)/(j-t0)+r0*(j-o0[N])/(j-t0)),X0[N]=Math.pow(10,q0/10),y.numlines_l[N]>0?y.rnumlines_l[N]=1/y.numlines_l[N]:y.rnumlines_l[N]=0}y.s3_ll=re(y.s3ind,y.npart_l,o0,ae,X0,l0);var E0=0;for(N=0;N<y.npart_l;N++){var z0;z0=y0.MAX_VALUE;for(var he=0;he<y.numlines_l[N];he++,E0++){var h0=Z0*E0/(1e3*t.BLKSIZE),D0;D0=this.ATHformula(h0*1e3,g)-20,D0=Math.pow(10,.1*D0),D0*=y.numlines_l[N],z0>D0&&(z0=D0)}y.ATH.cb_l[N]=z0,z0=-20+o0[N]*20/10,z0>6&&(z0=100),z0<-15&&(z0=-15),z0-=8,y.minval_l[N]=Math.pow(10,z0/10)*y.numlines_l[N]}for(y.npart_s=ee(y.numlines_s,y.bo_s,y.bm_s,o0,ae,y.mld_s,y.PSY.bo_s_weight,Z0,t.BLKSIZE_s,y.scalefac_band.s,t.BLKSIZE_s/(2*192),t.SBMAX_s),E0=0,N=0;N<y.npart_s;N++){var z0,q0=_0;o0[N]>=t0&&(q0=L0*(o0[N]-t0)/(j-t0)+_0*(j-o0[N])/(j-t0)),X0[N]=Math.pow(10,q0/10),z0=y0.MAX_VALUE;for(var he=0;he<y.numlines_s[N];he++,E0++){var h0=Z0*E0/(1e3*t.BLKSIZE_s),D0;D0=this.ATHformula(h0*1e3,g)-20,D0=Math.pow(10,.1*D0),D0*=y.numlines_s[N],z0>D0&&(z0=D0)}y.ATH.cb_s[N]=z0,z0=-7+o0[N]*7/12,o0[N]>12&&(z0*=1+Math.log(1+z0)*3.1),o0[N]<12&&(z0*=1+Math.log(1-z0)*2.3),z0<-15&&(z0=-15),z0-=8,y.minval_s[N]=Math.pow(10,z0/10)*y.numlines_s[N]}y.s3_ss=re(y.s3ind_s,y.npart_s,o0,ae,X0,l0),I(),f.init_fft(y),y.decay=Math.exp(-1*k/(w*Z0/192));{var A0;A0=R,g.exp_nspsytune&2&&(A0=1),Math.abs(g.msfix)>0&&(A0=g.msfix),g.msfix=A0;for(var te=0;te<y.npart_l;te++)y.s3ind[te][1]>y.npart_l-1&&(y.s3ind[te][1]=y.npart_l-1)}var Ee=576*y.mode_gr/Z0;if(y.ATH.decay=Math.pow(10,-12/10*Ee),y.ATH.adjust=.01,y.ATH.adjustLimit=1,g.ATHtype!=-1){var h0,pe=g.out_samplerate/t.BLKSIZE,W0=0;for(h0=0,N=0;N<t.BLKSIZE/2;++N)h0+=pe,y.ATH.eql_w[N]=1/Math.pow(10,this.ATHformula(h0,g)/10),W0+=y.ATH.eql_w[N];for(W0=1/W0,N=t.BLKSIZE/2;--N>=0;)y.ATH.eql_w[N]*=W0}{for(var te=E0=0;te<y.npart_s;++te)for(N=0;N<y.numlines_s[te];++N)++E0;for(var te=E0=0;te<y.npart_l;++te)for(N=0;N<y.numlines_l[te];++N)++E0}for(E0=0,N=0;N<y.npart_l;N++){var h0=Z0*(E0+y.numlines_l[N]/2)/(1*t.BLKSIZE);y.mld_cb_l[N]=ce(h0),E0+=y.numlines_l[N]}for(;N<t.CBANDS;++N)y.mld_cb_l[N]=1;for(E0=0,N=0;N<y.npart_s;N++){var h0=Z0*(E0+y.numlines_s[N]/2)/(1*t.BLKSIZE_s);y.mld_cb_s[N]=ce(h0),E0+=y.numlines_s[N]}for(;N<t.CBANDS;++N)y.mld_cb_s[N]=1;return 0};function Re(g,y){g<-.3&&(g=3410),g/=1e3,g=Math.max(.1,g);var N=3.64*Math.pow(g,-.8)-6.8*Math.exp(-.6*Math.pow(g-3.4,2))+6*Math.exp(-.15*Math.pow(g-8.7,2))+(.6+.04*y)*.001*Math.pow(g,4);return N}this.ATHformula=function(g,y){var N;switch(y.ATHtype){case 0:N=Re(g,9);break;case 1:N=Re(g,-1);break;case 2:N=Re(g,0);break;case 3:N=Re(g,1)+6;break;case 4:N=Re(g,y.ATHcurve);break;default:N=Re(g,0);break}return N}}function i0(){var f=this,k=128*1024;i0.V9=410,i0.V8=420,i0.V7=430,i0.V6=440,i0.V5=450,i0.V4=460,i0.V3=470,i0.V2=480,i0.V1=490,i0.V0=500,i0.R3MIX=1e3,i0.STANDARD=1001,i0.EXTREME=1002,i0.INSANE=1003,i0.STANDARD_FAST=1004,i0.EXTREME_FAST=1005,i0.MEDIUM=1006,i0.MEDIUM_FAST=1007;var H=16384+k;i0.LAME_MAXMP3BUFFER=H;var S,z,b,C,K,w=new c0,F,d;this.enc=new t,this.setModules=function(a,n,V,E,O,G,Z,e0,b0){S=a,z=n,b=V,C=E,K=O,F=G,d=e0,this.enc.setModules(z,w,C,F)};function X(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=U(t.SBMAX_l),this.bo_s_weight=U(t.SBMAX_s)}function R(){this.lowerlimit=0}function M(a,n){this.lowpass=n}var e=4294479419;function i(a){var n;return a.class_id=e,n=a.internal_flags=new u0,a.mode=p0.NOT_SET,a.original=1,a.in_samplerate=44100,a.num_channels=2,a.num_samples=-1,a.bWriteVbrTag=!0,a.quality=-1,a.short_blocks=null,n.subblock_gain=-1,a.lowpassfreq=0,a.highpassfreq=0,a.lowpasswidth=-1,a.highpasswidth=-1,a.VBR=q.vbr_off,a.VBR_q=4,a.ATHcurve=-1,a.VBR_mean_bitrate_kbps=128,a.VBR_min_bitrate_kbps=0,a.VBR_max_bitrate_kbps=0,a.VBR_hard_min=0,n.VBR_min_bitrate=1,n.VBR_max_bitrate=13,a.quant_comp=-1,a.quant_comp_short=-1,a.msfix=-1,n.resample_ratio=1,n.OldValue[0]=180,n.OldValue[1]=180,n.CurrentStep[0]=4,n.CurrentStep[1]=4,n.masking_lower=1,n.nsPsy.attackthre=-1,n.nsPsy.attackthre_s=-1,a.scale=-1,a.athaa_type=-1,a.ATHtype=-1,a.athaa_loudapprox=-1,a.athaa_sensitivity=0,a.useTemporal=null,a.interChRatio=-1,n.mf_samples_to_encode=t.ENCDELAY+t.POSTDELAY,a.encoder_padding=0,n.mf_size=t.ENCDELAY-t.MDCTDELAY,a.findReplayGain=!1,a.decode_on_the_fly=!1,n.decode_on_the_fly=!1,n.findReplayGain=!1,n.findPeakSample=!1,n.RadioGain=0,n.AudiophileGain=0,n.noclipGainChange=0,n.noclipScale=-1,a.preset=0,a.write_id3tag_automatic=!0,0}this.lame_init=function(){var a=new fe;return i(a),a.lame_allocated_gfp=1,a};function h(a){return a>1?0:a<=0?1:Math.cos(Math.PI/2*a)}this.nearestBitrateFullIndex=function(a){var n=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],V=0,E=0,O=0,G=0;G=n[16],O=16,E=n[16],V=16;for(var Z=0;Z<16;Z++)if(Math.max(a,n[Z+1])!=a){G=n[Z+1],O=Z+1,E=n[Z],V=Z;break}return G-a>a-E?V:O};function T(a,n){switch(a){case 44100:return n.version=1,0;case 48e3:return n.version=1,1;case 32e3:return n.version=1,2;case 22050:return n.version=0,0;case 24e3:return n.version=0,1;case 16e3:return n.version=0,2;case 11025:return n.version=0,0;case 12e3:return n.version=0,1;case 8e3:return n.version=0,2;default:return n.version=0,-1}}function c(a,n,V){V<16e3&&(n=2);for(var E=L.bitrate_table[n][1],O=2;O<=14;O++)L.bitrate_table[n][O]>0&&Math.abs(L.bitrate_table[n][O]-a)<Math.abs(E-a)&&(E=L.bitrate_table[n][O]);return E}function l(a,n,V){V<16e3&&(n=2);for(var E=0;E<=14;E++)if(L.bitrate_table[n][E]>0&&L.bitrate_table[n][E]==a)return E;return-1}function v(a,n){var V=[new M(8,2e3),new M(16,3700),new M(24,3900),new M(32,5500),new M(40,7e3),new M(48,7500),new M(56,1e4),new M(64,11e3),new M(80,13500),new M(96,15100),new M(112,15600),new M(128,17e3),new M(160,17500),new M(192,18600),new M(224,19400),new M(256,19700),new M(320,20500)],E=f.nearestBitrateFullIndex(n);a.lowerlimit=V[E].lowpass}function s(a){var n=a.internal_flags,V=32;if(n.lowpass1>0){for(var E=999,O=0;O<=31;O++){var G=O/31;G>=n.lowpass2&&(V=Math.min(V,O)),n.lowpass1<G&&G<n.lowpass2&&(E=Math.min(E,O))}E==999?n.lowpass1=(V-.75)/31:n.lowpass1=(E-.75)/31,n.lowpass2=V/31}n.highpass2>0&&a0(),n.highpass2>0&&a0();for(var O=0;O<32;O++){var Z,e0,G=O/31;n.highpass2>n.highpass1?a0():Z=1,n.lowpass2>n.lowpass1?e0=h((G-n.lowpass1)/(n.lowpass2-n.lowpass1+1e-20)):e0=1,n.amp_filter[O]=Z*e0}}function x(a){var n=a.internal_flags;switch(a.quality){default:case 9:n.psymodel=0,n.noise_shaping=0,n.noise_shaping_amp=0,n.noise_shaping_stop=0,n.use_best_huffman=0,n.full_outer_loop=0;break;case 8:a.quality=7;case 7:n.psymodel=1,n.noise_shaping=0,n.noise_shaping_amp=0,n.noise_shaping_stop=0,n.use_best_huffman=0,n.full_outer_loop=0;break;case 6:n.psymodel=1,n.noise_shaping==0&&(n.noise_shaping=1),n.noise_shaping_amp=0,n.noise_shaping_stop=0,n.subblock_gain==-1&&(n.subblock_gain=1),n.use_best_huffman=0,n.full_outer_loop=0;break;case 5:n.psymodel=1,n.noise_shaping==0&&(n.noise_shaping=1),n.noise_shaping_amp=0,n.noise_shaping_stop=0,n.subblock_gain==-1&&(n.subblock_gain=1),n.use_best_huffman=0,n.full_outer_loop=0;break;case 4:n.psymodel=1,n.noise_shaping==0&&(n.noise_shaping=1),n.noise_shaping_amp=0,n.noise_shaping_stop=0,n.subblock_gain==-1&&(n.subblock_gain=1),n.use_best_huffman=1,n.full_outer_loop=0;break;case 3:n.psymodel=1,n.noise_shaping==0&&(n.noise_shaping=1),n.noise_shaping_amp=1,n.noise_shaping_stop=1,n.subblock_gain==-1&&(n.subblock_gain=1),n.use_best_huffman=1,n.full_outer_loop=0;break;case 2:n.psymodel=1,n.noise_shaping==0&&(n.noise_shaping=1),n.substep_shaping==0&&(n.substep_shaping=2),n.noise_shaping_amp=1,n.noise_shaping_stop=1,n.subblock_gain==-1&&(n.subblock_gain=1),n.use_best_huffman=1,n.full_outer_loop=0;break;case 1:n.psymodel=1,n.noise_shaping==0&&(n.noise_shaping=1),n.substep_shaping==0&&(n.substep_shaping=2),n.noise_shaping_amp=2,n.noise_shaping_stop=1,n.subblock_gain==-1&&(n.subblock_gain=1),n.use_best_huffman=1,n.full_outer_loop=0;break;case 0:n.psymodel=1,n.noise_shaping==0&&(n.noise_shaping=1),n.substep_shaping==0&&(n.substep_shaping=2),n.noise_shaping_amp=2,n.noise_shaping_stop=1,n.subblock_gain==-1&&(n.subblock_gain=1),n.use_best_huffman=1,n.full_outer_loop=0;break}}function r(a){var n=a.internal_flags;a.frameNum=0,a.write_id3tag_automatic&&d.id3tag_write_v2(a),n.bitrate_stereoMode_Hist=S0([16,4+1]),n.bitrate_blockType_Hist=S0([16,4+1+1]),n.PeakSample=0,a.bWriteVbrTag&&F.InitVbrTag(a)}this.lame_init_params=function(a){var n=a.internal_flags;if(n.Class_ID=0,n.ATH==null&&(n.ATH=new be),n.PSY==null&&(n.PSY=new X),n.rgdata==null&&(n.rgdata=new de),n.channels_in=a.num_channels,n.channels_in==1&&(a.mode=p0.MONO),n.channels_out=a.mode==p0.MONO?1:2,n.mode_ext=t.MPG_MD_MS_LR,a.mode==p0.MONO&&(a.force_ms=!1),a.VBR==q.vbr_off&&a.VBR_mean_bitrate_kbps!=128&&a.brate==0&&(a.brate=a.VBR_mean_bitrate_kbps),a.VBR==q.vbr_off||a.VBR==q.vbr_mtrh||a.VBR==q.vbr_mt||(a.free_format=!1),a.VBR==q.vbr_off&&a.brate==0&&a0(),a.VBR==q.vbr_off&&a.compression_ratio>0&&a0(),a.out_samplerate!=0&&(a.out_samplerate<16e3?(a.VBR_mean_bitrate_kbps=Math.max(a.VBR_mean_bitrate_kbps,8),a.VBR_mean_bitrate_kbps=Math.min(a.VBR_mean_bitrate_kbps,64)):a.out_samplerate<32e3?(a.VBR_mean_bitrate_kbps=Math.max(a.VBR_mean_bitrate_kbps,8),a.VBR_mean_bitrate_kbps=Math.min(a.VBR_mean_bitrate_kbps,160)):(a.VBR_mean_bitrate_kbps=Math.max(a.VBR_mean_bitrate_kbps,32),a.VBR_mean_bitrate_kbps=Math.min(a.VBR_mean_bitrate_kbps,320))),a.lowpassfreq==0){var V=16e3;switch(a.VBR){case q.vbr_off:{var E=new R;v(E,a.brate),V=E.lowerlimit;break}case q.vbr_abr:{var E=new R;v(E,a.VBR_mean_bitrate_kbps),V=E.lowerlimit;break}case q.vbr_rh:a0();default:a0()}a.mode==p0.MONO&&(a.VBR==q.vbr_off||a.VBR==q.vbr_abr)&&(V*=1.5),a.lowpassfreq=V|0}switch(a.out_samplerate==0&&a0(),a.lowpassfreq=Math.min(20500,a.lowpassfreq),a.lowpassfreq=Math.min(a.out_samplerate/2,a.lowpassfreq),a.VBR==q.vbr_off&&(a.compression_ratio=a.out_samplerate*16*n.channels_out/(1e3*a.brate)),a.VBR==q.vbr_abr&&a0(),a.bWriteVbrTag||(a.findReplayGain=!1,a.decode_on_the_fly=!1,n.findPeakSample=!1),n.findReplayGain=a.findReplayGain,n.decode_on_the_fly=a.decode_on_the_fly,n.decode_on_the_fly&&(n.findPeakSample=!0),n.findReplayGain&&a0(),n.decode_on_the_fly&&!a.decode_only&&a0(),n.mode_gr=a.out_samplerate<=24e3?1:2,a.framesize=576*n.mode_gr,a.encoder_delay=t.ENCDELAY,n.resample_ratio=a.in_samplerate/a.out_samplerate,a.VBR){case q.vbr_mt:case q.vbr_rh:case q.vbr_mtrh:{var O=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];a.compression_ratio=O[a.VBR_q]}break;case q.vbr_abr:a.compression_ratio=a.out_samplerate*16*n.channels_out/(1e3*a.VBR_mean_bitrate_kbps);break;default:a.compression_ratio=a.out_samplerate*16*n.channels_out/(1e3*a.brate);break}a.mode==p0.NOT_SET&&(a.mode=p0.JOINT_STEREO),a.highpassfreq>0?a0():(n.highpass1=0,n.highpass2=0),a.lowpassfreq>0?(n.lowpass2=2*a.lowpassfreq,a.lowpasswidth>=0?a0():n.lowpass1=(1-0)*2*a.lowpassfreq,n.lowpass1/=a.out_samplerate,n.lowpass2/=a.out_samplerate):a0(),s(a),n.samplerate_index=T(a.out_samplerate,a),n.samplerate_index<0&&a0(),a.VBR==q.vbr_off?a.free_format?n.bitrate_index=0:(a.brate=c(a.brate,a.version,a.out_samplerate),n.bitrate_index=l(a.brate,a.version,a.out_samplerate),n.bitrate_index<=0&&a0()):n.bitrate_index=1,a.analysis&&(a.bWriteVbrTag=!1),n.pinfo!=null&&(a.bWriteVbrTag=!1),z.init_bit_stream_w(n);for(var G=n.samplerate_index+3*a.version+6*(a.out_samplerate<16e3?1:0),Z=0;Z<t.SBMAX_l+1;Z++)n.scalefac_band.l[Z]=C.sfBandIndex[G].l[Z];for(var Z=0;Z<t.PSFB21+1;Z++){var e0=(n.scalefac_band.l[22]-n.scalefac_band.l[21])/t.PSFB21,b0=n.scalefac_band.l[21]+Z*e0;n.scalefac_band.psfb21[Z]=b0}n.scalefac_band.psfb21[t.PSFB21]=576;for(var Z=0;Z<t.SBMAX_s+1;Z++)n.scalefac_band.s[Z]=C.sfBandIndex[G].s[Z];for(var Z=0;Z<t.PSFB12+1;Z++){var e0=(n.scalefac_band.s[13]-n.scalefac_band.s[12])/t.PSFB12,b0=n.scalefac_band.s[12]+Z*e0;n.scalefac_band.psfb12[Z]=b0}n.scalefac_band.psfb12[t.PSFB12]=192,a.version==1?n.sideinfo_len=n.channels_out==1?4+17:4+32:n.sideinfo_len=n.channels_out==1?4+9:4+17,a.error_protection&&(n.sideinfo_len+=2),r(a),n.Class_ID=e;{var R0;for(R0=0;R0<19;R0++)n.nsPsy.pefirbuf[R0]=700*n.mode_gr*n.channels_out;a.ATHtype==-1&&(a.ATHtype=4)}switch(a.VBR){case q.vbr_mt:a.VBR=q.vbr_mtrh;case q.vbr_mtrh:{a.useTemporal==null&&(a.useTemporal=!1),b.apply_preset(a,500-a.VBR_q*10,0),a.quality<0&&(a.quality=LAME_DEFAULT_QUALITY),a.quality<5&&(a.quality=0),a.quality>5&&(a.quality=5),n.PSY.mask_adjust=a.maskingadjust,n.PSY.mask_adjust_short=a.maskingadjust_short,a.experimentalY?n.sfb21_extra=!1:n.sfb21_extra=a.out_samplerate>44e3,n.iteration_loop=new VBRNewIterationLoop(K);break}case q.vbr_rh:{b.apply_preset(a,500-a.VBR_q*10,0),n.PSY.mask_adjust=a.maskingadjust,n.PSY.mask_adjust_short=a.maskingadjust_short,a.experimentalY?n.sfb21_extra=!1:n.sfb21_extra=a.out_samplerate>44e3,a.quality>6&&(a.quality=6),a.quality<0&&(a.quality=LAME_DEFAULT_QUALITY),n.iteration_loop=new VBROldIterationLoop(K);break}default:{var M0;n.sfb21_extra=!1,a.quality<0&&(a.quality=LAME_DEFAULT_QUALITY),M0=a.VBR,M0==q.vbr_off&&(a.VBR_mean_bitrate_kbps=a.brate),b.apply_preset(a,a.VBR_mean_bitrate_kbps,0),a.VBR=M0,n.PSY.mask_adjust=a.maskingadjust,n.PSY.mask_adjust_short=a.maskingadjust_short,M0==q.vbr_off?n.iteration_loop=new we(K):a0();break}}return a.VBR!=q.vbr_off&&a0(),a.tune&&a0(),x(a),a.athaa_type<0?n.ATH.useAdjust=3:n.ATH.useAdjust=a.athaa_type,n.ATH.aaSensitivityP=Math.pow(10,a.athaa_sensitivity/-10),a.short_blocks==null&&(a.short_blocks=m0.short_block_allowed),a.short_blocks==m0.short_block_allowed&&(a.mode==p0.JOINT_STEREO||a.mode==p0.STEREO)&&(a.short_blocks=m0.short_block_coupled),a.quant_comp<0&&(a.quant_comp=1),a.quant_comp_short<0&&(a.quant_comp_short=0),a.msfix<0&&(a.msfix=0),a.exp_nspsytune=a.exp_nspsytune|1,a.internal_flags.nsPsy.attackthre<0&&(a.internal_flags.nsPsy.attackthre=c0.NSATTACKTHRE),a.internal_flags.nsPsy.attackthre_s<0&&(a.internal_flags.nsPsy.attackthre_s=c0.NSATTACKTHRE_S),a.scale<0&&(a.scale=1),a.ATHtype<0&&(a.ATHtype=4),a.ATHcurve<0&&(a.ATHcurve=4),a.athaa_loudapprox<0&&(a.athaa_loudapprox=2),a.interChRatio<0&&(a.interChRatio=0),a.useTemporal==null&&(a.useTemporal=!0),n.slot_lag=n.frac_SpF=0,a.VBR==q.vbr_off&&(n.slot_lag=n.frac_SpF=(a.version+1)*72e3*a.brate%a.out_samplerate|0),C.iteration_init(a),w.psymodel_init(a),0};function I(a,n){(a.in_buffer_0==null||a.in_buffer_nsamples<n)&&(a.in_buffer_0=U(n),a.in_buffer_1=U(n),a.in_buffer_nsamples=n)}this.lame_encode_flush=function(a,n,V,E){var O=a.internal_flags,G=T0([2,1152]),Z=0,e0,b0,R0,M0,se=O.mf_samples_to_encode-t.POSTDELAY,_e=_(a);if(O.mf_samples_to_encode<1)return 0;for(e0=0,a.in_samplerate!=a.out_samplerate&&a0(),R0=a.framesize-se%a.framesize,R0<576&&(R0+=a.framesize),a.encoder_padding=R0,M0=(se+R0)/a.framesize;M0>0&&Z>=0;){var ee=_e-O.mf_size,re=a.frameNum;ee*=a.in_samplerate,ee/=a.out_samplerate,ee>1152&&(ee=1152),ee<1&&(ee=1),b0=E-e0,E==0&&(b0=0),Z=this.lame_encode_buffer(a,G[0],G[1],ee,n,V,b0),V+=Z,e0+=Z,M0-=re!=a.frameNum?1:0}return O.mf_samples_to_encode=0,Z<0||(b0=E-e0,E==0&&(b0=0),z.flush_bitstream(a),Z=z.copy_buffer(O,n,V,b0,1),Z<0)?Z:(V+=Z,e0+=Z,b0=E-e0,E==0&&(b0=0),a.write_id3tag_automatic&&a0(),e0)},this.lame_encode_buffer=function(a,n,V,E,O,G,Z){var e0=a.internal_flags,b0=[null,null];if(e0.Class_ID!=e)return-3;if(E==0)return 0;I(e0,E),b0[0]=e0.in_buffer_0,b0[1]=e0.in_buffer_1;for(var R0=0;R0<E;R0++)b0[0][R0]=n[R0],e0.channels_in>1&&(b0[1][R0]=V[R0]);return o(a,b0[0],b0[1],E,O,G,Z)};function _(a){var n=t.BLKSIZE+a.framesize-t.FFTOFFSET;return n=Math.max(n,512+a.framesize-32),n}function o(a,n,V,E,O,G,Z){var e0=a.internal_flags,b0=0,R0,M0,se,_e,ee,re=[null,null],ce=[null,null];if(e0.Class_ID!=e)return-3;if(E==0)return 0;if(ee=z.copy_buffer(e0,O,G,Z,0),ee<0)return ee;if(G+=ee,b0+=ee,ce[0]=n,ce[1]=V,g0.NEQ(a.scale,0)&&g0.NEQ(a.scale,1))for(M0=0;M0<E;++M0)ce[0][M0]*=a.scale,e0.channels_out==2&&(ce[1][M0]*=a.scale);if(g0.NEQ(a.scale_left,0)&&g0.NEQ(a.scale_left,1))for(M0=0;M0<E;++M0)ce[0][M0]*=a.scale_left;if(g0.NEQ(a.scale_right,0)&&g0.NEQ(a.scale_right,1))for(M0=0;M0<E;++M0)ce[1][M0]*=a.scale_right;a.num_channels==2&&e0.channels_out==1&&a0(),_e=_(a),re[0]=e0.mfbuf[0],re[1]=e0.mfbuf[1];for(var Re=0;E>0;){var g=[null,null],y=0,N=0;g[0]=ce[0],g[1]=ce[1];var l0=new m;if(B(a,re,g,Re,E,l0),y=l0.n_in,N=l0.n_out,e0.findReplayGain&&!e0.decode_on_the_fly&&S.AnalyzeSamples(e0.rgdata,re[0],e0.mf_size,re[1],e0.mf_size,N,e0.channels_out)==O0.GAIN_ANALYSIS_ERROR)return-6;if(E-=y,Re+=y,e0.channels_out==2,e0.mf_size+=N,e0.mf_samples_to_encode<1&&a0(),e0.mf_samples_to_encode+=N,e0.mf_size>=_e){var t0=Z-b0;if(Z==0&&(t0=0),R0=u(a,re[0],re[1],O,G,t0),R0<0)return R0;for(G+=R0,b0+=R0,e0.mf_size-=a.framesize,e0.mf_samples_to_encode-=a.framesize,se=0;se<e0.channels_out;se++)for(M0=0;M0<e0.mf_size;M0++)re[se][M0]=re[se][M0+a.framesize]}}return b0}function u(a,n,V,E,O,G){var Z=f.enc.lame_encode_mp3_frame(a,n,V,E,O,G);return a.frameNum++,Z}function m(){this.n_in=0,this.n_out=0}function B(a,n,V,E,O,G){var Z=a.internal_flags;if(Z.resample_ratio<.9999||Z.resample_ratio>1.0001)a0();else{G.n_out=Math.min(a.framesize,O),G.n_in=G.n_out;for(var e0=0;e0<G.n_out;++e0)n[0][Z.mf_size+e0]=V[0][E+e0],Z.channels_out==2&&(n[1][Z.mf_size+e0]=V[1][E+e0])}}}function $0(){this.setModules=function(f,k){}}function I0(){this.setModules=function(f,k,H){}}function F0(){}function x0(){this.setModules=function(f,k){}}function G0(f,k,H){f!=1&&a0("fix cc: only supports mono");var S=new i0,z=new $0,b=new O0,C=new g0,K=new Q0,w=new K0,F=new Fe,d=new le,X=new H0,R=new x0,M=new U0,e=new V0,i=new I0,h=new F0;S.setModules(b,C,K,w,F,d,X,R,h),C.setModules(b,h,X,d),R.setModules(C,X),K.setModules(S),F.setModules(C,M,w,e),w.setModules(e,M,S.enc.psy),M.setModules(C),e.setModules(w),d.setModules(S,C,X),z.setModules(i,h),i.setModules(X,R,K);var T=S.lame_init();T.num_channels=f,T.in_samplerate=k,T.out_samplerate=k,T.brate=H,T.mode=p0.STEREO,T.quality=3,T.bWriteVbrTag=!1,T.disable_reservoir=!0,T.write_id3tag_automatic=!1,S.lame_init_params(T);var c=1152,l=0|1.25*c+7200,v=ie(l);this.encodeBuffer=function(s,x){f==1&&(x=s),s.length>c&&(c=s.length,l=0|1.25*c+7200,v=ie(l));var r=S.lame_encode_buffer(T,s,x,s.length,v,0,l);return new Int8Array(v.subarray(0,r))},this.flush=function(){var s=S.lame_encode_flush(T,v,0,l);return new Int8Array(v.subarray(0,s))}}s0.SFBMAX=t.SBMAX_s*3,ue.Mp3Encoder=G0}ue(),P0.lamejs=ue});(function(P0){var ue=typeof window=="object"&&!!window.document,j0=ue?window:Object,a0=j0.Recorder,ie=a0.i18n;P0(a0,ie,ie.$T,ue)})(function(P0,ue,j0,a0){var ie=function(U){return new Y(U)},xe="WaveView",Y=function(U){var N0=this,d0={scale:2,speed:9,phase:21.8,fps:20,keep:!0,lineWidth:3,linear1:[0,"rgba(150,96,238,1)",.2,"rgba(170,79,249,1)",1,"rgba(53,199,253,1)"],linear2:[0,"rgba(209,130,255,0.6)",1,"rgba(53,199,255,0.6)"],linearBg:[0,"rgba(255,255,255,0.2)",1,"rgba(54,197,252,0.2)"]};for(var S0 in U)d0[S0]=U[S0];N0.set=U=d0;var T0="compatibleCanvas";if(U[T0])var w0=N0.canvas=U[T0];else{if(!a0)throw new Error(j0.G("NonBrowser-1",[xe]));var k0=U.elem;k0&&(typeof k0=="string"?k0=document.querySelector(k0):k0.length&&(k0=k0[0])),k0&&(U.width=k0.offsetWidth,U.height=k0.offsetHeight);var W=N0.elem=document.createElement("div");W.style.fontSize=0,W.innerHTML='<canvas style="width:100%;height:100%;"/>';var w0=N0.canvas=W.querySelector("canvas");k0&&(k0.innerHTML="",k0.appendChild(W))}var J=U.scale,m0=U.width*J,y0=U.height*J;if(!m0||!y0)throw new Error(j0.G("IllegalArgs-1",[xe+" width=0 height=0"]));w0.width=m0,w0.height=y0;var q=N0.ctx=w0.getContext("2d");N0.linear1=N0.genLinear(q,m0,U.linear1),N0.linear2=N0.genLinear(q,m0,U.linear2),N0.linearBg=N0.genLinear(q,y0,U.linearBg,!0),N0._phase=0};Y.prototype=ie.prototype={genLinear:function(U,N0,d0,S0){for(var T0=U.createLinearGradient(0,0,S0?0:N0,S0?N0:0),w0=0;w0<d0.length;)T0.addColorStop(d0[w0++],d0[w0++]);return T0},genPath:function(U,N0,d0){for(var S0=[],T0=this,w0=T0.set,k0=w0.scale,W=w0.width*k0,J=w0.height*k0/2,m0=0;m0<=W;m0+=k0){var y0=(1+Math.cos(Math.PI+m0/W*2*Math.PI))/2,q=y0*J*N0*Math.sin(2*Math.PI*(m0/W)*U+d0)+J;S0.push(q)}return S0},input:function(U,N0,d0){var S0=this;S0.sampleRate=d0,S0.pcmData=U,S0.pcmPos=0,S0.inputTime=Date.now(),S0.schedule()},schedule:function(){var U=this,N0=U.set,d0=Math.floor(1e3/N0.fps);U.timer||(U.timer=setInterval(function(){U.schedule()},d0));var S0=Date.now(),T0=U.drawTime||0;if(!(S0-T0<d0)){U.drawTime=S0;for(var w0=U.sampleRate/N0.fps,k0=U.pcmData,W=U.pcmPos,J=Math.max(0,Math.min(w0,k0.length-W)),m0=0,y0=0;y0<J;y0++,W++)m0+=Math.abs(k0[W]);U.pcmPos=W,(J||!N0.keep)&&U.draw(P0.PowerLevel(m0,J)),!J&&S0-U.inputTime>1300&&(clearInterval(U.timer),U.timer=0)}},draw:function(U){var N0=this,d0=N0.set,S0=N0.ctx,T0=d0.scale,w0=d0.width*T0,k0=d0.height*T0,W=d0.speed/d0.fps,J=N0._phase-=W,m0=J+W*d0.phase,y0=U/100,q=N0.genPath(2,y0,J),p0=N0.genPath(1.8,y0,m0);S0.clearRect(0,0,w0,k0),S0.beginPath();for(var H0=0,V0=0;V0<=w0;H0++,V0+=T0)V0==0?S0.moveTo(V0,q[H0]):S0.lineTo(V0,q[H0]);H0--;for(var V0=w0-1;V0>=0;H0--,V0-=T0)S0.lineTo(V0,p0[H0]);S0.closePath(),S0.fillStyle=N0.linearBg,S0.fill(),N0.drawPath(p0,N0.linear2),N0.drawPath(q,N0.linear1)},drawPath:function(U,N0){var d0=this,S0=d0.set,T0=d0.ctx,w0=S0.scale,k0=S0.width*w0;T0.beginPath();for(var W=0,J=0;J<=k0;W++,J+=w0)J==0?T0.moveTo(J,U[W]):T0.lineTo(J,U[W]);T0.lineWidth=S0.lineWidth*w0,T0.strokeStyle=N0,T0.stroke()}},P0[xe]=ie});const C1={class:"w-full h-full"},k1={class:"w-full h-full flex items-center justify-between px-4 gap-x-3"},L1={class:"h-full gap-2 w-[120px]"},I1={class:"text-[18px]"},D1={class:"text-xs text-[#101316] mt-[2px]"},H1={class:"opacity-45"},O1={class:"flex items-center gap-x-4"},u1=60*60*1e3*3,F1=m1({__name:"recorder-control",props:{disabled:{type:Boolean},isError:{type:Boolean}},emits:["change"],setup(P0,{expose:ue,emit:j0}){const a0=P0,ie=j0,xe=R1(),{userTokens:Y,tokensValue:U}=E1(),N0=b1(()=>U.value.score/60),d0=d1(null),S0=Ce(null),T0=Ce(null),w0=Ce(!1),k0=Ce(!1);Ce(!1);const W=Ce(0),J=Ce(0),m0=Ce(0),y0=()=>{T0.value=e1({type:"mp3",bitRate:16,sampleRate:16e3,audioTrackSet:{noiseSuppression:!0,echoCancellation:!0,autoGainControl:!0},onProcess:(L,Y0,B0,C0,be,fe)=>{var we;if(W.value=B0,W.value>u1||W.value/1e3*N0.value>Y.value){Q0();return}S0.value&&((we=S0.value)==null||we.input(L[L.length-1],Y0,C0)),m0.value=Date.now()}}),T0.value.open(()=>{d0.value&&(S0.value=e1.WaveView({elem:d0.value})),v0(),p0()},(L,Y0)=>{$e.msgWarning((Y0?"UserNotAllow，":"")+"无法录音:"+L)})},q=L=>{let Y0=Math.floor(L/1e3),B0=Math.floor(Y0/3600);Y0%=3600;let C0=Math.floor(Y0/60),be=Y0%60;return B0=B0.toString().padStart(2,"0"),C0=C0.toString().padStart(2,"0"),be=be.toString().padStart(2,"0"),`${B0}:${C0}:${be}`},p0=()=>{if(T0.value&&e1.IsOpen()){w0.value=!0,k0.value=!1,T0.value.start();var L=T0.value.watchDogTimer=setInterval(function(){if(!T0.value||L!=T0.value.watchDogTimer){clearInterval(L);return}Date.now()<T0.value.wdtPauseT||Date.now()-(m0.value||J.value)>1500&&clearInterval(L)},1e3);J.value=Date.now(),T0.value.wdtPauseT=0,m0.value=0}},H0=()=>{T0.value&&(T0.value.pause(),T0.value.wdtPauseT=Date.now()*2)},V0=()=>{T0.value&&(T0.value.resume(),T0.value.wdtPauseT=Date.now()+1e3)},O0=()=>{T0.value&&T0.value.close()},Q0=()=>{T0.value&&(T0.value.watchDogTimer=0,T0.value.stop(async(L,Y0)=>{T0.value.close(),window.onbeforeunload=null;const B0=new File([L],`${Date.now()}.mp3`,{type:"audio/mp3"}),C0=await A1({file:B0});ie("change",C0)}),w0.value=!1,k0.value=!0)},U0=()=>{O0(),W.value=0,w0.value=!1,k0.value=!1},le=()=>{w0.value?(k0.value=!k0.value,k0.value?H0():V0()):$e.msgWarning("录音已结束")},g0=async()=>{if(a0.disabled){$e.msgWarning("录音已结束");return}xe.$confirm({message:"确定要结束录音吗？",onConfirm:async()=>{Q0()}})},v0=()=>{window.onbeforeunload=()=>"请勿刷新页面"};return x1(async()=>{await p1(),y0()}),S1(()=>{O0()}),ue({openRecorder:y0,stopRecord:Q0,closeRecord:O0,resetRecord:U0}),(L,Y0)=>{const B0=T1,C0=B1;return w1(),M1("div",C1,[Te("div",k1,[Te("div",L1,[Te("div",I1,Ye(qe(k0)?"录音已暂停":"录音中..."),1),Te("div",D1,[Te("span",null,Ye(q(qe(W))),1),Y0[0]||(Y0[0]=Te("span",{class:"mx-[5px] opacity-45"},"/",-1)),Te("span",H1,Ye(q(u1)),1)])]),Te("div",{ref_key:"waveRef",ref:d0,class:"h-[60px] grow px-6"},null,512),Te("div",O1,[Ge(C0,{content:"结束录音",placement:"top"},{default:Je(()=>[Te("div",{class:"text-danger hover:text-white rounded-md w-[44px] h-[36px] bg-white hover:bg-danger cursor-pointer flex items-center justify-center",onClick:g0},[Ge(B0,{name:"local-icon-stop",size:18})])]),_:1}),Ge(C0,{content:"结束录音",placement:"top"},{content:Je(()=>[Te("div",null,Ye(qe(k0)?"继续录音":"暂停录音"),1)]),default:Je(()=>[Te("div",{class:"text-primary hover:text-white font-bold rounded-md w-[44px] h-[36px] bg-white hover:bg-primary cursor-pointer flex items-center justify-center",onClick:le},[Ge(B0,{name:qe(k0)?"local-icon-mic":"local-icon-pause",size:18},null,8,["name"])])]),_:1})])])])}}});export{e1 as R,F1 as _};

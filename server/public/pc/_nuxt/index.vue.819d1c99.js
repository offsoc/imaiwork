import{d as O,a as Q,r as h,A,aF as U,cx as W,k as a,l as c,m as s,q as l,s as r,Z as n,v as p,aI as X,J as P,K as ee,t as _,bC as se,Y as te,L as w,I as R,G as f,aH as b,ax as oe,y as ie,u as ne}from"./entry.2beb4577.js";import{E as le}from"./el-image.a83bf837.js";import{E as ae}from"./index.e6c47712.js";import{E as re}from"./el-empty.bc763313.js";import"./el-image-viewer.d11cc27b.js";/* empty css                   */import{u as ce}from"./useCopy.3342ae20.js";import{u as de}from"./usePaging.85211d66.js";import{d as pe,f as ue,c as fe,h as ve}from"./interview.fea9f1a0.js";import{_ as me}from"./edit-pop.vue.75c70d04.js";import{_ as ge}from"./rpa-edit.vue.73bf5cc9.js";import{E as _e}from"./index.abba0b88.js";const xe={class:"h-full flex flex-col"},ye={class:"rounded-lg px-[30px] h-[107px] bg-white flex items-center justify-between"},ke=["infinite-scroll-disabled"],he={class:"grid grid-cols-3 gap-6 pb-4"},we={class:"absolute right-10 top-3 z-[77] group-hover:visible invisible"},be={class:"flex items-center gap-4 mr-5"},Ce={class:"text-lg"},Ee={class:"grow"},$e={class:"line-clamp-3 text-xs text-[#524B6B] mt-3 leading-5"},Le={class:"text-[10px] flex items-center justify-between text-[#AAA6B9] mt-3"},Se={class:"rotate-90 origin-center p-1"},je={class:"flex flex-col gap-2"},Ae=["onClick"],Pe=["onClick"],Re=["onClick"],Be=["onClick"],De={key:0,class:"text-center py-4 text-gray-500"},Fe={key:1,class:"grow flex items-center justify-center bg-white rounded-xl"},Oe=O({__name:"index",setup(Ie){const B=Q(),{copy:C}=ce(),D=ne(),v=h(!1),m=A(),x=A(),y=h(!1),E=U({page_no:1}),{pager:u,getLists:$,resetPage:L}=de({fetchFun:pe,params:E,isScroll:!0}),k=h(),S=(t,e)=>{t?k.value=e:k.value=void 0},F=async()=>{try{const{url:t}=await ue();C(t,{successMsg:"复制链接成功"})}catch(t){f.msgError(t)}},{lockFn:I,isLock:J}=W(F),M=async()=>{var t;v.value=!0,await b(),(t=m.value)==null||t.open()},N=async t=>{var e,i;v.value=!0,await b(),(e=m.value)==null||e.open("edit"),(i=m.value)==null||i.getDetail(t)},V=async t=>{var i,g;const{interview_config:e}=t;y.value=!0,await b(),(i=x.value)==null||i.open(),(g=x.value)==null||g.setFormData({...e,job_id:t.id})},Y=async t=>{B.replace(`/app/interview?type=2&id=${t}`),setTimeout(()=>{window.location.reload()},100)},z=async t=>{f.loading("复制中...");try{const{url:e}=await fe({job_id:t});e?C(e,{successMsg:"复制链接成功"}):f.msgError("小程序未配置，请联系站长")}catch(e){f.msgError(e)}finally{f.closeLoading()}},H=async(t,e)=>{D.$confirm({message:"是否删除该岗位？",onConfirm:async()=>{await ve({id:t}),u.lists.splice(e,1)}})},T=async()=>{E.page_no+=1,await $()};return $(),(t,e)=>{const i=oe,g=le,q=ie,G=ae,K=re,Z=_e;return a(),c("div",xe,[s("div",ye,[e[8]||(e[8]=s("div",null,[s("div",{class:"text-2xl"},"岗位列表"),s("div",{class:"text-[#74798C] mt-1"},"创建你的岗位，全自动进行人员招聘")],-1)),s("div",null,[l(i,{color:"#FFC8A4",class:"!h-[40px] w-[120px]",loading:n(J),onClick:e[0]||(e[0]=o=>n(I)())},{default:r(()=>[...e[6]||(e[6]=[s("span",{class:"text-[#653619]"},"分享链接",-1)])]),_:1},8,["loading"]),l(i,{type:"primary",class:"!h-[40px] w-[120px]",onClick:e[1]||(e[1]=o=>M())},{default:r(()=>[...e[7]||(e[7]=[p("新增岗位",-1)])]),_:1})])]),X((a(),c("div",{class:"grow min-h-0 flex flex-col mt-6 overflow-y-auto","infinite-scroll-immediate":!1,"infinite-scroll-disabled":!n(u).isLoad,"infinite-scroll-distance":10},[n(u).lists.length>0?(a(),c(P,{key:0},[s("div",he,[(a(!0),c(P,null,ee(n(u).lists,(o,j)=>(a(),c("div",{key:j,class:"h-[168px] rounded-[6px] bg-white px-6 py-4 group relative cursor-pointer flex flex-col hover:shadow-lighter transition-all duration-300"},[s("div",we,[l(i,{link:"",icon:"el-icon-CopyDocument",onClick:d=>z(o.id)},{default:r(()=>[...e[9]||(e[9]=[p("复制链接",-1)])]),_:1},8,["onClick"])]),s("div",be,[l(g,{src:o.avatar,lazy:"",fit:"cover",class:"w-10 h-10 rounded-[5px]"},null,8,["src"]),s("span",Ce,_(o.name),1)]),s("div",Ee,[s("div",$e,_(o.desc),1)]),s("div",Le,[s("div",null,_(n(se)(o.create_time).format("YYYY/MM/DD"))+" 发布 ",1),s("div",null,"面试人数："+_(o.interview_user_num||0),1)]),s("div",{class:te(["absolute right-2 top-2 z-[1000] invisible group-hover:visible",[n(k)==o.id?"!visible":""]])},[l(G,{"show-arrow":!1,"popper-class":"!w-[130px] !min-w-[130px] !p-[6px] !rounded-xl",onShow:d=>S(!0,o.id),onHide:d=>S(!1,o.id)},{reference:r(()=>[s("div",Se,[l(q,{name:"el-icon-MoreFilled"})])]),default:r(()=>[s("div",je,[s("div",{class:"px-2 py-1 hover:bg-primary-light-9 rounded-lg cursor-pointer",onClick:d=>N(o.id)},[l(i,{link:"",icon:"el-icon-Edit",class:"w-full !justify-start"},{default:r(()=>[...e[10]||(e[10]=[p("编辑岗位",-1)])]),_:1})],8,Ae),s("div",{class:"px-2 py-1 hover:bg-primary-light-9 rounded-lg cursor-pointer",onClick:d=>V(o)},[l(i,{link:"",icon:"el-icon-Setting",class:"w-full !justify-start"},{default:r(()=>[...e[11]||(e[11]=[p("RPA设置",-1)])]),_:1})],8,Pe),s("div",{class:"px-2 py-1 hover:bg-primary-light-9 rounded-lg cursor-pointer",onClick:d=>Y(o.id)},[l(i,{link:"",icon:"el-icon-VideoCamera",class:"w-full !justify-start"},{default:r(()=>[...e[12]||(e[12]=[p("面试记录",-1)])]),_:1})],8,Re),s("div",{class:"px-2 py-1 hover:bg-primary-light-9 rounded-lg cursor-pointer",onClick:d=>H(o.id,j)},[l(i,{link:"",icon:"el-icon-Delete",class:"w-full !justify-start"},{default:r(()=>[...e[13]||(e[13]=[p("删除",-1)])]),_:1})],8,Be)])]),_:2},1032,["onShow","onHide"])],2)]))),128))]),n(u).isLoad?w("",!0):(a(),c("div",De,"暂无更多了"))],64)):(a(),c("div",Fe,[l(K,{description:"暂无数据"})]))],8,ke)),[[Z,T]]),n(v)?(a(),R(me,{key:0,ref_key:"editPopRef",ref:m,onClose:e[2]||(e[2]=o=>v.value=!1),onSuccess:e[3]||(e[3]=o=>n(L)())},null,512)):w("",!0),n(y)?(a(),R(ge,{key:1,ref_key:"rpaEditRef",ref:x,onClose:e[4]||(e[4]=o=>y.value=!1),onSuccess:e[5]||(e[5]=o=>n(L)())},null,512)):w("",!0)])}}});export{Oe as _};

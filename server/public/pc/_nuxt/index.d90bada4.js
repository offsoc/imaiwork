import{E as T,a as q}from"./index.ed825429.js";import{d as J,r as g,aF as O,k as o,l as i,m as c,q as n,s as d,Z as s,J as x,K as E,I as U,v as y,bM as G,L as h,aI as H,u as w,G as p,ax as K,cJ as M,ba as W,y as Z,cW as Q,_ as X}from"./entry.f4f46cb5.js";import{E as Y}from"./index.bad4fd13.js";/* empty css                  *//* empty css               *//* empty css                     */import{u as ee}from"./usePaging.64f4ceb2.js";import{k as le,l as se,m as te}from"./digital_human.b276942f.js";import oe from"./video-item.0ed8a7ed.js";import{_ as ae}from"./empty.vue.e7db209b.js";import{E as ie}from"./index.cc7179fb.js";import"./index.03679949.js";import"./strings.87cef2c7.js";import"./_baseIteratee.0f37ae7b.js";import"./toNumber.d5c70aa7.js";import"./clamp.6295a89e.js";import"./index.d4d0dc47.js";import"./index.25e18e1c.js";import"./index.vue.cb61de56.js";import"./index.vue.b711ba9e.js";/* empty css                   */import"./useTemplate.afda57ca.js";import"./throttle.a2681779.js";import"./debounce.640f3738.js";const ne={class:"h-full flex flex-col bg-app-bg-2 rounded-[20px]"},re={class:"flex-shrink-0 px-[14px]"},ce={class:"flex items-center justify-end h-[88px]"},de={class:"flex items-center gap-[14px]"},ue={key:1,class:"flex items-center gap-2"},pe=["infinite-scroll-disabled"],me={class:"h-full"},fe={key:0},_e={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4"},ve=["onClick"],ge={key:0,class:"absolute top-0 right-0 z-[1000] w-full h-full bg-black/5 flex justify-end p-2"},xe={class:"w-6 h-6 rounded-full"},ye={key:0,class:"text-white text-center text-xs w-full py-4"},he={key:1,class:"h-full flex items-center justify-center"},ke=J({__name:"index",setup(be){const C=[{label:"全部",value:""},{label:"生成中",value:"0"},{label:"生成成功",value:"1"},{label:"生成失败",value:"2"}],m=g(!1),u=g(!1),a=g([]),f=O({page_no:1,page_size:20,status:"",model_version:"",type:0}),{pager:r,getLists:k,resetPage:v}=ee({fetchFun:le,params:f,isScroll:!0}),V=()=>{m.value=!1,a.value=[]},S=t=>{a.value.includes(t)?a.value=a.value.filter(e=>e!==t):a.value.push(t),a.value.length==r.lists.length?u.value=!0:u.value=!1},L=()=>{u.value?a.value=r.lists.map(t=>t.id):a.value=[]},$=async()=>{f.page_no+=1,k()},I=async t=>{w().$confirm({message:"确定重试该视频吗？",theme:"dark",onConfirm:async()=>{try{p.loading("重试中..."),await se({video_id:t}),v(),p.msgSuccess("重试成功")}catch(e){p.msgError(e||"重试失败")}finally{p.closeLoading()}}})},b=async t=>{w().$confirm({message:"确定删除吗？",theme:"dark",onConfirm:async()=>{try{await te({id:t}),r.lists=r.lists.filter(e=>typeof t=="number"?e.id!==t:!a.value.includes(e.id)),p.msgSuccess("删除成功")}catch{p.msgError("删除失败")}}})};return k(),(t,e)=>{const B=T,D=q,_=K,N=M,R=W,j=Y,z=Z,A=ie,F=Q;return o(),i("div",ne,[c("div",re,[n(j,null,{default:d(()=>[c("div",ce,[c("div",de,[n(D,{modelValue:s(f).status,"onUpdate:modelValue":e[0]||(e[0]=l=>s(f).status=l),class:"!w-[260px] status-select","popper-class":"dark-select-popper",clearable:"","show-arrow":!1,"empty-values":[null,void 0],"value-on-clear":null,onChange:e[1]||(e[1]=l=>s(v)())},{default:d(()=>[(o(),i(x,null,E(C,l=>n(B,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),s(r).lists.length>0?(o(),i(x,{key:0},[s(m)?(o(),i("div",ue,[n(N,{modelValue:s(u),"onUpdate:modelValue":e[3]||(e[3]=l=>G(u)?u.value=l:null),onChange:L},{default:d(()=>[...e[7]||(e[7]=[y(" 全选 ",-1)])]),_:1},8,["modelValue"]),n(_,{type:"danger",class:"!h-10 !rounded-full !w-[90px]",onClick:e[4]||(e[4]=l=>b(s(a)))},{default:d(()=>[...e[8]||(e[8]=[y(" 删除 ",-1)])]),_:1}),c("div",null,[n(_,{link:"",onClick:V},{default:d(()=>[...e[9]||(e[9]=[c("span",{class:"text-white"},"退出管理",-1)])]),_:1})])])):(o(),U(_,{key:0,type:"primary",class:"!h-10 !rounded-full !w-[116px]",onClick:e[2]||(e[2]=l=>m.value=!0)},{default:d(()=>[...e[6]||(e[6]=[y(" 批量管理 ",-1)])]),_:1}))],64)):h("",!0),c("div",null,[n(R,{content:"刷新"},{default:d(()=>[n(_,{circle:"",color:"#1f1f1f",icon:"el-icon-Refresh",class:"!w-10 !h-10",onClick:e[5]||(e[5]=l=>s(v)())})]),_:1})])])])]),_:1})]),H((o(),i("div",{class:"grow min-h-0 overflow-y-auto p-4 dynamic-scroller","infinite-scroll-immediate":!1,"infinite-scroll-disabled":!s(r).isLoad,"infinite-scroll-distance":10},[c("div",me,[s(r).lists.length?(o(),i("div",fe,[c("div",_e,[(o(!0),i(x,null,E(s(r).lists,(l,P)=>(o(),i("div",{class:"h-[295px] relative cursor-pointer overflow-hidden",key:P,onClick:Ee=>S(l.id)},[n(oe,{"is-create":"",item:{id:l.id,name:l.name,pic:l.pic,status:l.status,video_url:l.result_url,clip_video_url:l.clip_result_url,model_version:l.model_version,remark:l.remark,create_time:l.create_time,automatic_clip:l.automatic_clip,clip_status:l.clip_status},onRetry:I,onDelete:b},null,8,["item"]),s(m)?(o(),i("div",ge,[c("div",xe,[n(z,{name:"local-icon-success_fill",size:20,color:s(a).includes(l.id)?"var(--el-color-error)":"#ffffff1a"},null,8,["color"])])])):h("",!0)],8,ve))),128))]),s(r).isLoad?h("",!0):(o(),i("div",ye,"暂无更多了~"))])):(o(),i("div",he,[n(ae)]))])],8,pe)),[[A,$],[F,s(r).loading]])])}}});const Me=X(ke,[["__scopeId","data-v-b129658c"]]);export{Me as default};

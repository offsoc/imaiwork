import{d as D,a as H,bP as M,c as X,r as z,o as F,k as s,l as c,Z as o,J as b,m as n,K as G,Y as J,t as f,q as a,s as i,$ as O,aI as W,I as v,v as k,dP as C,bM as Y,G as w,y as Z,ax as Q,au as ee,cW as te}from"./entry.ca4d3d61.js";import{E as oe}from"./el-avatar.c9f3005f.js";import{E as ne,a as ae}from"./index.9a4d38a6.js";import{E as le}from"./el-switch.f1c6cc29.js";import{E as se}from"./el-empty.355e6a02.js";import{_ as ie}from"./index.vue.441733b3.js";/* empty css                        *//* empty css               *//* empty css                 *//* empty css                     */import{c as re}from"./service.9c966dd0.js";import{u as ce}from"./useSocialPlatform.9d5915bd.js";import de from"./useAccount.aeb2a718.js";import{_ as ue}from"./account-setting.vue.c2fab563.js";const pe={class:"h-full flex rounded-lg overflow-hidden"},me={class:"w-[178px] bg-white border-r border-r-[#E8E8E8] flex-shrink-0"},_e={class:"flex flex-col gap-y-4 p-4"},fe=["onClick"],ve=["src"],ye={class:"flex-1 bg-white flex flex-col py-4 overflow-hidden"},he={class:"px-4 flex items-center justify-between"},ge={class:"grow min-h-0 mt-4"},Ee={key:1},xe={key:1},be={class:"flex justify-end px-4 mt-4"},Ne=D({__name:"index",setup(ke){const g=H(),y=M(),{socialPlatformList:V,currentSocialPlatform:m}=ce(),{accountPager:d,queryParams:h,getAccountList:u,resetAccountPage:E,resetAccountParams:S}=de({type:m.value}),P=X(()=>V.filter(l=>l.show)),$=l=>{m.value=l,h.type=l,E()},_=z(!1),A=async l=>{try{await re({account:l.account,open_ai:l.open_ai}),w.msgSuccess("操作成功")}catch{w.msgError("操作失败")}u()},q=l=>{_.value=!0,g.replace({query:{...y.query,id:l.id,account:l.account,app_type:m.value}})},B=()=>{_.value=!1,g.replace({query:{...y.query,id:void 0,account:void 0}}),E()};return F(()=>{y.query.id?_.value=!0:u()}),(l,t)=>{const T=Z,x=Q,I=ee,L=oe,r=ne,R=le,U=se,K=ae,N=ie,j=te;return s(),c("div",pe,[o(_)?(s(),v(ue,{key:1,onClose:B})):(s(),c(b,{key:0},[n("div",me,[n("div",_e,[(s(!0),c(b,null,G(o(P),(e,p)=>(s(),c("div",{key:p,class:J(["flex items-center gap-x-3 px-4 hover:bg-primary-light-9 py-1.5 rounded-lg cursor-pointer",{"bg-primary-light-9":o(m)===e.type}]),onClick:Ce=>$(e.type)},[n("img",{src:e.icon,class:"w-6 h-6"},null,8,ve),n("div",null,f(e.name),1)],10,fe))),128))])]),n("div",ye,[n("div",he,[a(x,{text:"",onClick:t[0]||(t[0]=e=>o(u)())},{default:i(()=>[a(T,{name:"el-icon-Refresh"}),t[5]||(t[5]=n("span",null,"刷新",-1))]),_:1}),n("div",null,[a(I,{modelValue:o(h).name,"onUpdate:modelValue":t[1]||(t[1]=e=>o(h).name=e),placeholder:"搜索账号信息","prefix-icon":"el-icon-Search",clearable:"",onClear:t[2]||(t[2]=e=>o(S)()),onKeyup:t[3]||(t[3]=O(e=>o(u)(),["enter"]))},null,8,["modelValue"])])]),n("div",ge,[W((s(),v(K,{data:o(d).lists,height:"100%",stripe:"","row-style":{height:"60px"},"header-cell-style":{height:"63px"}},{empty:i(()=>[a(U,{description:"暂无数据"})]),default:i(()=>[a(r,{label:"头像"},{default:i(({row:e})=>[a(L,{src:e.avatar},null,8,["src"])]),_:1}),a(r,{label:"账号/昵称",prop:"account","min-width":"120"},{default:i(({row:e})=>[n("div",null,[n("div",null,f(e.account),1),n("div",null,"("+f(e.nickname)+")",1)])]),_:1}),a(r,{prop:"device_code",label:"所属设备"}),a(r,{prop:"robot_name",label:"接管机器人"},{default:i(({row:e})=>[n("div",null,f(e.robot_name||"-"),1)]),_:1}),a(r,{label:"接管类型",width:"80"},{default:i(({row:e})=>[...t[6]||(t[6]=[k(" 私聊 ",-1)])]),_:1}),a(r,{prop:"name",label:"接管状态"},{default:i(({row:e})=>[e.type==o(C).XHS?(s(),v(R,{key:0,modelValue:e.open_ai,"onUpdate:modelValue":p=>e.open_ai=p,"active-value":1,"inactive-value":0,onChange:p=>A(e)},null,8,["modelValue","onUpdate:modelValue","onChange"])):(s(),c("div",Ee,"-"))]),_:1}),a(r,{prop:"name",label:"操作",width:"100px",fixed:"right"},{default:i(({row:e})=>[e.type==o(C).XHS?(s(),v(x,{key:0,link:"",type:"primary",onClick:p=>q(e)},{default:i(()=>[...t[7]||(t[7]=[k(" 配置 ",-1)])]),_:1},8,["onClick"])):(s(),c("div",xe,"-"))]),_:1})]),_:1},8,["data"])),[[j,o(d).loading]])]),n("div",be,[a(N,{modelValue:o(d),"onUpdate:modelValue":t[4]||(t[4]=e=>Y(d)?d.value=e:null),onChange:o(u)},null,8,["modelValue","onChange"])])])],64))])}}});export{Ne as _};

import{E as z,a as N}from"./index.79f7263c.js";import{d as U,aF as I,k as p,l as m,m as u,q as e,s as t,Z as o,J as v,K as V,I as w,eh as g,v as i,aI as P,t as R,L as y,bK as W,G as x,av as K,ax as j,ay as q,cQ as H,u as G,_ as J}from"./entry.d9d53b29.js";import{E as Q,a as Z}from"./index.9a037d22.js";import{E as M}from"./el-empty.03c7f5cd.js";import{_ as X}from"./index.vue.930f6062.js";/* empty css                  *//* empty css               *//* empty css                     *//* empty css                        *//* empty css                 */import{u as Y}from"./usePaging.64764a63.js";import{u as ee}from"./useDictOptions.794690b5.js";import{k as le,r as ae,l as te}from"./service.12abd78a.js";import{z as oe}from"./person_wechat.8bcf26fc.js";import{g as se}from"./device.317521e4.js";import"./index.050c9b6b.js";import"./index.8a3302e5.js";import"./strings.fbd015b4.js";import"./debounce.39f38609.js";import"./_baseIteratee.73cb21ab.js";import"./index.4538c991.js";const re={class:"h-full flex flex-col bg-app-bg-2 rounded-[20px]"},ne={class:"flex-shrink-0 p-[14px]"},pe={class:"flex items-center"},de={class:"grow min-h-0 overflow-hidden flex flex-col"},ie={class:"grow min-h-0"},ue={class:"flex justify-end items-center"},ce={class:"flex justify-center items-center h-full"},me={class:"flex justify-center p-4"},_e=U({__name:"index",setup(fe){const k=G(),s=I({device_code:"",wechat_no:"",channel:"",exec_type:"",name:"",status:"",page_size:20}),{pager:_,getLists:f,resetParams:C}=Y({fetchFun:le,params:s}),{optionsData:E}=ee({deviceLists:{api:se,params:{page_size:999},transformData:n=>n.lists},wechatLists:{api:oe,params:{page_size:999},transformData:n=>n.lists}}),A=n=>({[g.SPH]:"视频号",[g.REDBOOK]:"小红书"})[n],D=n=>{k.$confirm({message:"确定重试该记录吗？",theme:"dark",onConfirm:async()=>{try{await ae({id:n}),x.msgSuccess("重试成功"),f()}catch(a){x.msgError(a||"重试失败")}}})},L=async n=>{k.$confirm({message:"确定删除该记录吗？",theme:"dark",onConfirm:async()=>{try{await te({id:n}),x.msgSuccess("删除成功"),f()}catch(a){x.msgError(a||"删除失败")}}})};return f(),(n,a)=>{const r=z,h=N,c=K,b=j,B=q,d=Q,F=M,O=Z,S=X,T=H;return p(),m("div",re,[u("div",ne,[u("div",pe,[e(B,{model:o(s),inline:"",class:"w-full -mb-4"},{default:t(()=>[e(c,{label:"执行设备："},{default:t(()=>[e(h,{modelValue:o(s).device_code,"onUpdate:modelValue":a[0]||(a[0]=l=>o(s).device_code=l),class:"!w-[260px] !h-10","popper-class":"dark-select-popper",placeholder:"请选择执行设备",filterable:"",clearable:"","show-arrow":!1},{default:t(()=>[(p(!0),m(v,null,V(o(E).deviceLists,l=>(p(),w(r,{key:l.id,label:l.device_code,value:l.device_code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(c,{label:"添加渠道："},{default:t(()=>[e(h,{modelValue:o(s).channel,"onUpdate:modelValue":a[1]||(a[1]=l=>o(s).channel=l),class:"!w-[260px] !h-10","popper-class":"dark-select-popper",placeholder:"请选择添加渠道",filterable:"",clearable:"","show-arrow":!1},{default:t(()=>[e(r,{label:"小红书",value:o(g).REDBOOK},null,8,["value"]),e(r,{label:"视频号",value:o(g).SPH},null,8,["value"])]),_:1},8,["modelValue"])]),_:1}),e(c,{label:"执行类型："},{default:t(()=>[e(h,{modelValue:o(s).exec_type,"onUpdate:modelValue":a[2]||(a[2]=l=>o(s).exec_type=l),class:"!w-[260px] !h-10","popper-class":"dark-select-popper",placeholder:"请选择执行类型",filterable:"",clearable:"","show-arrow":!1},{default:t(()=>[e(r,{label:"私信聊天",value:"1"},null,8,["value"]),e(r,{label:"自动爬取",value:"2"},null,8,["value"]),e(r,{label:"自动私信",value:"3"},null,8,["value"])]),_:1},8,["modelValue"])]),_:1}),e(c,{label:"添加微信："},{default:t(()=>[e(h,{modelValue:o(s).wechat_no,"onUpdate:modelValue":a[3]||(a[3]=l=>o(s).wechat_no=l),class:"!w-[260px] !h-10","popper-class":"dark-select-popper",placeholder:"请选择添加微信",filterable:"",clearable:"","show-arrow":!1},{default:t(()=>[(p(!0),m(v,null,V(o(E).wechatLists,l=>(p(),w(r,{key:l.id,label:l.wechat_nickname,value:l.wechat_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(c,{label:"加微结果："},{default:t(()=>[e(h,{modelValue:o(s).status,"onUpdate:modelValue":a[4]||(a[4]=l=>o(s).status=l),class:"!w-[260px] !h-10","popper-class":"dark-select-popper",placeholder:"请选择加微结果",filterable:"",clearable:"","empty-values":[void 0,null],"show-arrow":!1},{default:t(()=>[e(r,{label:"全部",value:""}),e(r,{label:"失败",value:"0"}),e(r,{label:"成功",value:"1"}),e(r,{label:"执行中",value:"2"})]),_:1},8,["modelValue"])]),_:1}),e(c,null,{default:t(()=>[e(b,{type:"primary",class:"!h-10 !rounded-full w-[140px]",onClick:a[5]||(a[5]=l=>o(f)())},{default:t(()=>a[8]||(a[8]=[i("搜索",-1)])),_:1,__:[8]}),e(b,{color:"#181818",class:"!h-10 !rounded-full w-[140px] !border-app-border-2",onClick:a[6]||(a[6]=l=>o(C)())},{default:t(()=>a[9]||(a[9]=[i("重置",-1)])),_:1,__:[9]})]),_:1})]),_:1},8,["model"])])]),u("div",de,[u("div",ie,[P((p(),w(O,{height:"100%",data:o(_).lists,"header-row-style":{height:"62px"},"row-style":{height:"50px"}},{empty:t(()=>[u("div",ce,[e(F,{description:"暂无数据"})])]),default:t(()=>[e(d,{prop:"device_code",label:"执行设备",width:"240",fixed:"left"}),e(d,{label:"添加渠道",width:"140"},{default:t(({row:l})=>[i(R(A(l.channel)),1)]),_:1}),e(d,{label:"执行类型",width:"140"},{default:t(({row:l})=>[l.exec_type=="1"?(p(),m(v,{key:0},[i("私信聊天")],64)):y("",!0),l.exec_type=="2"?(p(),m(v,{key:1},[i("自动爬取")],64)):y("",!0),l.exec_type=="3"?(p(),m(v,{key:2},[i("自动私信")],64)):y("",!0)]),_:1}),e(d,{prop:"original_message",label:"匹配内容","min-width":"200","show-overflow-tooltip":""}),e(d,{prop:"reg_wechat",label:"提取内容","min-width":"160"}),e(d,{prop:"wechat_name",label:"添加微信","min-width":"120"}),e(d,{prop:"result",label:"加好友结果","min-width":"120","show-overflow-tooltip":""}),e(d,{prop:"create_time",label:"创建时间",width:"180"}),e(d,{label:"操作",width:"120",fixed:"right",align:"right"},{default:t(({row:l})=>[u("div",ue,[l.status==0?(p(),w(b,{key:0,class:"!border-app-border-2",color:"#181818",size:"small",onClick:$=>D(l.id)},{default:t(()=>a[10]||(a[10]=[i("重试",-1)])),_:2,__:[10]},1032,["onClick"])):y("",!0),e(b,{type:"danger",link:"",size:"small",onClick:$=>L(l.id)},{default:t(()=>a[11]||(a[11]=[i("删除",-1)])),_:2,__:[11]},1032,["onClick"])])]),_:1})]),_:1},8,["data"])),[[T,o(_).loading]])]),u("div",me,[e(S,{modelValue:o(_),"onUpdate:modelValue":a[7]||(a[7]=l=>W(_)?_.value=l:null),layout:"prev, pager, next",onChange:o(f)},null,8,["modelValue","onChange"])])])])}}});const Ne=J(_e,[["__scopeId","data-v-26981865"]]);export{Ne as default};

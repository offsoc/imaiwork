import{E as O,a as F}from"./el-tabs.4663b04e.js";import{d as G,a as J,bM as U,r as x,aF as H,D as Z,o as Q,k as n,l as i,Z as r,m as e,t as d,dl as W,dm as X,q as u,s as g,J as h,K as C,bK as Y,aI as ee,I as b,L as y,G as R,aH as te,bJ as se,y as oe,ax as ne,b5 as ie,u as le,_ as ae}from"./entry.d9d53b29.js";import{_ as re}from"./handle-menu.vue.89322cf0.js";import{u as ce}from"./usePaging.64764a63.js";import{v as de,k as pe,C as ue,D as _e}from"./knowledge_base.519704cc.js";import{KnTypeEnum as _}from"./index.5bd136e1.js";import{_ as me}from"./create-panel.vue.5bd4a108.js";import{E as fe}from"./index.01064705.js";import"./strings.fbd015b4.js";import"./index.85329892.js";import"./index.890e9d1e.js";/* empty css                   */import"./useTemplate.afda57ca.js";import"./index.050c9b6b.js";/* empty css                     */import"./base-form.c59b6255.js";import"./index.79f7263c.js";import"./index.8a3302e5.js";import"./debounce.39f38609.js";import"./_baseIteratee.73cb21ab.js";import"./index.4538c991.js";import"./index.vue.3e248b2d.js";import"./index.ece7f347.js";import"./index.d23c2db7.js";import"./index.cce223cb.js";import"./cloneDeep.df46b56a.js";/* empty css                  *//* empty css                    *//* empty css                  *//* empty css                  *//* empty css               */import"./position.0f08d59c.js";import"./throttle.cbb177ea.js";const ve=""+new URL("kb.f5eabd18.svg",import.meta.url).href,xe={key:0,class:"h-full w-full p-4 flex flex-col"},ge={class:"rounded-[20px] flex items-center gap-3 px-[30px]",style:{background:`linear-gradient(152deg, rgba(0, 101, 251, 0.88) -42.44%, rgba(255, 255, 255, 0) 12.19%)
                    rgb(255, 255, 255)`}},he={class:"text-[#000000cc]"},be={class:"grow min-h-0 flex flex-col bg-white rounded-[20px] mt-4"},ye=["infinite-scroll-disabled"],ke={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-[18px] py-4 px-[20px]"},we={class:"kb-item"},Ee={class:"flex justify-between gap-x-2"},Te={class:"flex items-center gap-x-2"},Ce={class:"flex-shrink-0 w-[50px] h-[50px] flex items-center justify-center rounded-md border border-[#0000001a]"},Re=["onClick"],Be={class:"flex items-center gap-x-2"},Ve={class:"w-[50px] h-[50px] flex items-center justify-center rounded-md border border-[#0000001a] p-[2px]"},Ae=["src"],Le={class:"text-[#00000080]"},De={class:"text-[#00000080] h-[40px] overflow-hidden mt-3 break-all flex-shrink-0"},qe={key:1,class:"text-[#00000080] h-[40px] overflow-hidden mt-3 break-all flex-shrink-0"},Ie={class:"text-[10px] flex items-center justify-between text-[#AAA6B9] mt-3"},Pe={class:"absolute right-2 top-2 z-[1000] invisible group-hover:visible"},Se={key:0,class:"text-center py-4 text-gray-500"},$e=G({__name:"index",setup(je){const m=J(),B=U(),V=le(),l=x(_.VECTOR),A=[{label:"向量知识库",value:_.VECTOR},{label:"RAG知识库",value:_.RAG}],k=H({page_no:1}),{pager:a,getLists:w,resetPage:E}=ce({fetchFun:o=>l.value===_.VECTOR?de(o):pe(o),params:k,isScroll:!0}),f=x(),L=o=>{l.value=o.paneName,E()},D=[{label:"删除知识库",icon:"local-icon-delete",click:({id:o})=>{V.$confirm({message:"确定删除该知识库吗？",onConfirm:async()=>{try{l.value===_.VECTOR?await ue({id:o}):await _e({id:o});const s=a.lists.findIndex(c=>c.id==o);s!==-1&&a.lists.splice(s,1),R.msgSuccess("删除成功")}catch(s){R.msgError(s)}}})}}],p=x(B.query.is_create=="1"),q=async()=>{p.value=!0,m.push({query:{is_create:1,type:l.value}})},I=o=>{m.push({path:`/knowledge_base/detail/${o.id}`,query:{kn_type:l.value,index_id:o.index_id||void 0,category_id:o.category_id||void 0,kn_name:o.name}})},P=()=>{k.page_no++,w()},S=()=>{p.value=!1,m.replace({query:{is_create:void 0,type:void 0}}),E()},$=()=>{p.value||w()};return Z(()=>a.lists,async()=>{a.lists.length&&(await te(),a.lists.forEach((o,s)=>{const c=f.value[s];if(c){const{height:v}=se(c);o.is_ellipsis=v.value>40}}))}),Q($),(o,s)=>{const c=O,v=F,T=oe,j=ne,K=ie,N=re,z=fe;return n(),i(h,null,[r(p)?y("",!0):(n(),i("div",xe,[e("div",ge,[s[2]||(s[2]=e("img",{src:ve,class:"w-11 mt-7"},null,-1)),e("div",null,[e("div",he,d(r(W)[r(X).DATABASE]),1),s[1]||(s[1]=e("div",{class:"text-[#00000080]"},"打通企业知识脉络，智能检索、主动推送让知识流转如呼吸般自然简单。",-1))])]),e("div",be,[u(v,{modelValue:r(l),"onUpdate:modelValue":s[0]||(s[0]=t=>Y(l)?l.value=t:null),onTabClick:L},{default:g(()=>[(n(),i(h,null,C(A,t=>u(c,{key:t.value,label:t.label,name:t.value},null,8,["label","name"])),64))]),_:1},8,["modelValue"]),ee((n(),i("div",{class:"grow min-h-0 flex flex-col overflow-y-auto","infinite-scroll-immediate":!1,"infinite-scroll-disabled":!r(a).isLoad,"infinite-scroll-distance":10},[e("div",ke,[e("div",we,[e("div",Ee,[e("div",Te,[e("div",Ce,[u(T,{name:"local-icon-windows2",size:24})]),s[3]||(s[3]=e("div",null,[e("div",null,"知识库"),e("div",{class:"text-[#00000080]"},"立即创建知识库")],-1))]),e("div",null,[u(j,{type:"primary",class:"!h-[30px]",onClick:q},{default:g(()=>s[4]||(s[4]=[e("span",{class:"text-[11px]"},"立即创建",-1)])),_:1,__:[4]})])]),s[5]||(s[5]=e("div",{class:"mt-3 text-[#00000080] h-[50px]"}," 导入相关文件数据，知识库将被集成到各项应用中作为上下文,或可以创建为独立的调用库使用 ",-1))]),(n(!0),i(h,null,C(r(a).lists,(t,M)=>(n(),i("div",{key:M,class:"kb-item group",onClick:Ke=>I(t)},[e("div",Be,[e("div",Ve,[t.image?(n(),i("img",{key:0,src:t.image,class:"w-full h-full object-cover rounded-md"},null,8,Ae)):(n(),b(T,{key:1,name:"local-icon-windows2",size:24}))]),e("div",null,[e("div",null,d(t.name),1),e("div",Le,d(t.file_counts||0)+"文档",1)])]),t.is_ellipsis?(n(),b(K,{key:0,"popper-class":"max-w-[400px]",content:t.intro||t.description},{default:g(()=>[e("div",De,[e("div",{ref_for:!0,ref_key:"contentRef",ref:f,class:"line-clamp-2"},d(t.intro||t.description),513)])]),_:2},1032,["content"])):(n(),i("div",qe,[e("div",{ref_for:!0,ref_key:"contentRef",ref:f},d(t.intro||t.description),513)])),e("div",Ie,[e("div",null,d(t.create_time)+" 创建 ",1)]),e("div",Pe,[u(N,{data:t,"menu-list":D},null,8,["data"])])],8,Re))),128))]),r(a).isLoad?(n(),i("div",Se,"暂无更多了")):y("",!0)],8,ye)),[[z,P]])])])),r(p)?(n(),b(me,{key:1,ref:"createPanelRef",onBack:S},null,512)):y("",!0)],64)}}});const ht=ae($e,[["__scopeId","data-v-cc98c910"]]);export{ht as default};

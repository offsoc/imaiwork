import{E as $,a as N}from"./index.4d719c96.js";import{d as S,aF as T,k as m,l as v,m as w,q as e,s as l,Z as o,J as k,K as x,I as h,v as c,t as U,L as I,bM as R,G as b,av as W,ax as z,ay as O,u as P,_ as q}from"./entry.2beb4577.js";import{E as j,a as G}from"./index.6beaca44.js";import{E as J}from"./el-empty.bc763313.js";import{_ as K}from"./index.vue.5646543a.js";/* empty css                  *//* empty css               *//* empty css                     *//* empty css                        *//* empty css                 */import{u as M}from"./usePaging.85211d66.js";import{u as Z}from"./useDictOptions.8db81bce.js";import{k as H,g as Q,r as X,l as Y}from"./service.595be035.js";import{z as ee}from"./person_wechat.8bcf26fc.js";import"./index.47b30189.js";import"./index.dcd97a19.js";import"./strings.a9740cf6.js";import"./_baseIteratee.70cb6d8d.js";import"./toNumber.c824a4a2.js";import"./clamp.a46ea567.js";import"./index.9d200730.js";import"./debounce.dd7f88c1.js";import"./raf.c0777355.js";const te={class:"flex flex-col h-full bg-white rounded-[20px]"},ae={class:"p-4"},le={class:"grow min-h-0"},oe={class:"flex justify-end p-4"},se=S({__name:"index",setup(ne){const y=P(),s=T({account:"",wechat_no:"",action:"",status:""}),{pager:_,getLists:d,resetParams:V}=M({fetchFun:H,params:s}),{optionsData:E}=Z({redbookLists:{api:Q,params:{page_size:999},transformData:r=>r.lists},wechatLists:{api:ee,params:{page_size:999},transformData:r=>r.lists}}),C=r=>{y.$confirm({message:"确定重试该记录吗？",onConfirm:async()=>{try{await X({id:r}),d(),b.msgSuccess("重试成功")}catch(t){b.msgError(t||"重试失败")}}})},A=r=>{y.$confirm({message:"确定删除该记录吗？",onConfirm:async()=>{try{await Y({id:r}),d(),b.msgSuccess("删除成功")}catch(t){b.msgError(t||"删除失败")}}})};return d(),(r,t)=>{const i=$,f=N,p=W,g=z,L=O,n=j,F=J,B=G,D=K;return m(),v("div",te,[w("div",ae,[e(L,{model:o(s),inline:"",class:"w-full"},{default:l(()=>[e(p,{label:"来源账号"},{default:l(()=>[e(f,{modelValue:o(s).account,"onUpdate:modelValue":t[0]||(t[0]=a=>o(s).account=a),class:"!w-[200px]",placeholder:"请选择来源账号"},{default:l(()=>[(m(!0),v(k,null,x(o(E).redbookLists,(a,u)=>(m(),h(i,{key:u,label:a.nickname,value:a.account},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"执行微信"},{default:l(()=>[e(f,{modelValue:o(s).wechat_no,"onUpdate:modelValue":t[1]||(t[1]=a=>o(s).wechat_no=a),class:"!w-[200px]",placeholder:"请选择执行微信"},{default:l(()=>[(m(!0),v(k,null,x(o(E).wechatLists,(a,u)=>(m(),h(i,{key:u,label:a.wechat_nickname,value:a.wechat_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"执行动作"},{default:l(()=>[e(f,{modelValue:o(s).action,"onUpdate:modelValue":t[2]||(t[2]=a=>o(s).action=a),class:"!w-[200px]",placeholder:"请选择执行动作","empty-values":[null,void 0]},{default:l(()=>[e(i,{label:"自动添加",value:""})]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"执行结果"},{default:l(()=>[e(f,{modelValue:o(s).status,"onUpdate:modelValue":t[3]||(t[3]=a=>o(s).status=a),class:"!w-[200px]",placeholder:"请选择执行结果","empty-values":[null,void 0]},{default:l(()=>[e(i,{label:"全部",value:""}),e(i,{label:"成功",value:"1"}),e(i,{label:"失败",value:"2"})]),_:1},8,["modelValue"])]),_:1}),e(p,null,{default:l(()=>[e(g,{type:"primary",onClick:t[4]||(t[4]=a=>o(d)())},{default:l(()=>[...t[6]||(t[6]=[c(" 搜索 ",-1)])]),_:1}),e(g,{onClick:o(V)},{default:l(()=>[...t[7]||(t[7]=[c(" 重置 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),w("div",le,[e(B,{data:o(_).lists,height:"100%","row-style":{height:"60px"}},{empty:l(()=>[e(F,{description:"暂无数据"})]),default:l(()=>[e(n,{prop:"device_code",label:"设备码",width:"180"}),e(n,{prop:"account",label:"来源账号",width:"150"}),e(n,{prop:"user_account",label:"小红书用户信息","min-width":"180"}),e(n,{prop:"original_message",label:"私信内容","min-width":"180","show-overflow-tooltip":""}),e(n,{prop:"reg_wechat",label:"匹配微信号","min-width":"180"}),e(n,{prop:"wechat_name",label:"执行微信","min-width":"160"},{default:l(({row:a})=>[c(U(a.wechat_name||"-"),1)]),_:1}),e(n,{label:"执行动作",width:"120"},{default:l(({row:a})=>[...t[8]||(t[8]=[w("div",null,"自动添加",-1)])]),_:1}),e(n,{prop:"result",label:"加微结果","min-width":"180"}),e(n,{label:"操作",fixed:"right",width:"100"},{default:l(({row:a})=>[a.status==0?(m(),h(g,{key:0,type:"primary",link:"",onClick:u=>C(a.id)},{default:l(()=>[...t[9]||(t[9]=[c("重试",-1)])]),_:1},8,["onClick"])):I("",!0),e(g,{type:"danger",link:"",onClick:u=>A(a.id)},{default:l(()=>[...t[10]||(t[10]=[c("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])]),w("div",oe,[e(D,{modelValue:o(_),"onUpdate:modelValue":t[5]||(t[5]=a=>R(_)?_.value=a:null),onChange:o(d)},null,8,["modelValue","onChange"])])])}}});const Be=q(se,[["__scopeId","data-v-ef56e1f4"]]);export{Be as default};

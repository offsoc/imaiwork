import{d as P,bO as R,c as E,aF as S,r as h,D as F,k as r,l as m,m as s,q as n,s as l,v as g,Z as o,$ as M,aI as U,I as b,J as w,K as G,t as C,bM as H,L as J,aH as V,G as $,ax as O,au as W,cW as Z,u as z}from"./entry.2beb4577.js";import{E as Q,a as X}from"./index.6beaca44.js";import{E as Y}from"./el-empty.bc763313.js";import{_ as ee}from"./index.vue.5646543a.js";/* empty css                        *//* empty css               *//* empty css                 *//* empty css                     */import{u as te}from"./usePaging.85211d66.js";import{i as oe,j as ae}from"./service.595be035.js";import{_ as ne}from"./material-edit.vue.7cd0e7dd.js";import"./index.47b30189.js";import"./_baseIteratee.70cb6d8d.js";import"./debounce.dd7f88c1.js";import"./toNumber.c824a4a2.js";import"./index.9d200730.js";import"./raf.c0777355.js";import"./index.4d719c96.js";import"./index.dcd97a19.js";import"./strings.a9740cf6.js";import"./clamp.a46ea567.js";const se={class:"h-full flex flex-col"},le={class:"flex items-center justify-between px-4"},re={class:"grow min-h-0 mt-4"},ie={key:0},pe={key:1},ue={class:"flex justify-center"},de={class:"font-bold"},me={class:"flex justify-end p-4"},Ae=P({__name:"publish-setting",setup(ce){const v=R(),B=z(),k=E(()=>v.query.account),x=E(()=>v.query.app_type),c=S({keyword:"",account:k.value,type:x.value}),{pager:p,getLists:u,resetPage:fe,resetParams:T}=te({fetchFun:oe,params:c}),f=h(!1),y=h(),q=async()=>{var a;f.value=!0,await V(),(a=y.value)==null||a.open()},D=async a=>{var e,i;f.value=!0,await V(),(e=y.value)==null||e.open("edit"),(i=y.value)==null||i.getDetail(a.id)},K=a=>{B.$confirm({message:"确定删除该名片回复规则吗？",onConfirm:async()=>{try{await ae({id:a}),$.msgSuccess("删除成功"),u()}catch(e){$.msgError(e||"删除失败")}}})};return F(()=>v.query.app_type,a=>{a&&(c.type=a,u())},{immediate:!0}),(a,e)=>{const i=O,L=W,_=Q,N=Y,j=X,A=ee,I=Z;return r(),m(w,null,[s("div",se,[s("div",le,[n(i,{type:"primary",onClick:q},{default:l(()=>[...e[5]||(e[5]=[g("新增名片回复规则",-1)])]),_:1}),s("div",null,[n(L,{modelValue:o(c).keyword,"onUpdate:modelValue":e[0]||(e[0]=t=>o(c).keyword=t),placeholder:"请输入匹配内容","prefix-icon":"el-icon-Search",clearable:"",onClear:o(T),onKeyup:e[1]||(e[1]=M(t=>o(u)(),["enter"]))},null,8,["modelValue","onClear"])])]),s("div",re,[U((r(),b(j,{data:o(p).lists,height:"100%",stripe:"","row-style":{height:"60px"}},{empty:l(()=>[n(N,{description:"暂无数据"})]),default:l(()=>[n(_,{label:"匹配类型"},{default:l(({row:t})=>[t.match_type==0?(r(),m("span",ie,"模糊匹配")):(r(),m("span",pe,"精确匹配"))]),_:1}),n(_,{prop:"keyword",label:"匹配内容"}),n(_,{label:"回复内容"},{default:l(({row:t})=>[s("div",ue,[(r(!0),m(w,null,G(t.reply,d=>(r(),m("div",{key:d.id,class:"flex flex-col text-left gap-2 bg-primary-light-9 rounded px-4 py-2"},[s("span",de,C(d.name),1),s("span",null,C(d.code),1)]))),128))])]),_:1}),n(_,{prop:"name",label:"操作",width:"120"},{default:l(({row:t})=>[n(i,{type:"primary",link:"",onClick:d=>D(t)},{default:l(()=>[...e[6]||(e[6]=[g("编辑",-1)])]),_:1},8,["onClick"]),n(i,{type:"danger",link:"",onClick:d=>K(t.id)},{default:l(()=>[...e[7]||(e[7]=[g("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[I,o(p).loading]])]),s("div",me,[n(A,{modelValue:o(p),"onUpdate:modelValue":e[2]||(e[2]=t=>H(p)?p.value=t:null),onChange:o(u)},null,8,["modelValue","onChange"])])]),o(f)?(r(),b(ne,{key:0,ref_key:"materialEditRef",ref:y,type:5,"app-type":o(x),account:o(k),onClose:e[3]||(e[3]=t=>f.value=!1),onSuccess:e[4]||(e[4]=t=>o(u)())},null,8,["app-type","account"])):J("",!0)],64)}}});export{Ae as default};

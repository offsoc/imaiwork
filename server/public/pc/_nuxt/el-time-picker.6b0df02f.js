import{dJ as H,dK as Q,dL as ke,dM as Se,dN as _e,cE as Te,dO as Ce,Q as Pe,S as De,aa as Ee,d as X,V as we,W as q,ab as Oe,c as _,r as ee,k as Re,l as Ae,m as k,Y as f,Z as l,t as A,q as I,L as Ie,aH as Ve,bC as w,aY as xe,O as G,aZ as Ne,a_ as W,ai as Me,al as ye,am as Ke}from"./entry.2beb4577.js";import{c as He}from"./customParseFormat.7d9a8b8e.js";import{t as Le,P as Ue,u as Be,b as Fe,T as z,a as Ye,c as $e,d as je,e as Je,D as Ze,C as qe}from"./panel-time-pick.d62e59d0.js";import{b as Ge}from"./index.4d719c96.js";function We(){}function ze(s){return s!==s}function Qe(s,t,o){for(var i=o-1,u=s.length;++i<u;)if(s[i]===t)return i;return-1}function Xe(s,t,o){return t===t?Qe(s,t,o):Ge(s,ze,o)}function en(s,t){var o=s==null?0:s.length;return!!o&&Xe(s,t,0)>-1}function nn(s,t,o){for(var i=-1,u=s==null?0:s.length;++i<u;)if(o(t,s[i]))return!0;return!1}var an=1/0,sn=H&&1/Q(new H([,-0]))[1]==an?function(s){return new H(s)}:We;const tn=sn;var on=200;function ln(s,t,o){var i=-1,u=en,v=s.length,a=!0,b=[],m=b;if(o)a=!1,u=nn;else if(v>=on){var T=t?null:tn(s);if(T)return Q(T);a=!1,u=Se,m=new ke}else m=t?[]:b;e:for(;++i<v;){var g=s[i],S=t?t(g):g;if(g=o||g!==0?g:0,a&&S===S){for(var O=m.length;O--;)if(m[O]===S)continue e;t&&m.push(S),b.push(g)}else u(m,S,o)||(m!==b&&m.push(S),b.push(g))}return b}var rn=_e(function(s){return ln(Te(s,1,Ce,!0))});const L=rn,cn=Pe({...Le,parsedValue:{type:De(Array)}}),un=X({__name:"panel-time-range",props:cn,emits:["pick","select-range","set-picker-option"],setup(s,{emit:t}){const o=s,i=(e,n)=>{const r=[];for(let c=e;c<=n;c++)r.push(c);return r},{t:u,lang:v}=we(),a=q("time"),b=q("picker"),m=Oe(Ue),{arrowControl:T,disabledHours:g,disabledMinutes:S,disabledSeconds:O,defaultValue:V}=m.props,ne=_(()=>[a.be("range-picker","body"),a.be("panel","content"),a.is("arrow",T),D.value?"has-seconds":""]),ae=_(()=>[a.be("range-picker","body"),a.be("panel","content"),a.is("arrow",T),D.value?"has-seconds":""]),C=_(()=>o.parsedValue[0]),P=_(()=>o.parsedValue[1]),U=Be(o),se=()=>{const e=U.value;t("pick",e,!1),Ve(()=>{U.value=e})},D=_(()=>o.format.includes("ss")),B=_(()=>o.format.includes("A")?"A":o.format.includes("a")?"a":""),te=(e=!1)=>{t("pick",[C.value,P.value],e)},oe=e=>{F(e.millisecond(0),P.value)},le=e=>{F(C.value,e.millisecond(0))},re=e=>{const n=e.map(c=>w(c).locale(v.value)),r=$(n);return n[0].isSame(r[0])&&n[1].isSame(r[1])},F=(e,n)=>{o.visible&&t("pick",[e,n],!0)},ie=_(()=>C.value>P.value),R=ee([0,2]),ce=(e,n)=>{t("select-range",e,n,"min"),R.value=[e,n]},Y=_(()=>D.value?11:8),ue=(e,n)=>{t("select-range",e,n,"max");const r=l(Y);R.value=[e+r,n+r]},de=e=>{const n=D.value?[0,3,6,11,14,17]:[0,3,8,11],r=["hours","minutes"].concat(D.value?["seconds"]:[]),d=(n.indexOf(R.value[0])+e+n.length)%n.length,p=n.length/2;d<p?y.start_emitSelectRange(r[d]):y.end_emitSelectRange(r[d-p])},pe=e=>{const n=xe(e),{left:r,right:c,up:d,down:p}=Ne;if([r,c].includes(n)){de(n===r?-1:1),e.preventDefault();return}if([d,p].includes(n)){const h=n===d?-1:1,E=R.value[0]<Y.value?"start":"end";y[`${E}_scrollDown`](h),e.preventDefault();return}},x=(e,n)=>{const r=g?g(e):[],c=e==="start",p=(n||(c?P.value:C.value)).hour(),h=c?i(p+1,23):i(0,p-1);return L(r,h)},N=(e,n,r)=>{const c=S?S(e,n):[],d=n==="start",p=r||(d?P.value:C.value),h=p.hour();if(e!==h)return c;const E=p.minute(),K=d?i(E+1,59):i(0,E-1);return L(c,K)},M=(e,n,r,c)=>{const d=O?O(e,n,r):[],p=r==="start",h=c||(p?P.value:C.value),E=h.hour(),K=h.minute();if(e!==E||n!==K)return d;const Z=h.second(),he=p?i(Z+1,59):i(0,Z-1);return L(d,he)},$=([e,n])=>[j(e,"start",!0,n),j(n,"end",!1,e)],{getAvailableHours:me,getAvailableMinutes:fe,getAvailableSeconds:ve}=Fe(x,N,M),{timePickerOptions:y,getAvailableTime:j,onSetOption:J}=Ye({getAvailableHours:me,getAvailableMinutes:fe,getAvailableSeconds:ve}),be=e=>e?G(e)?e.map(n=>w(n,o.format).locale(v.value)):w(e,o.format).locale(v.value):null,ge=()=>{if(G(V))return V.map(n=>w(n).locale(v.value));const e=w(V).locale(v.value);return[e,e.add(60,"m")]};return t("set-picker-option",["parseUserInput",be]),t("set-picker-option",["isValidValue",re]),t("set-picker-option",["handleKeydownInput",pe]),t("set-picker-option",["getDefaultValue",ge]),t("set-picker-option",["getRangeAvailableTime",$]),(e,n)=>e.actualVisible?(Re(),Ae("div",{key:0,class:f([l(a).b("range-picker"),l(b).b("panel")])},[k("div",{class:f(l(a).be("range-picker","content"))},[k("div",{class:f(l(a).be("range-picker","cell"))},[k("div",{class:f(l(a).be("range-picker","header"))},A(l(u)("el.datepicker.startTime")),3),k("div",{class:f(l(ne))},[I(z,{ref:"minSpinner",role:"start","show-seconds":l(D),"am-pm-mode":l(B),"arrow-control":l(T),"spinner-date":l(C),"disabled-hours":x,"disabled-minutes":N,"disabled-seconds":M,onChange:oe,onSetOption:l(J),onSelectRange:ce},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),k("div",{class:f(l(a).be("range-picker","cell"))},[k("div",{class:f(l(a).be("range-picker","header"))},A(l(u)("el.datepicker.endTime")),3),k("div",{class:f(l(ae))},[I(z,{ref:"maxSpinner",role:"end","show-seconds":l(D),"am-pm-mode":l(B),"arrow-control":l(T),"spinner-date":l(P),"disabled-hours":x,"disabled-minutes":N,"disabled-seconds":M,onChange:le,onSetOption:l(J),onSelectRange:ue},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),k("div",{class:f(l(a).be("panel","footer"))},[k("button",{type:"button",class:f([l(a).be("panel","btn"),"cancel"]),onClick:r=>se()},A(l(u)("el.datepicker.cancel")),11,["onClick"]),k("button",{type:"button",class:f([l(a).be("panel","btn"),"confirm"]),disabled:l(ie),onClick:r=>te()},A(l(u)("el.datepicker.confirm")),11,["disabled","onClick"])],2)],2)):Ie("v-if",!0)}});var dn=Ee(un,[["__file","panel-time-range.vue"]]);w.extend(He);var pn=X({name:"ElTimePicker",install:null,props:{...$e,isRange:Boolean},emits:[W],setup(s,t){const o=ee(),[i,u]=s.isRange?["timerange",dn]:["time",je],v=a=>t.emit(W,a);return Me(Je,s.popperOptions),t.expose({focus:()=>{var a;(a=o.value)==null||a.focus()},blur:()=>{var a;(a=o.value)==null||a.blur()},handleOpen:()=>{var a;(a=o.value)==null||a.handleOpen()},handleClose:()=>{var a;(a=o.value)==null||a.handleClose()}}),()=>{var a;const b=(a=s.format)!=null?a:Ze;return I(qe,ye(s,{ref:o,type:i,format:b,"onUpdate:modelValue":v}),{default:m=>I(u,m,null)})}}});const gn=Ke(pn);export{gn as E};

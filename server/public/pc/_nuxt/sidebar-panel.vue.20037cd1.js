import{d as L,c as N,r as h,k as o,l as s,m as a,q as n,L as r,s as u,J as w,K as P,Y as T,Z as p,v as M,I as R,bM as S,cV as $,aH as F,G as x,y as q,e2 as G,ba as H,ax as J,au as K}from"./entry.ee599c70.js";import{E as U}from"./index.e69b4eeb.js";/* empty css                     */const Y={class:"w-full h-full bg-black flex flex-col py-2"},Z={class:"flex items-center justify-center gap-2 mt-2"},D={class:"grow min-h-0 mt-4"},O={class:"flex flex-col gap-y-1 mt-4 px-2"},Q=["onClick"],X={class:"relative w-[48px] h-[48px] rounded"},ee={class:"w-full h-full rounded"},te=["src"],le={key:0,class:"absolute -right-1 -top-1 z-50"},ae={key:1,class:"absolute w-full h-full top-0 left-0 flex items-center justify-center bg-[#BABABAAF] z-40 rounded"},oe={key:2,class:"absolute top-0 left-0 w-full h-full z-[888]"},se={key:0,class:"flex justify-center mt-2 mx-2"},ne={class:"flex flex-col gap-y-4"},ie=L({__name:"sidebar-panel",props:{currentWechat:{default:null},wechatList:{default:()=>[]},loading:{type:Boolean,default:!1},showAddWeChat:{type:Boolean,default:!0}},emits:["update:currentWechat","addWechat"],setup(d,{expose:C,emit:y}){const b=d,_=y,m=N({get(){return b.currentWechat},set(t){_("update:currentWechat",t)}}),i=h(),f=h(!1),c=h(""),k=async()=>{var t;f.value=!0,await F(),(t=i.value)==null||t.open()},W=async()=>{if(!c.value){x.msgError("请输入您的设备授权码");return}_("addWechat",c.value)},E=t=>{if(!t.loading){if(t.wechat_status!=1){x.msgError("当前微信状态为离线，请先上线");return}m.value=t}};return C({closeAddWeChatPop:()=>{var t;f.value=!1,(t=i.value)==null||t.close()}}),(t,l)=>{const v=q,B=G,A=H,V=U,z=J,I=K;return o(),s(w,null,[a("div",Y,[a("div",Z,[n(v,{name:"local-icon-wechat",color:"#00C800",size:22}),l[2]||(l[2]=a("span",{class:"text-white font-bold whitespace-nowrap"},"个微",-1)),r("",!0)]),a("div",D,[n(V,null,{default:u(()=>[a("div",O,[(o(!0),s(w,null,P(d.wechatList,(e,j)=>{var g;return o(),s("div",{key:j,class:T(["w-full h-[66px] mx-auto flex items-center justify-center cursor-pointer rounded",{"bg-[#00C800]":((g=p(m))==null?void 0:g.wechat_id)===e.wechat_id,"hover:bg-[#00C800]":!e.loading}]),onClick:ce=>E(e)},[n(A,{content:e.wechat_nickname,placement:"right"},{default:u(()=>[a("div",X,[a("div",ee,[a("img",{src:e.wechat_avatar,alt:"",class:"w-full h-full rounded"},null,8,te)]),e.MsgCnt>0&&e.wechat_status==1?(o(),s("div",le,[n(B,{value:e.MsgCnt,color:"#EA3323","badge-style":{border:"none"}},null,8,["value"])])):r("",!0),e.wechat_status!=1?(o(),s("div",ae,[n(v,{name:"local-icon-offline",size:24})])):r("",!0),e.loading?(o(),s("div",oe,[...l[3]||(l[3]=[a("div",{class:"w-full h-full rounded bg-gray-200 animate-pulse"},null,-1)])])):r("",!0)])]),_:2},1032,["content"])],10,Q)}),128))])]),_:1})]),d.showAddWeChat?(o(),s("div",se,[n(z,{color:"#00C800",class:"w-full",onClick:k},{default:u(()=>[...l[4]||(l[4]=[M(" 添加微信 ",-1)])]),_:1})])):r("",!0)]),p(f)?(o(),R($,{key:0,ref_key:"addWeChatPopRef",ref:i,title:"添加设备",async:"","confirm-button-text":"确认绑定","confirm-loading":d.loading,onClose:l[1]||(l[1]=e=>c.value=""),onConfirm:W},{default:u(()=>[a("div",ne,[n(I,{modelValue:p(c),"onUpdate:modelValue":l[0]||(l[0]=e=>S(c)?c.value=e:null),placeholder:"请输入您的设备授权码",clearable:"",class:"!h-[48px]"},null,8,["modelValue"])])]),_:1},8,["confirm-loading"])):r("",!0)],64)}}});export{ie as _};

import{E as N}from"./el-avatar.e0eb87c8.js";import{d as w,k as o,l as a,I as m,s as x,q as c,m as t,Z as l,d_ as U,L as p,t as f,Y as z,bz as d,dL as B,y as S}from"./entry.d7219633.js";import{E as A}from"./el-empty.77af023a.js";import{s as H,a as I}from"./vue-virtual-scroller.esm.d0916cd7.js";/* empty css                             */import L from"./useHandle.2b5b26f8.js";const Y={class:"h-full"},j=["onClick"],q={class:"w-[42px] h-[42px] flex-shrink-0 relative"},M={key:2,class:"absolute -top-1 -right-1"},T={class:"flex-1"},V={class:"flex justify-between items-center gap-x-2"},$={class:"line-clamp-1 break-all"},F={class:"text-[#949494] text-xs"},O={class:"flex items-center gap-x-3 mt-1"},Z={class:"flex-1 w-0 text-xs text-[#949494] text-ellipsis overflow-hidden whitespace-nowrap h-[18px]"},G={class:""},J={class:"flex items-center gap-x-2"},K={key:0},P={key:1},Q={key:1,class:"flex justify-center items-center h-full"},ce=w({__name:"conversation",props:{conversationList:{default:()=>[]}},emits:["change-friend","bottom-conversation"],setup(R,{emit:g}){const h=g,{currentFriend:i}=L(),y=e=>{var n;((n=i.value)==null?void 0:n.UserName)!==e.UserName&&(i.value=e,h("change-friend",i.value))},k=e=>e?e.substring(e.indexOf(":")+1):"",b=e=>d(e).isSame(d(),"day")?d(e).format("HH:mm"):d(e).format("YYYY/MM/DD"),D=e=>{const{scrollTop:n,scrollHeight:r,clientHeight:_}=e.target;n+_>=r&&h("bottom-conversation")};return(e,n)=>{const r=N,_=B,u=S,E=A;return o(),a("div",Y,[e.conversationList.length>0?(o(),m(l(I),{key:0,class:"h-full pb-4 dynamic-scroller",items:e.conversationList,"min-item-size":66,"key-field":"UserName",onScroll:D},{default:x(({item:s,index:W,active:C})=>[c(l(H),{item:s,active:C},{default:x(()=>{var v;return[t("div",{class:z(["h-[66px] flex items-center px-4 gap-2 hover:bg-[#D3D3D3] cursor-pointer",{"bg-[#D3D3D3]":((v=l(i))==null?void 0:v.UserName)===s.UserName}]),onClick:X=>y(s)},[t("div",q,[s.Avatar?(o(),m(r,{key:0,size:42,shape:"square",src:s.Avatar},null,8,["src"])):(o(),m(r,{key:1,size:42,shape:"square",icon:l(U)},null,8,["icon"])),!s.IsSilent&&s.UnreadCnt>0?(o(),a("div",M,[c(_,{value:s.UnreadCnt,color:"#EA3323","badge-style":{border:"none"}},null,8,["value"])])):p("",!0)]),t("div",T,[t("div",V,[t("div",$,f(s.Memo||s.ShowName),1),t("div",null,[t("span",F,f(b(s.UpdateTime)),1)])]),t("div",O,[t("div",Z,[t("span",G,f(k(s.Digest)),1)]),t("div",J,[s.IsSilent?(o(),a("div",K,[c(u,{name:"local-icon-notification_off",color:"#c7c7c7"})])):p("",!0),s.IsTop?(o(),a("div",P,[c(u,{name:"local-icon-zhiding",color:"#c7c7c7"})])):p("",!0)])])])],10,j)]}),_:2},1032,["item","active"])]),_:1},8,["items"])):(o(),a("div",Q,[c(E,{description:"暂无会话","image-size":100})]))])}}});export{ce as _};

import{E as M}from"./index.1d2c7eaf.js";import{d as Y,A as H,r as I,c as D,o as J,k as n,l as a,q as o,s as u,Z as l,m as s,aI as j,J as k,K as Z,Y as B,t as m,ds as X,a0 as T,v as y,L as O,G as f,dj as $,aw as ss,y as es,ax as ts,cQ as os,_ as ls}from"./entry.46557796.js";import{E as is,a as ns}from"./el-tabs.0dd2047f.js";import{E as as}from"./el-image.663be0a1.js";import{E as rs}from"./index.816355b6.js";import{E as cs}from"./index.c76cd001.js";import{E as ds}from"./index.304400de.js";import{E as us}from"./el-empty.db5857ba.js";/* empty css                 */import"./el-image-viewer.4c392e93.js";/* empty css                   *//* empty css               *//* empty css                     */import{u as ms}from"./usePaging.3ef28349.js";import{m as _s,_ as fs,a as vs}from"./sidebar.vue.4914e8ef.js";import ps from"./control.4b4ed8a4.js";import"./strings.1c189114.js";import"./index.6e98cf6f.js";import"./position.bb07cf08.js";import"./throttle.f2fe0ca7.js";import"./debounce.22e3311f.js";import"./el-slider.239593a3.js";import"./el-input-number.2848ce7e.js";import"./index.08e202f9.js";const gs="data:image/png;base64,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",As=""+new URL("empty_image.bfa812a1.png",import.meta.url).href,hs={class:"h-full flex"},xs={class:"px-8 grow h-full relative"},Es={class:"h-full flex flex-col pb-[120px]"},bs={class:"pt-8 w-full h-full flex flex-col"},Cs={class:"grow min-h-0"},ys={key:0,class:"h-full flex flex-col"},ws={class:"h-full grow min-h-0 relative"},Qs={class:"min-w-[700px] flex h-full"},qs={class:"bg-[#FAFAFA] h-full grow"},Ns={class:"space-y-4 p-5"},Is=["onClick"],Ds={class:"flex items-center gap-4 grow"},ks={class:"flex flex-col gap-2 grow"},Bs={class:"line-clamp-1"},Ks={class:"flex justify-between items-end w-full text-tx-primary text-sm"},Ps={class:"flex flex-col gap-1"},Us={class:"text-xs"},Fs={class:"text-xs"},Vs={class:"rotate-90 origin-center p-1"},zs={class:"flex flex-col text-center gap-y-2"},Gs={key:1,class:"h-full flex items-center justify-center w-full"},Ls={class:"absolute right-2 top-2"},Rs={class:"shadow rounded-xl bg-white z-50 h-full w-[40%]",style:{background:`linear-gradient(
                                                137.64deg,
                                                rgba(184, 219, 255, 1) 0%,
                                                rgba(255, 255, 255, 1) 100%
                                            )`}},Ws={key:0,class:"flex flex-col items-center p-5 h-full min-h-0"},Ss={class:"text-center mt-4"},Ms={class:"text-lg"},Ys={class:"text-tx-primary text-sm mt-2"},Hs={class:"grow min-h-0 mt-4 w-full"},Js={class:"px-2 whitespace-pre-line flex justify-center"},js={key:1,class:"h-full flex items-center justify-center"},Zs={key:1,class:"h-full flex items-center justify-center"},Xs={key:0,class:"h-24 bg-white w-full shadow-[0_-20px_20px_0_rgba(0,0,0,0.02)] absolute z-50 bottom-0 left-0"},Ts={class:"h-full flex items-center px-5"},Os={class:"flex items-center gap-4 w-[25%]"},$s={class:"flex flex-col grow"},se={class:"text-sm text-tx-primary"},ee={class:"grow ml-14"},te=Y({__name:"index",setup(oe){const{pager:p,getLists:w,resetPage:K}=ms({size:25e3,fetchFun:_s}),g=H(null),b=I(0),r=I(0),d=D(()=>A.value[r.value]||{}),A=D(()=>{const{lists:t}=p;if(t.length)return t.map(c=>{const _=Object.keys(c.json_info),v=_.length?P(c.json_info[_[0]]):{};return{...c,...v}})}),P=t=>{var h;if(!t)return{};const{prompt:e={},image_url:c,audio_url:_,status:v}=t;return{image_url:c,audio_url:_,status:v,tags:(h=e.tags)==null?void 0:h.replace(/\s+/g,"；"),duration:e.duration,lyric:e.prompt}},U=t=>{r.value=t},F=()=>{var t;r.value<A.value.length-1?r.value++:r.value=0,(t=g.value)==null||t.resetPlayer()},V=()=>{var t;r.value>0?r.value--:r.value=A.value.length-1,(t=g.value)==null||t.resetPlayer()},z=t=>{f.loading("保存中"),$(t).then(()=>{f.closeLoading(),f.msgSuccess("导出文件成功")}).catch(()=>{f.closeLoading(),f.msgError("导出文件失败")})},G=async(t,e)=>{var c;await f.confirm("此操作不可逆，确定要删除吗？"),await vs({id:t}),w(),r.value=0,(c=g.value)==null||c.resetPlayer()};return J(()=>{w()}),(t,e)=>{const c=M,_=ss,v=is,h=ns,C=as,L=es,Q=ts,R=rs,W=cs,q=ds,N=us,S=os;return n(),a("div",hs,[o(c,{width:"300px"},{default:u(()=>[o(fs,{onSuccess:e[0]||(e[0]=i=>l(K)())})]),_:1}),s("div",xs,[s("div",Es,[s("div",bs,[e[7]||(e[7]=s("div",null,"音乐生成记录",-1)),o(_,{class:"!my-5 !mb-0"}),s("div",null,[o(h,null,{default:u(()=>[o(v,{label:"全部"})]),_:1})]),j((n(),a("div",Cs,[l(p).lists.length?(n(),a("div",ys,[s("div",ws,[s("div",Qs,[s("div",qs,[o(q,null,{default:u(()=>[s("div",Ns,[(n(!0),a(k,null,Z(l(A),(i,x)=>(n(),a("div",{class:B(["group cursor-pointer bg-white border border-[transparent] rounded-lg p-3 relative shadow-[1px_2px_6px_0px_rgba(0,0,0,0.08)] flex justify-between",{"border border-primary !bg-primary-light-9":l(r)==x}]),key:x,onClick:E=>U(x)},[i.status==2?(n(),a(k,{key:0},[s("div",Ds,[s("div",null,[o(C,{src:i.image_url,class:"h-16 w-16 rounded-full"},null,8,["src"])]),s("div",ks,[s("div",Bs,m(i.ask),1),s("div",Ks,[s("div",Ps,[s("span",null,m(i.tags),1),s("span",Us,m(l(X)(i.duration)),1)]),s("div",Fs,m(i.create_time),1)])])]),s("div",{class:B(["ml-2 h-full invisible group-hover:visible absolute right-2",[l(b)==i?"!visible":""]]),onClick:e[2]||(e[2]=T(()=>{},["stop"]))},[o(R,{width:90,onHide:e[1]||(e[1]=E=>b.value=0),onShow:E=>b.value=i},{reference:u(()=>[s("div",Vs,[o(L,{name:"el-icon-MoreFilled"})])]),default:u(()=>[s("div",zs,[s("div",null,[o(Q,{link:"",class:"!m-0",size:"small",onClick:E=>z(i.audio_url)},{default:u(()=>e[3]||(e[3]=[y(" 导出文件 ",-1)])),_:2,__:[3]},1032,["onClick"])]),s("div",null,[o(Q,{type:"danger",link:"",size:"small",onClick:E=>G(i.id,x)},{default:u(()=>e[4]||(e[4]=[y("删除",-1)])),_:2,__:[4]},1032,["onClick"])])])]),_:2},1032,["onShow"])],2)],64)):(n(),a("div",Gs,[e[6]||(e[6]=s("img",{src:gs,class:"h-10"},null,-1)),s("span",Ls,[o(W,{type:"danger"},{default:u(()=>e[5]||(e[5]=[y("生成中",-1)])),_:1,__:[5]})])]))],10,Is))),128))])]),_:1})]),s("div",Rs,[l(d)?(n(),a("div",Ws,[s("div",null,[o(C,{src:l(d).image_url,class:"w-[195px] h-[195px] rounded-full"},null,8,["src"])]),s("div",Ss,[s("div",Ms,m(l(d).ask),1),s("div",Ys,m(l(d).tags),1)]),s("div",Hs,[o(q,null,{default:u(()=>[s("div",Js,m(l(d).lyric),1)]),_:1})])])):(n(),a("div",js,[o(N,{description:"暂无音乐数据"})]))])])])])):(n(),a("div",Zs,[o(N,{image:l(As),description:"暂无音乐记录，赶紧去创作吧~"},null,8,["image"])]))])),[[S,l(p).loading]])])]),l(p).lists.length?(n(),a("div",Xs,[s("div",Ts,[s("div",Os,[s("div",null,[o(C,{class:"h-16 w-16 rounded-full",src:l(d).image_url},null,8,["src"])]),s("div",$s,[s("div",null,m(l(d).ask),1),s("div",se,[s("span",null,m(l(d).tags),1)])])]),s("div",ee,[s("div",null,[o(ps,{music:l(d).audio_url,ref_key:"musicControlRef",ref:g,onNext:F,onPrev:V},null,8,["music"])])])])])):O("",!0)])])}}});const Ne=ls(te,[["__scopeId","data-v-826dc1ea"]]);export{Ne as default};

import{_ as L}from"./index.vue.c578915d.js";import{d as T,A as b,aF as k,cx as U,G as v,bK as q,k as V,I as E,s as a,m as l,q as s,t as P,Z as t,v as r,L as S,au as Z,av as A,cZ as K,c_ as $,ay as j,ax as z,cV as H}from"./entry.ca4d3d61.js";import{u as J,p as M}from"./agent.e14901d7.js";const O={class:"text-2xl font-bold mb-5"},Q={class:"flex"},ee=T({__name:"create-popup",props:{showChatType:{type:[Boolean,Number]},type:{},agentId:{}},emits:["close","success"],setup(m,{expose:h,emit:g}){const c=m,i=g,f=b(),o=k({robot_id:c.agentId,type:c.type,id:"",name:"",password:"",chat_type:1}),_=b(),C=k({name:[{required:!0,message:"请输入分享名称"}]}),{lockFn:F,isLock:R}=U(async()=>{await _.value.validate();try{o.id?await J(o):await M(o),v.msgSuccess("发布成功"),d(),i("success")}catch(p){v.msgError(p)}}),I=()=>{f.value.open()},d=()=>{i("close")};return h({open:I,setFormData:p=>q(p,o)}),(p,e)=>{const B=L,y=Z,u=A,x=K,N=$,D=j,w=z,G=H;return V(),E(G,{ref_key:"popupRef",ref:f,async:"",width:"550px","confirm-button-text":"","cancel-button-text":"","header-class":"!p-0","show-close":!1},{default:a(()=>[l("div",null,[l("div",{class:"absolute w-6 h-6 right-4 top-4 cursor-pointer",onClick:d},[s(B)]),l("div",O,P(t(o).id?"编辑":"添加")+"链接",1),s(D,{model:t(o),rules:t(C),ref_key:"formRef",ref:_,"label-position":"top"},{default:a(()=>[s(u,{label:"名称",prop:"name"},{default:a(()=>[s(y,{modelValue:t(o).name,"onUpdate:modelValue":e[0]||(e[0]=n=>t(o).name=n),class:"!h-11",placeholder:"记录名称，仅用于展示"},null,8,["modelValue"])]),_:1}),s(u,{label:"密码",prop:"password"},{default:a(()=>[s(y,{modelValue:t(o).password,"onUpdate:modelValue":e[1]||(e[1]=n=>t(o).password=n),type:"password",placeholder:"不设置密码，可直接访问","show-password":"",class:"!h-11"},null,8,["modelValue"])]),_:1}),m.showChatType&&!t(o).id?(V(),E(u,{key:0,label:"对话模式",prop:"chat_type"},{default:a(()=>[l("div",null,[s(N,{modelValue:t(o).chat_type,"onUpdate:modelValue":e[2]||(e[2]=n=>t(o).chat_type=n)},{default:a(()=>[s(x,{value:1},{default:a(()=>[...e[3]||(e[3]=[r("文本对话",-1)])]),_:1}),s(x,{value:2},{default:a(()=>[...e[4]||(e[4]=[r("形象对话",-1)])]),_:1})]),_:1},8,["modelValue"]),e[5]||(e[5]=l("div",{class:"form-tips"},"若关闭或没有配置形象选择后，默认展示文本",-1))])]),_:1})):S("",!0)]),_:1},8,["model","rules"]),l("div",Q,[s(w,{class:"!rounded-full flex-1 !h-[50px]",onClick:d},{default:a(()=>[...e[6]||(e[6]=[r("取消",-1)])]),_:1}),s(w,{type:"primary",class:"!rounded-full flex-1 !h-[50px]",loading:t(R),onClick:t(F)},{default:a(()=>[...e[7]||(e[7]=[r(" 保存 ",-1)])]),_:1},8,["loading","onClick"])])])]),_:1},512)}}});export{ee as _};

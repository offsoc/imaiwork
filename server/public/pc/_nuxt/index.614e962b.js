import{E as O,a as F}from"./el-tabs.68bb8047.js";import{d as G,a as U,bP as H,r as x,aF as J,D as Z,o as Q,k as n,l,Z as r,m as e,t as d,dp as W,dq as X,q as u,s as g,J as b,K as C,bM as Y,aI as ee,I as h,L as y,G as R,aH as te,bL as se,y as oe,ax as ne,ba as ie,u as le,_ as ae}from"./entry.ee599c70.js";import{_ as re}from"./handle-menu.vue.8b549227.js";import{u as ce}from"./usePaging.5914886e.js";import{v as de,k as pe,C as ue,D as me}from"./knowledge_base.519704cc.js";import{KnTypeEnum as m}from"./index.5bd136e1.js";import{_ as _e}from"./create-panel.vue.a6bb5ce7.js";import{E as fe}from"./index.364e6819.js";import"./raf.09011a0b.js";import"./strings.32bdf471.js";import"./clamp.05cad4d6.js";import"./toNumber.0872a42f.js";import"./index.6ab00366.js";import"./index.f36399ff.js";/* empty css                   */import"./useTemplate.afda57ca.js";import"./index.e69b4eeb.js";/* empty css                     */import"./base-form.589f4a9a.js";import"./index.8fd3c68c.js";import"./index.684b3e96.js";import"./_baseIteratee.6942dcd2.js";import"./index.0e845cb8.js";import"./index.vue.d98c851e.js";import"./index.c972ba3d.js";import"./index.c8874308.js";import"./index.6fe7ec27.js";import"./cloneDeep.d0528121.js";/* empty css                  *//* empty css                    *//* empty css                  *//* empty css                  *//* empty css               */import"./throttle.108b0b49.js";import"./debounce.f4735d5c.js";const ve=""+new URL("kb.f5eabd18.svg",import.meta.url).href,xe={key:0,class:"h-full w-full p-4 flex flex-col"},ge={class:"rounded-[20px] flex items-center gap-3 px-[30px]",style:{background:`linear-gradient(152deg, rgba(0, 101, 251, 0.88) -42.44%, rgba(255, 255, 255, 0) 12.19%)
                    rgb(255, 255, 255)`}},be={class:"text-[#000000cc]"},he={class:"grow min-h-0 flex flex-col bg-white rounded-[20px] mt-4"},ye=["infinite-scroll-disabled"],ke={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-[18px] py-4 px-[20px]"},we={class:"kb-item"},Ee={class:"flex justify-between gap-x-2"},Te={class:"flex items-center gap-x-2"},Ce={class:"flex-shrink-0 w-[50px] h-[50px] flex items-center justify-center rounded-md border border-[#0000001a]"},Re=["onClick"],Be={class:"flex items-center gap-x-2"},Ve={class:"w-[50px] h-[50px] flex items-center justify-center rounded-md border border-[#0000001a] p-[2px]"},Ae=["src"],Le={class:"text-[#00000080]"},De={class:"text-[#00000080] h-[40px] overflow-hidden mt-3 break-all flex-shrink-0"},qe={key:1,class:"text-[#00000080] h-[40px] overflow-hidden mt-3 break-all flex-shrink-0"},Pe={class:"text-[10px] flex items-center justify-between text-[#AAA6B9] mt-3"},Ie={class:"absolute right-2 top-2 z-[1000] invisible group-hover:visible"},Ne={key:0,class:"text-center py-4 text-gray-500"},Se=G({__name:"index",setup($e){const _=U(),B=H(),V=le(),i=x(m.VECTOR),A=[{label:"向量知识库",value:m.VECTOR},{label:"RAG知识库",value:m.RAG}],k=J({page_no:1}),{pager:a,getLists:w,resetPage:E}=ce({fetchFun:o=>i.value===m.VECTOR?de(o):pe(o),params:k,isScroll:!0}),f=x(),L=o=>{i.value!=o.paneName&&(i.value=o.paneName,E())},D=[{label:"删除知识库",icon:"local-icon-delete",click:({id:o})=>{V.$confirm({message:"确定删除该知识库吗？",onConfirm:async()=>{try{i.value===m.VECTOR?await ue({id:o}):await me({id:o});const s=a.lists.findIndex(c=>c.id==o);s!==-1&&a.lists.splice(s,1),R.msgSuccess("删除成功")}catch(s){R.msgError(s)}}})}}],p=x(B.query.is_create=="1"),q=async()=>{p.value=!0,_.push({query:{is_create:1,type:i.value}})},P=o=>{_.push({path:`/knowledge_base/detail/${o.id}`,query:{kn_type:i.value,index_id:o.index_id||void 0,category_id:o.category_id||void 0,kn_name:o.name}})},I=()=>{k.page_no++,w()},N=()=>{p.value=!1,_.replace({query:{is_create:void 0,type:void 0}}),E()},S=()=>{p.value||w()};return Z(()=>a.lists,async()=>{a.lists.length&&(await te(),a.lists.forEach((o,s)=>{const c=f.value[s];if(c){const{height:v}=se(c);o.is_ellipsis=v.value>40}}))}),Q(S),(o,s)=>{const c=O,v=F,T=oe,$=ne,j=ie,z=re,K=fe;return n(),l(b,null,[r(p)?y("",!0):(n(),l("div",xe,[e("div",ge,[s[2]||(s[2]=e("img",{src:ve,class:"w-11 mt-7"},null,-1)),e("div",null,[e("div",be,d(r(W)[r(X).DATABASE]),1),s[1]||(s[1]=e("div",{class:"text-[#00000080]"},"打通企业知识脉络，智能检索、主动推送让知识流转如呼吸般自然简单。",-1))])]),e("div",he,[u(v,{modelValue:r(i),"onUpdate:modelValue":s[0]||(s[0]=t=>Y(i)?i.value=t:null),onTabClick:L},{default:g(()=>[(n(),l(b,null,C(A,t=>u(c,{key:t.value,label:t.label,name:t.value},null,8,["label","name"])),64))]),_:1},8,["modelValue"]),ee((n(),l("div",{class:"grow min-h-0 flex flex-col overflow-y-auto","infinite-scroll-immediate":!1,"infinite-scroll-disabled":!r(a).isLoad,"infinite-scroll-distance":10},[e("div",ke,[e("div",we,[e("div",Ee,[e("div",Te,[e("div",Ce,[u(T,{name:"local-icon-windows2",size:24})]),s[3]||(s[3]=e("div",null,[e("div",null,"知识库"),e("div",{class:"text-[#00000080]"},"立即创建知识库")],-1))]),e("div",null,[u($,{type:"primary",class:"!h-[30px]",onClick:q},{default:g(()=>[...s[4]||(s[4]=[e("span",{class:"text-[11px]"},"立即创建",-1)])]),_:1})])]),s[5]||(s[5]=e("div",{class:"mt-3 text-[#00000080] h-[50px]"}," 导入相关文件数据，知识库将被集成到各项应用中作为上下文,或可以创建为独立的调用库使用 ",-1))]),(n(!0),l(b,null,C(r(a).lists,(t,M)=>(n(),l("div",{key:M,class:"kb-item group",onClick:je=>P(t)},[e("div",Be,[e("div",Ve,[t.image?(n(),l("img",{key:0,src:t.image,class:"w-full h-full object-cover rounded-md"},null,8,Ae)):(n(),h(T,{key:1,name:"local-icon-windows2",size:24}))]),e("div",null,[e("div",null,d(t.name),1),e("div",Le,d(t.file_counts||0)+"文档",1)])]),t.is_ellipsis?(n(),h(j,{key:0,"popper-class":"max-w-[400px]",content:t.intro||t.description},{default:g(()=>[e("div",De,[e("div",{ref_for:!0,ref_key:"contentRef",ref:f,class:"line-clamp-2"},d(t.intro||t.description),513)])]),_:2},1032,["content"])):(n(),l("div",qe,[e("div",{ref_for:!0,ref_key:"contentRef",ref:f},d(t.intro||t.description),513)])),e("div",Pe,[e("div",null,d(t.create_time)+" 创建 ",1)]),e("div",Ie,[u(z,{data:t,"menu-list":D},null,8,["data"])])],8,Re))),128))]),r(a).isLoad?(n(),l("div",Ne,"暂无更多了")):y("",!0)],8,ye)),[[K,I]])])])),r(p)?(n(),h(_e,{key:1,ref:"createPanelRef",onBack:N},null,512)):y("",!0)],64)}}});const yt=ae(Se,[["__scopeId","data-v-3e88b41e"]]);export{yt as default};

import{_ as Q}from"./index.vue.f38ca415.js";import{E as W,a as X}from"./index.50778a9c.js";import{d as ee,r as b,c as z,k as c,I as g,s as i,m as t,q as n,l as a,K as w,Z as r,J as k,bK as te,v as u,t as L,Y as oe,ax as le,au as se,y as ne,cO as ce,_ as ie}from"./entry.d7219633.js";import{E as ae}from"./index.f15af271.js";import{E as re}from"./el-empty.77af023a.js";/* empty css                  *//* empty css               *//* empty css                     */import{a as de}from"./redbook.f03a8b74.js";import{CopywritingTypeEnum as pe}from"./index.83df7a87.js";import"./index.4953ba77.js";import"./strings.03d3529c.js";import"./debounce.085e8a4a.js";import"./_baseIteratee.5c97421a.js";import"./index.ead96a32.js";const fe={class:"-my-4"},ue={class:"mt-[17px]"},_e={class:"flex justify-between items-center gap-x-2 mt-4"},me={class:"flex gap-x-2"},ve={class:"text-[#ffffff80] text-[11px]"},xe={class:"text-white"},he={class:"text-[#ffffff80] text-[11px]"},be={class:"text-white"},ye={class:"flex gap-x-[10px] mt-[18px]"},ge={class:"basis-[45%] flex-shrink-0 rounded-xl border border-app-border-1 bg-app-bg-2"},we={class:"flex items-center justify-between h-11 border-[0] border-b-[1px] border-app-border-1 px-[10px]"},ke={class:"h-[350px]"},Ce={class:"p-3 flex flex-col gap-y-2"},Ee={class:"flex-1"},Ve=["onClick"],ze={key:1,class:"h-full flex items-center justify-center"},Le={class:"flex-auto rounded-xl border border-app-border-1 bg-app-bg-2"},Se={class:"flex items-center justify-between h-11 border-[0] border-b-[1px] border-app-border-1 px-[10px]"},$e={class:"h-[350px]"},je={class:"p-3 flex flex-col gap-y-3"},Te={class:"flex-1"},Ue={class:"relative mt-4 flex gap-x-2 items-end"},Be={class:"flex-1 flex flex-wrap gap-2"},Ie=["onClick"],Me={class:""},Ae=["onClick"],De={key:1,class:"h-full flex items-center justify-center"},Fe={class:"mt-[18px] flex justify-center"},Ne=ee({__name:"content-copywriting-material",emits:["close","confirm"],setup(Oe,{expose:A,emit:D}){const S=D,_=b([]),d=b({title:[],described:[]}),m=b(),p=z(()=>{if(v.value)return{title:d.value.title,described:d.value.described};const o=_.value.find(e=>e.id==m.value)||{};return{title:o.title||[],described:o.described||[]}}),F=z(()=>d.value.title.length),N=z(()=>d.value.described.length),O=()=>{v.value=!1},R=async()=>{const{lists:o}=await de({page_size:9999,copywriting_type:pe.TITLE});o.length>0&&(o.forEach(e=>{e.title=e.title.map(l=>({...l,checked:!1})),e.described=e.described.map(l=>({...l,checked:!1}))}),_.value=o,m.value=o[0].id)},K=o=>{const{described:e}=p.value;e[o].topic||(e[o].topic=[]),e[o].topic.push("")},q=(o,e)=>{const{described:l}=p.value;l[o].topic&&l[o].topic.splice(e,1)},v=b(!1),J=()=>{v.value=!v.value},$=()=>{const o=_.value.flatMap(l=>l.title).filter(l=>l.checked),e=_.value.flatMap(l=>l.described).filter(l=>l.checked);d.value={title:o,described:e}},j=(o,e)=>{e.checked=!e.checked,$()},T=o=>{const e=p.value[o].some(l=>!l.checked);p.value[o].forEach(l=>{l.checked=e}),$()},C=b(),Y=()=>{C.value.open(),_.value=[],d.value={title:[],described:[]},m.value=void 0,v.value=!1,R()},U=()=>{S("close"),C.value.close()},Z=()=>{S("confirm",{titleList:d.value.title.map(o=>({content:o.content})),contentList:d.value.described.map(o=>({content:o.content,topic:o.topic}))}),U()};return A({open:Y}),(o,e)=>{const l=Q,G=W,H=X,x=le,E=se,V=ne,B=ae,I=re,P=ce;return c(),g(P,{ref_key:"popupRef",ref:C,width:"718px","confirm-button-text":"","cancel-button-text":"",style:{"background-color":"var(--app-bg-color-3)",border:"1px solid var(--app-border-color-1)"},"show-close":!1},{default:i(()=>[t("div",fe,[t("div",{class:"absolute w-6 h-6 top-4 right-4",onClick:U},[n(l)]),e[11]||(e[11]=t("div",{class:"text-white text-[20px] font-bold"},"内容文案库",-1)),t("div",ue,[n(H,{modelValue:r(m),"onUpdate:modelValue":e[0]||(e[0]=s=>te(m)?m.value=s:null),class:"!w-[314px] !h-11",placeholder:"请选择","popper-class":"dark-select-popper",clearable:"",filterable:"","show-arrow":!1,onChange:O},{default:i(()=>[(c(!0),a(k,null,w(r(_),s=>(c(),g(G,{label:s.name,value:s.id,key:s.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),t("div",_e,[t("div",me,[t("div",ve,[e[3]||(e[3]=u(" 已选择标题",-1)),t("span",xe,"（"+L(r(F))+"）",1)]),t("div",he,[e[4]||(e[4]=u(" 已选择正文",-1)),t("span",be,"（"+L(r(N))+"）",1)])]),n(x,{link:"",class:"!text-[#ffffff80] !text-[11px]",onClick:J},{default:i(()=>[u(L(r(v)?"隐藏已选择":"查看已选择"),1)]),_:1})]),t("div",ye,[t("div",ge,[t("div",we,[e[6]||(e[6]=t("div",{class:"text-white"},"标题",-1)),n(x,{class:"!border-app-border-2",color:"#1f1f1f",size:"small",onClick:e[1]||(e[1]=s=>T("title"))},{default:i(()=>e[5]||(e[5]=[u("全选",-1)])),_:1,__:[5]})]),t("div",ke,[r(p).title.length>0?(c(),g(B,{key:0,class:"h-full"},{default:i(()=>[t("div",Ce,[(c(!0),a(k,null,w(r(p).title,(s,h)=>(c(),a("div",{class:"flex items-center gap-x-3",key:h},[t("div",Ee,[n(E,{modelValue:s.content,"onUpdate:modelValue":f=>s.content=f,class:"!h-11",clearable:"",maxlength:"20","show-word-limit":"",placeholder:"-","input-style":"font-size: 11px"},null,8,["modelValue","onUpdate:modelValue"])]),t("div",{class:"w-4 h-4 rounded-full cursor-pointer",onClick:f=>j("title",s)},[n(V,{name:"local-icon-success_fill",size:16,color:s.checked?"var(--color-primary)":"#ffffff1a"},null,8,["color"])],8,Ve)]))),128))])]),_:1})):(c(),a("div",ze,[n(I,{description:"暂无数据","image-size":100})]))])]),t("div",Le,[t("div",Se,[e[8]||(e[8]=t("div",{class:"text-white"},"正文描述",-1)),n(x,{class:"!border-app-border-2",color:"#1f1f1f",size:"small",onClick:e[2]||(e[2]=s=>T("described"))},{default:i(()=>e[7]||(e[7]=[u("全选",-1)])),_:1,__:[7]})]),t("div",$e,[r(p).described.length>0?(c(),g(B,{key:0,class:"h-full"},{default:i(()=>[t("div",je,[(c(!0),a(k,null,w(r(p).described,(s,h)=>(c(),a("div",{class:"flex items-center gap-x-3",key:h},[t("div",Te,[t("div",null,[n(E,{modelValue:s.content,"onUpdate:modelValue":f=>s.content=f,type:"textarea",maxlength:"800","show-word-limit":"",rows:6},null,8,["modelValue","onUpdate:modelValue"])]),t("div",Ue,[t("div",Be,[(c(!0),a(k,null,w(s.topic,(f,y)=>(c(),a("div",{key:y,class:oe(["relative text-[11px] rounded-md shadow-[0_0_0_1px_rgba(255,255,255,0.1)]",{"bg-app-bg-4":f}])},[n(E,{modelValue:s.topic[y],"onUpdate:modelValue":M=>s.topic[y]=M,class:"h-[26px] !w-[78px]",placeholder:"#请输入话题","input-style":"font-size: 11px;height: 100%"},null,8,["modelValue","onUpdate:modelValue"]),t("div",{class:"absolute -top-2 -right-2 w-4 h-4 rounded-full flex items-center justify-center bg-[#FF3C26] cursor-pointer",onClick:M=>q(h,y)},[n(V,{name:"local-icon-close",color:"#ffffff"})],8,Ie)],2))),128))]),t("div",Me,[n(x,{type:"primary",class:"!h-[26px]",onClick:f=>K(h)},{default:i(()=>e[9]||(e[9]=[u("添加话题",-1)])),_:2,__:[9]},1032,["onClick"])])])]),t("div",{class:"w-4 h-4 rounded-full cursor-pointer",onClick:f=>j("described",s)},[n(V,{name:"local-icon-success_fill",size:16,color:s.checked?"var(--color-primary)":"#ffffff1a"},null,8,["color"])],8,Ae)]))),128))])]),_:1})):(c(),a("div",De,[n(I,{description:"暂无数据","image-size":100})]))])])]),t("div",Fe,[n(x,{type:"primary",class:"!rounded-full w-[246px] !h-[50px]",onClick:Z},{default:i(()=>e[10]||(e[10]=[u("确定",-1)])),_:1,__:[10]})])])]),_:1},512)}}});const lt=ie(Ne,[["__scopeId","data-v-97ea3431"]]);export{lt as default};

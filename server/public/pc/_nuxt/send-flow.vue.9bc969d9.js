import{E as C,a as V}from"./index.4d719c96.js";import{d as L,A as f,aF as R,cx as B,bK as I,k as r,I as d,s as l,m as D,q as n,Z as t,l as q,K as A,J as K,ay as N,cV as O,G as S,av as G}from"./entry.2beb4577.js";/* empty css                  *//* empty css               *//* empty css                     */import{ai as J}from"./person_wechat.8bcf26fc.js";import M from"./useTask.a1a73e1b.js";const W=L({__name:"send-flow",props:{type:{}},emits:["success","close"],setup(P,{expose:u,emit:_}){const i=_,c=f(),m=f(),e=R({id:"",flow_id:[],push_type:0}),w={flow_id:[{required:!0,message:"请选择执行的客户流程",trigger:"blur"}]},{flowLists:k,getFlowLists:E}=M(),F=async()=>{var o;await((o=m.value)==null?void 0:o.validate());try{await J(e),i("success"),p()}catch(a){S.msgError(a)}},b=()=>{var o;(o=c.value)==null||o.open(),E()},p=()=>{i("close")},{lockFn:y,isLock:g}=B(F);return u({open:b,setFormData:o=>{I(o,e),e.flow_id&&(e.flow_id=e.flow_id.map(a=>parseInt(a)))}}),(o,a)=>{const v=C,h=V,x=G;return r(),d(O,{ref_key:"popupRef",ref:c,title:"设置执行范围",width:"500px",async:"","confirm-loading":t(g),onClose:p,onConfirm:t(y)},{default:l(()=>[D("div",null,[n(t(N),{ref_key:"formRef",ref:m,model:t(e),"label-position":"top",rules:w},{default:l(()=>[n(x,{label:"请选择执行的客户流程（多选）",prop:"flow_id"},{default:l(()=>[n(h,{modelValue:t(e).flow_id,"onUpdate:modelValue":a[0]||(a[0]=s=>t(e).flow_id=s),placeholder:"请选择执行的客户流程",filterable:"",multiple:""},{default:l(()=>[(r(!0),q(K,null,A(t(k),s=>(r(),d(v,{key:s.id,label:s.flow_name,value:s.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1},8,["confirm-loading","onConfirm"])}}});export{W as _};

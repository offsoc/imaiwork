import{d as L,at as N,c as I,r as z,A as F,k as s,l as o,m as i,a3 as H,t as m,L as d,Y as V,Z as a,q as n,s as b,J as r,v as k,I as M,G as u,cy as U,aH as q,y as G,_ as J}from"./entry.ca4d3d61.js";import{E as Y}from"./index.655612b0.js";import{_ as Z}from"./index.vue.9b80d373.js";import{_ as K}from"./index.vue.fa049f69.js";/* empty css                   */import{u as O}from"./useTemplate.afda57ca.js";const Q={class:"video-item card-gradient group"},W={class:"w-full px-3 mt-1 break-all"},X={class:"text-white line-clamp-1"},ee={key:0,class:"text-[10px] text-white"},te={class:"rotate-90 origin-center mr-1 cursor-pointer"},ie={class:"flex flex-col gap-2 text-white"},le={class:"h-11 px-3 rounded-lg cursor-pointer flex items-center gap-3 hover:shadow-[0_0_0_1px_rgba(42,42,42,1)] hover:bg-app-bg-1"},se={class:"flex w-5 h-5 rounded bg-[#ffffff0d] items-center justify-center"},oe={class:"text-[#ffffffcc]"},ne={class:"w-12 h-12"},ae={key:0,class:"absolute bottom-[80px] left-0 w-full z-[51] text-[#ffffff80] text-center"},ce={key:1,class:"absolute z-[88] px-4 bg-[#0000005E] w-full h-full top-0 flex flex-col items-center justify-center"},de={class:"flex justify-center items-center flex-col gap-2"},re={class:"w-6 h-6 flex items-center justify-center rounded-full bg-error"},fe={class:"text-white text-center"},me={class:"w-6 h-6 flex items-center justify-center rounded-full bg-primary"},ue={class:"absolute bottom-0 left-0 w-full z-[51]"},ve={key:0,class:"flex justify-center"},ye={class:"py-1 w-full flex justify-center z-50"},xe={class:"text-base text-[#ffffff80]"},pe=L({__name:"video-item",props:{item:{default:()=>({id:0,name:"",pic:"",status:0,video_url:"",model_version:"",remark:"",create_time:"",automatic_clip:0,clip_status:0,clip_video_url:""})},showVersion:{type:Boolean,default:!0},isCreate:{type:Boolean,default:!1}},emits:["delete","retry"],setup(e,{emit:j}){const w=j,S=N(),A=I(()=>{var l;return(l=S.getDigitalHumanConfig)==null?void 0:l.channel}),h=I(()=>A.value.reduce((l,t)=>(l[t.id]=t.name,l),{})),y=z(),_=(l,t)=>{l?y.value=t:y.value=void 0},B=l=>{w("retry",l)},C=l=>{u.loading("保存中"),U(l).then(()=>{u.closeLoading(),u.msgSuccess("下载成功")}).catch(()=>{u.closeLoading(),u.msgError("下载失败")})},E=async l=>{w("delete",l)},x=F(),p=z(!1),g=async l=>{p.value=!0,await q(),x.value.open(),x.value.setUrl(l)},{DefineTemplate:$,UseTemplate:f}=O();return(l,t)=>{const v=G,T=Y,D=Z,P=K;return s(),o(r,null,[i("div",Q,[i("div",{class:"grow min-h-0 relative",style:H({background:`linear-gradient(180deg, rgba(0,0,0,0.00) 50%, #000 100%), url(${e.item.pic}) no-repeat `,backgroundSize:"cover"})},[i("div",W,[i("div",X,m(e.item.name),1),e.item.automatic_clip==1?(s(),o("div",ee,"AI剪辑")):d("",!0)]),i("div",{class:V(["absolute right-2 top-2 z-[1000] w-9 h-9 flex items-center justify-center bg-[#ffffff33] rounded-full invisible group-hover:visible",[a(y)==e.item.id?"!visible":""]]),style:{"backdrop-filter":"blur(5px)"}},[n(T,{"popper-class":"!w-[212px] !min-w-[212px] !p-2 !rounded-xl !border-[#333333] !bg-app-bg-2","show-arrow":!1,"popper-options":{modifiers:[{name:"offset",options:{offset:[100,20]}}]},onShow:t[6]||(t[6]=c=>_(!0,e.item.id)),onHide:t[7]||(t[7]=c=>_(!1,e.item.id))},{reference:b(()=>[i("div",te,[n(v,{name:"el-icon-MoreFilled",color:"#ffffff"})])]),default:b(()=>[i("div",ie,[n(a($),null,{default:b(({label:c,icon:R})=>[i("div",le,[i("span",se,[n(v,{name:R,color:"#ffffff"},null,8,["name"])]),i("span",oe,m(c),1)])]),_:1}),e.item.status==1&&e.isCreate?(s(),o("div",{key:0,onClick:t[0]||(t[0]=c=>g(e.item.video_url))},[n(a(f),{label:"查看数字人克隆视频",icon:"local-icon-play"})])):d("",!0),e.item.status==1?(s(),o("div",{key:1,onClick:t[1]||(t[1]=c=>C(e.item.video_url))},[n(a(f),{label:"下载视频",icon:"local-icon-download"})])):d("",!0),e.item.automatic_clip==1&&e.item.clip_status==3?(s(),o(r,{key:2},[i("div",{onClick:t[2]||(t[2]=c=>C(e.item.clip_video_url))},[n(a(f),{label:"下载剪辑视频",icon:"local-icon-download"})]),i("div",{onClick:t[3]||(t[3]=c=>g(e.item.clip_video_url))},[n(a(f),{label:"播放剪辑视频",icon:"local-icon-play"})])],64)):d("",!0),[2,5].includes(e.item.status)?(s(),o("div",{key:3,onClick:t[4]||(t[4]=c=>B(e.item.id))},[n(a(f),{label:"重试视频",icon:"el-icon-Refresh"})])):d("",!0),i("div",{onClick:t[5]||(t[5]=c=>E(e.item.id))},[n(a(f),{label:"删除视频",icon:"local-icon-delete"})])])]),_:1})],2),e.item.status==1?(s(),o(r,{key:0},[i("div",{class:"absolute top-[50%] left-[50%] translate-x-[-50%] translate-y-[-50%] z-[99]",onClick:t[8]||(t[8]=c=>g(e.item.clip_video_url||e.item.video_url))},[i("div",ne,[n(D)])]),e.item.automatic_clip==1?(s(),o("div",ae,[e.item.clip_status==1||e.item.clip_status==2?(s(),o(r,{key:0},[k(" AI智能剪辑中... ")],64)):d("",!0),e.item.clip_status==3?(s(),o(r,{key:1},[k("AI智能剪辑完成")],64)):d("",!0),e.item.clip_status==4?(s(),o(r,{key:2},[k("AI智能剪辑失败")],64)):d("",!0)])):d("",!0)],64)):(s(),o("div",ce,[i("div",de,[n(a($)),e.item.status==2?(s(),o(r,{key:0},[i("span",re,[n(v,{name:"local-icon-video2",color:"#fff"})]),i("span",fe,m(e.item.remark||"生成失败"),1),t[10]||(t[10]=i("span",{class:"text-[#ffffff80] text-center"}," （请检查训练的视频文件） ",-1))],64)):(s(),o(r,{key:1},[i("span",me,[n(v,{name:"local-icon-pic2",color:"#fff"})]),t[11]||(t[11]=i("span",{class:"text-white"},"正在生成中",-1)),t[12]||(t[12]=i("span",{class:"text-[#ffffff80] text-center"},"几分钟即可生成视频",-1))],64))])])),i("div",ue,[a(h)[e.item.model_version]?(s(),o("div",ve,[i("div",{class:V(["digital-human-tag !py-1.5 !px-5",`digital-human-tag-${e.item.model_version}`])},m(a(h)[e.item.model_version]),3)])):d("",!0),i("div",ye,[i("div",xe,m(e.item.create_time),1)])])],4)]),a(p)?(s(),M(P,{key:0,ref_key:"videoPlayerRef",ref:x,onClose:t[9]||(t[9]=c=>p.value=!1)},null,512)):d("",!0)],64)}}});const Ce=J(pe,[["__scopeId","data-v-a7db72c3"]]);export{Ce as default};

import{d as H,bM as J,aF as X,r as m,D as z,k as a,l as p,m as c,q as n,s as i,v as y,Z as o,$ as Q,aI as W,I as x,t as I,J as V,K as Y,L as d,bK as ee,aH as h,G as P,ax as te,y as oe,au as ne,cP as se,u as le}from"./entry.d7219633.js";import{E as ae,a as re}from"./index.0a6eb9ae.js";import{E as ie}from"./el-image.37ed17f2.js";import{_ as pe}from"./index.vue.38c569b2.js";import{E as ce}from"./el-empty.77af023a.js";import{_ as de}from"./index.vue.5e2341cc.js";import{_ as ue}from"./index.vue.c82b4b26.js";/* empty css                        *//* empty css               */import"./el-image-viewer.960ba8e6.js";/* empty css                 *//* empty css                     */import{u as me}from"./usePaging.3c53b51c.js";import{Z as _e,_ as fe}from"./person_wechat.8bcf26fc.js";import{MaterialTypeEnum as _}from"./index.cf59f1a8.js";import{_ as ye}from"./keywords-edit.vue.d628237c.js";import{_ as ve}from"./import-data.vue.28e30476.js";import{_ as ge}from"./mini-program-card.vue.dd66cb8d.js";import{_ as ke}from"./link-card.vue.5b27e20b.js";import{_ as we}from"./file-card.vue.7b9fc004.js";const xe={class:"h-full flex flex-col"},he={class:"flex items-center justify-between px-4"},be={class:"flex items-center gap-x-2"},Ee={class:"grow min-h-0 mt-4"},Ce={class:"flex flex-col gap-y-2"},$e={key:0,class:"text-center inline-block bg-[var(--el-color-primary-light-9)] text-primary rounded-lg p-2 text-xs"},Ie={key:1,class:"bg-[var(--el-color-primary-light-9)] inline-block rounded-lg p-2 leading-[0]"},Ve={key:2,class:"w-[200px] h-[150px] mx-auto bg-[var(--el-color-primary-light-9)] rounded-lg p-2"},Pe={key:3,class:"w-[200px] max-h-[150px] bg-[var(--el-color-primary-light-9)] rounded-lg p-2 relative text-left inline-block"},Re={key:4,class:"bg-[var(--el-color-primary-light-9)] inline-block rounded-lg p-2 leading-[0] relative"},Te=["src"],De=["onClick"],Ke={key:5,class:"bg-[var(--el-color-primary-light-9)] inline-block rounded-lg p-2"},Le={class:"flex justify-end p-4"},st=H({__name:"keywords",setup(Ne){const R=J(),T=le(),v=X({keyword:"",robot_id:""}),{pager:f,getLists:u,resetParams:Se}=me({fetchFun:_e,params:v}),g=m(!1),k=m(),D=async()=>{var l;g.value=!0,await h(),(l=k.value)==null||l.open()},K=async l=>{var e,r;g.value=!0,await h(),(e=k.value)==null||e.open("edit"),(r=k.value)==null||r.setFormData(l)},L=l=>{T.$confirm({message:"确定删除该问答话术吗？",onConfirm:async()=>{try{await fe({id:l}),P.msgSuccess("删除成功"),u()}catch{P.msgError("删除失败")}}})},b=m(!1),E=m(),N=async l=>{var e,r;b.value=!0,await h(),(e=E.value)==null||e.open(),(r=E.value)==null||r.setUrl(l)},C=m(!1),$=m(),S=async()=>{var l;C.value=!0,await h(),(l=$.value)==null||l.open()};return z(()=>R.query.id,async l=>{l&&(v.robot_id=l,u())},{immediate:!0}),(l,e)=>{const r=te,B=oe,A=ne,w=ae,F=ie,M=pe,q=ce,G=re,U=de,j=ue,O=se;return a(),p(V,null,[c("div",xe,[c("div",he,[c("div",null,[n(r,{type:"primary",onClick:D},{default:i(()=>e[8]||(e[8]=[y("新增关键词话术",-1)])),_:1,__:[8]}),n(r,{type:"primary",onClick:S},{default:i(()=>e[9]||(e[9]=[y(" 批量上传回复 ",-1)])),_:1,__:[9]})]),c("div",be,[n(A,{class:"h-[34px] !w-[250px]",modelValue:o(v).keyword,"onUpdate:modelValue":e[1]||(e[1]=s=>o(v).keyword=s),placeholder:"请输入关键词",clearable:"",onClear:e[2]||(e[2]=s=>o(u)()),onKeyup:e[3]||(e[3]=Q(s=>o(u)(),["enter"]))},{append:i(()=>[n(r,{onClick:e[0]||(e[0]=s=>o(u)())},{default:i(()=>[n(B,{name:"el-icon-Search"})]),_:1})]),_:1},8,["modelValue"])])]),c("div",Ee,[W((a(),x(G,{data:o(f).lists,stripe:"",height:"100%","row-style":{height:"60px"}},{empty:i(()=>[n(q,{description:"暂无数据"})]),default:i(()=>[n(w,{label:"匹配模式",width:"120"},{default:i(({row:s})=>[y(I(s.match_type===0?"模糊匹配":"精确匹配"),1)]),_:1}),n(w,{label:"匹配内容",prop:"keyword","min-width":"200"}),n(w,{label:"回复内容","min-width":"300"},{default:i(({row:s})=>[c("div",Ce,[(a(!0),p(V,null,Y(s.reply,(t,Z)=>(a(),p("div",{key:Z,class:"text-sm w-full"},[t.type==o(_).TEXT?(a(),p("div",$e,I(t.content),1)):d("",!0),t.type==o(_).IMAGE?(a(),p("div",Ie,[n(F,{src:t.content,"preview-src-list":[t.content],"preview-teleported":"",class:"w-14 h-14"},null,8,["src","preview-src-list"])])):d("",!0),t.type==o(_).MINI_PROGRAM?(a(),p("div",Ve,[n(ge,{title:t.content.title,pic:t.content.pic,link:t.content.link},null,8,["title","pic","link"])])):d("",!0),t.type==o(_).LINK?(a(),p("div",Pe,[n(ke,{title:t.content.name,desc:t.content.desc,img:t.content.img},null,8,["title","desc","img"])])):d("",!0),t.type==o(_).VIDEO?(a(),p("div",Re,[c("video",{src:t.content,class:"max-w-[200px]"},null,8,Te),c("div",{class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",onClick:Be=>N(t.content)},[n(M)],8,De)])):d("",!0),t.type==o(_).FILE?(a(),p("div",Ke,[n(we,{name:t.content.name,url:t.content.url},null,8,["name","url"])])):d("",!0)]))),128))])]),_:1}),n(w,{label:"操作",width:"120",fixed:"right"},{default:i(({row:s})=>[n(r,{link:"",type:"primary",onClick:t=>K(s)},{default:i(()=>e[10]||(e[10]=[y(" 编辑 ",-1)])),_:2,__:[10]},1032,["onClick"]),n(r,{link:"",type:"danger",onClick:t=>L(s.id)},{default:i(()=>e[11]||(e[11]=[y(" 删除 ",-1)])),_:2,__:[11]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[O,o(f).loading]])]),c("div",Le,[n(U,{modelValue:o(f),"onUpdate:modelValue":e[4]||(e[4]=s=>ee(f)?f.value=s:null),onChange:o(u)},null,8,["modelValue","onChange"])])]),o(g)?(a(),x(ye,{key:0,ref_key:"editPopupRef",ref:k,onClose:e[5]||(e[5]=s=>g.value=!1),onSuccess:o(u)},null,8,["onSuccess"])):d("",!0),o(C)?(a(),x(ve,{key:1,ref_key:"importDataPopupRef",ref:$,type:"speech",title:"批量上传话术",onClose:e[6]||(e[6]=s=>C.value=!1),onSuccess:o(u)},null,8,["onSuccess"])):d("",!0),o(b)?(a(),x(j,{key:2,ref_key:"previewVideoRef",ref:E,onClose:e[7]||(e[7]=s=>b.value=!1)},null,512)):d("",!0)],64)}}});export{st as _};

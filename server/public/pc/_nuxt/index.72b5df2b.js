import{d as X,a as Y,r as p,k as u,l as ee,m as o,t as w,Z as l,dl as oe,dm as te,q as s,s as a,aI as se,I as f,v as g,L as C,bK as ne,J as le,G as x,ei as I,d_ as ae,eh as R,aH as P,y as re,ax as ie,cQ as ce,u as de}from"./entry.d9d53b29.js";import{E as pe,a as ue}from"./index.9a037d22.js";import{E as me}from"./index.8a3302e5.js";import{E as fe}from"./index.890e9d1e.js";import{_ as ve}from"./index.vue.930f6062.js";/* empty css                        *//* empty css               *//* empty css                   *//* empty css                 *//* empty css                     */import{u as _e}from"./usePaging.64764a63.js";import{u as ge}from"./useDeviceWs.76b101b1.js";import{u as xe}from"./useAddDeviceAccount.324bcf02.js";import{g as he,d as ye}from"./device.317521e4.js";import{_ as ke}from"./rpa-setting.vue.44680e4f.js";import{_ as Ce}from"./device-add.vue.f7048474.js";import{_ as Ee}from"./device-progress.vue.28e01ddd.js";import"./index.050c9b6b.js";import"./_baseIteratee.73cb21ab.js";import"./debounce.39f38609.js";import"./index.4538c991.js";import"./index.79f7263c.js";import"./strings.fbd015b4.js";import"./useWebSocket.0bb77166.js";import"./useSocialPlatform.2a31f125.js";import"./service.12abd78a.js";import"./index.cce223cb.js";/* empty css                    */const be=""+new URL("device.5646dcc8.svg",import.meta.url).href,De={class:"h-full p-4 flex flex-col"},we={class:"rounded-[20px] flex items-center gap-3 px-[30px]",style:{background:`linear-gradient(152deg, rgba(0, 101, 251, 0.88) -42.44%, rgba(255, 255, 255, 0) 12.19%)
                    rgb(255, 255, 255)`}},Re={class:"text-[#000000cc]"},Ae={class:"grow min-h-0 bg-white rounded-[20px] mt-4 flex flex-col"},$e={class:"h-[88px] px-5 flex items-center justify-between"},Be={class:"flex items-center gap-x-2"},Te={class:"text-lg font-bold"},Ne={class:"grow min-h-0"},Se={class:"flex flex-col gap-2"},Ve=["onClick"],Oe=["onClick"],Ie={class:"flex items-center justify-center"};const Pe=["onClick"],Le={class:"flex items-center justify-center h-full"},Ke={class:"flex justify-end p-4"},go=X({__name:"index",setup(je){const L=Y(),K=de(),{pager:m,getLists:d}=_e({fetchFun:he}),h=p(!1),v=p(!1),{isConnected:j,onEvent:F,send:U}=ge(),{showAddDevice:E,addDeviceLoading:q,progressValue:A,refreshAccount:G,handleAddDeviceConfirm:M,handleRefreshAccount:$}=xe({send:U,onEvent:F,onSuccess:t=>{const{msg:e,type:r}=t;switch(e&&x.msgSuccess(e),r){case I.GET_USER_INFO:B.value="",v.value=!1,y.value=null,h.value=!1,d();break;default:d();break}},onError:t=>{v.value=!0,A.value=0;const{code:e,error:r,type:i}=t;e!=ae.CONNECT_ERROR&&i!=I.BIND_WS&&(x.msgError(r),d())}}),B=p(""),W=()=>{v.value=!1,$(y.value,R.REDBOOK)},H=t=>{B.value=t,v.value=!1,M(t)},y=p(null),T=t=>{y.value=t.device_code,G.value=t.account,h.value=!0,$(y.value,R.REDBOOK)},N=t=>{const{account:e,device_code:r,device_model:i,id:c}=t,_=e.find(D=>D.type==R.REDBOOK);_?L.push({path:`/device/${c}`,query:{account:_.account,device_code:r,device_model:i}}):T(t)},S=p(),b=p(!1),Fe=async t=>{var e;b.value=!0,await P(),(e=S.value)==null||e.open(t)},V=p(),O=async()=>{var t;if(!j.value){x.msgError("连接失败，请检查网络连接");return}E.value=!0,await P(),(t=V.value)==null||t.open()},J=t=>{K.$confirm({message:"确定删除该设备吗？",onConfirm:async()=>{try{await ye({id:t.id,device_code:t.device_code}),x.msgSuccess("删除设备成功"),d()}catch(e){x.msgError(e||"删除失败")}}})};return d(),(t,e)=>{const r=re,i=ie,c=pe,_=me,D=fe,Q=ue,Z=ve,z=ce;return u(),ee(le,null,[o("div",De,[o("div",we,[e[6]||(e[6]=o("img",{src:be,class:"w-11 mt-7"},null,-1)),o("div",null,[o("div",Re,w(l(oe)[l(te).DEVICE]),1),e[5]||(e[5]=o("div",{class:"text-[#00000080]"}," 键绑定跨平台设备，激活智能流程引擎，全链路接管部门任务，让团队拥有数字化中枢管家。 ",-1))])]),o("div",Ae,[o("div",$e,[o("div",Be,[o("span",Te,"设备总数量："+w(l(m).count)+"台",1),s(i,{text:"",onClick:e[0]||(e[0]=n=>l(d)())},{default:a(()=>[s(r,{name:"el-icon-Refresh"}),e[7]||(e[7]=o("span",{class:"text-[#86909C]"},"刷新",-1))]),_:1,__:[7]})]),o("div",null,[s(i,{type:"primary",class:"!rounded-full !h-10",onClick:O},{default:a(()=>[s(r,{name:"local-icon-add_circle"}),e[8]||(e[8]=o("span",{class:"ml-2"},"添加设备",-1))]),_:1,__:[8]})])]),o("div",Ne,[se((u(),f(Q,{data:l(m).lists,height:"100%",stripe:"","row-style":{height:"60px"},"header-cell-style":{height:"63px"}},{empty:a(()=>[o("div",Le,[e[16]||(e[16]=g(" 还没有设备，",-1)),s(i,{type:"primary",link:"",onClick:O},{default:a(()=>e[15]||(e[15]=[g("点击添加设备",-1)])),_:1,__:[15]})])]),default:a(()=>[s(c,{prop:"device_model",label:"设备型号","show-overflow-tooltip":""},{default:a(({row:n})=>[s(i,{type:"primary",link:"",onClick:k=>N(n)},{default:a(()=>[g(w(n.device_model),1)]),_:2},1032,["onClick"])]),_:1}),s(c,{prop:"sdk_version",label:"当前SDK版本","show-overflow-tooltip":""}),s(c,{prop:"device_code",label:"设备码","show-overflow-tooltip":""}),s(c,{prop:"name",label:"设备状态"},{default:a(({row:n})=>[n.status===1?(u(),f(_,{key:0,type:"success","disable-transitions":!1},{default:a(()=>e[9]||(e[9]=[g("在线",-1)])),_:1,__:[9]})):(u(),f(_,{key:1,type:"danger","disable-transitions":!1},{default:a(()=>e[10]||(e[10]=[g("离线",-1)])),_:1,__:[10]}))]),_:1}),s(c,{prop:"create_time",label:"绑定时间",width:"180","show-overflow-tooltip":""}),s(c,{prop:"name",label:"操作",width:"100",fixed:"right"},{default:a(({row:n})=>[s(D,{"show-arrow":!1,"popper-class":"!w-[130px] !min-w-[130px] !p-[6px] !rounded-xl"},{reference:a(()=>[s(i,{link:""},{default:a(()=>[s(r,{name:"el-icon-MoreFilled"})]),_:1})]),default:a(()=>[o("div",Se,[o("div",{class:"px-2 py-1 hover:bg-primary-light-9 rounded-lg cursor-pointer flex items-center gap-2",onClick:k=>N(n)},[s(r,{name:"el-icon-User"}),e[11]||(e[11]=o("span",null,"账号详情",-1))],8,Ve),o("div",{class:"px-2 py-1 hover:bg-primary-light-9 rounded-lg cursor-pointer flex items-center gap-2",onClick:k=>T(n)},[o("span",Ie,[s(r,{name:"el-icon-Refresh"})]),e[12]||(e[12]=o("span",null,"更新数据",-1))],8,Oe),C("",!0),o("div",{class:"px-2 py-1 hover:bg-primary-light-9 rounded-lg cursor-pointer flex items-center gap-2",onClick:k=>J(n)},[s(r,{name:"el-icon-Delete"}),e[14]||(e[14]=o("span",null,"删除",-1))],8,Pe)])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[z,l(m).loading]])]),o("div",Ke,[s(Z,{modelValue:l(m),"onUpdate:modelValue":e[1]||(e[1]=n=>ne(m)?m.value=n:null),onChange:l(d)},null,8,["modelValue","onChange"])])])]),l(b)?(u(),f(ke,{key:0,ref_key:"rpaSettingRef",ref:S,onClose:e[2]||(e[2]=n=>b.value=!1)},null,512)):C("",!0),l(E)?(u(),f(Ce,{key:1,ref_key:"addDeviceRef",ref:V,"bind-loading":l(q),onClose:e[3]||(e[3]=n=>E.value=!1),onConfirm:H},null,8,["bind-loading"])):C("",!0),l(h)?(u(),f(Ee,{key:2,"progress-value":l(A),"progress-error":l(v),onClose:e[4]||(e[4]=n=>h.value=!1),onRetry:W},null,8,["progress-value","progress-error"])):C("",!0)],64)}}});export{go as default};

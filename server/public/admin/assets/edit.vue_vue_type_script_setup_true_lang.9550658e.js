import{R as U,S as K,D as L,C as w,F as Y}from"./element-plus.e618cff3.js";import{r as F}from"./index.03099c94.js";import{_ as h}from"./index.81ef9c88.js";import{d as N,s as C,Y as P,b as G,o as d,c as y,Q as t,H as a,u as l,a as p,M as f,O as V,G as c,L as m}from"./@vue.fa3e2f74.js";function le(){return F.get({url:"/setting.storage/lists"})}function M(i){return F.post({url:"/setting.storage/setup",params:i})}function H(i){return F.get({url:"/setting.storage/detail",params:i})}function te(i){return F.post({url:"/setting.storage/migration",params:i})}const Q={class:"edit-popup"},j={class:"form-tips"},z={key:0},J={class:"flex-1"},W={class:"flex-1"},X=p("div",{class:"form-tips"},"\u8BF7\u8865\u5168http://\u6216https://\uFF0C\u4F8B\u5982https://static.cloud.com",-1),oe=N({__name:"edit",emits:["success"],setup(i,{expose:D,emit:k}){const S=k,_=C(),g=C(),e=P({engine:"",bucket:"",access_key:"",secret_key:"",domain:"",region:"",status:0,PipelineId:"",Location:"",TemplateId:""}),I=[{name:"\u672C\u5730\u5B58\u50A8",type:"local",tips:"\u672C\u5730\u5B58\u50A8\u65B9\u5F0F\u4E0D\u9700\u8981\u914D\u7F6E\u5176\u4ED6\u53C2\u6570"},{name:"\u4E03\u725B\u4E91\u5B58\u50A8",type:"qiniu",tips:"\u5207\u6362\u4E03\u725B\u4E91\u5B58\u50A8\u540E\uFF0C\u7D20\u6750\u5E93\u9700\u8981\u91CD\u65B0\u4E0A\u4F20\u81F3\u4E03\u725B\u4E91"},{name:"\u963F\u91CC\u4E91OSS",type:"aliyun",tips:"\u5207\u6362\u963F\u91CC\u4E91OSS\u540E\uFF0C\u7D20\u6750\u5E93\u9700\u8981\u91CD\u65B0\u4E0A\u4F20\u81F3\u963F\u91CC\u4E91OSS"},{name:"\u817E\u8BAF\u4E91OSS",type:"qcloud",tips:"\u5207\u6362\u817E\u8BAF\u4E91OSS\u540E\uFF0C\u7D20\u6750\u5E93\u9700\u8981\u91CD\u65B0\u4E0A\u4F20\u81F3\u817E\u8BAF\u4E91OSS"}],v={bucket:[{required:!0,message:"\u8BF7\u8F93\u5165\u5B58\u50A8\u7A7A\u95F4\u540D\u79F0",trigger:"blur"}],access_key:[{required:!0,message:"\u8BF7\u8F93\u5165ACCESS_KEY",trigger:"blur"}],secret_key:[{required:!0,message:"\u8BF7\u8F93\u5165SECRET_KEY",trigger:"blur"}],domain:[{required:!0,message:"\u8BF7\u8F93\u5165\u7A7A\u95F4\u57DF\u540D",trigger:"blur"}],region:[{required:!0,message:"\u8BF7\u8F93\u5165REGION",trigger:"blur"}]},B=G(()=>I.find(n=>n.type==e.engine)),R=async()=>{var n,u;await((n=_.value)==null?void 0:n.validate()),await M(e),(u=g.value)==null||u.close(),S("success")},q=async()=>{const n=await H({engine:e.engine});for(const u in n)e[u]=n[u]},T=n=>{var u;e.engine=n,(u=g.value)==null||u.open(),q()},x=()=>{var n;(n=_.value)==null||n.resetFields()};return D({open:T}),(n,u)=>{const E=U,A=K,s=L,r=w,O=Y;return d(),y("div",Q,[t(h,{ref_key:"popupRef",ref:g,title:"\u8BBE\u7F6E\u5B58\u50A8",async:!0,width:"550px",onConfirm:R,onClose:x},{default:a(()=>[t(O,{ref_key:"formRef",ref:_,model:l(e),"label-width":"160px",rules:v},{default:a(()=>[t(s,{label:"\u5B58\u50A8\u65B9\u5F0F",prop:"engine"},{default:a(()=>{var o;return[p("div",null,[t(A,{"model-value":1},{default:a(()=>[t(E,{value:1},{default:a(()=>{var b;return[f(V((b=l(B))==null?void 0:b.name),1)]}),_:1})]),_:1}),p("div",j,V((o=l(B))==null?void 0:o.tips),1)])]}),_:1}),l(e).engine!=="local"?(d(),y("div",z,[t(s,{label:" \u5B58\u50A8\u7A7A\u95F4\u540D\u79F0",prop:"bucket"},{default:a(()=>[p("div",J,[t(r,{modelValue:l(e).bucket,"onUpdate:modelValue":u[0]||(u[0]=o=>l(e).bucket=o),placeholder:"\u8BF7\u8F93\u5165\u5B58\u50A8\u7A7A\u95F4\u540D\u79F0(Bucket)",clearable:""},null,8,["modelValue"])])]),_:1}),t(s,{label:"ACCESS_KEY",prop:"access_key"},{default:a(()=>[t(r,{modelValue:l(e).access_key,"onUpdate:modelValue":u[1]||(u[1]=o=>l(e).access_key=o),placeholder:"\u8BF7\u8F93\u5165ACCESS_KEY(AK)",clearable:""},null,8,["modelValue"])]),_:1}),t(s,{label:"SECRET_KEY",prop:"secret_key"},{default:a(()=>[t(r,{modelValue:l(e).secret_key,"onUpdate:modelValue":u[2]||(u[2]=o=>l(e).secret_key=o),placeholder:"\u8BF7\u8F93\u5165SECRET_KEY(SK)",clearable:""},null,8,["modelValue"])]),_:1}),t(s,{label:"\u7A7A\u95F4\u57DF\u540D",prop:"domain"},{default:a(()=>[p("div",W,[p("div",null,[t(r,{modelValue:l(e).domain,"onUpdate:modelValue":u[3]||(u[3]=o=>l(e).domain=o),placeholder:"\u8BF7\u8F93\u5165\u7A7A\u95F4\u57DF\u540D(Domain)",clearable:""},null,8,["modelValue"])]),X])]),_:1}),l(e).engine=="qcloud"?(d(),c(s,{key:0,label:"REGION",prop:"region"},{default:a(()=>[t(r,{modelValue:l(e).region,"onUpdate:modelValue":u[4]||(u[4]=o=>l(e).region=o),placeholder:"\u8BF7\u8F93\u5165region",clearable:""},null,8,["modelValue"])]),_:1})):m("",!0),["aliyun","qiniu"].includes(l(e).engine)?(d(),c(s,{key:1,label:"PipelineId(\u7BA1\u9053ID)",prop:"PipelineId"},{default:a(()=>[t(r,{modelValue:l(e).PipelineId,"onUpdate:modelValue":u[5]||(u[5]=o=>l(e).PipelineId=o),placeholder:"\u8BF7\u8F93\u5165PipelineId",clearable:""},null,8,["modelValue"])]),_:1})):m("",!0),["aliyun"].includes(l(e).engine)?(d(),c(s,{key:2,label:"Location(\u4F4D\u7F6E)",prop:"Location"},{default:a(()=>[t(r,{modelValue:l(e).Location,"onUpdate:modelValue":u[6]||(u[6]=o=>l(e).Location=o),placeholder:"\u8BF7\u8F93\u5165Location",clearable:""},null,8,["modelValue"])]),_:1})):m("",!0),["aliyun","qcloud"].includes(l(e).engine)?(d(),c(s,{key:3,label:"TemplateId(\u6A21\u677FID)",prop:"TemplateId"},{default:a(()=>[t(r,{modelValue:l(e).TemplateId,"onUpdate:modelValue":u[7]||(u[7]=o=>l(e).TemplateId=o),placeholder:"\u8BF7\u8F93\u5165TemplateId",clearable:""},null,8,["modelValue"])]),_:1})):m("",!0)])):m("",!0),t(s,{label:"\u72B6\u6001",prop:"status"},{default:a(()=>[t(A,{modelValue:l(e).status,"onUpdate:modelValue":u[8]||(u[8]=o=>l(e).status=o)},{default:a(()=>[t(E,{label:0},{default:a(()=>[f("\u5173\u95ED")]),_:1}),t(E,{label:1},{default:a(()=>[f("\u5F00\u542F")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},512)])}}});export{oe as _,te as a,le as s};

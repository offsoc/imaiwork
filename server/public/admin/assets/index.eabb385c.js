import{a4 as z,C as J,D as Y,G as Q,H as W,w as X,F as Z,J as ee,K as te,L as le,M as ae}from"./element-plus.09e738c5.js";import{_ as ue}from"./index.vue_vue_type_script_setup_true_lang.0af97da2.js";import{f as K,h as R}from"./index.1bd46af0.js";import{_ as oe}from"./index.vue_vue_type_script_setup_true_lang.5d117949.js";import{d as ne,Y as se,r as U,ap as ie,o,c as B,P as t,G as l,u as a,a6 as L,O as M,a5 as O,F as s,L as r,H as x,a as F,K as d,M as m,v as re}from"./@vue.b0c8b5fa.js";import{u as me}from"./usePaging.3fa68fd5.js";import{d as de,g as pe,a as ce}from"./music.f76ed46f.js";import{_ as _e}from"./music-item.vue_vue_type_script_setup_true_lang.001c66e0.js";import"./@vueuse.20a2efa8.js";import"./@element-plus.ca3f8b8b.js";import"./lodash-es.2cd559e9.js";import"./dayjs.33f9e030.js";import"./@vscode.6c9cb547.js";import"./katex.234fd046.js";import"./@popperjs.36402333.js";import"./async-validator.fb49d0f5.js";import"./@ctrl.b082b0c1.js";import"./normalize-wheel-es.8aeb3683.js";import"./lodash.0bb3a698.js";import"./axios.e67d1c3e.js";import"./vue-router.f608815d.js";import"./pinia.173cb91f.js";import"./vue-demi.b3a9cad9.js";import"./css-color-function.9d260b6b.js";import"./color.4290e22e.js";import"./clone.10c3af82.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./debug.35afef70.js";import"./ms.a9ae1d6d.js";import"./nprogress.d9597aae.js";import"./vue-clipboard3.6701dfcc.js";import"./clipboard.a993786e.js";import"./sortablejs.fb59ed0f.js";import"./echarts.8535e5a6.js";import"./zrender.3eba8991.js";import"./tslib.60310f1a.js";import"./highlight.js.4f6161a5.js";import"./@highlightjs.39ed541d.js";import"./useAudioPlay.fb82d372.js";const fe={class:"flex items-center gap-2"},Ce=["onClick"],Fe=["onClick"],ge={class:"flex justify-end mt-4"},rt=ne({__name:"index",setup(ve){const n=se({user_info:"",prompt:"",status:-1,style_id:"",start_time:"",end_time:""}),v=U([]),P=p=>{v.value=p.map(u=>u.id)},V=async p=>{await K.confirm("\u786E\u5B9A\u8981\u5220\u9664\uFF1F"),await de({id:p}),b()},y=(p,u)=>{K.confirm(p,u,{showCancelButton:!1,type:"",customStyle:{"max-width":"550px"}})},{pager:f,getLists:b,resetPage:k,resetParams:S}=me({fetchFun:ce,params:n}),E=U({style:[],status:[]});return(async()=>{E.value=await pe()})(),b(),(p,u)=>{const w=J,c=Y,h=Q,D=W,I=oe,C=X,N=Z,T=ee,i=te,A=R,G=R,g=z,H=le,j=ue,$=ie("perms"),q=ae;return o(),B("div",null,[t(T,{shadow:"never",class:"!border-none mt-4"},{default:l(()=>[t(N,{ref:"formRef",class:"mb-[-16px]",model:a(n),inline:!0},{default:l(()=>[t(c,{label:"\u7528\u6237\u4FE1\u606F"},{default:l(()=>[t(w,{class:"w-[280px]",modelValue:a(n).user_info,"onUpdate:modelValue":u[0]||(u[0]=e=>a(n).user_info=e),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237ID/\u7528\u6237\u6635\u79F0",clearable:"",onKeyup:L(a(k),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),t(c,{label:"\u5173\u952E\u8BCD"},{default:l(()=>[t(w,{class:"w-[280px]",modelValue:a(n).prompt,"onUpdate:modelValue":u[1]||(u[1]=e=>a(n).prompt=e),placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD",clearable:"",onKeyup:L(a(k),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),t(c,{label:"\u751F\u6210\u72B6\u6001"},{default:l(()=>[t(D,{class:"!w-[280px]",modelValue:a(n).status,"onUpdate:modelValue":u[2]||(u[2]=e=>a(n).status=e)},{default:l(()=>[t(h,{label:"\u5168\u90E8",value:-1}),(o(!0),B(M,null,O(a(E).status,(e,_)=>(o(),s(h,{label:e,value:_},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1}),t(c,{label:"\u97F3\u4E50\u98CE\u683C"},{default:l(()=>[t(D,{class:"!w-[280px]",modelValue:a(n).style_id,"onUpdate:modelValue":u[3]||(u[3]=e=>a(n).style_id=e)},{default:l(()=>[(o(!0),B(M,null,O(a(E).style,(e,_)=>(o(),s(h,{label:e.name,value:e.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1}),t(c,{label:"\u751F\u6210\u65F6\u95F4"},{default:l(()=>[t(I,{startTime:a(n).start_time,"onUpdate:startTime":u[4]||(u[4]=e=>a(n).start_time=e),endTime:a(n).end_time,"onUpdate:endTime":u[5]||(u[5]=e=>a(n).end_time=e)},null,8,["startTime","endTime"])]),_:1}),t(c,null,{default:l(()=>[t(C,{type:"primary",onClick:a(k)},{default:l(()=>[r("\u67E5\u8BE2")]),_:1},8,["onClick"]),t(C,{onClick:a(S)},{default:l(()=>[r("\u91CD\u7F6E")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),t(T,{class:"!border-none mt-4",shadow:"never"},{default:l(()=>[x((o(),s(C,{class:"mb-4",onClick:u[6]||(u[6]=e=>V(a(v))),disabled:!a(v).length},{default:l(()=>[r(" \u6279\u91CF\u5220\u9664 ")]),_:1},8,["disabled"])),[[$,["music.musicRecord/del"]]]),x((o(),s(H,{size:"large",data:a(f).lists,"row-key":"id",onSelectionChange:P},{default:l(()=>[t(i,{type:"selection",width:"55",fixed:"left"}),t(i,{label:"\u7528\u6237\u6635\u79F0","min-width":"180"},{default:l(({row:e})=>[F("div",fe,[e.avatar?(o(),s(A,{key:0,radius:"50%",class:"flex-none",src:e.avatar,width:40,height:40,"preview-src-list":[e.avatar],"preview-teleported":"",fit:"cover"},null,8,["src","preview-src-list"])):d("",!0),r(" "+m(e.nickname),1)])]),_:1}),t(i,{label:"\u7528\u6237\u8F93\u5165","min-width":"180"},{default:l(({row:e})=>[F("div",{class:"line-clamp-3 cursor-pointer",onClick:_=>y(e.prompt,"\u7528\u6237\u8F93\u5165")},m(e.prompt),9,Ce)]),_:1}),t(i,{label:"\u6B4C\u66F2\u5C01\u9762",width:"100"},{default:l(({row:e})=>[e.image_url?(o(),s(G,{key:0,class:"flex-none",src:e.image_url,"preview-teleported":"","preview-src-list":[e.image_url],width:58,height:58,fit:"contain"},null,8,["src","preview-src-list"])):d("",!0)]),_:1}),t(i,{label:"\u6B4C\u66F2\u540D\u79F0","min-width":"180"},{default:l(({row:e})=>[t(_e,{name:e.title,url:e.audio_url},null,8,["name","url"])]),_:1}),t(i,{label:"\u6B4C\u8BCD","min-width":"180"},{default:l(({row:e})=>[F("div",{class:"line-clamp-3 cursor-pointer",onClick:_=>y(e.lyric,"\u6B4C\u8BCD")},m(e.lyric),9,Fe)]),_:1}),t(i,{label:"\u751F\u6210\u7ED3\u679C","min-width":"100"},{default:l(({row:e})=>[e.status==0?(o(),s(g,{key:0,type:"info"},{default:l(()=>[r(m(e.status_desc),1)]),_:2},1024)):d("",!0),e.status==1?(o(),s(g,{key:1,type:"warning"},{default:l(()=>[r(m(e.status_desc),1)]),_:2},1024)):d("",!0),e.status==2?(o(),s(g,{key:2,type:"success"},{default:l(()=>[r(m(e.status_desc),1)]),_:2},1024)):d("",!0),e.status==3?(o(),s(g,{key:3,type:"danger"},{default:l(()=>[r(m(e.status_desc),1)]),_:2},1024)):d("",!0),e.status==3&&e.fail_reason?(o(),s(C,{key:4,type:"danger",link:!0,onClick:_=>y(`\u9519\u8BEF\u4FE1\u606F\uFF1A${e.fail_reason}`,"\u9519\u8BEF\u539F\u56E0")},{default:l(()=>[r(" \u67E5\u770B\u539F\u56E0 ")]),_:2},1032,["onClick"])):d("",!0)]),_:1}),t(i,{label:"\u98CE\u683C","min-width":"100"},{default:l(({row:e})=>[F("div",null,m(e.style_desc||"-"),1)]),_:1}),t(i,{label:"\u6D88\u8017\u7B97\u529B\u503C","min-width":"120",prop:"tokens"}),t(i,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"create_time","min-width":"180"}),t(i,{label:"\u64CD\u4F5C",width:"100",fixed:"right"},{default:l(({row:e})=>[x((o(),s(C,{type:"danger",link:"",onClick:_=>V([e.id])},{default:l(()=>[r(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[$,["music.musicRecord/del"]]])]),_:1})]),_:1},8,["data"])),[[q,a(f).loading]]),F("div",ge,[t(j,{modelValue:a(f),"onUpdate:modelValue":u[7]||(u[7]=e=>re(f)?f.value=e:null),onChange:a(b)},null,8,["modelValue","onChange"])])]),_:1})])}}});export{rt as default};

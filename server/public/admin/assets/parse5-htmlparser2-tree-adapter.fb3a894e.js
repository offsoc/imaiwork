import{D as S}from"./parse5.53291ea6.js";var i;(function(t){t.Root="root",t.Text="text",t.Directive="directive",t.Comment="comment",t.Script="script",t.Style="style",t.Tag="tag",t.CDATA="cdata",t.Doctype="doctype"})(i||(i={}));function O(t){return t.type===i.Tag||t.type===i.Script||t.type===i.Style}i.Root;i.Text;i.Directive;i.Comment;i.Script;i.Style;i.Tag;i.CDATA;i.Doctype;class C{constructor(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}get parentNode(){return this.parent}set parentNode(e){this.parent=e}get previousSibling(){return this.prev}set previousSibling(e){this.prev=e}get nextSibling(){return this.next}set nextSibling(e){this.next=e}cloneNode(e=!1){return I(this,e)}}class m extends C{constructor(e){super(),this.data=e}get nodeValue(){return this.data}set nodeValue(e){this.data=e}}class y extends m{constructor(){super(...arguments),this.type=i.Text}get nodeType(){return 3}}class v extends m{constructor(){super(...arguments),this.type=i.Comment}get nodeType(){return 8}}class b extends m{constructor(e,r){super(r),this.name=e,this.type=i.Directive}get nodeType(){return 1}}class f extends C{constructor(e){super(),this.children=e}get firstChild(){var e;return(e=this.children[0])!==null&&e!==void 0?e:null}get lastChild(){return this.children.length>0?this.children[this.children.length-1]:null}get childNodes(){return this.children}set childNodes(e){this.children=e}}class A extends f{constructor(){super(...arguments),this.type=i.CDATA}get nodeType(){return 4}}class h extends f{constructor(){super(...arguments),this.type=i.Root}get nodeType(){return 9}}class T extends f{constructor(e,r,n=[],s=e==="script"?i.Script:e==="style"?i.Style:i.Tag){super(n),this.name=e,this.attribs=r,this.type=s}get nodeType(){return 1}get tagName(){return this.name}set tagName(e){this.name=e}get attributes(){return Object.keys(this.attribs).map(e=>{var r,n;return{name:e,value:this.attribs[e],namespace:(r=this["x-attribsNamespace"])===null||r===void 0?void 0:r[e],prefix:(n=this["x-attribsPrefix"])===null||n===void 0?void 0:n[e]}})}}function D(t){return O(t)}function P(t){return t.type===i.CDATA}function u(t){return t.type===i.Text}function N(t){return t.type===i.Comment}function x(t){return t.type===i.Directive}function L(t){return t.type===i.Root}function I(t,e=!1){let r;if(u(t))r=new y(t.data);else if(N(t))r=new v(t.data);else if(D(t)){const n=e?p(t.children):[],s=new T(t.name,{...t.attribs},n);n.forEach(a=>a.parent=s),t.namespace!=null&&(s.namespace=t.namespace),t["x-attribsNamespace"]&&(s["x-attribsNamespace"]={...t["x-attribsNamespace"]}),t["x-attribsPrefix"]&&(s["x-attribsPrefix"]={...t["x-attribsPrefix"]}),r=s}else if(P(t)){const n=e?p(t.children):[],s=new A(n);n.forEach(a=>a.parent=s),r=s}else if(L(t)){const n=e?p(t.children):[],s=new h(n);n.forEach(a=>a.parent=s),t["x-mode"]&&(s["x-mode"]=t["x-mode"]),r=s}else if(x(t)){const n=new b(t.name,t.data);t["x-name"]!=null&&(n["x-name"]=t["x-name"],n["x-publicId"]=t["x-publicId"],n["x-systemId"]=t["x-systemId"]),r=n}else throw new Error(`Not implemented yet: ${t.type}`);return r.startIndex=t.startIndex,r.endIndex=t.endIndex,t.sourceCodeLocation!=null&&(r.sourceCodeLocation=t.sourceCodeLocation),r}function p(t){const e=t.map(r=>I(r,!0));for(let r=1;r<e.length;r++)e[r].prev=e[r-1],e[r-1].next=e[r];return e}function g(t){const e=t.includes('"')?"'":'"';return e+t+e}function _(t,e,r){let n="!DOCTYPE ";return t&&(n+=t),e?n+=` PUBLIC ${g(e)}`:r&&(n+=" SYSTEM"),r&&(n+=` ${g(r)}`),n}const o={isCommentNode:N,isElementNode:D,isTextNode:u,createDocument(){const t=new h([]);return t["x-mode"]=S.NO_QUIRKS,t},createDocumentFragment(){return new h([])},createElement(t,e,r){const n=Object.create(null),s=Object.create(null),a=Object.create(null);for(let l=0;l<r.length;l++){const d=r[l].name;n[d]=r[l].value,s[d]=r[l].namespace,a[d]=r[l].prefix}const c=new T(t,n,[]);return c.namespace=e,c["x-attribsNamespace"]=s,c["x-attribsPrefix"]=a,c},createCommentNode(t){return new v(t)},createTextNode(t){return new y(t)},appendChild(t,e){const r=t.children[t.children.length-1];r&&(r.next=e,e.prev=r),t.children.push(e),e.parent=t},insertBefore(t,e,r){const n=t.children.indexOf(r),{prev:s}=r;s&&(s.next=e,e.prev=s),r.prev=e,e.next=r,t.children.splice(n,0,e),e.parent=t},setTemplateContent(t,e){o.appendChild(t,e)},getTemplateContent(t){return t.children[0]},setDocumentType(t,e,r,n){const s=_(e,r,n);let a=t.children.find(c=>x(c)&&c.name==="!doctype");a?a.data=s!=null?s:null:(a=new b("!doctype",s),o.appendChild(t,a)),a["x-name"]=e,a["x-publicId"]=r,a["x-systemId"]=n},setDocumentMode(t,e){t["x-mode"]=e},getDocumentMode(t){return t["x-mode"]},detachNode(t){if(t.parent){const e=t.parent.children.indexOf(t),{prev:r,next:n}=t;t.prev=null,t.next=null,r&&(r.next=n),n&&(n.prev=r),t.parent.children.splice(e,1),t.parent=null}},insertText(t,e){const r=t.children[t.children.length-1];r&&u(r)?r.data+=e:o.appendChild(t,o.createTextNode(e))},insertTextBefore(t,e,r){const n=t.children[t.children.indexOf(r)-1];n&&u(n)?n.data+=e:o.insertBefore(t,o.createTextNode(e),r)},adoptAttributes(t,e){for(let r=0;r<e.length;r++){const n=e[r].name;t.attribs[n]===void 0&&(t.attribs[n]=e[r].value,t["x-attribsNamespace"][n]=e[r].namespace,t["x-attribsPrefix"][n]=e[r].prefix)}},getFirstChild(t){return t.children[0]},getChildNodes(t){return t.children},getParentNode(t){return t.parent},getAttrList(t){return t.attributes},getTagName(t){return t.name},getNamespaceURI(t){return t.namespace},getTextNodeContent(t){return t.data},getCommentNodeContent(t){return t.data},getDocumentTypeNodeName(t){var e;return(e=t["x-name"])!==null&&e!==void 0?e:""},getDocumentTypeNodePublicId(t){var e;return(e=t["x-publicId"])!==null&&e!==void 0?e:""},getDocumentTypeNodeSystemId(t){var e;return(e=t["x-systemId"])!==null&&e!==void 0?e:""},isDocumentTypeNode(t){return x(t)&&t.name==="!doctype"},setNodeSourceCodeLocation(t,e){e&&(t.startIndex=e.startOffset,t.endIndex=e.endOffset),t.sourceCodeLocation=e},getNodeSourceCodeLocation(t){return t.sourceCodeLocation},updateNodeSourceCodeLocation(t,e){e.endOffset!=null&&(t.endIndex=e.endOffset),t.sourceCodeLocation={...t.sourceCodeLocation,...e}}};export{o as a};

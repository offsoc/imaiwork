import{a3 as N,w as P,J as j,K as T,t as R,L as U,M as q}from"./element-plus.e618cff3.js";import{_ as z}from"./index.vue_vue_type_script_setup_true_lang.2d767870.js";import{f as E,h as G}from"./index.976d8a45.js";import{_ as H}from"./support.33fd4668.js";import{g as J,_ as K,d as Q,c as W,a as Y}from"./edit.vue_vue_type_script_setup_true_lang.b3fcfa04.js";import{u as X}from"./usePaging.74092dd4.js";import{d as Z,Y as tt,r as b,i as et,aq as at,o as r,c as ot,a as i,Q as t,H as e,O as y,u as n,M as g,I as w,G as d,v as ut,L as nt,P as it,n as k}from"./@vue.fa3e2f74.js";import"./@vueuse.57305db2.js";import"./@element-plus.8edeb311.js";import"./lodash-es.72862127.js";import"./dayjs.33f9e030.js";import"./@vscode.6c9cb547.js";import"./katex.234fd046.js";import"./@popperjs.36402333.js";import"./@ctrl.b082b0c1.js";import"./async-validator.fb49d0f5.js";import"./normalize-wheel-es.8aeb3683.js";import"./lodash.0bb3a698.js";import"./axios.e67d1c3e.js";import"./vue-router.24cf2b30.js";import"./pinia.d2a105b3.js";import"./vue-demi.b3a9cad9.js";import"./css-color-function.9d260b6b.js";import"./color.4290e22e.js";import"./clone.10c3af82.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./debug.35afef70.js";import"./ms.a9ae1d6d.js";import"./nprogress.d9597aae.js";import"./vue-clipboard3.6701dfcc.js";import"./clipboard.a993786e.js";import"./sortablejs.fb59ed0f.js";import"./echarts.8535e5a6.js";import"./zrender.3eba8991.js";import"./tslib.60310f1a.js";import"./highlight.js.4f6161a5.js";import"./@highlightjs.fc60ff58.js";import"./index.6c1a317f.js";import"./picker.89ad2f71.js";import"./index.571c160c.js";import"./index.ea70d895.js";import"./index.vue_vue_type_script_setup_true_lang.ae4ea884.js";import"./index.vue_vue_type_script_setup_true_lang.379c4e76.js";import"./preview.vue_vue_type_script_setup_true_lang.743512ee.js";import"./index.vue_vue_type_script_setup_true_lang.1c9fc45b.js";import"./vue3-video-play.f18a92be.js";import"./vuedraggable.1167511f.js";import"./vue.f5e4d7ed.js";import"./consumer.1bc7d07b.js";import"./useLockFn.b1b43a93.js";const st={class:"flex gap-4"},lt={class:"text-lg font-bold"},mt={class:"flex justify-end mt-4"},rt=i("div",{class:"flex justify-center items-center"},[i("img",{class:"w-[150px] h-[150px]",src:H})],-1),pt={class:"text-lg font-bold"},dt={class:"flex justify-end mt-4"},ct={class:"flex justify-end mt-4"},_e=Z({__name:"lists",setup(_t){const s=tt({authnum:0,useauthnum:0}),{pager:p,getLists:c}=X({fetchFun:J}),_=b(!1),f=b(),x=async()=>{var a;if(s.useauthnum>=s.authnum){await E.msgWarning("OEM\u5269\u4F59\u6388\u6743\u540D\u989D\u4E0D\u8DB3\uFF0C\u65E0\u6CD5\u8FDB\u884C\u6388\u6743");return}_.value=!0,await k(),(a=f.value)==null||a.open("add")},B=async a=>{var u,l;_.value=!0,await k(),(u=f.value)==null||u.open("edit"),(l=f.value)==null||l.setFormData(a)},V=async a=>{await E.confirm("\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u6388\u6743\u5417\uFF1F"),await Q({id:a.id}),D()},O=async a=>{try{await W({id:a.id,status:a.status})}finally{c()}},C=async()=>{const a=await Y();s.authnum=a.authnum,s.useauthnum=a.useauthnum},D=async()=>{await C(),await c()};return et(()=>{D()}),(a,u)=>{const l=P,A=N,h=j,m=T,$=G,M=R,S=U,I=z,F=at("perms"),L=q;return r(),ot(it,null,[i("div",null,[t(h,{class:"!border-none",shadow:"never"},{default:e(()=>[i("div",st,[t(h,{class:"w-[400px]",shadow:"never"},{default:e(()=>[i("div",lt," OEM\u5269\u4F59\u6388\u6743\u540D\u989D\uFF1A "+y(n(s).useauthnum)+" / "+y(n(s).authnum)+" \u540D ",1),i("div",mt,[t(A,{width:"200"},{reference:e(()=>[t(l,{type:"primary"},{default:e(()=>[g("\u524D\u5F80\u6388\u6743")]),_:1})]),default:e(()=>[rt]),_:1})])]),_:1}),t(h,{class:"w-[400px]",shadow:"never"},{default:e(()=>[i("div",pt,"OEM\u5DF2\u6388\u6743\u7528\u6237\uFF1A "+y(n(s).useauthnum)+" / \u4EBA",1),i("div",dt,[w((r(),d(l,{type:"primary",onClick:x},{default:e(()=>[g("\u6388\u6743")]),_:1})),[[F,["marketing.oem.auth/add"]]])])]),_:1})])]),_:1}),t(h,{class:"!border-none mt-4",shadow:"never"},{default:e(()=>[w((r(),d(S,{size:"large",data:n(p).lists},{default:e(()=>[t(m,{label:"\u7AD9\u70B9\u57DF\u540D",prop:"domain","min-width":"200"}),t(m,{label:"\u7AD9\u70B9ICON",width:"100"},{default:e(({row:o})=>[t($,{src:o.logo_url,width:"32",height:"32"},null,8,["src"])]),_:1}),t(m,{label:"\u7AD9\u70B9\u6807\u9898",prop:"name","min-width":"160"}),t(m,{label:"\u6240\u5C5E\u7528\u6237",prop:"username","min-width":"160"}),t(m,{label:"\u6388\u6743\u65F6\u95F4",prop:"auth_time",width:"180"}),t(m,{label:"\u72B6\u6001",prop:"auth_time",width:"120"},{default:e(({row:o})=>[t(M,{modelValue:o.status,"onUpdate:modelValue":v=>o.status=v,"active-value":1,"inactive-value":0,onChange:v=>O(o)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),t(m,{label:"\u64CD\u4F5C",width:"120",fixed:"right"},{default:e(({row:o})=>[w((r(),d(l,{type:"danger",link:"",onClick:v=>V(o)},{default:e(()=>[g(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[F,["marketing.oem.auth/delete"]]]),w((r(),d(l,{type:"primary",link:"",onClick:v=>B(o)},{default:e(()=>[g(" \u7F16\u8F91 ")]),_:2},1032,["onClick"])),[[F,["marketing.oem.auth/edit"]]])]),_:1})]),_:1},8,["data"])),[[L,n(p).loading]]),i("div",ct,[t(I,{modelValue:n(p),"onUpdate:modelValue":u[0]||(u[0]=o=>ut(p)?p.value=o:null),onChange:n(c)},null,8,["modelValue","onChange"])])]),_:1})]),n(_)?(r(),d(K,{key:0,ref_key:"editPopupRef",ref:f,onClose:u[1]||(u[1]=o=>_.value=!1),onSuccess:u[2]||(u[2]=o=>{n(c)(),C()})},null,512)):nt("",!0)],64)}}});export{_e as default};

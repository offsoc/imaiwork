import{a4 as U,L as j,C as I,D as q,G,H,w as O,F as z,J,K as Y,M as Q}from"./element-plus.09e738c5.js";import{_ as W}from"./index.vue_vue_type_script_setup_true_lang.0af97da2.js";import{_ as X}from"./index.vue_vue_type_script_setup_true_lang.5d117949.js";import{d as Z,Y as ee,r as V,ad as te,ap as ae,o as n,c as h,P as t,G as a,u as o,a6 as oe,L as s,a as g,H as f,F as r,O as le,a5 as ne,M as k,K as ue,v as ie}from"./@vue.b0c8b5fa.js";import{j as se,k as re,l as me}from"./montage.c03a2d42.js";import{g as pe,f as de}from"./index.1bd46af0.js";import{u as ce}from"./usePaging.3fa68fd5.js";import"./@vueuse.20a2efa8.js";import"./@element-plus.ca3f8b8b.js";import"./lodash-es.2cd559e9.js";import"./dayjs.33f9e030.js";import"./@vscode.6c9cb547.js";import"./katex.234fd046.js";import"./@popperjs.36402333.js";import"./async-validator.fb49d0f5.js";import"./@ctrl.b082b0c1.js";import"./normalize-wheel-es.8aeb3683.js";import"./lodash.0bb3a698.js";import"./axios.e67d1c3e.js";import"./vue-router.f608815d.js";import"./pinia.173cb91f.js";import"./vue-demi.b3a9cad9.js";import"./css-color-function.9d260b6b.js";import"./color.4290e22e.js";import"./clone.10c3af82.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./debug.35afef70.js";import"./ms.a9ae1d6d.js";import"./nprogress.d9597aae.js";import"./vue-clipboard3.6701dfcc.js";import"./clipboard.a993786e.js";import"./sortablejs.fb59ed0f.js";import"./echarts.8535e5a6.js";import"./zrender.3eba8991.js";import"./tslib.60310f1a.js";import"./highlight.js.4f6161a5.js";import"./@highlightjs.39ed541d.js";const _e={class:"mb-4 flex justify-between"},fe={class:"break-all"},Ce={class:"flex justify-end mt-4"},lt=Z({__name:"reocrd",setup(Fe){const u=ee({nickname:"",start_time:"",end_time:"",status:""}),{pager:c,getLists:_,resetPage:E,resetParams:x}=ce({fetchFun:me,params:u}),B=V(),C=V([]),T=m=>{C.value=m},R=async m=>{await se({id:m.id,status:m.status==1?4:1}),_()},D=async m=>{var l;await de.confirm("\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F"),await re({id:m}),_(),C.value=[],(l=B.value)==null||l.clearSelection()};return _(),(m,l)=>{const S=I,F=q,y=G,A=H,P=X,p=O,$=z,w=J,i=Y,v=U,K=te("router-link"),L=W,b=ae("perms"),M=Q;return n(),h("div",null,[t(w,{class:"!border-none",shadow:"never"},{default:a(()=>[t($,{ref:"formRef",class:"mb-[-16px]",model:o(u),inline:!0},{default:a(()=>[t(F,{label:"\u7528\u6237\u4FE1\u606F"},{default:a(()=>[t(S,{class:"w-[280px]",modelValue:o(u).nickname,"onUpdate:modelValue":l[0]||(l[0]=e=>o(u).nickname=e),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237",clearable:"",onKeyup:oe(o(E),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),t(F,{label:"\u72B6\u6001"},{default:a(()=>[t(A,{class:"!w-[180px]",modelValue:o(u).status,"onUpdate:modelValue":l[1]||(l[1]=e=>o(u).status=e),placeholder:"\u8BF7\u9009\u62E9\u72B6\u6001",clearable:"",onChange:l[2]||(l[2]=e=>o(_)())},{default:a(()=>[t(y,{label:"\u8FDB\u884C\u4E2D",value:"1"}),t(y,{label:"\u5DF2\u5B8C\u6210",value:"2"}),t(y,{label:"\u6682\u505C",value:"4"})]),_:1},8,["modelValue"])]),_:1}),t(F,{label:"\u521B\u4F5C\u65F6\u95F4"},{default:a(()=>[t(P,{startTime:o(u).start_time,"onUpdate:startTime":l[3]||(l[3]=e=>o(u).start_time=e),endTime:o(u).end_time,"onUpdate:endTime":l[4]||(l[4]=e=>o(u).end_time=e)},null,8,["startTime","endTime"])]),_:1}),t(F,null,{default:a(()=>[t(p,{type:"primary",onClick:o(E)},{default:a(()=>[s("\u67E5\u8BE2")]),_:1},8,["onClick"]),t(p,{onClick:o(x)},{default:a(()=>[s("\u91CD\u7F6E")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),t(w,{class:"!border-none mt-4",shadow:"never"},{default:a(()=>[g("div",_e,[f((n(),r(p,{type:"default",plain:!0,disabled:!o(C).length,onClick:l[5]||(l[5]=e=>D(o(C).map(d=>d.id)))},{default:a(()=>[s(" \u6279\u91CF\u5220\u9664 ")]),_:1},8,["disabled"])),[[b,["ai_application.montage.publish_record/delete"]]])]),f((n(),r(o(j),{ref_key:"tableRef",ref:B,size:"large",data:o(c).lists,"row-key":"id",onSelectionChange:T},{default:a(()=>[t(i,{type:"selection",width:"55",fixed:"left","reserve-selection":""}),t(i,{label:"ID",prop:"id","min-width":"60"}),t(i,{label:"\u7528\u6237",prop:"user_nickname","min-width":"140","show-overflow-tooltip":""}),t(i,{label:"\u53D1\u5E03\u8D26\u53F7",width:"180"},{default:a(({row:e})=>[g("div",fe,[(n(!0),h(le,null,ne(e.accounts,(d,N)=>(n(),h("div",{key:N},k(d.type==1?"\u4E2A\u5FAE":"\u5C0F\u7EA2\u4E66")+"\uFF1A"+k(d.account),1))),128))])]),_:1}),t(i,{label:"\u4EFB\u52A1\u540D\u79F0",prop:"name","min-width":"180","show-overflow-tooltip":""}),t(i,{label:"\u4EFB\u52A1\u72B6\u6001","min-width":"120"},{default:a(({row:e})=>[e.status==1||e.status==2?(n(),r(v,{key:0,type:"warning"},{default:a(()=>[s("\u8FDB\u884C\u4E2D")]),_:1})):e.status==3?(n(),r(v,{key:1,type:"success"},{default:a(()=>[s("\u5DF2\u5B8C\u6210")]),_:1})):e.status==4?(n(),r(v,{key:2,type:"info"},{default:a(()=>[s("\u5DF2\u6682\u505C")]),_:1})):ue("",!0)]),_:1}),t(i,{label:"\u53D1\u5E03\u5468\u671F",prop:"name","min-width":"80"},{default:a(({row:e})=>[g("span",null,k(e.publish_cycle)+"\u5929",1)]),_:1}),t(i,{label:"\u521B\u4F5C\u65F6\u95F4",prop:"create_time","min-width":"180"}),t(i,{label:"\u64CD\u4F5C",width:"160",fixed:"right"},{default:a(({row:e})=>[f((n(),r(p,{type:"primary",link:""},{default:a(()=>[t(K,{to:{path:o(pe)("ai_application.montage/publish_detail"),query:{id:e.id}}},{default:a(()=>[s(" \u8BE6\u60C5 ")]),_:2},1032,["to"])]),_:2},1024)),[[b,["ai_application.montage/publish_detail"]]]),(e.status,f((n(),r(p,{key:0,type:"primary",link:"",onClick:d=>R(e)},{default:a(()=>[s(k(e.status==2||e.status==1?"\u6682\u505C":"\u5F00\u59CB"),1)]),_:2},1032,["onClick"])),[[b,["ai_application.montage.publish_record/start:pause"]]])),f((n(),r(p,{type:"danger",link:"",onClick:d=>D([e.id])},{default:a(()=>[s(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[b,["ai_application.montage.publish_record/delete"]]])]),_:1})]),_:1},8,["data"])),[[M,o(c).loading]]),g("div",Ce,[t(L,{modelValue:o(c),"onUpdate:modelValue":l[6]||(l[6]=e=>ie(c)?c.value=e:null),onChange:o(_)},null,8,["modelValue","onChange"])])]),_:1})])}}});export{lt as default};

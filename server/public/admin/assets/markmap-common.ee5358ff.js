const u="npm2url/dist/index.cjs",d={jsdelivr:r=>`https://cdn.jsdelivr.net/npm/${r}`,unpkg:r=>`https://unpkg.com/${r}`};async function f(r,e){const t=await fetch(r,{signal:e});if(!t.ok)throw t;await t.text()}class h{constructor(){this.providers={...d},this.provider="jsdelivr"}async getFastestProvider(e=5e3,t=u){const s=new AbortController;let i=0;try{return await new Promise((o,n)=>{Promise.all(Object.entries(this.providers).map(async([l,c])=>{try{await f(c(t),s.signal),o(l)}catch{}})).then(()=>n(new Error("All providers failed"))),i=setTimeout(n,e,new Error("Timed out"))})}finally{s.abort(),clearTimeout(i)}}async findFastestProvider(e,t){return this.provider=await this.getFastestProvider(e,t),this.provider}setProvider(e,t){t?this.providers[e]=t:delete this.providers[e]}getFullUrl(e,t=this.provider){if(e.includes("://"))return e;const s=this.providers[t];if(!s)throw new Error(`Provider ${t} not found`);return s(e)}}new h;class v{constructor(){this.listeners=[]}tap(e){return this.listeners.push(e),()=>this.revoke(e)}revoke(e){const t=this.listeners.indexOf(e);t>=0&&this.listeners.splice(t,1)}revokeAll(){this.listeners.splice(0)}call(...e){for(const t of this.listeners)t(...e)}}const p=Math.random().toString(36).slice(2,8);let a=0;function w(){return a+=1,`mm-${p}-${a}`}function m(){}function g(r,e){const t=(s,i)=>e(s,()=>{var o;return(o=s.children)==null?void 0:o.map(n=>t(n,s))},i);return t(r)}function k(r,...e){const t=(r||"").split(" ").filter(Boolean);return e.forEach(s=>{s&&t.indexOf(s)<0&&t.push(s)}),t.join(" ")}function y(r,e){return(...t)=>e(r,...t)}function b(r,e){const t={timer:0};function s(){t.timer&&(window.clearTimeout(t.timer),t.timer=0)}function i(){s(),t.args&&(t.result=r(...t.args))}return function(...n){return s(),t.args=n,t.timer=window.setTimeout(i,e),t.result}}function P(r){return{type:"script",data:{src:r}}}function x(r){return{type:"stylesheet",data:{href:r}}}export{v as H,h as U,y as a,P as b,x as c,b as d,k as e,w as g,m as n,g as w};

import{X as v,a4 as A,J as D,K as w,w as x,L,M as T}from"./element-plus.e618cff3.js";import{_ as M,s as N,a as R}from"./edit.vue_vue_type_script_setup_true_lang.1e4edf47.js";import{d as B,s as V,Y as $,aq as S,o as a,c as q,Q as u,H as t,I as c,u as g,G as o,M as i,L as z}from"./@vue.fa3e2f74.js";import"./@vueuse.57305db2.js";import"./@element-plus.8edeb311.js";import"./lodash-es.72862127.js";import"./dayjs.33f9e030.js";import"./@vscode.6c9cb547.js";import"./katex.234fd046.js";import"./@popperjs.36402333.js";import"./@ctrl.b082b0c1.js";import"./async-validator.fb49d0f5.js";import"./normalize-wheel-es.8aeb3683.js";import"./index.976d8a45.js";import"./lodash.0bb3a698.js";import"./axios.e67d1c3e.js";import"./vue-router.24cf2b30.js";import"./pinia.d2a105b3.js";import"./vue-demi.b3a9cad9.js";import"./css-color-function.9d260b6b.js";import"./color.4290e22e.js";import"./clone.10c3af82.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./debug.35afef70.js";import"./ms.a9ae1d6d.js";import"./nprogress.d9597aae.js";import"./vue-clipboard3.6701dfcc.js";import"./clipboard.a993786e.js";import"./sortablejs.fb59ed0f.js";import"./echarts.8535e5a6.js";import"./zrender.3eba8991.js";import"./tslib.60310f1a.js";import"./highlight.js.4f6161a5.js";import"./@highlightjs.fc60ff58.js";import"./index.6c1a317f.js";const G={class:"storage"},H=B({name:"storage"}),Dt=B({...H,setup(I){const d=V(),s=$({loading:!1,lists:[]}),m=async()=>{try{s.loading=!0,s.lists=await N(),s.loading=!1}catch{s.loading=!1}},E=n=>{var p;(p=d.value)==null||p.open(n)},C=async n=>{await R({status:n.status,engine:n.engine,migration:1}),m()};return m(),(n,p)=>{const h=v,_=D,r=w,l=A,F=x,y=L,f=S("perms"),k=T;return a(),q("div",G,[u(_,{class:"!border-none",shadow:"never"},{default:t(()=>[u(h,{type:"warning",title:"\u6E29\u99A8\u63D0\u793A\uFF1A1.\u5207\u6362\u5B58\u50A8\u65B9\u5F0F\u540E\uFF0C\u9700\u8981\u5C06\u8D44\u6E90\u6587\u4EF6\u4F20\u8F93\u81F3\u65B0\u7684\u5B58\u50A8\u7AEF\uFF1B2.\u8BF7\u52FF\u968F\u610F\u5207\u6362\u5B58\u50A8\u65B9\u5F0F\uFF0C\u53EF\u80FD\u5BFC\u81F4\u56FE\u7247\u65E0\u6CD5\u67E5\u770B",closable:!1,"show-icon":""})]),_:1}),c((a(),o(_,{class:"!border-none mt-4",shadow:"never"},{default:t(()=>[u(y,{size:"large",data:g(s).lists},{default:t(()=>[u(r,{label:"\u50A8\u5B58\u65B9\u5F0F",prop:"name","min-width":"120"}),u(r,{label:"\u50A8\u5B58\u4F4D\u7F6E",prop:"path","min-width":"160"}),u(r,{label:"\u72B6\u6001","min-width":"80"},{default:t(({row:e})=>[e.status==1?(a(),o(l,{key:0},{default:t(()=>[i("\u5F00\u542F")]),_:1})):(a(),o(l,{key:1,type:"danger"},{default:t(()=>[i("\u5173\u95ED")]),_:1}))]),_:1}),u(r,{label:"\u8FC1\u79FB\u72B6\u6001","min-width":"80"},{default:t(({row:e})=>[e.migration==1?(a(),o(l,{key:0},{default:t(()=>[i("\u8FC1\u79FB\u4E2D")]),_:1})):e.migration==2?(a(),o(l,{key:1,type:"success"},{default:t(()=>[i("\u8FC1\u79FB\u6210\u529F")]),_:1})):(a(),o(l,{key:2,type:"danger"},{default:t(()=>[i("\u672A\u8FC1\u79FB")]),_:1}))]),_:1}),u(r,{label:"\u64CD\u4F5C","min-width":"100",fixed:"right"},{default:t(({row:e})=>[c((a(),o(F,{type:"primary",link:"",onClick:b=>E(e.engine)},{default:t(()=>[i(" \u8BBE\u7F6E ")]),_:2},1032,["onClick"])),[[f,["setting.storage/setup"]]]),e.status==1&&e.engine!="local"&&e.migration!=1?c((a(),o(F,{key:0,type:"primary",link:"",onClick:b=>C(e)},{default:t(()=>[i(" \u4E0A\u4F20\u672C\u5730\u6587\u4EF6 ")]),_:2},1032,["onClick"])),[[f,["setting.storage/upload"]]]):z("",!0)]),_:1})]),_:1},8,["data"])]),_:1})),[[k,g(s).loading]]),u(M,{ref_key:"editRef",ref:d,onSuccess:m},null,512)])}}});export{Dt as default};

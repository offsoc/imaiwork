import{_ as q}from"./index.1194f3fc.js";import{D as G,C as R,F as S,J as N,w as L}from"./element-plus.09e738c5.js";import{_ as U}from"./picker.8fd95042.js";import{r as b,f as j,b as O}from"./index.1bd46af0.js";import{u as $}from"./useLockFn.cf82402d.js";import{_ as H}from"./add_greeting.vue_vue_type_script_setup_true_lang.24eab409.js";import{d as J,s as g,Y as K,r as F,ap as P,o as l,c as T,a as C,P as r,G as u,u as o,H as Y,F as B,L as z,K as M,O as Q,bj as W,bi as X}from"./@vue.b0c8b5fa.js";import"./@vueuse.20a2efa8.js";import"./@element-plus.ca3f8b8b.js";import"./lodash-es.2cd559e9.js";import"./dayjs.33f9e030.js";import"./@vscode.6c9cb547.js";import"./katex.234fd046.js";import"./@popperjs.36402333.js";import"./async-validator.fb49d0f5.js";import"./@ctrl.b082b0c1.js";import"./normalize-wheel-es.8aeb3683.js";import"./index.65ae06d1.js";import"./index.7fa0696d.js";import"./index.vue_vue_type_script_setup_true_lang.0af97da2.js";import"./index.678a4866.js";import"./index.vue_vue_type_script_setup_true_lang.f3fff232.js";import"./index.vue_vue_type_script_setup_true_lang.9996a4fe.js";import"./usePaging.3fa68fd5.js";import"./preview.vue_vue_type_script_setup_true_lang.337ce91c.js";import"./index.vue_vue_type_script_setup_true_lang.a9802a4b.js";import"./vue3-video-play.20b32444.js";import"./vuedraggable.1dfb0a09.js";import"./vue.c1c1914b.js";import"./sortablejs.fb59ed0f.js";import"./lodash.0bb3a698.js";import"./axios.e67d1c3e.js";import"./vue-router.f608815d.js";import"./pinia.173cb91f.js";import"./vue-demi.b3a9cad9.js";import"./css-color-function.9d260b6b.js";import"./color.4290e22e.js";import"./clone.10c3af82.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./debug.35afef70.js";import"./ms.a9ae1d6d.js";import"./nprogress.d9597aae.js";import"./vue-clipboard3.6701dfcc.js";import"./clipboard.a993786e.js";import"./echarts.8535e5a6.js";import"./zrender.3eba8991.js";import"./tslib.60310f1a.js";import"./highlight.js.4f6161a5.js";import"./@highlightjs.39ed541d.js";function Z(){return b.post({url:"/assistants.assistants/chat"})}function tt(i){return b.post({url:"/assistants.assistants/updateChat",params:i})}const et=i=>(W("data-v-aba1f7f4"),i=i(),X(),i),ot=et(()=>C("div",{class:"text-xl font-medium mb-[20px]"},"\u914D\u7F6E\u4FE1\u606F",-1)),rt=J({__name:"index",setup(i){const _=g(),t=K({banner:"",logo:"",file_prompt:"",new_chat_prompt:"",preliminary_ask:[]}),E={banner:[{required:!0,message:"\u8BF7\u4E0A\u4F20\u56FE\u7247",trigger:"blur"}],logo:[{required:!0,message:"\u8BF7\u4E0A\u4F20\u56FE\u7247",trigger:"blur"}],file_prompt:[{required:!0,message:"\u8BF7\u8F93\u5165\u62FC\u63A5\u8BCD",trigger:"blur"}],new_chat_prompt:[{required:!0,message:"\u8BF7\u8F93\u5165\u65B0\u5BF9\u8BDD\u63D0\u793A\u8BCD",trigger:"blur"}]},n=F(!1),w=g(),c=F(-1),D=a=>{if(t.preliminary_ask.length>5){j.msgError("\u5F00\u573A\u767D\u6700\u591A\u53EA\u80FD\u8BBE\u7F6E6\u6761");return}const{mode:e,data:s}=a;e=="add"?t.preliminary_ask.push(s):t.preliminary_ask[c.value]=s,c.value=-1,n.value=!1},x=async()=>{var a;await((a=_.value)==null?void 0:a.validate()),await tt(t),await d()},{lockFn:k,isLock:v}=$(x),d=async()=>{const a=await Z();Object.keys(t).map(e=>{t[e]=a[e]})};return d(),(a,e)=>{const s=U,m=G,f=R,h=S,y=N,A=L,V=q,I=P("perm");return l(),T(Q,null,[C("div",null,[r(y,{class:"!border-none",shadow:"never"},{default:u(()=>[ot,r(h,{ref_key:"formRef",ref:_,model:o(t),rules:E,"label-width":"160px"},{default:u(()=>[r(m,{label:"\u901A\u7528\u5BF9\u8BDD\u804A\u5929\u5934\u50CF",prop:"logo"},{default:u(()=>[r(s,{modelValue:o(t).logo,"onUpdate:modelValue":e[0]||(e[0]=p=>o(t).logo=p),limit:1},null,8,["modelValue"])]),_:1}),r(m,{label:"\u7528\u6237\u6587\u4EF6\u62FC\u63A5\u8BCD\u8BBE\u7F6E",prop:"file_prompt"},{default:u(()=>[r(f,{modelValue:o(t).file_prompt,"onUpdate:modelValue":e[1]||(e[1]=p=>o(t).file_prompt=p),class:"w-[500px]",type:"textarea",maxlength:"1000",rows:4},null,8,["modelValue"])]),_:1}),r(m,{label:"\u65B0\u5EFA\u5BF9\u8BDD\u63D0\u793A\u8BCD\u8BBE\u7F6E",prop:"new_chat_prompt"},{default:u(()=>[r(f,{modelValue:o(t).new_chat_prompt,"onUpdate:modelValue":e[2]||(e[2]=p=>o(t).new_chat_prompt=p),class:"w-[500px]",type:"textarea",maxlength:"1000",rows:4},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1})]),r(V,null,{default:u(()=>[Y((l(),B(A,{type:"primary",onClick:o(k),loading:o(v)},{default:u(()=>[z(" \u4FDD\u5B58 ")]),_:1},8,["onClick","loading"])),[[I,["ai_application.chat/setConfig"]]])]),_:1}),o(n)?(l(),B(H,{key:0,ref_key:"addGreetingRef",ref:w,onSuccess:D,onClose:e[3]||(e[3]=p=>n.value=!1)},null,512)):M("",!0)],64)}}});const oe=O(rt,[["__scopeId","data-v-aba1f7f4"]]);export{oe as default};

import{L as ee,C as te,D as le,G as oe,H as ae,w as ne,F as ie,J as ue,K as re,o as se,M as pe}from"./element-plus.e618cff3.js";import{_ as me}from"./index.vue_vue_type_script_setup_true_lang.2d767870.js";import{u as de,f as ce,h as _e}from"./index.976d8a45.js";import{_ as fe}from"./index.vue_vue_type_script_setup_true_lang.b9a0ee41.js";import{d as ve,b as Fe,r as f,Y as we,s as L,aq as ye,o as u,c as E,a as v,Q as l,H as a,u as o,a6 as Ce,P as U,a5 as ge,G as p,v as I,M as m,I as F,O as K,L as h,n as N}from"./@vue.fa3e2f74.js";import{d as be,g as Be}from"./draw_records.fff79620.js";import{u as ke}from"./usePaging.74092dd4.js";import{_ as Ee}from"./prompt.vue_vue_type_script_setup_true_lang.b4cf6af5.js";import{_ as he}from"./detail.vue_vue_type_script_setup_true_lang.d3e90af3.js";import"./@vueuse.57305db2.js";import"./@element-plus.8edeb311.js";import"./lodash-es.72862127.js";import"./dayjs.33f9e030.js";import"./@vscode.6c9cb547.js";import"./katex.234fd046.js";import"./@popperjs.36402333.js";import"./@ctrl.b082b0c1.js";import"./async-validator.fb49d0f5.js";import"./normalize-wheel-es.8aeb3683.js";import"./lodash.0bb3a698.js";import"./axios.e67d1c3e.js";import"./vue-router.24cf2b30.js";import"./pinia.d2a105b3.js";import"./vue-demi.b3a9cad9.js";import"./css-color-function.9d260b6b.js";import"./color.4290e22e.js";import"./clone.10c3af82.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./debug.35afef70.js";import"./ms.a9ae1d6d.js";import"./nprogress.d9597aae.js";import"./vue-clipboard3.6701dfcc.js";import"./clipboard.a993786e.js";import"./sortablejs.fb59ed0f.js";import"./echarts.8535e5a6.js";import"./zrender.3eba8991.js";import"./tslib.60310f1a.js";import"./highlight.js.4f6161a5.js";import"./@highlightjs.fc60ff58.js";import"./chat.390bf234.js";import"./useLockFn.b1b43a93.js";import"./index.6c1a317f.js";const De={class:"mb-4 flex justify-between"},xe={class:"whitespace-pre"},Ve={key:0,class:"flex"},Pe={class:"flex justify-end mt-4"},Bt=ve({__name:"index",setup(Re){const j=de(),D=Fe(()=>{var n;return(n=j.config.draw)==null?void 0:n.channel}),C=f(),i=we({user:"",model_type:"",start_time:"",end_time:"",type:[3,4]}),{pager:c,getLists:g,resetPage:x,resetParams:q}=ke({fetchFun:Be,params:i}),V=f(),z=n=>{i.type=[n]},P=L(null),b=f(!1),R=L(null),B=f(!1),T=async n=>{var t;b.value=!0,await N(),(t=P.value)==null||t.open(n)},w=f([]),G=n=>{w.value=n},H=async n=>{var t;B.value=!0,await N(),(t=R.value)==null||t.open(n)},$=async n=>{var t;await ce.confirm("\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F"),await be({id:n}),g(),w.value=[],(t=V.value)==null||t.clearSelection()};return g(),(n,t)=>{const M=te,_=le,k=oe,A=ae,O=fe,d=ne,J=ie,S=ue,r=re,Q=se,Y=_e,W=me,y=ye("perms"),X=pe;return u(),E(U,null,[v("div",null,[l(S,{class:"!border-none",shadow:"never"},{default:a(()=>[l(J,{ref:"formRef",class:"mb-[-16px]",model:o(i),inline:!0},{default:a(()=>[l(_,{label:"\u7528\u6237\u4FE1\u606F"},{default:a(()=>[l(M,{class:"w-[280px]",modelValue:o(i).user,"onUpdate:modelValue":t[0]||(t[0]=e=>o(i).user=e),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u6635\u79F0",clearable:"",onKeyup:Ce(o(x),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),l(_,{label:"\u751F\u6210\u6A21\u578B"},{default:a(()=>[l(A,{modelValue:o(i).model_type,"onUpdate:modelValue":t[1]||(t[1]=e=>o(i).model_type=e),class:"!w-[160px]",placeholder:"\u8BF7\u9009\u62E9\u751F\u6210\u6A21\u578B",clearable:""},{default:a(()=>[(u(!0),E(U,null,ge(o(D),(e,s)=>(u(),p(k,{key:s,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(_,{label:"\u521B\u4F5C\u7C7B\u578B"},{default:a(()=>[l(A,{modelValue:o(C),"onUpdate:modelValue":t[2]||(t[2]=e=>I(C)?C.value=e:null),class:"!w-[160px]",placeholder:"\u8BF7\u9009\u62E9\u521B\u4F5C\u7C7B\u578B",clearable:"",onChange:z},{default:a(()=>[l(k,{label:"\u6587\u751F\u56FE",value:"3"}),l(k,{label:"\u56FE\u751F\u56FE",value:"4"})]),_:1},8,["modelValue"])]),_:1}),l(_,{label:"\u521B\u5EFA\u65F6\u95F4"},{default:a(()=>[l(O,{startTime:o(i).start_time,"onUpdate:startTime":t[3]||(t[3]=e=>o(i).start_time=e),endTime:o(i).end_time,"onUpdate:endTime":t[4]||(t[4]=e=>o(i).end_time=e)},null,8,["startTime","endTime"])]),_:1}),l(_,null,{default:a(()=>[l(d,{type:"primary",onClick:o(x)},{default:a(()=>[m("\u67E5\u8BE2")]),_:1},8,["onClick"]),l(d,{onClick:o(q)},{default:a(()=>[m("\u91CD\u7F6E")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),l(S,{class:"!border-none mt-4",shadow:"never"},{default:a(()=>[v("div",De,[F((u(),p(d,{type:"default",plain:!0,disabled:!o(w).length,onClick:t[5]||(t[5]=e=>$(o(w).map(s=>s.id)))},{default:a(()=>[m(" \u6279\u91CF\u5220\u9664 ")]),_:1},8,["disabled"])),[[y,["ai_application.draw_sd.record/delete"]]]),v("div",null,[F((u(),p(d,{type:"primary",onClick:t[6]||(t[6]=e=>T("image"))},{default:a(()=>[m(" \u56FE\u7247\u83B7\u53D6\u63D0\u793A\u8BCD\u914D\u7F6E ")]),_:1})),[[y,["ai_application.draw_sd.record/edit"]]]),F((u(),p(d,{type:"primary",onClick:t[7]||(t[7]=e=>T("text"))},{default:a(()=>[m(" \u6587\u5B57\u83B7\u53D6\u63D0\u793A\u8BCD\u914D\u7F6E ")]),_:1})),[[y,["ai_application.draw_sd.record/edit"]]])])]),F((u(),p(o(ee),{ref_key:"tableRef",ref:V,size:"large",data:o(c).lists,"row-key":"id",onSelectionChange:G},{default:a(()=>[l(r,{type:"selection",width:"55",fixed:"left","reserve-selection":""}),l(r,{label:"ID",prop:"id","min-width":"80"}),l(r,{label:"\u5934\u50CF","min-width":"100"},{default:a(({row:e})=>[l(Q,{src:e.avatar,size:50},null,8,["src"])]),_:1}),l(r,{label:"\u6635\u79F0",prop:"nickname","min-width":"140","show-overflow-tooltip":""}),l(r,{label:"\u751F\u6210\u6A21\u578B",prop:"model_type","min-width":"120"},{default:a(({row:e})=>{var s;return[v("div",xe,K((s=o(D).find(Z=>Z.id==e.model_type))==null?void 0:s.name),1)]}),_:1}),l(r,{label:"\u751F\u6210\u56FE","min-width":"120"},{default:a(({row:e})=>[e.images&&e.images.length>0?(u(),E("div",Ve,[l(Y,{src:e.images[0].image,width:50,height:50,"preview-src-list":e.images.map(s=>s.image),"preview-teleported":"",fit:"contain"},null,8,["src","preview-src-list"])])):h("",!0)]),_:1}),l(r,{label:"\u521B\u4F5C\u7C7B\u578B",prop:"type_name","min-width":"120"}),l(r,{label:"\u6D88\u8017\u7B97\u529B",prop:"points","min-width":"120"},{default:a(({row:e})=>[m(K(e.points||0)+"\u7B97\u529B ",1)]),_:1}),l(r,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"create_time","min-width":"180","show-overflow-tooltip":""}),l(r,{label:"\u64CD\u4F5C",width:"120",fixed:"right"},{default:a(({row:e})=>[l(d,{type:"primary",link:"",onClick:s=>H(e)},{default:a(()=>[m("\u8BE6\u60C5")]),_:2},1032,["onClick"]),F((u(),p(d,{type:"danger",link:"",onClick:s=>$(e.id)},{default:a(()=>[m(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[y,["ai_application.draw_sd.record/delete"]]])]),_:1})]),_:1},8,["data"])),[[X,o(c).loading]]),v("div",Pe,[l(W,{modelValue:o(c),"onUpdate:modelValue":t[8]||(t[8]=e=>I(c)?c.value=e:null),onChange:o(g)},null,8,["modelValue","onChange"])])]),_:1})]),o(b)?(u(),p(Ee,{key:0,ref_key:"promptPopRef",ref:P,onClose:t[9]||(t[9]=e=>b.value=!1)},null,512)):h("",!0),o(B)?(u(),p(he,{key:1,ref_key:"detailPopupRef",ref:R,onClose:t[10]||(t[10]=e=>B.value=!1)},null,512)):h("",!0)],64)}}});export{Bt as default};

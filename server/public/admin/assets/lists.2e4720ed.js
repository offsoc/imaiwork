import{a3 as N,w as P,J as j,K as T,t as R,L as U,M as G}from"./element-plus.b694a2f4.js";import{_ as q}from"./index.vue_vue_type_script_setup_true_lang.0a17ae2c.js";import{f as E,h as z}from"./index.f10dd425.js";import{_ as H}from"./support.33fd4668.js";import{g as J,_ as K,d as Q,c as W,a as Y}from"./edit.vue_vue_type_script_setup_true_lang.811aeb9d.js";import{u as X}from"./usePaging.74092dd4.js";import{d as Z,Y as tt,r as k,i as et,aq as at,o as m,c as ot,a as n,Q as t,H as e,O as F,u as i,M as g,I as w,G as d,v as ut,L as it,P as nt,n as x}from"./@vue.fa3e2f74.js";import"./@vueuse.57305db2.js";import"./@element-plus.8edeb311.js";import"./lodash-es.72862127.js";import"./dayjs.0a835391.js";import"./@vscode.4616c7ee.js";import"./katex.42c635ec.js";import"./@popperjs.36402333.js";import"./@ctrl.b082b0c1.js";import"./async-validator.fb49d0f5.js";import"./normalize-wheel-es.8aeb3683.js";import"./lodash.a609e612.js";import"./axios.ddddcbae.js";import"./vue-router.24cf2b30.js";import"./pinia.d2a105b3.js";import"./vue-demi.b3a9cad9.js";import"./css-color-function.6fe488a5.js";import"./color.eb90fb33.js";import"./clone.81074570.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./debug.e2d654ba.js";import"./ms.a9ae1d6d.js";import"./nprogress.430b6dc1.js";import"./vue-clipboard3.2f1d7104.js";import"./clipboard.7e043bc1.js";import"./sortablejs.f3bfd0ca.js";import"./echarts.8535e5a6.js";import"./zrender.3eba8991.js";import"./tslib.60310f1a.js";import"./highlight.js.4f6161a5.js";import"./@highlightjs.fc60ff58.js";import"./index.f03241f6.js";import"./picker.48b01f41.js";import"./index.7b07c9d0.js";import"./index.6d9f402f.js";import"./index.vue_vue_type_script_setup_true_lang.d9eca07d.js";import"./index.vue_vue_type_script_setup_true_lang.67e6db0d.js";import"./preview.vue_vue_type_script_setup_true_lang.1474844e.js";import"./index.vue_vue_type_script_setup_true_lang.1c9fc45b.js";import"./vue3-video-play.f18a92be.js";import"./vuedraggable.e26981f9.js";import"./vue.69a2fcd0.js";import"./consumer.9f997155.js";import"./useLockFn.b1b43a93.js";const st={class:"flex gap-4"},lt={class:"text-lg font-bold"},rt={class:"flex justify-end mt-4"},mt=n("div",{class:"flex justify-center items-center"},[n("img",{class:"w-[150px] h-[150px]",src:H})],-1),pt={class:"text-lg font-bold"},dt={class:"flex justify-end mt-4"},ct={class:"flex justify-end mt-4"},_e=Z({__name:"lists",setup(_t){const l=tt({authnum:0,useauthnum:0}),{pager:p,getLists:c}=X({fetchFun:J}),_=k(!1),f=k(),B=async()=>{var o;if(l.useauthnum>=l.authnum){await E.msgWarning("OEM\u5269\u4F59\u6388\u6743\u540D\u989D\u4E0D\u8DB3\uFF0C\u65E0\u6CD5\u8FDB\u884C\u6388\u6743");return}_.value=!0,await x(),(o=f.value)==null||o.open("add")},O=async o=>{var u,r;_.value=!0,await x(),(u=f.value)==null||u.open("edit"),(r=f.value)==null||r.setFormData(o)},V=async o=>{await E.confirm("\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u6388\u6743\u5417\uFF1F"),await Q({id:o.id}),C()},A=async o=>{try{await W({id:o.id,status:o.status})}finally{c()}},y=async()=>{const o=await Y();l.authnum=o.authnum,l.useauthnum=o.useauthnum},C=async()=>{await y(),await c()};return et(()=>{C()}),(o,u)=>{const r=P,$=N,h=j,s=T,b=z,L=R,M=U,S=q,D=at("perms"),I=G;return m(),ot(nt,null,[n("div",null,[t(h,{class:"!border-none",shadow:"never"},{default:e(()=>[n("div",st,[t(h,{class:"w-[400px]",shadow:"never"},{default:e(()=>[n("div",lt," OEM\u5269\u4F59\u6388\u6743\u540D\u989D\uFF1A "+F(i(l).useauthnum)+" / "+F(i(l).authnum)+" \u540D ",1),n("div",rt,[t($,{width:"200"},{reference:e(()=>[t(r,{type:"primary"},{default:e(()=>[g("\u524D\u5F80\u6388\u6743")]),_:1})]),default:e(()=>[mt]),_:1})])]),_:1}),t(h,{class:"w-[400px]",shadow:"never"},{default:e(()=>[n("div",pt,"OEM\u5DF2\u6388\u6743\u7528\u6237\uFF1A "+F(i(l).useauthnum)+" / \u4EBA",1),n("div",dt,[w((m(),d(r,{type:"primary",onClick:B},{default:e(()=>[g("\u6388\u6743")]),_:1})),[[D,["marketing.oem.auth/add"]]])])]),_:1})])]),_:1}),t(h,{class:"!border-none mt-4",shadow:"never"},{default:e(()=>[w((m(),d(M,{size:"large",data:i(p).lists},{default:e(()=>[t(s,{label:"\u7AD9\u70B9\u57DF\u540D",prop:"domain","min-width":"200"}),t(s,{label:"\u7AD9\u70B9LOGO",width:"120"},{default:e(({row:a})=>[t(b,{src:a.site_logo,width:"32",height:"32",radius:"50%",fit:"cover"},null,8,["src"])]),_:1}),t(s,{label:"\u7AD9\u70B9ICON",width:"100"},{default:e(({row:a})=>[t(b,{src:a.logo_url,width:"32",height:"32",radius:"50%"},null,8,["src"])]),_:1}),t(s,{label:"\u7AD9\u70B9\u6807\u9898",prop:"name","min-width":"160"}),t(s,{label:"\u6240\u5C5E\u7528\u6237",prop:"username","min-width":"160"}),t(s,{label:"\u6388\u6743\u65F6\u95F4",prop:"auth_time",width:"180"}),t(s,{label:"\u72B6\u6001",prop:"auth_time",width:"120"},{default:e(({row:a})=>[t(L,{modelValue:a.status,"onUpdate:modelValue":v=>a.status=v,"active-value":1,"inactive-value":0,onChange:v=>A(a)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),t(s,{label:"\u64CD\u4F5C",width:"120",fixed:"right"},{default:e(({row:a})=>[w((m(),d(r,{type:"danger",link:"",onClick:v=>V(a)},{default:e(()=>[g(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[D,["marketing.oem.auth/delete"]]]),w((m(),d(r,{type:"primary",link:"",onClick:v=>O(a)},{default:e(()=>[g(" \u7F16\u8F91 ")]),_:2},1032,["onClick"])),[[D,["marketing.oem.auth/edit"]]])]),_:1})]),_:1},8,["data"])),[[I,i(p).loading]]),n("div",ct,[t(S,{modelValue:i(p),"onUpdate:modelValue":u[0]||(u[0]=a=>ut(p)?p.value=a:null),onChange:i(c)},null,8,["modelValue","onChange"])])]),_:1})]),i(_)?(m(),d(K,{key:0,ref_key:"editPopupRef",ref:f,onClose:u[1]||(u[1]=a=>_.value=!1),onSuccess:u[2]||(u[2]=a=>{i(c)(),y()})},null,512)):it("",!0)],64)}}});export{_e as default};

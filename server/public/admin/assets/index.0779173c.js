import{Y as J,U as O,T as Q,Z,v as X,K as ee,w as te,L as oe,E as se,M as ue}from"./element-plus.e618cff3.js";import{_ as le}from"./index.vue_vue_type_script_setup_true_lang.2d767870.js";import{f as _,_ as ae,b as ne}from"./index.03099c94.js";import{d as ie,bd as re,bu as ce,Y as de,r as B,s as N,i as me,o as E,c as _e,a as e,Q as s,H as u,u as a,v as S,J as I,V as $,G as g,O as pe,L as k,I as fe,M as p,P as Fe,n as y,bj as he,bi as we}from"./@vue.fa3e2f74.js";import{d as ve,r as Ee}from"./index.f708c426.js";import{_ as xe}from"./keywords-edit.vue_vue_type_script_setup_true_lang.7d077eb0.js";import{_ as Ce}from"./workflow-edit.vue_vue_type_script_setup_true_lang.2c14d04f.js";import{u as De}from"./usePaging.74092dd4.js";import{u as Be}from"./useLockFn.b1b43a93.js";import"./@vueuse.57305db2.js";import"./@element-plus.8edeb311.js";import"./lodash-es.72862127.js";import"./dayjs.33f9e030.js";import"./@vscode.6c9cb547.js";import"./katex.234fd046.js";import"./@popperjs.36402333.js";import"./@ctrl.b082b0c1.js";import"./async-validator.fb49d0f5.js";import"./normalize-wheel-es.8aeb3683.js";import"./lodash.0bb3a698.js";import"./axios.e67d1c3e.js";import"./vue-router.24cf2b30.js";import"./pinia.d2a105b3.js";import"./vue-demi.b3a9cad9.js";import"./css-color-function.9d260b6b.js";import"./color.4290e22e.js";import"./clone.10c3af82.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./debug.35afef70.js";import"./ms.a9ae1d6d.js";import"./nprogress.d9597aae.js";import"./vue-clipboard3.6701dfcc.js";import"./clipboard.a993786e.js";import"./sortablejs.fb59ed0f.js";import"./echarts.8535e5a6.js";import"./zrender.3eba8991.js";import"./tslib.60310f1a.js";import"./highlight.js.4f6161a5.js";import"./@highlightjs.fc60ff58.js";import"./index.vue_vue_type_script_setup_true_lang.4d6306c3.js";import"./index.81ef9c88.js";import"./add-content.b87dfa1f.js";import"./index.vue_vue_type_script_setup_true_lang.dbd208c7.js";const i=r=>(he("data-v-b78acf05"),r=r(),we(),r),ge={class:"h-full flex flex-col py-6"},ke={class:"grow min-h-0"},ye={class:"px-[30px]"},be=i(()=>e("div",{class:"font-bold"},"\u6280\u80FD",-1)),Ae={class:"mt-3"},Ve={class:"leading-5 w-full"},Ne={class:"flex items-center gap-x-2"},Se=i(()=>e("span",null,"\u63D2\u4EF6",-1)),Ie=i(()=>e("span",{class:"text-xs text-white bg-[#FF8D1A] px-[6px] py-[2px] rounded inline-block"}," \u529F\u80FD\u5F00\u53D1\u4E2D ",-1)),$e=i(()=>e("div",{class:"text-[#00000080] mt-1 text-left"}," \u63D2\u4EF6\u80FD\u591F\u8BA9\u667A\u80FD\u4F53\u8C03\u7528\u5916\u90E8 API\uFF0C\u4F8B\u5982\u641C\u7D22\u4FE1\u606F\u3001\u6D4F\u89C8\u7F51\u9875\u3001\u751F\u6210\u56FE\u7247\u7B49\uFF0C\u6269\u5C55\u667A\u80FD\u4F53\u7684\u80FD\u529B\u548C\u4F7F\u7528\u573A\u666F\u3002 ",-1));const je={class:"leading-5 w-full"},Me={class:"flex items-center gap-x-2"},ze=i(()=>e("span",null,"\u56FA\u5B9A\u8BDD\u672F",-1)),Le=i(()=>e("div",{class:"text-[#00000080] mt-1 text-left"}," \u56FA\u5B9A\u8BDD\u672F\u662F\u667A\u80FD\u4F53\u5728\u5BF9\u8BDD\u8FC7\u7A0B\u4E2D\uFF0C\u6839\u636E\u7528\u6237\u8F93\u5165\u7684\u7279\u5B9A\u5173\u952E\u8BCD\uFF0C\u81EA\u52A8\u56DE\u590D\u7684\u56FA\u5B9A\u5185\u5BB9\u3002 ",-1)),Ue={class:"flex items-center justify-between gap-x-6 mb-2 px-4"},Ke={class:"flex items-center w-full gap-x-4"},Pe=i(()=>e("div",null,"\u6A21\u7CCA\u5339\u914D\u9608\u503C",-1)),Re={class:"flex-1"},We={class:"border border-[var(--el-border-color-lighter)] rounded-lg"},Te={class:"h-[64px] flex justify-center items-center"},Ye={class:"flex items-center justify-center mt-4"},qe=ie({__name:"index",props:re({modelValue:{},agentId:{default:""}},{modelValue:{default:()=>({menus:[],flow_status:0,flow_config:{workflow_id:"",bot_id:""}})},modelModifiers:{}}),emits:["update:modelValue"],setup(r){const x=r,c=ce(r,"modelValue"),j=de({keyword:"",robot_id:x.agentId}),{pager:d,getLists:f}=De({fetchFun:Ee,params:j}),m=B([]),C=B(!1),D=N(),Ge=async l=>{var t,n;C.value=!0,await y(),(t=D.value)==null||t.open(),l&&((n=D.value)==null||n.setFormData(l))},M=l=>{x.modelValue.flow_status=1,x.modelValue.flow_config=l},He=async()=>{await _.confirm("\u786E\u5B9A\u5220\u9664\u8BE5\u5DE5\u4F5C\u6D41\u5417\uFF1F"),c.value.flow_status=0,c.value.flow_config={workflow_id:"",bot_id:"",app_id:"",api_token:""}},F=B(!1),h=N(),z=async()=>{var l;F.value=!0,await y(),(l=h.value)==null||l.open()},b=async l=>{var t,n;F.value=!0,await y(),(t=h.value)==null||t.open(),(n=h.value)==null||n.setFormData(l)},L=async l=>{await _.confirm("\u786E\u5B9A\u5220\u9664\u8BE5\u95EE\u7B54\u8BDD\u672F\u5417\uFF1F"),await ve({id:l}),_.msgSuccess("\u5220\u9664\u6210\u529F"),f()},U=async()=>{try{_.msgSuccess("\u4FDD\u5B58\u6210\u529F")}catch(l){_.msgError(l||"\u63D0\u4EA4\u5931\u8D25")}},{lockFn:K,isLock:P}=Be(U);return me(()=>{f()}),(l,t)=>{const n=ae,A=J,Je=O,R=Q,W=X,w=ee,v=te,T=oe,Y=le,q=Z,G=se,H=ue;return E(),_e(Fe,null,[e("div",ge,[e("div",ke,[s(G,null,{default:u(()=>[e("div",ye,[be,e("div",Ae,[s(q,{modelValue:a(m),"onUpdate:modelValue":t[7]||(t[7]=o=>S(m)?m.value=o:null)},{default:u(()=>[s(A,{name:"1",disabled:""},{title:u(()=>[e("div",Ve,[e("div",Ne,[e("span",{class:I(["transition-all duration-300",{"rotate-180":a(m).includes("1")}])},[s(n,{name:"el-icon-ArrowUp",color:"#00000080"})],2),Se,Ie]),$e])]),icon:u(()=>[e("div",{class:"w-5 h-5 bg-[#ECECEC] flex items-center justify-center rounded",onClick:t[0]||(t[0]=$(()=>{},["stop"]))},[s(n,{name:"el-icon-Plus",size:12})])]),_:1}),k("",!0),s(A,{name:"3"},{title:u(()=>[e("div",je,[e("div",Me,[e("span",{class:I(["transition-all duration-300",{"rotate-180":a(m).includes("3")}])},[s(n,{name:"el-icon-ArrowUp",color:"#00000080"})],2),ze]),Le])]),icon:u(()=>[e("div",{class:"w-5 h-5 bg-[#ECECEC] flex items-center justify-center rounded cursor-pointer",onClick:t[3]||(t[3]=$(o=>z(),["stop"]))},[s(n,{name:"el-icon-Plus",size:12})])]),default:u(()=>[e("div",Ue,[e("div",Ke,[Pe,e("div",Re,[s(R,{modelValue:c.value.threshold,"onUpdate:modelValue":t[4]||(t[4]=o=>c.value.threshold=o),min:0,max:1,step:.01},null,8,["modelValue"])]),s(W,{modelValue:c.value.threshold,"onUpdate:modelValue":t[5]||(t[5]=o=>c.value.threshold=o),"controls-position":"right",min:0,max:1,step:.01},null,8,["modelValue"])])]),e("div",We,[fe((E(),g(T,{data:a(d).lists,stripe:"","header-row-style":{height:"62px"},"row-style":{height:"50px"},"max-height":"300px"},{default:u(()=>[s(w,{label:"\u5339\u914D\u6A21\u5F0F",width:"120"},{default:u(({row:o})=>[p(pe(o.match_type===0?"\u6A21\u7CCA\u5339\u914D":"\u7CBE\u786E\u5339\u914D"),1)]),_:1}),s(w,{label:"\u5339\u914D\u5185\u5BB9",prop:"keyword","min-width":"200"}),s(w,{label:"\u56DE\u590D\u5185\u5BB9","min-width":"300"},{default:u(({row:o})=>[s(v,{link:"",type:"primary",onClick:V=>b(o)},{default:u(()=>[p(" \u70B9\u51FB\u67E5\u770B ")]),_:2},1032,["onClick"])]),_:1}),s(w,{label:"\u64CD\u4F5C",width:"120",fixed:"right"},{default:u(({row:o})=>[s(v,{link:"",type:"primary",onClick:V=>b(o)},{default:u(()=>[p(" \u7F16\u8F91 ")]),_:2},1032,["onClick"]),s(v,{link:"",type:"danger",onClick:V=>L(o.id)},{default:u(()=>[p(" \u5220\u9664 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[H,a(d).loading]])]),e("div",Te,[s(Y,{modelValue:a(d),"onUpdate:modelValue":t[6]||(t[6]=o=>S(d)?d.value=o:null),layout:"prev, pager, next",onChange:a(f)},null,8,["modelValue","onChange"])])]),_:1})]),_:1},8,["modelValue"])])])]),_:1})]),e("div",Ye,[s(v,{type:"primary",class:"w-[318px] !rounded-full !h-[50px]",loading:a(P),onClick:a(K)},{default:u(()=>[p(" \u4FDD\u5B58 ")]),_:1},8,["loading","onClick"])])]),a(F)?(E(),g(xe,{key:0,ref_key:"keywordsEditRef",ref:h,onClose:t[8]||(t[8]=o=>F.value=!1),onSuccess:a(f)},null,8,["onSuccess"])):k("",!0),a(C)?(E(),g(Ce,{key:1,ref_key:"workflowEditRef",ref:D,onClose:t[9]||(t[9]=o=>C.value=!1),onSuccess:M},null,512)):k("",!0)],64)}}});const Rt=ne(qe,[["__scopeId","data-v-b78acf05"]]);export{Rt as default};

import{G as q,H as R,D as N,C as O,t as S,F as G}from"./element-plus.09e738c5.js";import{_ as I}from"./picker.bbad25f8.js";import{e as j,a as H}from"./draw_case.217181c0.js";import{_ as K}from"./index.e57d7385.js";import{d as P,s as B,r as E,o as i,c as _,P as l,G as s,u,O as f,K as g,F as z}from"./@vue.b0c8b5fa.js";const J={class:"edit-popup"},Z=P({__name:"edit",props:{caseType:{type:Number,default:0}},emits:["success","close"],setup(v,{expose:b,emit:C}){const n=v,V=C,y=B(),F=B(),c=E(""),e=E({id:"",case_type:0,params:{text:"",images:["",""]},result_image:"",status:"1"}),x={params:{images:[{required:!0,message:"\u8BF7\u4E0A\u4F20\u56FE\u7247",trigger:"blur"},{required:!0,message:"\u8BF7\u4E0A\u4F20\u56FE\u7247",trigger:"blur"},{required:!0,message:"\u8BF7\u4E0A\u4F20\u56FE\u7247",trigger:"blur"}],text:[{required:!0,message:"\u8BF7\u8F93\u5165\u6848\u4F8B\u63CF\u8FF0",trigger:"blur"}]},result_image:[{required:!0,message:"\u8BF7\u4E0A\u4F20\u56FE\u7247",trigger:"blur"}]},w=m=>{e.value.case_type=m,e.value.params.images=["","",""]},k=async()=>{var m,a;try{n.caseType==3&&(e.value.case_type=n.caseType),await((m=y.value)==null?void 0:m.validate()),e.value.id?await j(e.value):await H(e.value),(a=F.value)==null||a.close(),V("success")}catch(r){return r}},U=()=>{V("close")};return b({open:(m,a)=>{var r;m=="add"?(e.value={id:"",case_type:0,params:{text:"",images:["",""]},result_image:"",status:1},c.value="\u65B0\u589E\u4F18\u79C0\u6848\u4F8B"):m=="edit"&&(Object.keys(e.value).map(d=>{e.value[d]=a[d]}),c.value="\u7F16\u8F91\u4F18\u79C0\u6848\u4F8B"),(r=F.value)==null||r.open()}}),(m,a)=>{const r=q,d=R,o=N,p=I,A=O,D=S,T=G;return i(),_("div",J,[l(K,{ref_key:"popupRef",ref:F,title:u(c),async:!0,width:"550px",onConfirm:k,onClose:U},{default:s(()=>[l(T,{ref_key:"formRef",ref:y,rules:x,model:u(e),"label-width":"100px"},{default:s(()=>[n.caseType==0?(i(),_(f,{key:0},[l(o,{label:"\u7C7B\u578B",prop:"case_type"},{default:s(()=>[l(d,{modelValue:u(e).case_type,"onUpdate:modelValue":a[0]||(a[0]=t=>u(e).case_type=t),placeholder:"\u8BF7\u9009\u62E9\u7C7B\u578B",onChange:w},{default:s(()=>[l(r,{label:"\u4E0A\u4E0B\u88C5",value:0}),l(r,{label:"\u8FDE\u8863\u88D9",value:1})]),_:1},8,["modelValue"])]),_:1}),u(e).case_type==0?(i(),_(f,{key:0},[l(o,{label:"\u4E0A\u8863",prop:"params.images[0]"},{default:s(()=>[l(p,{modelValue:u(e).params.images[0],"onUpdate:modelValue":a[1]||(a[1]=t=>u(e).params.images[0]=t),limit:1},null,8,["modelValue"])]),_:1}),l(o,{label:"\u4E0B\u88C5",prop:"params.images[1]"},{default:s(()=>[l(p,{modelValue:u(e).params.images[1],"onUpdate:modelValue":a[2]||(a[2]=t=>u(e).params.images[1]=t),limit:1},null,8,["modelValue"])]),_:1}),l(o,{label:"\u6A21\u7279",prop:"params.images[2]"},{default:s(()=>[l(p,{modelValue:u(e).params.images[2],"onUpdate:modelValue":a[3]||(a[3]=t=>u(e).params.images[2]=t),limit:1},null,8,["modelValue"])]),_:1})],64)):g("",!0),u(e).case_type==1?(i(),_(f,{key:1},[l(o,{label:"\u8FDE\u8863\u88D9",prop:"params.images[0]"},{default:s(()=>[l(p,{modelValue:u(e).params.images[0],"onUpdate:modelValue":a[4]||(a[4]=t=>u(e).params.images[0]=t),limit:1},null,8,["modelValue"])]),_:1}),l(o,{label:"\u6A21\u7279",prop:"params.images[1]"},{default:s(()=>[l(p,{modelValue:u(e).params.images[1],"onUpdate:modelValue":a[5]||(a[5]=t=>u(e).params.images[1]=t),limit:1},null,8,["modelValue"])]),_:1})],64)):g("",!0)],64)):g("",!0),l(o,{label:"\u6848\u4F8B\u56FE\u7247",prop:"result_image"},{default:s(()=>[l(p,{modelValue:u(e).result_image,"onUpdate:modelValue":a[6]||(a[6]=t=>u(e).result_image=t),limit:1},null,8,["modelValue"])]),_:1}),n.caseType==3?(i(),z(o,{key:1,label:"\u6848\u4F8B\u63CF\u8FF0",prop:"params.text"},{default:s(()=>[l(A,{modelValue:u(e).params.text,"onUpdate:modelValue":a[7]||(a[7]=t=>u(e).params.text=t),type:"textarea",class:"w-[300px]",rows:"5",placeholder:"\u8BF7\u8F93\u5165\u6848\u4F8B\u63CF\u8FF0"},null,8,["modelValue"])]),_:1})):g("",!0),l(o,{label:"\u72B6\u6001",prop:"status"},{default:s(()=>[l(D,{modelValue:u(e).status,"onUpdate:modelValue":a[8]||(a[8]=t=>u(e).status=t),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])])}}});export{Z as _};

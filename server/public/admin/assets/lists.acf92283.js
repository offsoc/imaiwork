import{L as q,C as G,D as H,G as O,H as z,w as J,F as Q,J as Y,K as x,M as W}from"./element-plus.b694a2f4.js";import{_ as X}from"./index.vue_vue_type_script_setup_true_lang.0a17ae2c.js";import{_ as Z}from"./index.vue_vue_type_script_setup_true_lang.b4ba388b.js";import{a as ee}from"./vue-router.24cf2b30.js";import{d as te,Y as ue,r as A,ai as le,aq as ae,o as m,c as F,Q as e,H as u,u as a,a6 as oe,M as i,a as E,I as B,G as C,O as d,P as ne,L as ie,v as se}from"./@vue.fa3e2f74.js";import{u as re}from"./usePaging.74092dd4.js";import{g as me,d as de}from"./index.032977e9.js";import{g as pe,f as T}from"./index.f10dd425.js";import{d as P}from"./dayjs.0a835391.js";import"./@vueuse.57305db2.js";import"./@element-plus.8edeb311.js";import"./lodash-es.72862127.js";import"./@popperjs.36402333.js";import"./@ctrl.b082b0c1.js";import"./async-validator.fb49d0f5.js";import"./normalize-wheel-es.8aeb3683.js";import"./lodash.a609e612.js";import"./@vscode.4616c7ee.js";import"./katex.42c635ec.js";import"./axios.ddddcbae.js";import"./pinia.d2a105b3.js";import"./vue-demi.b3a9cad9.js";import"./css-color-function.6fe488a5.js";import"./color.eb90fb33.js";import"./clone.81074570.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./debug.e2d654ba.js";import"./ms.a9ae1d6d.js";import"./nprogress.430b6dc1.js";import"./vue-clipboard3.2f1d7104.js";import"./clipboard.7e043bc1.js";import"./sortablejs.f3bfd0ca.js";import"./echarts.8535e5a6.js";import"./zrender.3eba8991.js";import"./tslib.60310f1a.js";import"./highlight.js.4f6161a5.js";import"./@highlightjs.fc60ff58.js";const _e={class:"mb-4 flex justify-between"},ce={key:0},fe={key:1},be={class:"flex justify-end mt-4"},at=te({__name:"lists",setup(Fe){ee();const o=ue({name:"",start_time:"",end_time:"",type:3,status:"",media_type:""}),{pager:p,getLists:v,resetPage:y,resetParams:S}=re({fetchFun:me,params:o}),R=s=>({[0]:"\u8349\u7A3F\u7BB1",[1]:"\u5F85\u5904\u7406",[2]:"\u751F\u6210\u4E2D",[3]:"\u5DF2\u5B8C\u6210",[4]:"\u5931\u8D25",[5]:"\u90E8\u5206\u5B8C\u6210"})[s],U=s=>{const{publish_start:l,publish_end:b}=s;return l&&b?P(b).diff(P(l),"day")+1+"\u5929":"-"},f=A([]),g=A(),L=s=>{const l=s[0];if(![3,5,0].includes(l.status)){T.msgError("\u5F53\u524D\u89C6\u9891\u6B63\u5728\u5904\u7406\u4E2D\uFF0C\u4E0D\u53EF\u9009\u4E2D");return}f.value=s},k=async s=>{var l;await T.confirm("\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F"),await de({id:s}),v(),f.value=[],(l=g.value)==null||l.clearSelection()};return v(),(s,l)=>{const b=G,_=H,r=O,D=z,I=Z,c=J,K=Q,w=Y,n=x,M=x,N=le("router-link"),$=X,h=ae("perms"),j=W;return m(),F("div",null,[e(w,{class:"!border-none",shadow:"never"},{default:u(()=>[e(K,{ref:"formRef",class:"mb-[-16px]",model:a(o),inline:!0},{default:u(()=>[e(_,{label:"\u4EFB\u52A1\u540D\u79F0"},{default:u(()=>[e(b,{class:"w-[180px]",modelValue:a(o).name,"onUpdate:modelValue":l[0]||(l[0]=t=>a(o).name=t),placeholder:"\u8BF7\u8F93\u5165\u4EFB\u52A1\u540D\u79F0",clearable:"",onKeyup:oe(a(y),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(_,{label:"\u4EFB\u52A1\u72B6\u6001"},{default:u(()=>[e(D,{class:"!w-[160px]",modelValue:a(o).status,"onUpdate:modelValue":l[1]||(l[1]=t=>a(o).status=t),placeholder:"\u8BF7\u9009\u62E9\u72B6\u6001",clearable:""},{default:u(()=>[e(r,{label:"\u8349\u7A3F\u7BB1",value:0},null,8,["value"]),e(r,{label:"\u5F85\u5904\u7406",value:1},null,8,["value"]),e(r,{label:"\u751F\u6210\u4E2D",value:2},null,8,["value"]),e(r,{label:"\u5DF2\u5B8C\u6210",value:3},null,8,["value"]),e(r,{label:"\u5931\u8D25",value:4},null,8,["value"]),e(r,{label:"\u90E8\u5206\u5B8C\u6210",value:5},null,8,["value"])]),_:1},8,["modelValue"])]),_:1}),e(_,{label:"\u4EFB\u52A1\u7C7B\u578B"},{default:u(()=>[e(D,{class:"!w-[130px]",modelValue:a(o).media_type,"onUpdate:modelValue":l[2]||(l[2]=t=>a(o).media_type=t),placeholder:"\u8BF7\u9009\u62E9\u7C7B\u578B",clearable:""},{default:u(()=>[e(r,{label:"\u56FE\u7247",value:2},null,8,["value"]),e(r,{label:"\u89C6\u9891",value:1},null,8,["value"])]),_:1},8,["modelValue"])]),_:1}),e(_,{label:"\u521B\u4F5C\u65F6\u95F4"},{default:u(()=>[e(I,{startTime:a(o).start_time,"onUpdate:startTime":l[3]||(l[3]=t=>a(o).start_time=t),endTime:a(o).end_time,"onUpdate:endTime":l[4]||(l[4]=t=>a(o).end_time=t)},null,8,["startTime","endTime"])]),_:1}),e(_,null,{default:u(()=>[e(c,{type:"primary",onClick:a(y)},{default:u(()=>[i("\u67E5\u8BE2")]),_:1},8,["onClick"]),e(c,{onClick:a(S)},{default:u(()=>[i("\u91CD\u7F6E")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),e(w,{class:"!border-none mt-4",shadow:"never"},{default:u(()=>[E("div",_e,[B((m(),C(c,{type:"default",plain:!0,disabled:!a(f).length,onClick:l[5]||(l[5]=t=>k(a(f).map(V=>V.id)))},{default:u(()=>[i(" \u6279\u91CF\u5220\u9664 ")]),_:1},8,["disabled"])),[[h,["ai_application.redbook.creation/delete"]]])]),B((m(),C(a(q),{ref_key:"tableRef",ref:g,size:"large",data:a(p).lists,onSelectionChange:L},{default:u(()=>[e(n,{type:"selection",width:"55",fixed:"left"}),e(n,{label:"ID",prop:"id",width:"100"}),e(n,{label:"\u521B\u5EFA\u7528\u6237",prop:"user_nickname","min-width":"160"}),e(n,{label:"\u4EFB\u52A1\u540D\u79F0",prop:"name","min-width":"300"}),e(n,{label:"\u53D1\u5E03\u8D26\u53F7","min-width":"240"},{default:u(({row:t})=>[t.account?(m(),F("div",ce,[i(d(t.account)+" ",1),t.nickname?(m(),F(ne,{key:0},[i(" ("+d(t.nickname)+") ",1)],64)):ie("",!0)])):(m(),F("div",fe,"-"))]),_:1}),e(n,{label:"\u4EFB\u52A1\u72B6\u6001","min-width":"100"},{default:u(({row:t})=>[i(d(R(t.status)),1)]),_:1}),e(n,{label:"\u4EFB\u52A1\u7C7B\u578B",prop:"",width:"100"},{default:u(({row:t})=>[i(d(t.media_type==1?"\u89C6\u9891":"\u56FE\u7247"),1)]),_:1}),e(M,{label:"\u53D1\u5E03\u5468\u671F","min-width":"100"},{default:u(({row:t})=>[E("div",null,d(U(t)),1)]),_:1}),e(n,{prop:"next_publish_time",label:"\u4E0B\u7EC4\u89C6\u9891\u53D1\u5E03\u70B9",width:"180"},{default:u(({row:t})=>[E("div",null,d(t.next_publish_time||"-"),1)]),_:1}),e(n,{label:"\u53D1\u5E03\u8FDB\u5EA6",prop:"","min-width":"100"},{default:u(({row:t})=>[i(d(t.published_count||0)+"/"+d(t.count),1)]),_:1}),e(n,{label:"\u521B\u4F5C\u65F6\u95F4",prop:"create_time",width:"180"}),e(n,{label:"\u64CD\u4F5C",width:"120",fixed:"right"},{default:u(({row:t})=>[B((m(),C(c,{type:"primary",link:""},{default:u(()=>[e(N,{to:{path:a(pe)("ai_application.redbook.creation/record"),query:{id:t.id}}},{default:u(()=>[i(" \u8BE6\u60C5 ")]),_:2},1032,["to"])]),_:2},1024)),[[h,["ai_application.redbook.creation/record"]]]),B((m(),C(c,{type:"danger",link:"",onClick:V=>k(t.id)},{default:u(()=>[i("\u5220\u9664")]),_:2},1032,["onClick"])),[[h,["ai_application.redbook.creation/delete"]]])]),_:1})]),_:1},8,["data"])),[[j,a(p).loading]]),E("div",be,[e($,{modelValue:a(p),"onUpdate:modelValue":l[6]||(l[6]=t=>se(p)?p.value=t:null),onChange:a(v)},null,8,["modelValue","onChange"])])]),_:1})])}}});export{at as default};

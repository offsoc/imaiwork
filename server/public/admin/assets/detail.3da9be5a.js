import{_ as Q,a4 as W,P as X,L as Z,J as ee,K as te,w as oe,I as ae,M as ie}from"./element-plus.09e738c5.js";import{_ as le}from"./index.vue_vue_type_script_setup_true_lang.a9802a4b.js";import{_ as ne}from"./index.vue_vue_type_script_setup_true_lang.0af97da2.js";import{f as se,_ as re,h as ue}from"./index.1bd46af0.js";import{u as ce}from"./vue-router.f608815d.js";import{f as pe,h as me,i as de}from"./montage.c03a2d42.js";import{u as _e}from"./usePaging.3fa68fd5.js";import{d as fe,r as d,Y as he,ap as ge,o as r,c as w,a as i,P as e,G as a,u as o,M as g,O as R,a5 as ve,L as c,H as $,F as p,K as be,v as N}from"./@vue.b0c8b5fa.js";import"./@vueuse.20a2efa8.js";import"./@element-plus.ca3f8b8b.js";import"./lodash-es.2cd559e9.js";import"./dayjs.33f9e030.js";import"./@vscode.6c9cb547.js";import"./katex.234fd046.js";import"./@popperjs.36402333.js";import"./async-validator.fb49d0f5.js";import"./@ctrl.b082b0c1.js";import"./normalize-wheel-es.8aeb3683.js";import"./vue3-video-play.20b32444.js";import"./lodash.0bb3a698.js";import"./axios.e67d1c3e.js";import"./pinia.173cb91f.js";import"./vue-demi.b3a9cad9.js";import"./css-color-function.9d260b6b.js";import"./color.4290e22e.js";import"./clone.10c3af82.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./debug.35afef70.js";import"./ms.a9ae1d6d.js";import"./nprogress.d9597aae.js";import"./vue-clipboard3.6701dfcc.js";import"./clipboard.a993786e.js";import"./sortablejs.fb59ed0f.js";import"./echarts.8535e5a6.js";import"./zrender.3eba8991.js";import"./tslib.60310f1a.js";import"./highlight.js.4f6161a5.js";import"./@highlightjs.39ed541d.js";const we={class:"flex gap-x-4 justify-between"},ye={class:"flex gap-x-4"},ke={class:"text-lg font-bold break-all"},Ce={class:"text-sm mt-3"},xe={class:"flex items-center gap-x-2 mt-3"},De={class:"w-[50%]"},Ee={class:"flex flex-wrap gap-3"},Fe={class:"flex justify-end mt-4"},ht=fe({__name:"detail",setup(Be){const y=ce(),l=d({name:"",count:0,create_time:"",publish_cycle:"",published_count:0}),L=he({name:"",start_time:"",end_time:"",user:"",id:y.query.id}),{pager:m,getLists:v}=_e({fetchFun:de,params:L}),k=d(),C=d([]),M=n=>{C.value=n},S=async n=>{var s;await se.confirm("\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F"),await pe({id:n}),v(),C.value=[],(s=k.value)==null||s.clearSelection()},_=d(!1),x=d(""),T=n=>{_.value=!0,x.value=n.material_url},q=async()=>{const n=await me({id:y.query.id});l.value=n};return v(),q(),(n,s)=>{const I=Q,b=ee,U=re,f=W,j=X,u=te,A=ue,D=oe,H=ne,K=le,z=ae,G=ge("perms"),J=ie;return r(),w(R,null,[i("div",null,[e(b,{class:"!border-none",shadow:"never"},{default:a(()=>[e(I,{content:o(l).name,onBack:s[0]||(s[0]=t=>n.$router.back())},null,8,["content"])]),_:1}),e(b,{class:"!border-none mt-4",shadow:"never"},{default:a(()=>{var t,h,E,F,B,V,P;return[i("div",we,[i("div",ye,[i("div",null,[i("div",ke,g((t=o(l))==null?void 0:t.name),1),i("div",Ce,g((h=o(l))==null?void 0:h.create_time),1),i("div",xe,[e(U,{name:"el-icon-Calendar"}),i("span",null,g((E=o(l))==null?void 0:E.publish_cycle)+"\u5929",1)])]),i("div",De,[i("div",Ee,[(r(!0),w(R,null,ve(o(l).times,(O,Y)=>(r(),w("div",{key:Y},[e(f,{type:"info"},{default:a(()=>[c(g(O),1)]),_:2},1024)]))),128))])])]),i("div",null,[e(j,{type:"circle",percentage:isNaN(((F=o(l))==null?void 0:F.published_count)/((B=o(l))==null?void 0:B.count))?0:(((V=o(l))==null?void 0:V.published_count)/((P=o(l))==null?void 0:P.count)*100).toFixed(2),width:100},null,8,["percentage"])])])]}),_:1}),e(b,{class:"!border-none mt-4",shadow:"never"},{default:a(()=>[$((r(),p(o(Z),{ref_key:"tableRef",ref:k,size:"large",data:o(m).lists,"row-key":"id",onSelectionChange:M},{default:a(()=>[e(u,{type:"selection",width:"55",fixed:"left","reserve-selection":""}),e(u,{label:"ID",prop:"id","min-width":"60"}),e(u,{label:"\u53D1\u5E03\u6807\u9898",prop:"material_title","min-width":"140","show-overflow-tooltip":""}),e(u,{label:"\u6B63\u6587\u5185\u5BB9",prop:"material_subtitle","min-width":"180","show-overflow-tooltip":""}),e(u,{label:"\u5C01\u9762\u56FE",prop:"pic","min-width":"120"},{default:a(({row:t})=>[t.pic?(r(),p(A,{key:0,src:t.pic,width:48,height:48,fit:"cover","preview-teleported":"","preview-src-list":[t.pic]},null,8,["src","preview-src-list"])):be("",!0)]),_:1}),e(u,{label:"\u53D1\u5E03\u72B6\u6001","min-width":"120"},{default:a(({row:t})=>[t.status==1?(r(),p(f,{key:0,type:"success"},{default:a(()=>[c("\u6210\u529F")]),_:1})):t.status==2?(r(),p(f,{key:1,type:"danger"},{default:a(()=>[c("\u5931\u8D25")]),_:1})):(r(),p(f,{key:2,type:"warning"},{default:a(()=>[c("\u7B49\u5F85\u53D1\u5E03")]),_:1}))]),_:1}),e(u,{label:"\u521B\u4F5C\u65F6\u95F4",prop:"create_time","min-width":"180"}),e(u,{label:"\u64CD\u4F5C",width:"120",fixed:"right"},{default:a(({row:t})=>[e(D,{type:"primary",link:"",onClick:h=>T(t)},{default:a(()=>[c(" \u64AD\u653E ")]),_:2},1032,["onClick"]),$((r(),p(D,{type:"danger",link:"",onClick:h=>S(t.id)},{default:a(()=>[c(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[G,["ai_application.montage.publish_record/delete"]]])]),_:1})]),_:1},8,["data"])),[[J,o(m).loading]]),i("div",Fe,[e(H,{modelValue:o(m),"onUpdate:modelValue":s[1]||(s[1]=t=>N(m)?m.value=t:null),onChange:o(v)},null,8,["modelValue","onChange"])])]),_:1})]),e(z,{modelValue:o(_),"onUpdate:modelValue":s[2]||(s[2]=t=>N(_)?_.value=t:null),width:"740px",title:"\u89C6\u9891\u9884\u89C8"},{default:a(()=>[e(K,{ref:"playerRef",src:o(x),width:"100%",height:"450px"},null,8,["src"])]),_:1},8,["modelValue"])],64)}}});export{ht as default};

import{a3 as P,w as j,J as I,K as T,t as R,L as U,M as K}from"./element-plus.09e738c5.js";import{_ as z}from"./index.vue_vue_type_script_setup_true_lang.0af97da2.js";import{f as E,h as G}from"./index.1bd46af0.js";import{_ as H}from"./support.33fd4668.js";import{g as J,_ as W,d as Y,c as q,a as Q}from"./edit.vue_vue_type_script_setup_true_lang.2b5eed3e.js";import{u as X}from"./usePaging.3fa68fd5.js";import{d as Z,Y as tt,r as b,i as et,ap as at,o as r,c as ot,a as i,P as t,G as e,M as y,u as n,L as g,H as w,F as d,v as ut,K as nt,O as it,n as k}from"./@vue.b0c8b5fa.js";import"./@vueuse.20a2efa8.js";import"./@element-plus.ca3f8b8b.js";import"./lodash-es.2cd559e9.js";import"./dayjs.33f9e030.js";import"./@vscode.6c9cb547.js";import"./katex.234fd046.js";import"./@popperjs.36402333.js";import"./async-validator.fb49d0f5.js";import"./@ctrl.b082b0c1.js";import"./normalize-wheel-es.8aeb3683.js";import"./lodash.0bb3a698.js";import"./axios.e67d1c3e.js";import"./vue-router.f608815d.js";import"./pinia.173cb91f.js";import"./vue-demi.b3a9cad9.js";import"./css-color-function.9d260b6b.js";import"./color.4290e22e.js";import"./clone.10c3af82.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./debug.35afef70.js";import"./ms.a9ae1d6d.js";import"./nprogress.d9597aae.js";import"./vue-clipboard3.6701dfcc.js";import"./clipboard.a993786e.js";import"./sortablejs.fb59ed0f.js";import"./echarts.8535e5a6.js";import"./zrender.3eba8991.js";import"./tslib.60310f1a.js";import"./highlight.js.4f6161a5.js";import"./@highlightjs.39ed541d.js";import"./index.65ae06d1.js";import"./picker.8fd95042.js";import"./index.7fa0696d.js";import"./index.678a4866.js";import"./index.vue_vue_type_script_setup_true_lang.f3fff232.js";import"./index.vue_vue_type_script_setup_true_lang.9996a4fe.js";import"./preview.vue_vue_type_script_setup_true_lang.337ce91c.js";import"./index.vue_vue_type_script_setup_true_lang.a9802a4b.js";import"./vue3-video-play.20b32444.js";import"./vuedraggable.1dfb0a09.js";import"./vue.c1c1914b.js";import"./consumer.07ab640d.js";import"./useLockFn.cf82402d.js";const st={class:"flex gap-4"},lt={class:"text-lg font-bold"},mt={class:"flex justify-end mt-4"},rt=i("div",{class:"flex justify-center items-center"},[i("img",{class:"w-[150px] h-[150px]",src:H})],-1),pt={class:"text-lg font-bold"},dt={class:"flex justify-end mt-4"},ct={class:"flex justify-end mt-4"},_e=Z({__name:"lists",setup(_t){const s=tt({authnum:0,useauthnum:0}),{pager:p,getLists:c}=X({fetchFun:J}),_=b(!1),f=b(),x=async()=>{var a;if(s.useauthnum>=s.authnum){await E.msgWarning("OEM\u5269\u4F59\u6388\u6743\u540D\u989D\u4E0D\u8DB3\uFF0C\u65E0\u6CD5\u8FDB\u884C\u6388\u6743");return}_.value=!0,await k(),(a=f.value)==null||a.open("add")},B=async a=>{var u,l;_.value=!0,await k(),(u=f.value)==null||u.open("edit"),(l=f.value)==null||l.setFormData(a)},V=async a=>{await E.confirm("\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u6388\u6743\u5417\uFF1F"),await Y({id:a.id}),D()},O=async a=>{try{await q({id:a.id,status:a.status})}finally{c()}},C=async()=>{const a=await Q();s.authnum=a.authnum,s.useauthnum=a.useauthnum},D=async()=>{await C(),await c()};return et(()=>{D()}),(a,u)=>{const l=j,A=P,h=I,m=T,$=G,M=R,S=U,L=z,F=at("perms"),N=K;return r(),ot(it,null,[i("div",null,[t(h,{class:"!border-none",shadow:"never"},{default:e(()=>[i("div",st,[t(h,{class:"w-[400px]",shadow:"never"},{default:e(()=>[i("div",lt," OEM\u5269\u4F59\u6388\u6743\u540D\u989D\uFF1A "+y(n(s).useauthnum)+" / "+y(n(s).authnum)+" \u540D ",1),i("div",mt,[t(A,{width:"200"},{reference:e(()=>[t(l,{type:"primary"},{default:e(()=>[g("\u524D\u5F80\u6388\u6743")]),_:1})]),default:e(()=>[rt]),_:1})])]),_:1}),t(h,{class:"w-[400px]",shadow:"never"},{default:e(()=>[i("div",pt,"OEM\u5DF2\u6388\u6743\u7528\u6237\uFF1A "+y(n(s).useauthnum)+" / \u4EBA",1),i("div",dt,[w((r(),d(l,{type:"primary",onClick:x},{default:e(()=>[g("\u6388\u6743")]),_:1})),[[F,["marketing.oem.auth/add"]]])])]),_:1})])]),_:1}),t(h,{class:"!border-none mt-4",shadow:"never"},{default:e(()=>[w((r(),d(S,{size:"large",data:n(p).lists},{default:e(()=>[t(m,{label:"\u7AD9\u70B9\u57DF\u540D",prop:"domain","min-width":"200"}),t(m,{label:"\u7AD9\u70B9ICON",width:"100"},{default:e(({row:o})=>[t($,{src:o.logo_url,width:"32",height:"32"},null,8,["src"])]),_:1}),t(m,{label:"\u7AD9\u70B9\u6807\u9898",prop:"name","min-width":"160"}),t(m,{label:"\u6240\u5C5E\u7528\u6237",prop:"username","min-width":"160"}),t(m,{label:"\u6388\u6743\u65F6\u95F4",prop:"auth_time",width:"180"}),t(m,{label:"\u72B6\u6001",prop:"auth_time",width:"120"},{default:e(({row:o})=>[t(M,{modelValue:o.status,"onUpdate:modelValue":v=>o.status=v,"active-value":1,"inactive-value":0,onChange:v=>O(o)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),t(m,{label:"\u64CD\u4F5C",width:"120",fixed:"right"},{default:e(({row:o})=>[w((r(),d(l,{type:"danger",link:"",onClick:v=>V(o)},{default:e(()=>[g(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[F,["marketing.oem.auth/delete"]]]),w((r(),d(l,{type:"primary",link:"",onClick:v=>B(o)},{default:e(()=>[g(" \u7F16\u8F91 ")]),_:2},1032,["onClick"])),[[F,["marketing.oem.auth/edit"]]])]),_:1})]),_:1},8,["data"])),[[N,n(p).loading]]),i("div",ct,[t(L,{modelValue:n(p),"onUpdate:modelValue":u[0]||(u[0]=o=>ut(p)?p.value=o:null),onChange:n(c)},null,8,["modelValue","onChange"])])]),_:1})]),n(_)?(r(),d(W,{key:0,ref_key:"editPopupRef",ref:f,onClose:u[1]||(u[1]=o=>_.value=!1),onSuccess:u[2]||(u[2]=o=>{n(c)(),C()})},null,512)):nt("",!0)],64)}}});export{_e as default};

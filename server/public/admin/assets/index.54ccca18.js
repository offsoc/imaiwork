import{x as te,y as ae,C as oe,D as le,G as ne,H as ue,w as ie,F as se,J as me,p as re,q as pe,r as de,K as ce,L as _e,M as fe}from"./element-plus.e618cff3.js";import{_ as ve}from"./index.vue_vue_type_script_setup_true_lang.2d767870.js";import{f as Fe,g as Ce,_ as ge,h as Ee}from"./index.976d8a45.js";import{a as be}from"./vue-router.24cf2b30.js";import{d as ke,r as f,Y as we,aq as ye,o as r,c as Be,a as F,Q as e,H as o,u as l,a6 as L,M as u,v as I,I as C,G as d,L as x,O as z,P as he,n as N}from"./@vue.fa3e2f74.js";import{f as De,e as Ae,h as Ve}from"./index.9e14bb2b.js";import{u as xe}from"./usePaging.74092dd4.js";import{b as ze,d as $e}from"./coze.2b776e41.js";import{_ as Se}from"./coze-edit.vue_vue_type_style_index_0_lang.58bcd934.js";import Te from"./coze-flow-edit.d2e14c7c.js";import"./@vueuse.57305db2.js";import"./@element-plus.8edeb311.js";import"./lodash-es.72862127.js";import"./dayjs.33f9e030.js";import"./@vscode.6c9cb547.js";import"./katex.234fd046.js";import"./@popperjs.36402333.js";import"./@ctrl.b082b0c1.js";import"./async-validator.fb49d0f5.js";import"./normalize-wheel-es.8aeb3683.js";import"./lodash.0bb3a698.js";import"./axios.e67d1c3e.js";import"./pinia.d2a105b3.js";import"./vue-demi.b3a9cad9.js";import"./css-color-function.9d260b6b.js";import"./color.4290e22e.js";import"./clone.10c3af82.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./debug.35afef70.js";import"./ms.a9ae1d6d.js";import"./nprogress.d9597aae.js";import"./vue-clipboard3.6701dfcc.js";import"./clipboard.a993786e.js";import"./sortablejs.fb59ed0f.js";import"./echarts.8535e5a6.js";import"./zrender.3eba8991.js";import"./tslib.60310f1a.js";import"./highlight.js.4f6161a5.js";import"./@highlightjs.fc60ff58.js";import"./index.6c1a317f.js";import"./index.vue_vue_type_script_setup_true_lang.ae4ea884.js";import"./index.vue_vue_type_script_setup_true_lang.a07e65a2.js";import"./cate.8ac08a42.js";import"./coze_bg.f0117346.js";import"./agent-logo.3894d09b.js";import"./useLockFn.b1b43a93.js";import"./enums.fbb460c1.js";const Pe={class:"mb-4"},Re={class:"mb-4 flex justify-between"},Ke={class:"flex items-center"},Le={class:"flex justify-end mt-4"},Rt=ke({__name:"index",setup(Ie){const U=be(),i=f(0),p=we({name:"",nickname:"",source:""}),{pager:v,getLists:g,resetPage:c,resetParams:q}=xe({fetchFun:n=>i.value===0?Ve(n):$e({...n,type:i.value}),params:p}),M=n=>{i.value=n.paneName,g()},k=f(),w=f(),y=f(!1),B=f(!1),$=async n=>{var a,s;y.value=!0,await N(),await((a=k.value)==null?void 0:a.open()),n&&((s=k.value)==null||s.getDetail(n.id))},S=async n=>{var a,s;B.value=!0,await N(),await((a=w.value)==null?void 0:a.open()),n&&((s=w.value)==null||s.getDetail(n.id))},h=f([]),j=n=>{h.value=n},T=async n=>{await Fe.confirm("\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F"),i.value===0?await De({id:n}):await ze({id:n}),g()},P=async n=>{if(i.value===0){let a=n==null?void 0:n.id;a||(a=(await Ae({})).id),U.push({path:Ce("ai_application.agent/add:edit"),query:{id:a}})}else i.value===1?$(n):i.value===2&&S(n)};return g(),(n,a)=>{const s=oe,E=le,R=ne,G=ue,_=ie,H=se,K=me,D=te,O=ae,J=ge,A=re,Q=pe,Y=de,m=ce,W=Ee,X=_e,Z=ve,b=ye("perms"),ee=fe;return r(),Be(he,null,[F("div",null,[e(K,{class:"!border-none",shadow:"never"},{default:o(()=>[e(H,{ref:"formRef",class:"mb-[-16px]",model:l(p),inline:!0},{default:o(()=>[e(E,{label:"\u540D\u79F0"},{default:o(()=>[e(s,{class:"w-[280px]",modelValue:l(p).name,"onUpdate:modelValue":a[0]||(a[0]=t=>l(p).name=t),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",clearable:"",onKeyup:L(l(c),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(E,{label:"\u521B\u4F5C\u7528\u6237"},{default:o(()=>[e(s,{class:"w-[280px]",modelValue:l(p).nickname,"onUpdate:modelValue":a[1]||(a[1]=t=>l(p).nickname=t),placeholder:"\u8BF7\u8F93\u5165\u521B\u4F5C\u7528\u6237",clearable:"",onKeyup:L(l(c),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(E,{label:"\u521B\u5EFA\u7C7B\u578B"},{default:o(()=>[e(G,{modelValue:l(p).source,"onUpdate:modelValue":a[2]||(a[2]=t=>l(p).source=t),class:"!w-[160px]",placeholder:"\u8BF7\u9009\u62E9\u521B\u5EFA\u7C7B\u578B",onChange:l(c)},{default:o(()=>[e(R,{label:"\u540E\u53F0",value:0}),e(R,{label:"\u7528\u6237",value:1})]),_:1},8,["modelValue","onChange"])]),_:1}),e(E,null,{default:o(()=>[e(_,{type:"primary",onClick:l(c)},{default:o(()=>[u("\u67E5\u8BE2")]),_:1},8,["onClick"]),e(_,{onClick:l(q)},{default:o(()=>[u("\u91CD\u7F6E")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),e(K,{class:"!border-none mt-4",shadow:"never"},{default:o(()=>[F("div",Pe,[e(O,{modelValue:l(i),"onUpdate:modelValue":a[3]||(a[3]=t=>I(i)?i.value=t:null),onTabClick:M},{default:o(()=>[e(D,{label:"\u667A\u80FD\u4F53",name:0},null,8,["name"]),e(D,{label:"Coze\u667A\u80FD\u4F53",name:1},null,8,["name"]),e(D,{label:"Coze\u5DE5\u4F5C\u6D41",name:2},null,8,["name"])]),_:1},8,["modelValue"])]),F("div",Re,[C((r(),d(Y,null,{dropdown:o(()=>[e(Q,null,{default:o(()=>[e(A,{onClick:a[4]||(a[4]=t=>P())},{default:o(()=>[u(" \u521B\u5EFA\u667A\u80FD\u4F53 ")]),_:1}),e(A,{onClick:a[5]||(a[5]=t=>$())},{default:o(()=>[u(" \u521B\u5EFACoze\u667A\u80FD\u4F53 ")]),_:1}),e(A,{onClick:a[6]||(a[6]=t=>S())},{default:o(()=>[u(" \u521B\u5EFACoze\u5DE5\u4F5C\u6D41 ")]),_:1})]),_:1})]),default:o(()=>[e(_,{type:"primary"},{icon:o(()=>[e(J,{name:"el-icon-Plus"})]),default:o(()=>[u(" \u521B\u5EFA ")]),_:1})]),_:1})),[[b,["ai_assistant.agent/add"]]]),C((r(),d(_,{type:"default",plain:!0,disabled:!l(h).length,onClick:a[7]||(a[7]=t=>T(l(h).map(V=>V.id)))},{default:o(()=>[u(" \u6279\u91CF\u5220\u9664 ")]),_:1},8,["disabled"])),[[b,["ai_application.agent/delete"]]])]),C((r(),d(X,{size:"large",data:l(v).lists,onSelectionChange:j},{default:o(()=>[e(m,{type:"selection",width:"55",fixed:"left"}),e(m,{label:"ID",prop:"id","min-width":"80"}),e(m,{label:"\u56FE\u6807","min-width":"100"},{default:o(({row:t})=>[F("div",Ke,[t.image||t.avatar?(r(),d(W,{key:0,radius:"50%",class:"flex-none",src:t.image||t.avatar,width:48,height:48,"preview-src-list":[t.image||t.avatar],"preview-teleported":"",fit:"cover"},null,8,["src","preview-src-list"])):x("",!0)])]),_:1}),e(m,{label:"\u540D\u79F0",prop:"name","min-width":"140","show-overflow-tooltip":""}),e(m,{label:"\u5206\u7C7B","min-width":"140",prop:"agent_cate_name"},{default:o(({row:t})=>[u(z(t.agent_cate_name||t.cate_name),1)]),_:1}),e(m,{label:"\u521B\u5EFA\u7528\u6237",prop:"nickname","min-width":"140"},{default:o(({row:t})=>[u(z(t.nickname||t.source_text),1)]),_:1}),e(m,{label:"\u521B\u5EFA\u7C7B\u578B","min-width":"140"},{default:o(({row:t})=>[u(z(t.source==1?"\u7528\u6237":"\u540E\u53F0"),1)]),_:1}),e(m,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"create_time","min-width":"180"}),e(m,{label:"\u64CD\u4F5C",width:"120",fixed:"right"},{default:o(({row:t})=>[C((r(),d(_,{type:"primary",link:"",onClick:V=>P(t)},{default:o(()=>[u(" \u7F16\u8F91 ")]),_:2},1032,["onClick"])),[[b,["ai_application.agent/edit"]]]),C((r(),d(_,{type:"danger",link:"",onClick:V=>T(t.id)},{default:o(()=>[u(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[b,["ai_application.agent/delete"]]])]),_:1})]),_:1},8,["data"])),[[ee,l(v).loading]]),F("div",Le,[e(Z,{modelValue:l(v),"onUpdate:modelValue":a[8]||(a[8]=t=>I(v)?v.value=t:null),onChange:l(g)},null,8,["modelValue","onChange"])])]),_:1})]),l(y)?(r(),d(Se,{key:0,ref_key:"cozeEditRef",ref:k,onClose:a[9]||(a[9]=t=>y.value=!1),onSuccess:l(c)},null,8,["onSuccess"])):x("",!0),l(B)?(r(),d(Te,{key:1,ref_key:"cozeFlowEditRef",ref:w,onClose:a[10]||(a[10]=t=>B.value=!1),onSuccess:l(c)},null,8,["onSuccess"])):x("",!0)],64)}}});export{Rt as default};

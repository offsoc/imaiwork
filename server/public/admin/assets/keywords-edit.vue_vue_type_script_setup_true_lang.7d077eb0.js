import{R as A,S as q,D as I,C as N,F as S,w as U}from"./element-plus.e618cff3.js";import{_ as $}from"./index.vue_vue_type_script_setup_true_lang.4d6306c3.js";import{u as G}from"./vue-router.24cf2b30.js";import{u as K,a as L}from"./index.f708c426.js";import{_ as H}from"./index.81ef9c88.js";import{s as M,f as B}from"./index.03099c94.js";import{u as O}from"./useLockFn.b1b43a93.js";import Q from"./add-content.b87dfa1f.js";import{d as T,r as _,Y,o as j,G as z,H as t,a as n,Q as u,O as J,u as a,M as p}from"./@vue.fa3e2f74.js";const P={class:"text-2xl font-bold mb-5"},W={class:"h-[600px] w-full overflow-hidden"},X={class:"flex"},pe=T({__name:"keywords-edit",emits:["close","success"],setup(Z,{expose:E,emit:w}){const f=w,k=G(),c=_(),m=_("add"),F=_(),o=Y({id:"",match_type:0,keyword:"",reply:[]}),C={keyword:[{required:!0,message:"\u8BF7\u8F93\u5165\u5339\u914D\u5185\u5BB9"}],reply:[{required:!0,message:"\u8BF7\u8F93\u5165\u56DE\u590D\u5185\u5BB9"}]},v=s=>{var e;m.value=s||"add",(e=c.value)==null||e.open()},y=()=>{f("close")},h=async()=>{var s,e;await((s=F.value)==null?void 0:s.validate());try{const l=o.id?K:L,d={...o,robot_id:k.query.id};await l(d),B.msgSuccess(`${m.value==="add"?"\u65B0\u589E":"\u7F16\u8F91"}\u6210\u529F`),(e=c.value)==null||e.close(),f("success")}catch(l){B.msgError(l||`${m.value==="add"?"\u65B0\u589E":"\u7F16\u8F91"}\u5931\u8D25`)}},{lockFn:x,isLock:b}=O(h);return E({open:v,setFormData:s=>{M(s,o),Array.isArray(o.reply)&&(o.reply=o.reply.map(e=>({...e,type:parseInt(e.type,10)})))}}),(s,e)=>{const l=$,d=A,R=q,i=I,V=N,g=S,D=U;return j(),z(H,{ref_key:"popupRef",ref:c,async:"",width:"550px","confirm-button-text":"","cancel-button-text":"","header-class":"!p-0","show-close":!1},{default:t(()=>[n("div",null,[n("div",{class:"absolute w-6 h-6 right-4 top-4 cursor-pointer",onClick:y},[u(l)]),n("div",P,J(a(o).id?"\u7F16\u8F91":"\u6DFB\u52A0")+"\u5173\u952E\u8BCD\u56DE\u590D",1),u(g,{ref_key:"formRef",ref:F,model:a(o),rules:C,"label-position":"top"},{default:t(()=>[u(i,{label:"\u5339\u914D\u65B9\u5F0F",prop:"match_type"},{default:t(()=>[u(R,{modelValue:a(o).match_type,"onUpdate:modelValue":e[0]||(e[0]=r=>a(o).match_type=r)},{default:t(()=>[u(d,{value:0},{default:t(()=>[p("\u6A21\u7CCA\u5339\u914D")]),_:1}),u(d,{value:1},{default:t(()=>[p("\u7CBE\u786E\u5339\u914D")]),_:1})]),_:1},8,["modelValue"])]),_:1}),u(i,{label:"\u5339\u914D\u5185\u5BB9",prop:"keyword"},{default:t(()=>[u(V,{modelValue:a(o).keyword,"onUpdate:modelValue":e[1]||(e[1]=r=>a(o).keyword=r),placeholder:"\u56DE\u590D\u5185\u5BB9\u652F\u6301\u591A\u8BCD\u7EC4\u5339\u914D\uFF0C\u4EE5\u5206\u53F7\u76F8\u9694; \u4F8B\u5982\uFF1A\u4F60\u597D;\u4F60\u597D\u554A;\u4F60\u597D\u5440"},null,8,["modelValue"])]),_:1}),u(i,{label:"\u56DE\u590D\u5185\u5BB9",prop:"reply"},{default:t(()=>[n("div",W,[u(Q,{ref:"addContentRef",type:2,modelValue:a(o).reply,"onUpdate:modelValue":e[2]||(e[2]=r=>a(o).reply=r),"show-preview":!1},null,8,["modelValue"])])]),_:1})]),_:1},8,["model"]),n("div",X,[u(D,{class:"!rounded-full flex-1 !h-[50px]",onClick:y},{default:t(()=>[p("\u53D6\u6D88")]),_:1}),u(D,{type:"primary",class:"!rounded-full flex-1 !h-[50px]",loading:a(b),onClick:a(x)},{default:t(()=>[p(" \u4FDD\u5B58 ")]),_:1},8,["loading","onClick"])])])]),_:1},512)}}});export{pe as _};

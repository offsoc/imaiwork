import{a4 as N,L as j,C as q,D as G,G as H,H as O,w as z,F as J,J as Q,K as Y,M as W}from"./element-plus.e618cff3.js";import{_ as X}from"./index.vue_vue_type_script_setup_true_lang.2d767870.js";import{_ as Z}from"./index.vue_vue_type_script_setup_true_lang.b9a0ee41.js";import{d as ee,Y as te,r as V,ai as ae,aq as oe,o as n,c as F,Q as t,H as a,u as o,a6 as le,M as i,a as k,I as f,G as r,P as x,a5 as ne,O as y,v as ue}from"./@vue.fa3e2f74.js";import{j as ie,k as se,l as re}from"./montage.ef0f9a41.js";import{g as me,f as pe}from"./index.976d8a45.js";import{u as de}from"./usePaging.74092dd4.js";import"./@vueuse.57305db2.js";import"./@element-plus.8edeb311.js";import"./lodash-es.72862127.js";import"./dayjs.33f9e030.js";import"./@vscode.6c9cb547.js";import"./katex.234fd046.js";import"./@popperjs.36402333.js";import"./@ctrl.b082b0c1.js";import"./async-validator.fb49d0f5.js";import"./normalize-wheel-es.8aeb3683.js";import"./lodash.0bb3a698.js";import"./axios.e67d1c3e.js";import"./vue-router.24cf2b30.js";import"./pinia.d2a105b3.js";import"./vue-demi.b3a9cad9.js";import"./css-color-function.9d260b6b.js";import"./color.4290e22e.js";import"./clone.10c3af82.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./debug.35afef70.js";import"./ms.a9ae1d6d.js";import"./nprogress.d9597aae.js";import"./vue-clipboard3.6701dfcc.js";import"./clipboard.a993786e.js";import"./sortablejs.fb59ed0f.js";import"./echarts.8535e5a6.js";import"./zrender.3eba8991.js";import"./tslib.60310f1a.js";import"./highlight.js.4f6161a5.js";import"./@highlightjs.fc60ff58.js";const ce={class:"mb-4 flex justify-between"},_e={class:"break-all"},fe={class:"flex justify-end mt-4"},ot=ee({__name:"reocrd",setup(Ce){const u=te({nickname:"",start_time:"",end_time:"",status:""}),{pager:c,getLists:_,resetPage:E,resetParams:T}=de({fetchFun:re,params:u}),B=V(),C=V([]),R=m=>{C.value=m},S=async m=>{await ie({id:m.id,status:m.status==1?4:1}),_()},D=async m=>{var l;await pe.confirm("\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F"),await se({id:m}),_(),C.value=[],(l=B.value)==null||l.clearSelection()};return _(),(m,l)=>{const A=q,b=G,v=H,P=O,$=Z,p=z,M=J,w=Q,s=Y,h=N,U=ae("router-link"),I=X,g=oe("perms"),K=W;return n(),F("div",null,[t(w,{class:"!border-none",shadow:"never"},{default:a(()=>[t(M,{ref:"formRef",class:"mb-[-16px]",model:o(u),inline:!0},{default:a(()=>[t(b,{label:"\u7528\u6237\u4FE1\u606F"},{default:a(()=>[t(A,{class:"w-[280px]",modelValue:o(u).nickname,"onUpdate:modelValue":l[0]||(l[0]=e=>o(u).nickname=e),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237",clearable:"",onKeyup:le(o(E),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),t(b,{label:"\u72B6\u6001"},{default:a(()=>[t(P,{class:"!w-[180px]",modelValue:o(u).status,"onUpdate:modelValue":l[1]||(l[1]=e=>o(u).status=e),placeholder:"\u8BF7\u9009\u62E9\u72B6\u6001",clearable:"",onChange:l[2]||(l[2]=e=>o(_)())},{default:a(()=>[t(v,{label:"\u8FDB\u884C\u4E2D",value:"1"}),t(v,{label:"\u5DF2\u5B8C\u6210",value:"2"}),t(v,{label:"\u6682\u505C",value:"4"})]),_:1},8,["modelValue"])]),_:1}),t(b,{label:"\u521B\u4F5C\u65F6\u95F4"},{default:a(()=>[t($,{startTime:o(u).start_time,"onUpdate:startTime":l[3]||(l[3]=e=>o(u).start_time=e),endTime:o(u).end_time,"onUpdate:endTime":l[4]||(l[4]=e=>o(u).end_time=e)},null,8,["startTime","endTime"])]),_:1}),t(b,null,{default:a(()=>[t(p,{type:"primary",onClick:o(E)},{default:a(()=>[i("\u67E5\u8BE2")]),_:1},8,["onClick"]),t(p,{onClick:o(T)},{default:a(()=>[i("\u91CD\u7F6E")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),t(w,{class:"!border-none mt-4",shadow:"never"},{default:a(()=>[k("div",ce,[f((n(),r(p,{type:"default",plain:!0,disabled:!o(C).length,onClick:l[5]||(l[5]=e=>D(o(C).map(d=>d.id)))},{default:a(()=>[i(" \u6279\u91CF\u5220\u9664 ")]),_:1},8,["disabled"])),[[g,["ai_application.montage.publish_record/delete"]]])]),f((n(),r(o(j),{ref_key:"tableRef",ref:B,size:"large",data:o(c).lists,"row-key":"id",onSelectionChange:R},{default:a(()=>[t(s,{type:"selection",width:"55",fixed:"left","reserve-selection":""}),t(s,{label:"ID",prop:"id","min-width":"60"}),t(s,{label:"\u7528\u6237",prop:"user_nickname","min-width":"140","show-overflow-tooltip":""}),t(s,{label:"\u53D1\u5E03\u8D26\u53F7",width:"180"},{default:a(({row:e})=>[k("div",_e,[(n(!0),F(x,null,ne(e.accounts,(d,L)=>(n(),F("div",{key:L},y(d.type==1?"\u4E2A\u5FAE":"\u5C0F\u7EA2\u4E66")+"\uFF1A"+y(d.account),1))),128))])]),_:1}),t(s,{label:"\u4EFB\u52A1\u540D\u79F0",prop:"name","min-width":"180","show-overflow-tooltip":""}),t(s,{label:"\u4EFB\u52A1\u72B6\u6001","min-width":"120"},{default:a(({row:e})=>[e.status==1||e.status==2?(n(),r(h,{key:0,type:"warning"},{default:a(()=>[i("\u8FDB\u884C\u4E2D")]),_:1})):e.status==3?(n(),r(h,{key:1,type:"success"},{default:a(()=>[i("\u5DF2\u5B8C\u6210")]),_:1})):e.status==4?(n(),r(h,{key:2,type:"info"},{default:a(()=>[i("\u5DF2\u6682\u505C")]),_:1})):(n(),F(x,{key:3},[i("-")],64))]),_:1}),t(s,{label:"\u53D1\u5E03\u5468\u671F",prop:"name","min-width":"100"},{default:a(({row:e})=>[k("span",null,y(e.publish_cycle)+"\u5929",1)]),_:1}),t(s,{label:"\u521B\u4F5C\u65F6\u95F4",prop:"create_time","min-width":"180"}),t(s,{label:"\u64CD\u4F5C",width:"160",fixed:"right"},{default:a(({row:e})=>[f((n(),r(p,{type:"primary",link:""},{default:a(()=>[t(U,{to:{path:o(me)("ai_application.montage/publish_detail"),query:{id:e.id}}},{default:a(()=>[i(" \u8BE6\u60C5 ")]),_:2},1032,["to"])]),_:2},1024)),[[g,["ai_application.montage/publish_detail"]]]),(e.status,f((n(),r(p,{key:0,type:"primary",link:"",onClick:d=>S(e)},{default:a(()=>[i(y(e.status==2||e.status==1?"\u6682\u505C":"\u5F00\u59CB"),1)]),_:2},1032,["onClick"])),[[g,["ai_application.montage.publish_record/start:pause"]]])),f((n(),r(p,{type:"danger",link:"",onClick:d=>D([e.id])},{default:a(()=>[i(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[g,["ai_application.montage.publish_record/delete"]]])]),_:1})]),_:1},8,["data"])),[[K,o(c).loading]]),k("div",fe,[t(I,{modelValue:o(c),"onUpdate:modelValue":l[6]||(l[6]=e=>ue(c)?c.value=e:null),onChange:o(_)},null,8,["modelValue","onChange"])])]),_:1})])}}});export{ot as default};

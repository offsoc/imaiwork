import{Y as O,U as Z,T as J,Z as Q,v as X,K as ee,w as te,L as oe,E as se,M as ue}from"./element-plus.09e738c5.js";import{_ as le}from"./index.vue_vue_type_script_setup_true_lang.0af97da2.js";import{f as _,_ as ae,b as ne}from"./index.39a36e30.js";import{d as ie,bd as re,bu as ce,Y as de,r as B,s as N,i as me,o as E,c as _e,a as e,P as s,G as u,u as a,v as S,I,V as $,F as g,M as pe,K as k,H as fe,L as p,O as Fe,n as y,bj as he,bi as we}from"./@vue.b0c8b5fa.js";import{d as ve,r as Ee}from"./index.3d75321d.js";import{_ as xe}from"./keywords-edit.vue_vue_type_script_setup_true_lang.6c8a6132.js";import{_ as De}from"./workflow-edit.vue_vue_type_script_setup_true_lang.f0f61b6e.js";import{u as Ce}from"./usePaging.3fa68fd5.js";import{u as Be}from"./useLockFn.cf82402d.js";import"./@vueuse.20a2efa8.js";import"./@element-plus.ca3f8b8b.js";import"./lodash-es.2cd559e9.js";import"./dayjs.33f9e030.js";import"./@vscode.6c9cb547.js";import"./katex.234fd046.js";import"./@popperjs.36402333.js";import"./async-validator.fb49d0f5.js";import"./@ctrl.b082b0c1.js";import"./normalize-wheel-es.8aeb3683.js";import"./lodash.0bb3a698.js";import"./axios.e67d1c3e.js";import"./vue-router.f608815d.js";import"./pinia.173cb91f.js";import"./vue-demi.b3a9cad9.js";import"./css-color-function.9d260b6b.js";import"./color.4290e22e.js";import"./clone.10c3af82.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./debug.35afef70.js";import"./ms.a9ae1d6d.js";import"./nprogress.d9597aae.js";import"./vue-clipboard3.6701dfcc.js";import"./clipboard.a993786e.js";import"./sortablejs.fb59ed0f.js";import"./echarts.8535e5a6.js";import"./zrender.3eba8991.js";import"./tslib.60310f1a.js";import"./highlight.js.4f6161a5.js";import"./@highlightjs.39ed541d.js";import"./index.vue_vue_type_script_setup_true_lang.1a8c56fb.js";import"./index.e57d7385.js";import"./add-content.ba7bbf13.js";import"./index.vue_vue_type_script_setup_true_lang.0ec046c0.js";const c=i=>(he("data-v-8584ec64"),i=i(),we(),i),ge={class:"h-full flex flex-col py-6"},ke={class:"grow min-h-0"},ye={class:"px-[30px]"},be=c(()=>e("div",{class:"font-bold"},"\u6280\u80FD",-1)),Ae={class:"mt-3"},Ve={class:"leading-5 w-full"},Ne={class:"flex items-center gap-x-2"},Se=c(()=>e("span",null,"\u63D2\u4EF6",-1)),Ie=c(()=>e("span",{class:"text-xs text-white bg-[#FF8D1A] px-[6px] py-[2px] rounded inline-block"}," \u529F\u80FD\u5F00\u53D1\u4E2D ",-1)),$e=c(()=>e("div",{class:"text-[#00000080] mt-1 text-left"}," \u63D2\u4EF6\u80FD\u591F\u8BA9\u667A\u80FD\u4F53\u8C03\u7528\u5916\u90E8 API\uFF0C\u4F8B\u5982\u641C\u7D22\u4FE1\u606F\u3001\u6D4F\u89C8\u7F51\u9875\u3001\u751F\u6210\u56FE\u7247\u7B49\uFF0C\u6269\u5C55\u667A\u80FD\u4F53\u7684\u80FD\u529B\u548C\u4F7F\u7528\u573A\u666F\u3002 ",-1));const je={class:"leading-5 w-full"},Me={class:"flex items-center gap-x-2"},ze=c(()=>e("span",null,"\u56FA\u5B9A\u8BDD\u672F",-1)),Ke=c(()=>e("div",{class:"text-[#00000080] mt-1 text-left"}," \u56FA\u5B9A\u8BDD\u672F\u662F\u667A\u80FD\u4F53\u5728\u5BF9\u8BDD\u8FC7\u7A0B\u4E2D\uFF0C\u6839\u636E\u7528\u6237\u8F93\u5165\u7684\u7279\u5B9A\u5173\u952E\u8BCD\uFF0C\u81EA\u52A8\u56DE\u590D\u7684\u56FA\u5B9A\u5185\u5BB9\u3002 ",-1)),Le={class:"flex items-center justify-between gap-x-6 mb-2 px-4"},Ue={class:"flex items-center w-full gap-x-4"},Pe={class:"flex-1"},Re={class:"border border-[var(--el-border-color-lighter)] rounded-lg"},We={class:"h-[64px] flex justify-center items-center"},Te={class:"flex items-center justify-center mt-4"},Ye=ie({__name:"index",props:re({modelValue:{},agentId:{default:""}},{modelValue:{default:()=>({menus:[],flow_status:0,flow_config:{workflow_id:"",bot_id:""}})},modelModifiers:{}}),emits:["update:modelValue"],setup(i){const x=i,r=ce(i,"modelValue"),j=de({keyword:"",robot_id:x.agentId}),{pager:d,getLists:f}=Ce({fetchFun:Ee,params:j}),m=B([]),D=B(!1),C=N(),qe=async l=>{var t,n;D.value=!0,await y(),(t=C.value)==null||t.open(),l&&((n=C.value)==null||n.setFormData(l))},M=l=>{x.modelValue.flow_status=1,x.modelValue.flow_config=l},Ge=async()=>{await _.confirm("\u786E\u5B9A\u5220\u9664\u8BE5\u5DE5\u4F5C\u6D41\u5417\uFF1F"),r.value.flow_status=0,r.value.flow_config={workflow_id:"",bot_id:"",app_id:"",api_token:""}},F=B(!1),h=N(),z=async()=>{var l;F.value=!0,await y(),(l=h.value)==null||l.open()},b=async l=>{var t,n;F.value=!0,await y(),(t=h.value)==null||t.open(),(n=h.value)==null||n.setFormData(l)},K=async l=>{await _.confirm("\u786E\u5B9A\u5220\u9664\u8BE5\u95EE\u7B54\u8BDD\u672F\u5417\uFF1F"),await ve({id:l}),_.msgSuccess("\u5220\u9664\u6210\u529F"),f()},L=async()=>{try{_.msgSuccess("\u4FDD\u5B58\u6210\u529F")}catch(l){_.msgError(l||"\u63D0\u4EA4\u5931\u8D25")}},{lockFn:U,isLock:P}=Be(L);return me(()=>{f()}),(l,t)=>{const n=ae,A=O,He=Z,R=J,W=X,w=ee,v=te,T=oe,Y=le,q=Q,G=se,H=ue;return E(),_e(Fe,null,[e("div",ge,[e("div",ke,[s(G,null,{default:u(()=>[e("div",ye,[be,e("div",Ae,[s(q,{modelValue:a(m),"onUpdate:modelValue":t[7]||(t[7]=o=>S(m)?m.value=o:null)},{default:u(()=>[s(A,{name:"1",disabled:""},{title:u(()=>[e("div",Ve,[e("div",Ne,[e("span",{class:I(["transition-all duration-300",{"rotate-180":a(m).includes("1")}])},[s(n,{name:"el-icon-ArrowUp",color:"#00000080"})],2),Se,Ie]),$e])]),icon:u(()=>[e("div",{class:"w-5 h-5 bg-[#ECECEC] flex items-center justify-center rounded",onClick:t[0]||(t[0]=$(()=>{},["stop"]))},[s(n,{name:"el-icon-Plus",size:12})])]),_:1}),k("",!0),s(A,{name:"3"},{title:u(()=>[e("div",je,[e("div",Me,[e("span",{class:I(["transition-all duration-300",{"rotate-180":a(m).includes("3")}])},[s(n,{name:"el-icon-ArrowUp",color:"#00000080"})],2),ze]),Ke])]),icon:u(()=>[e("div",{class:"w-5 h-5 bg-[#ECECEC] flex items-center justify-center rounded cursor-pointer",onClick:t[3]||(t[3]=$(o=>z(),["stop"]))},[s(n,{name:"el-icon-Plus",size:12})])]),default:u(()=>[e("div",Le,[e("div",Ue,[e("div",Pe,[s(R,{modelValue:r.value.threshold,"onUpdate:modelValue":t[4]||(t[4]=o=>r.value.threshold=o),min:0,max:1,step:.01},null,8,["modelValue"])]),s(W,{modelValue:r.value.threshold,"onUpdate:modelValue":t[5]||(t[5]=o=>r.value.threshold=o),"controls-position":"right",min:0,max:1,step:.01},null,8,["modelValue"])])]),e("div",Re,[fe((E(),g(T,{data:a(d).lists,stripe:"","header-row-style":{height:"62px"},"row-style":{height:"50px"},"max-height":"300px"},{default:u(()=>[s(w,{label:"\u5339\u914D\u6A21\u5F0F",width:"120"},{default:u(({row:o})=>[p(pe(o.match_type===0?"\u6A21\u7CCA\u5339\u914D":"\u7CBE\u786E\u5339\u914D"),1)]),_:1}),s(w,{label:"\u5339\u914D\u5185\u5BB9",prop:"keyword","min-width":"200"}),s(w,{label:"\u56DE\u590D\u5185\u5BB9","min-width":"300"},{default:u(({row:o})=>[s(v,{link:"",type:"primary",onClick:V=>b(o)},{default:u(()=>[p(" \u70B9\u51FB\u67E5\u770B ")]),_:2},1032,["onClick"])]),_:1}),s(w,{label:"\u64CD\u4F5C",width:"120",fixed:"right"},{default:u(({row:o})=>[s(v,{link:"",type:"primary",onClick:V=>b(o)},{default:u(()=>[p(" \u7F16\u8F91 ")]),_:2},1032,["onClick"]),s(v,{link:"",type:"danger",onClick:V=>K(o.id)},{default:u(()=>[p(" \u5220\u9664 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[H,a(d).loading]])]),e("div",We,[s(Y,{modelValue:a(d),"onUpdate:modelValue":t[6]||(t[6]=o=>S(d)?d.value=o:null),layout:"prev, pager, next",onChange:a(f)},null,8,["modelValue","onChange"])])]),_:1})]),_:1},8,["modelValue"])])])]),_:1})]),e("div",Te,[s(v,{type:"primary",class:"w-[318px] !rounded-full !h-[50px]",loading:a(P),onClick:a(U)},{default:u(()=>[p(" \u4FDD\u5B58 ")]),_:1},8,["loading","onClick"])])]),a(F)?(E(),g(xe,{key:0,ref_key:"keywordsEditRef",ref:h,onClose:t[8]||(t[8]=o=>F.value=!1),onSuccess:a(f)},null,8,["onSuccess"])):k("",!0),a(D)?(E(),g(De,{key:1,ref_key:"workflowEditRef",ref:C,onClose:t[9]||(t[9]=o=>D.value=!1),onSuccess:M},null,512)):k("",!0)],64)}}});const Pt=ne(Ye,[["__scopeId","data-v-8584ec64"]]);export{Pt as default};

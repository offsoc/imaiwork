import{C as q,D as S,G as N,H as G,t as H,F as I}from"./element-plus.e618cff3.js";import{_ as O}from"./picker.89ad2f71.js";import{a as P,b as z,g as Q}from"./category.5f58bb37.js";import{u as T}from"./useDictOptions.be0fa711.js";import{_ as Y}from"./index.6c1a317f.js";import{d as j,s as f,r as F,b as J,Y as K,o as r,c as g,Q as u,H as s,u as l,G as B,P as M,a5 as W,L as X,a as C}from"./@vue.fa3e2f74.js";const Z={class:"edit-popup"},$=C("div",{class:"form-tips"},"\u9ED8\u8BA4\u4E3A0\uFF0C\u6570\u503C\u8D8A\u5927\u6392\u8D8A\u524D\u9762",-1),re=j({__name:"edit",emits:["success","close"],setup(ee,{expose:V,emit:b}){const m=b,c=f(),i=f(),d=F("add"),v=J(()=>d.value=="edit"?"\u7F16\u8F91\u7C7B\u522B":"\u65B0\u589E\u7C7B\u522B"),o=K({id:"",pid:"",logo:"",name:"",description:"",sort:0,status:1}),E={name:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0",trigger:["blur"]}],description:[{required:!0,message:"\u8BF7\u8F93\u5165\u63CF\u8FF0",trigger:["blur"]}],logo:[{required:!0,message:"\u8BF7\u4E0A\u4F20\u5206\u7C7Blogo",trigger:["blur"]}]},D=async()=>{var a,e;await((a=c.value)==null?void 0:a.validate()),d.value=="edit"?await P(o):await z(o),(e=i.value)==null||e.close(),m("success")},_=F(!1),y=()=>{m("close")},w=(a="add")=>{var e;d.value=a,(e=i.value)==null||e.open()},{optionsData:k}=T({categoryLists:{api:Q,params:{pageSize:99999},transformData:a=>a.lists}});return V({open:w,setFormData:async a=>{for(const e in o)a[e]!=null&&a[e]!=null&&(o[e]=a[e]);o.pid==0&&(o.pid="",_.value=!0)}}),(a,e)=>{const p=q,n=S,A=O,x=N,U=G,L=H,R=I;return r(),g("div",Z,[u(Y,{ref_key:"popupRef",ref:i,title:l(v),async:!0,width:"550px",onConfirm:D,onClose:y},{default:s(()=>[u(R,{class:"ls-form",ref_key:"formRef",ref:c,rules:E,model:l(o),"label-width":"90px"},{default:s(()=>[u(n,{label:"\u5206\u7C7B\u540D\u79F0",prop:"name"},{default:s(()=>[u(p,{class:"ls-input",modelValue:l(o).name,"onUpdate:modelValue":e[0]||(e[0]=t=>l(o).name=t),placeholder:"\u8BF7\u8F93\u5165\u5206\u7C7B\u540D\u79F0",clearable:""},null,8,["modelValue"])]),_:1}),u(n,{label:"\u5206\u7C7B\u63CF\u8FF0",prop:"description"},{default:s(()=>[u(p,{class:"ls-input",modelValue:l(o).description,"onUpdate:modelValue":e[1]||(e[1]=t=>l(o).description=t),placeholder:"\u8BF7\u8F93\u5165\u5206\u7C7B\u63CF\u8FF0",maxlength:"20","show-word-limit":"",clearable:""},null,8,["modelValue"])]),_:1}),u(n,{label:"\u5206\u7C7Blogo",prop:"logo",required:""},{default:s(()=>[u(A,{limit:1,modelValue:l(o).logo,"onUpdate:modelValue":e[2]||(e[2]=t=>l(o).logo=t)},null,8,["modelValue"])]),_:1}),l(_)?X("",!0):(r(),B(n,{key:0,label:"\u5206\u7C7B\u7236\u7EA7",prop:"pid"},{default:s(()=>[u(U,{class:"ls-input",modelValue:l(o).pid,"onUpdate:modelValue":e[3]||(e[3]=t=>l(o).pid=t),placeholder:"\u8BF7\u9009\u62E9",clearable:""},{default:s(()=>[(r(!0),g(M,null,W(l(k).categoryLists,(t,h)=>(r(),B(x,{key:h,disabled:l(o).id==t.id,value:t.id,label:t.name},null,8,["disabled","value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})),u(n,{label:"\u6392\u5E8F",prop:"sort"},{default:s(()=>[C("div",null,[u(p,{class:"ls-input",modelValue:l(o).sort,"onUpdate:modelValue":e[4]||(e[4]=t=>l(o).sort=t)},null,8,["modelValue"]),$])]),_:1}),u(n,{label:"\u72B6\u6001",prop:"sort"},{default:s(()=>[u(L,{modelValue:l(o).status,"onUpdate:modelValue":e[5]||(e[5]=t=>l(o).status=t),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])])}}});export{re as _};

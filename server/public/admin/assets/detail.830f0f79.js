import{_ as G,Q as O,U as K,x as X,y as Y,E as Z,J as tt}from"./element-plus.e618cff3.js";import{u as et,p as ot,_ as rt}from"./index.03099c94.js";import{g as st}from"./meeting_minutes.5aad9319.js";import{u as nt}from"./vue-router.24cf2b30.js";import at from"./lead.c28d6b7f.js";import lt from"./mind-map.8ad9448b.js";import{_ as it}from"./note.vue_vue_type_script_setup_true_lang.fbc5bf51.js";import{_ as ct}from"./audio-control.vue_vue_type_script_setup_true_lang.520a6a47.js";import{d as pt,b as P,r as m,i as mt,o as a,c as p,a as o,Q as u,H as w,u as r,G as k,P as y,a5 as I,O as T,J as D,L as g,v as ut}from"./@vue.fa3e2f74.js";import"./@vueuse.57305db2.js";import"./@element-plus.8edeb311.js";import"./lodash-es.72862127.js";import"./dayjs.33f9e030.js";import"./@vscode.6c9cb547.js";import"./katex.234fd046.js";import"./@popperjs.36402333.js";import"./@ctrl.b082b0c1.js";import"./async-validator.fb49d0f5.js";import"./normalize-wheel-es.8aeb3683.js";import"./lodash.0bb3a698.js";import"./axios.e67d1c3e.js";import"./pinia.d2a105b3.js";import"./vue-demi.b3a9cad9.js";import"./css-color-function.9d260b6b.js";import"./color.4290e22e.js";import"./clone.10c3af82.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./debug.35afef70.js";import"./ms.a9ae1d6d.js";import"./nprogress.d9597aae.js";import"./vue-clipboard3.6701dfcc.js";import"./clipboard.a993786e.js";import"./sortablejs.fb59ed0f.js";import"./echarts.8535e5a6.js";import"./zrender.3eba8991.js";import"./tslib.60310f1a.js";import"./highlight.js.4f6161a5.js";import"./@highlightjs.fc60ff58.js";import"./markmap-lib.25cc31eb.js";import"./markmap-common.ee5358ff.js";import"./markmap-html-parser.3798b05f.js";import"./cheerio.dde8322c.js";import"./parse5.53291ea6.js";import"./parse5-htmlparser2-tree-adapter.fb3a894e.js";import"./cheerio-select.0c013d81.js";import"./boolbase.dc003303.js";import"./css-what.c1f4afe9.js";import"./nth-check.d72df1b0.js";import"./punycode.js.e9f8b4ce.js";import"./markdown-it-ins.29acebbb.js";import"./markdown-it-mark.8f2a05f8.js";import"./markdown-it-sub.e4c33850.js";import"./markdown-it-sup.5ade0d5b.js";import"./yaml.686ee75c.js";import"./markmap-view.2c6c64d5.js";import"./d3-transition.d41d25b9.js";import"./d3-dispatch.1dc92aff.js";import"./d3-timer.cc6157f5.js";import"./d3-interpolate.0f7f527f.js";import"./d3-color.bd75bd6f.js";import"./d3-selection.0cc3cb22.js";import"./d3-ease.22ca3a91.js";import"./d3-zoom.5b4ddffb.js";import"./d3-drag.2b19d62e.js";import"./d3-scale.658849e8.js";import"./internmap.b4fc497e.js";import"./d3-scale-chromatic.5d2e723e.js";import"./d3-shape.154ce4ca.js";import"./d3-path.8f3f8aba.js";import"./d3-array.056066cc.js";import"./markmap-toolbar.14336619.js";const ft={class:"flex h-[80vh] mt-4 overflow-hidden"},dt={class:"h-full flex flex-col flex-1 min-w-[568px] bg-[#f7f8fc]"},_t=o("div",{class:"text-lg font-bold mx-6 mt-6"},"\u8BED\u97F3\u8F6C\u6587\u5B57",-1),vt={class:"grow min-h-0 flex flex-col relative"},ht={class:"grow min-h-0 my-8 relative"},gt={class:"px-6 pb-6"},xt={class:"flex flex-col gap-y-6"},bt={class:"flex gap-4 items-center"},kt=["src"],yt={class:"flex gap-2 text-[#7F7F94] text-xs"},Ct=["onClick"],Tt={class:"break-all leading-[24px]"},Et={key:1,class:"flex flex-col justify-center items-center h-full"},St={class:"h-[80px] flex-shrink-0"},Bt={class:"flex-1 flex flex-col p-6 bg-white"},Oe=pt({__name:"detail",setup(Rt){const L=nt(),V=et(),$=P(()=>V.config.meeting_config.avatars),c=m({}),h=m("1"),E=m([]),F=m([]),d=m(-1),C=m(!1),S=m(!1),B=m(),W=m(),H=()=>{S.value||(C.value=!0)},M=(t=0)=>{var s;const e=x.value;if(t=parseInt(t.toFixed(0)),d.value=e.findIndex(n=>t>=n.Words[0].Start&&t<=n.Words[n.Words.length-1].End),x.value.forEach(n=>{n.class="",n.Words.forEach(i=>{i.class=""})}),d.value!==-1){const n=x.value[d.value];n.class="!bg-primary !text-[#ffffff99]",F.value.forEach((v,l)=>{d.value}),n.Words.forEach((v,l)=>{t>=v.Start?v.class="!text-white":v.class=""});const i=E.value.filter((v,l)=>l<=d.value),{scrollTop:_,clientHeight:R}=(s=B.value)==null?void 0:s.wrapRef,f=i[i.length-1];(f.offsetTop+f.clientHeight>_+R||_>f.offsetTop)&&!C.value&&A(f.offsetTop)}},z=()=>{A(E.value[d.value].offsetTop),setTimeout(()=>{C.value=!1},20)},A=t=>{var e;S.value=!0,(e=B.value)==null||e.setScrollTop(t),setTimeout(()=>{S.value=!1},20)},N=t=>{if(t&&t.length==0)return"00:00";const e=t[0].Start;return ot(e/1e3)},U=t=>{var s;const e=t[0].Start;(s=W.value)==null||s.seek(e/1e3)},j=t=>{var n,i,_;const{response:e}=c.value,s=(_=(i=(n=e==null?void 0:e.Result)==null?void 0:n.Translation)==null?void 0:i.Translation)==null?void 0:_.Paragraphs;return s&&s.length>0?s[t]:[]},J=P(()=>{var e,s;const{response:t}=c.value;if(t)return(s=(e=t.Result)==null?void 0:e.AutoChapters)==null?void 0:s.AutoChapters}),x=P(()=>{var s,n,i;const{response:t}=c.value,e=(i=(n=(s=t==null?void 0:t.Result)==null?void 0:s.Transcription)==null?void 0:n.Transcription)==null?void 0:i.Paragraphs;return e&&e.length>0?e:[]}),Q=async()=>{const t=await st({id:L.query.id});c.value=t};return mt(()=>{Q()}),(t,e)=>{const s=G,n=tt,i=O,_=K,R=rt,f=X,v=Y;return a(),p(y,null,[o("div",null,[u(n,{class:"!border-none",shadow:"never"},{default:w(()=>[u(s,{content:r(c).name,onBack:e[0]||(e[0]=l=>t.$router.back())},null,8,["content"])]),_:1})]),o("div",ft,[o("div",dt,[_t,o("div",vt,[o("div",ht,[r(x).length>0?(a(),k(r(Z),{key:0,ref_key:"scrollbarContentRef",ref:B,onScroll:H},{default:w(()=>[o("div",gt,[o("div",xt,[(a(!0),p(y,null,I(r(x),(l,q)=>(a(),p("div",{ref_for:!0,ref_key:"contentItemRef",ref:E},[o("div",bt,[o("img",{class:"w-6 h-6 rounded-full object-cover",src:r($)[l.SpeakerId-1]},null,8,kt),o("div",yt,[o("span",null,"\u53D1\u8A00\u4EBA"+T(l.SpeakerId),1),o("span",null,T(N(l.Words)),1)])]),o("div",{class:D(["cursor-pointer py-4 px-6 bg-white rounded-lg mt-[10px] leading-[24px] text-[#585A73] hover:shadow-[0_0_0_2px_rgba(35,83,244,.4)]",l.class]),ref_for:!0,ref_key:"paragraphRef",ref:F,onClick:b=>U(l.Words)},[(a(!0),p(y,null,I(l.Words,b=>(a(),p("span",{class:D(b.class)},T(b.Text),3))),256)),r(c).translation?(a(),p(y,{key:0},[u(i,{class:"!border-t-[#f0f0f0] !my-3"}),o("div",Tt,[(a(!0),p(y,null,I(j(q).Sentences,b=>(a(),p("span",null,[o("span",null,T(b.Text),1)]))),256))])],64)):g("",!0)],10,Ct)],512))),256))])])]),_:1},512)):(a(),p("div",Et,[u(_)])),r(C)&&r(d)>-1?(a(),p("div",{key:2,class:"absolute bottom-0 right-3 p-2 bg-[rgba(44,44,54,.8)] rounded-lg z-[888]",onClick:z},[u(R,{name:"local-icon-crosshair",size:20,color:"#ffffff"})])):g("",!0)]),o("div",St,[r(c).id?(a(),k(ct,{key:0,ref_key:"audioControlRef",ref:W,music:r(c).url,"content-list":r(J),onUpdateTime:M},null,8,["music","content-list"])):g("",!0)])])]),o("div",Bt,[o("div",null,[u(v,{modelValue:r(h),"onUpdate:modelValue":e[1]||(e[1]=l=>ut(h)?h.value=l:null)},{default:w(()=>[u(f,{label:"\u5BFC\u8BFB",name:"1"}),u(f,{label:"\u8111\u56FE",name:"2"}),u(f,{label:"\u7B14\u8BB0",name:"3"})]),_:1},8,["modelValue"])]),r(h)==="1"?(a(),k(at,{key:0,detail:r(c)},null,8,["detail"])):g("",!0),r(h)==="2"?(a(),k(lt,{key:1,detail:r(c)},null,8,["detail"])):g("",!0),r(h)==="3"?(a(),k(it,{key:2,content:r(c).text},null,8,["content"])):g("",!0)])])],64)}}});export{Oe as default};

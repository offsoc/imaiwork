import{x as U,y as X,X as O,C as P,w as q,E as H}from"./element-plus.e618cff3.js";import{_ as J}from"./index.vue_vue_type_script_setup_true_lang.dbd208c7.js";import{f as F,_ as Q,b as Y}from"./index.03099c94.js";import{d as G,b as K,r as E,Y as W,s as Z,aq as ee,o as l,c as a,a as o,Q as n,H as _,P as w,a5 as B,u,v as te,L as h,V as oe,M as se,I as le,O as A,J as ae,n as ne,bj as ie,bi as re}from"./@vue.fa3e2f74.js";import"./@vueuse.57305db2.js";import"./@element-plus.8edeb311.js";import"./lodash-es.72862127.js";import"./dayjs.33f9e030.js";import"./@vscode.6c9cb547.js";import"./katex.234fd046.js";import"./@popperjs.36402333.js";import"./@ctrl.b082b0c1.js";import"./async-validator.fb49d0f5.js";import"./normalize-wheel-es.8aeb3683.js";import"./lodash.0bb3a698.js";import"./axios.e67d1c3e.js";import"./vue-router.24cf2b30.js";import"./pinia.d2a105b3.js";import"./vue-demi.b3a9cad9.js";import"./css-color-function.9d260b6b.js";import"./color.4290e22e.js";import"./clone.10c3af82.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./debug.35afef70.js";import"./ms.a9ae1d6d.js";import"./nprogress.d9597aae.js";import"./vue-clipboard3.6701dfcc.js";import"./clipboard.a993786e.js";import"./sortablejs.fb59ed0f.js";import"./echarts.8535e5a6.js";import"./zrender.3eba8991.js";import"./tslib.60310f1a.js";import"./highlight.js.4f6161a5.js";import"./@highlightjs.fc60ff58.js";const ue=p=>(ie("data-v-788673ee"),p=p(),re(),p),ce={class:"h-full flex gap-4 w-full"},de={class:"grow min-h-0 flex flex-col"},pe={class:"mt-2"},me={key:0,class:"relative"},_e={key:1,class:"w-full"},fe={class:"h-[202px] border border-dashed border-[#dcdfe6] rounded-lg w-full flex flex-col items-center justify-center hover:border-primary"},ve=ue(()=>o("div",{class:"text-[#8A8A8A] mt-4"},"\u70B9\u51FB\u4E0A\u4F20\u56FE\u7247",-1)),he={key:1,class:"h-full w-full flex justify-center relative p-2"},ge=["src"],xe={class:"absolute right-2 top-2"},ye={class:"flex justify-center mt-4"},Fe={class:"grow min-h-0"},Ee={class:"px-4"},we={class:"material-list mt-4 flex flex-col gap-y-4"},be={class:"text-white flex items-center gap-x-4 flex-1 w-0"},ke={class:"flex-shrink-0 w-[100px]"},Be={key:0,class:"text-ellipsis overflow-hidden whitespace-nowrap"},Ae=["src"],Ce={class:"flex items-center gap-x-2 flex-shrink-0"},Ve=["onClick"],De={class:"move-icon cursor-move leading-[0]"},Ie=G({__name:"add-content",props:{type:{default:1},modelValue:{},showPreview:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(p,{expose:C,emit:V}){const D=p,I=V,d=K({get(){return D.modelValue},set(r){I("update:modelValue",r)}}),c=E(0),g=[{id:0,key:"text",name:"\u6587\u672C",error_tips:"\u8BF7\u8F93\u5165\u6587\u672C\u5185\u5BB9"},{id:1,key:"image",name:"\u56FE\u7247",error_tips:"\u8BF7\u4E0A\u4F20\u56FE\u7247"}],i=W({text:"",image:{}}),T=[{selector:".material-list",options:{animation:150,handle:".move-icon",onEnd:({newIndex:r,oldIndex:e})=>{const s=[...d.value],f=s.splice(e,1)[0];s.splice(r,0,f),d.value=[],ne(()=>{d.value=s})}}}],M=()=>{x()},S=r=>{var e;return((e=g.find(s=>s.id==r))==null?void 0:e.name)+"\u6D88\u606F"||"\u672A\u77E5\u7C7B\u578B"},j=r=>{const{uri:e,name:s}=r||{};!e||!s||(i.image={url:e,name:s})};E(!1),Z(),E("");const R=()=>{if(d.value.length>=6){F.msgError(`\u6700\u591A\u53EA\u80FD\u6DFB\u52A0${6}\u6761\u4FE1\u606F`);return}const e=g.find(y=>y.id===c.value);if(!e)return;const s=i[e.key];if(typeof s=="string"?!s:!Object.keys(s).length){F.msgError(e.error_tips);return}let m;switch(c.value){case 0:m={type:0,content:i.text};break;case 1:m={type:1,content:i.image.url||""};break;default:return}d.value=[...d.value,m],x()},x=()=>{i.text="",i.image={url:"",name:""}},N=async r=>{await F.confirm("\u786E\u5B9A\u5220\u9664\u8BE5\u7D20\u6750\u5417\uFF1F"),d.value.splice(r,1)};return C({open:()=>{x(),c.value=0}}),(r,e)=>{const s=U,f=X,m=O,y=P,v=Q,b=q,$=J,z=H,L=ee("draggable");return l(),a("div",ce,[o("div",de,[o("div",null,[n(f,{modelValue:u(c),"onUpdate:modelValue":e[0]||(e[0]=t=>te(c)?c.value=t:null),onTabClick:M},{default:_(()=>[(l(),a(w,null,B(g,t=>n(s,{key:t.id,label:t.name,name:t.id},null,8,["label","name"])),64))]),_:1},8,["modelValue"]),n(m,{title:"\u8BF7\u6CE8\u610F\uFF1A\u89C6\u9891\u3001\u5C0F\u7A0B\u5E8F\u3001\u94FE\u63A5\u3001\u6587\u4EF6\u652F\u6301\u4E2A\u5FAE\u4F7F\u7528",type:"warning",class:"mt-2"}),o("div",pe,[u(c)===0?(l(),a("div",me,[n(y,{modelValue:u(i).text,"onUpdate:modelValue":e[1]||(e[1]=t=>u(i).text=t),ref:"textInputRef",type:"textarea",autosize:{minRows:7,maxRows:15},placeholder:"\u70B9\u51FB\u8F93\u5165\u60A8\u8981\u53D1\u9001\u7684\u6587\u672C\u5185\u5BB9"},null,8,["modelValue"])])):[1,2].includes(u(c))?(l(),a("div",_e,[n($,{class:"h-full w-full",type:"image","show-progress":"","max-size":20,"show-file-list":!1,onSuccess:j},{default:_(()=>[o("div",fe,[u(i).image.url?(l(),a("div",he,[u(c)===1?(l(),a("img",{key:0,src:u(i).image.url,class:"rounded-lg object-cover"},null,8,ge)):h("",!0),o("div",xe,[n(b,{onClick:e[2]||(e[2]=oe(t=>u(i).image={},["stop"]))},{default:_(()=>[n(v,{name:"el-icon-Delete"})]),_:1})])])):(l(),a(w,{key:0},[n(v,{name:"el-icon-UploadFilled",size:40}),ve],64))])]),_:1})])):h("",!0),o("div",ye,[n(b,{type:"primary",onClick:R},{default:_(()=>[se(" \u6DFB\u52A0\u4FE1\u606F\u5185\u5BB9 ")]),_:1})])])]),o("div",Fe,[n(z,null,{default:_(()=>[le((l(),a("div",Ee,[o("div",we,[(l(!0),a(w,null,B(u(d),(t,k)=>(l(),a("div",{key:k,class:"px-4 py-2 rounded-lg bg-[#2E2E2E] flex justify-between items-center"},[o("div",be,[o("div",ke,"\u3010"+A(S(t.type))+"\u3011",1),o("div",{class:ae(["flex-shrink-0",{"flex-1 w-0":t.type==0}])},[t.type==0?(l(),a("div",Be,A(t.content),1)):h("",!0),t.type==1?(l(),a("img",{key:1,src:t.content,class:"w-6 h-6 rounded-lg object-cover"},null,8,Ae)):h("",!0)],2)]),o("div",Ce,[o("div",{class:"leading-[0] cursor-pointer",onClick:Me=>N(k)},[n(v,{name:"el-icon-Delete",color:"#ffffff"})],8,Ve),o("div",De,[n(v,{name:"el-icon-Rank",color:"#ffffff"})])])]))),128))])])),[[L,T]])]),_:1})])])])}}});const ht=Y(Ie,[["__scopeId","data-v-788673ee"]]);export{ht as default};

import{_ as q}from"./index.e9970204.js";import{D as G,C as R,F as S,J as N,w as L}from"./element-plus.b694a2f4.js";import{_ as U}from"./picker.48b01f41.js";import{r as b,f as j,b as $}from"./index.f10dd425.js";import{u as H}from"./useLockFn.b1b43a93.js";import{_ as J}from"./add_greeting.vue_vue_type_script_setup_true_lang.367920b5.js";import{d as M,s as g,Y as O,r as F,aq as P,o as l,c as Q,a as C,Q as r,H as u,u as o,I as T,G as B,M as Y,L as z,P as K,bj as W,bi as X}from"./@vue.fa3e2f74.js";import"./@vueuse.57305db2.js";import"./@element-plus.8edeb311.js";import"./lodash-es.72862127.js";import"./dayjs.0a835391.js";import"./@vscode.4616c7ee.js";import"./katex.42c635ec.js";import"./@popperjs.36402333.js";import"./@ctrl.b082b0c1.js";import"./async-validator.fb49d0f5.js";import"./normalize-wheel-es.8aeb3683.js";import"./index.f03241f6.js";import"./index.7b07c9d0.js";import"./index.vue_vue_type_script_setup_true_lang.0a17ae2c.js";import"./index.6d9f402f.js";import"./index.vue_vue_type_script_setup_true_lang.d9eca07d.js";import"./index.vue_vue_type_script_setup_true_lang.67e6db0d.js";import"./usePaging.74092dd4.js";import"./preview.vue_vue_type_script_setup_true_lang.1474844e.js";import"./index.vue_vue_type_script_setup_true_lang.1c9fc45b.js";import"./vue3-video-play.f18a92be.js";import"./vuedraggable.e26981f9.js";import"./vue.69a2fcd0.js";import"./sortablejs.f3bfd0ca.js";import"./lodash.a609e612.js";import"./axios.ddddcbae.js";import"./vue-router.24cf2b30.js";import"./pinia.d2a105b3.js";import"./vue-demi.b3a9cad9.js";import"./css-color-function.6fe488a5.js";import"./color.eb90fb33.js";import"./clone.81074570.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./debug.e2d654ba.js";import"./ms.a9ae1d6d.js";import"./nprogress.430b6dc1.js";import"./vue-clipboard3.2f1d7104.js";import"./clipboard.7e043bc1.js";import"./echarts.8535e5a6.js";import"./zrender.3eba8991.js";import"./tslib.60310f1a.js";import"./highlight.js.4f6161a5.js";import"./@highlightjs.fc60ff58.js";function Z(){return b.post({url:"/assistants.assistants/chat"})}function tt(i){return b.post({url:"/assistants.assistants/updateChat",params:i})}const et=i=>(W("data-v-aba1f7f4"),i=i(),X(),i),ot=et(()=>C("div",{class:"text-xl font-medium mb-[20px]"},"\u914D\u7F6E\u4FE1\u606F",-1)),rt=M({__name:"index",setup(i){const _=g(),t=O({banner:"",logo:"",file_prompt:"",new_chat_prompt:"",preliminary_ask:[]}),E={banner:[{required:!0,message:"\u8BF7\u4E0A\u4F20\u56FE\u7247",trigger:"blur"}],logo:[{required:!0,message:"\u8BF7\u4E0A\u4F20\u56FE\u7247",trigger:"blur"}],file_prompt:[{required:!0,message:"\u8BF7\u8F93\u5165\u62FC\u63A5\u8BCD",trigger:"blur"}],new_chat_prompt:[{required:!0,message:"\u8BF7\u8F93\u5165\u65B0\u5BF9\u8BDD\u63D0\u793A\u8BCD",trigger:"blur"}]},p=F(!1),w=g(),c=F(-1),D=a=>{if(t.preliminary_ask.length>5){j.msgError("\u5F00\u573A\u767D\u6700\u591A\u53EA\u80FD\u8BBE\u7F6E6\u6761");return}const{mode:e,data:n}=a;e=="add"?t.preliminary_ask.push(n):t.preliminary_ask[c.value]=n,c.value=-1,p.value=!1},x=async()=>{var a;await((a=_.value)==null?void 0:a.validate()),await tt(t),await d()},{lockFn:k,isLock:v}=H(x),d=async()=>{const a=await Z();Object.keys(t).map(e=>{t[e]=a[e]})};return d(),(a,e)=>{const n=U,m=G,f=R,h=S,y=N,A=L,V=q,I=P("perm");return l(),Q(K,null,[C("div",null,[r(y,{class:"!border-none",shadow:"never"},{default:u(()=>[ot,r(h,{ref_key:"formRef",ref:_,model:o(t),rules:E,"label-width":"160px"},{default:u(()=>[r(m,{label:"\u901A\u7528\u5BF9\u8BDD\u804A\u5929\u5934\u50CF",prop:"logo"},{default:u(()=>[r(n,{modelValue:o(t).logo,"onUpdate:modelValue":e[0]||(e[0]=s=>o(t).logo=s),limit:1},null,8,["modelValue"])]),_:1}),r(m,{label:"\u7528\u6237\u6587\u4EF6\u62FC\u63A5\u8BCD\u8BBE\u7F6E",prop:"file_prompt"},{default:u(()=>[r(f,{modelValue:o(t).file_prompt,"onUpdate:modelValue":e[1]||(e[1]=s=>o(t).file_prompt=s),class:"w-[500px]",type:"textarea",maxlength:"1000",rows:4},null,8,["modelValue"])]),_:1}),r(m,{label:"\u65B0\u5EFA\u5BF9\u8BDD\u63D0\u793A\u8BCD\u8BBE\u7F6E",prop:"new_chat_prompt"},{default:u(()=>[r(f,{modelValue:o(t).new_chat_prompt,"onUpdate:modelValue":e[2]||(e[2]=s=>o(t).new_chat_prompt=s),class:"w-[500px]",type:"textarea",maxlength:"1000",rows:4},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1})]),r(V,null,{default:u(()=>[T((l(),B(A,{type:"primary",onClick:o(k),loading:o(v)},{default:u(()=>[Y(" \u4FDD\u5B58 ")]),_:1},8,["onClick","loading"])),[[I,["ai_application.chat/setConfig"]]])]),_:1}),o(p)?(l(),B(J,{key:0,ref_key:"addGreetingRef",ref:w,onSuccess:D,onClose:e[3]||(e[3]=s=>p.value=!1)},null,512)):z("",!0)],64)}}});const oe=$(rt,[["__scopeId","data-v-aba1f7f4"]]);export{oe as default};

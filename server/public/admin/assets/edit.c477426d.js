import{_ as W}from"./index.1194f3fc.js";import{_ as X,J as Z,D as ee,C as ue,w as oe,G as te,H as le,v as ae,t as re,F as ne}from"./element-plus.09e738c5.js";import{_ as se}from"./picker.8fd95042.js";import{a as ie,u as pe}from"./vue-router.f608815d.js";import{u as de}from"./useLockFn.cf82402d.js";import{u as me,m as ce,f as w}from"./index.1bd46af0.js";import{G as x}from"./@element-plus.ca3f8b8b.js";import{l as _e,a as ge,b as Fe}from"./scene.7ab1b9b4.js";import{d as Ee,b as U,r as fe,Y as q,s as Be,i as Ae,o as n,c as d,a as i,P as t,G as a,u,F as g,O as _,a5 as F,K as B,L as h,M as ve}from"./@vue.b0c8b5fa.js";import"./@vueuse.20a2efa8.js";import"./lodash-es.2cd559e9.js";import"./dayjs.33f9e030.js";import"./@vscode.6c9cb547.js";import"./katex.234fd046.js";import"./@popperjs.36402333.js";import"./async-validator.fb49d0f5.js";import"./@ctrl.b082b0c1.js";import"./normalize-wheel-es.8aeb3683.js";import"./index.65ae06d1.js";import"./index.7fa0696d.js";import"./index.vue_vue_type_script_setup_true_lang.0af97da2.js";import"./index.678a4866.js";import"./index.vue_vue_type_script_setup_true_lang.f3fff232.js";import"./index.vue_vue_type_script_setup_true_lang.9996a4fe.js";import"./usePaging.3fa68fd5.js";import"./preview.vue_vue_type_script_setup_true_lang.337ce91c.js";import"./index.vue_vue_type_script_setup_true_lang.a9802a4b.js";import"./vue3-video-play.20b32444.js";import"./vuedraggable.1dfb0a09.js";import"./vue.c1c1914b.js";import"./sortablejs.fb59ed0f.js";import"./lodash.0bb3a698.js";import"./axios.e67d1c3e.js";import"./pinia.173cb91f.js";import"./vue-demi.b3a9cad9.js";import"./css-color-function.9d260b6b.js";import"./color.4290e22e.js";import"./clone.10c3af82.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./debug.35afef70.js";import"./ms.a9ae1d6d.js";import"./nprogress.d9597aae.js";import"./vue-clipboard3.6701dfcc.js";import"./clipboard.a993786e.js";import"./echarts.8535e5a6.js";import"./zrender.3eba8991.js";import"./tslib.60310f1a.js";import"./highlight.js.4f6161a5.js";import"./@highlightjs.39ed541d.js";const be={class:"w-[380px] rounded border border-[rgba(220,223,230,1)] p-4"},Ve={class:"flex flex-col gap-2"},Ce={class:"flex items-center gap-2 grow"},ye={key:0},he={class:"w-[380px] rounded border border-[rgba(220,223,230,1)] p-4"},ke={class:"flex flex-col gap-2"},De={class:"flex items-center gap-2 grow"},we={key:0},xe={class:"w-[380px] rounded border border-[rgba(220,223,230,1)] p-4"},Ue={class:"flex flex-col gap-2"},qe={class:"flex-1"},Se=i("div",{class:"form-tips"},"\u9ED8\u8BA4\u4E3A0\uFF0C\u6570\u503C\u8D8A\u5927\u8D8A\u6392\u524D\u9762",-1),Su=Ee({__name:"edit",setup(Te){const S=ie(),k=pe(),T=me(),{removeTab:I}=ce(),A=U(()=>T.config.lianlian||{voice:[],emotions:[],intensity:[]}),$=U(()=>A.value.intensity.map(r=>({...r,value:parseInt(r.value)}))),v=fe(!0),e=q({id:"",logo:"",name:"",description:"",training_target:[],tips:[],coach_name:"",coach_persona:"",coach_emotion:"",coach_intensity:"",coach_voice:"",practitioner_persona:"",analysis_report_config:A.value.directions,sort:0,status:1}),D=Be(),L=q({name:[{required:!0,message:"\u8BF7\u8F93\u5165\u573A\u666F\u540D\u79F0",trigger:"blur"}],logo:[{required:!0,message:"\u8BF7\u4E0A\u4F20\u573A\u666F\u5934\u50CF",trigger:"blur"}],description:[{required:!0,message:"\u8BF7\u8F93\u5165\u573A\u666F\u7B80\u4ECB",trigger:"blur"}],training_target:[{required:!0,message:"\u8BF7\u8F93\u5165\u7EC3\u4E60\u76EE\u6807",trigger:"blur"}],tips:[{required:!0,message:"\u8BF7\u8F93\u5165\u6E29\u99A8\u63D0\u793A",trigger:"blur"}],coach_name:[{required:!0,message:"\u8BF7\u8F93\u5165\u966A\u7EC3\u8005\u540D\u79F0",trigger:"blur"}],coach_persona:[{required:!0,message:"\u8BF7\u8F93\u5165\u966A\u7EC3\u8005\u4EBA\u8BBE",trigger:"blur"}],coach_emotion:[{required:!0,message:"\u8BF7\u9009\u62E9\u966A\u7EC3\u8005\u60C5\u611F",trigger:"blur"}],coach_intensity:[{required:!0,message:"\u8BF7\u9009\u62E9\u966A\u7EC3\u8005\u60C5\u611F\u6295\u5165\u7A0B\u5EA6",trigger:"blur"}],coach_voice:[{required:!0,message:"\u8BF7\u9009\u62E9\u966A\u7EC3\u8005\u97F3\u8272",trigger:"blur"}],practitioner_persona:[{required:!0,message:"\u8BF7\u8F93\u5165\u7EC3\u4E60\u8005\u626E\u6F14\u4EBA\u8BBE",trigger:"blur"}],analysis_report_config:[{required:!0,message:"\u8BF7\u8F93\u5165\u5206\u6790\u62A5\u544A\u914D\u7F6E",trigger:"blur"},{validator:(r,l,b)=>{const E=l.findIndex(V=>!V);if(E!==-1){b(new Error(`\u8BF7\u8F93\u5165\u5206\u6790\u62A5\u544A\u914D\u7F6E${E+1}`));return}b()},trigger:"blur"}]}),N=r=>{e.training_target.splice(r,1)},R=()=>{if(!e.training_target[e.training_target.length-1]&&e.training_target.length>0){w.msgError("\u8BF7\u5148\u586B\u5199\u4E0A\u4E2A\u5143\u7D20");return}e.training_target.push("")},z=r=>{e.tips.splice(r,1)},G=()=>{if(!e.tips[e.tips.length-1]&&e.tips.length>0){w.msgError("\u8BF7\u5148\u586B\u5199\u4E0A\u4E2A\u5143\u7D20");return}e.tips.push("")},M=async()=>{var r;await((r=D.value)==null?void 0:r.validate()),e.id?await ge(e):await Fe(e),I(),S.back()},{lockFn:H,isLock:O}=de(M),P=async()=>{const r=await _e({id:k.query.id});J(r),v.value=r.user_id==0},J=async r=>{for(const l in e)r[l]!=null&&r[l]!=null&&(e[l]=r[l])};return Ae(()=>{k.query.id&&P()}),(r,l)=>{const b=X,E=Z,V=se,p=ee,m=ue,f=oe,C=te,y=le,K=ae,Y=re,j=ne,Q=W;return n(),d(_,null,[i("div",null,[t(E,{class:"!border-none",shadow:"never"},{default:a(()=>[t(b,{content:r.$route.query.id?"\u7F16\u8F91\u573A\u666F":"\u65B0\u589E\u573A\u666F",onBack:l[0]||(l[0]=o=>r.$router.back())},null,8,["content"])]),_:1}),t(E,{class:"!border-none mt-4",shadow:"never"},{default:a(()=>[t(j,{model:u(e),rules:u(L),ref_key:"formRef",ref:D,"label-width":"150px"},{default:a(()=>[t(p,{label:"\u573A\u666F\u5934\u50CF",prop:"logo"},{default:a(()=>[t(V,{modelValue:u(e).logo,"onUpdate:modelValue":l[1]||(l[1]=o=>u(e).logo=o),limit:1},null,8,["modelValue"])]),_:1}),t(p,{label:"\u573A\u666F\u540D\u79F0",prop:"name"},{default:a(()=>[t(m,{modelValue:u(e).name,"onUpdate:modelValue":l[2]||(l[2]=o=>u(e).name=o),class:"w-[380px]",placeholder:"\u8BF7\u8F93\u5165\u573A\u666F\u540D\u79F0"},null,8,["modelValue"])]),_:1}),t(p,{label:"\u573A\u666F\u7B80\u4ECB",prop:"description"},{default:a(()=>[t(m,{modelValue:u(e).description,"onUpdate:modelValue":l[3]||(l[3]=o=>u(e).description=o),type:"textarea",rows:4,class:"w-[380px]",placeholder:"\u8BF7\u8F93\u5165\u573A\u666F\u7B80\u4ECB"},null,8,["modelValue"])]),_:1}),u(v)?(n(),g(p,{key:0,label:"\u7EC3\u4E60\u76EE\u6807",prop:"training_target"},{default:a(()=>[i("div",be,[i("div",Ve,[(n(!0),d(_,null,F(u(e).training_target,(o,s)=>(n(),d("div",{key:s,class:"flex items-center gap-4"},[i("div",Ce,[t(m,{modelValue:u(e).training_target[s],"onUpdate:modelValue":c=>u(e).training_target[s]=c,placeholder:"\u8BF7\u8F93\u5165\u7EC3\u4E60\u76EE\u6807"},null,8,["modelValue","onUpdate:modelValue"]),s>0?(n(),d("div",ye,[t(f,{type:"danger",icon:u(x),size:"small",onClick:c=>N(s)},null,8,["icon","onClick"])])):B("",!0)])]))),128)),i("div",null,[t(f,{type:"primary",size:"small",onClick:R},{default:a(()=>[h("\u6DFB\u52A0")]),_:1})])])])]),_:1})):B("",!0),u(v)?(n(),g(p,{key:1,label:"\u6E29\u99A8\u63D0\u793A",prop:"tips"},{default:a(()=>[i("div",he,[i("div",ke,[(n(!0),d(_,null,F(u(e).tips,(o,s)=>(n(),d("div",{key:s,class:"flex items-center gap-4"},[i("div",De,[t(m,{modelValue:u(e).tips[s],"onUpdate:modelValue":c=>u(e).tips[s]=c,class:"!flex-1",placeholder:"\u8BF7\u8F93\u5165\u6E29\u99A8\u63D0\u793A"},null,8,["modelValue","onUpdate:modelValue"]),s>0?(n(),d("div",we,[t(f,{type:"danger",icon:u(x),size:"small",onClick:c=>z(s)},null,8,["icon","onClick"])])):B("",!0)])]))),128)),i("div",null,[t(f,{type:"primary",size:"small",onClick:G},{default:a(()=>[h("\u6DFB\u52A0")]),_:1})])])])]),_:1})):B("",!0),t(p,{label:"\u966A\u7EC3\u8005\u540D\u79F0",prop:"coach_name"},{default:a(()=>[t(m,{modelValue:u(e).coach_name,"onUpdate:modelValue":l[4]||(l[4]=o=>u(e).coach_name=o),placeholder:"\u8BF7\u8F93\u5165\u966A\u7EC3\u8005\u540D\u79F0",class:"w-[380px]"},null,8,["modelValue"])]),_:1}),t(p,{label:"\u966A\u7EC3\u8005\u4EBA\u8BBE",prop:"coach_persona"},{default:a(()=>[t(m,{modelValue:u(e).coach_persona,"onUpdate:modelValue":l[5]||(l[5]=o=>u(e).coach_persona=o),placeholder:"\u8BF7\u8F93\u5165\u966A\u7EC3\u8005\u4EBA\u8BBE",type:"textarea",rows:4,class:"w-[380px]"},null,8,["modelValue"])]),_:1}),t(p,{label:"\u966A\u7EC3\u8005\u60C5\u611F",prop:"coach_emotion"},{default:a(()=>[t(y,{modelValue:u(e).coach_emotion,"onUpdate:modelValue":l[6]||(l[6]=o=>u(e).coach_emotion=o),class:"!w-[380px]",placeholder:"\u8BF7\u9009\u62E9\u966A\u7EC3\u8005\u60C5\u611F"},{default:a(()=>[(n(!0),d(_,null,F(u(A).emotions,o=>(n(),g(C,{key:o.value,label:o.name,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"\u966A\u7EC3\u8005\u60C5\u611F\u6295\u5165\u7A0B\u5EA6",prop:"coach_intensity"},{default:a(()=>[t(y,{modelValue:u(e).coach_intensity,"onUpdate:modelValue":l[7]||(l[7]=o=>u(e).coach_intensity=o),class:"!w-[380px]",placeholder:"\u8BF7\u9009\u62E9\u966A\u7EC3\u8005\u60C5\u611F\u6295\u5165\u7A0B\u5EA6"},{default:a(()=>[(n(!0),d(_,null,F(u($),o=>(n(),g(C,{key:o.value,label:o.name,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"\u966A\u7EC3\u8005\u97F3\u8272",prop:"coach_voice"},{default:a(()=>[t(y,{modelValue:u(e).coach_voice,"onUpdate:modelValue":l[8]||(l[8]=o=>u(e).coach_voice=o),class:"!w-[380px]",placeholder:"\u8BF7\u9009\u62E9\u966A\u7EC3\u8005\u97F3\u8272"},{default:a(()=>[(n(!0),d(_,null,F(u(A).voice,o=>(n(),g(C,{key:o.code,label:o.name,value:o.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"\u7EC3\u4E60\u8005\u626E\u6F14\u4EBA\u8BBE",prop:"practitioner_persona"},{default:a(()=>[t(m,{modelValue:u(e).practitioner_persona,"onUpdate:modelValue":l[9]||(l[9]=o=>u(e).practitioner_persona=o),type:"textarea",rows:4,class:"w-[380px]",placeholder:"\u8BF7\u8F93\u5165\u7EC3\u4E60\u8005\u626E\u6F14\u4EBA\u8BBE"},null,8,["modelValue"])]),_:1}),u(v)?(n(),g(p,{key:2,label:"\u5206\u6790\u62A5\u544A\u914D\u7F6E",prop:"analysis_report_config"},{default:a(()=>[i("div",xe,[i("div",Ue,[(n(!0),d(_,null,F(u(e).analysis_report_config,(o,s)=>(n(),d("div",{key:s,class:"flex items-center gap-4 grow"},[i("div",null,"\u5206\u6790\u8003\u5BDF\u65B9\u5411"+ve(s+1),1),i("div",qe,[t(m,{modelValue:u(e).analysis_report_config[s],"onUpdate:modelValue":c=>u(e).analysis_report_config[s]=c,placeholder:"\u8BF7\u8F93\u5165\u5206\u6790\u8003\u5BDF\u65B9\u5411"},null,8,["modelValue","onUpdate:modelValue"])])]))),128))])])]),_:1})):B("",!0),t(p,{label:"\u573A\u666F\u6392\u5E8F",prop:"sort"},{default:a(()=>[i("div",null,[t(K,{modelValue:u(e).sort,"onUpdate:modelValue":l[10]||(l[10]=o=>u(e).sort=o)},null,8,["modelValue"]),Se])]),_:1}),t(p,{label:"\u72B6\u6001",prop:"sort"},{default:a(()=>[t(Y,{modelValue:u(e).status,"onUpdate:modelValue":l[11]||(l[11]=o=>u(e).status=o),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1})]),t(Q,null,{default:a(()=>[t(f,{type:"primary",loading:u(O),onClick:u(H)},{default:a(()=>[h("\u4FDD\u5B58")]),_:1},8,["loading","onClick"])]),_:1})],64)}}});export{Su as default};

import{Q as q,D as N,C as O,G as S,H as G,w as H,t as I,F as Q}from"./element-plus.e618cff3.js";import{_ as T}from"./picker.587c3436.js";import{l as j,m as M,n as z}from"./draw_sd.3e7451fe.js";import{_ as J}from"./index.81ef9c88.js";import{u as K}from"./useDictOptions.27741f6f.js";import{g as W}from"./index.03099c94.js";import{d as X,s as B,r as c,ai as Y,o as m,c as C,Q as t,H as a,u as l,a as r,P as Z,a5 as $,G as ee,M as w}from"./@vue.fa3e2f74.js";const te={class:"edit-popup"},oe={class:"w-80"},le={class:"flex items-center gap-2 flex-wrap w-80"},ue={class:"w-full"},ae={class:"flex items-center"},se={class:"w-80"},ie=r("div",{class:"form-tips"},"\u9ED8\u8BA4\u4E3A0\uFF0C\u6570\u636E\u8D8A\u5927\u8D8A\u6392\u524D\u9762",-1),ve=X({__name:"edit",emits:["success","close"],setup(ne,{expose:F,emit:g}){const _=g,f=B(),p=B(),d=c("");c([]);const e=c({id:"",pic:"",cid:"",title:"",sort:0,status:"1"}),V={pic:[{required:!0,message:"\u8BF7\u4E0A\u4F20\u6A21\u578B\u56FE\u7247"}],title:[{required:!0,message:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD",trigger:["blur"]}],cid:[{required:!0,message:"\u8BF7\u9009\u62E9\u6240\u5C5E\u7C7B\u76EE",trigger:["blur"]}]},{optionsData:D,refresh:y}=K({categoryList:{api:j,transformData(s){return s.lists}}}),k=async()=>{var s,o;try{await((s=f.value)==null?void 0:s.validate()),e.value.id?await M(e.value):await z(e.value),(o=p.value)==null||o.close(),_("success")}catch(n){return n}},b=()=>{_("close")};return F({open:(s,o)=>{var n;s=="add"?(e.value={id:"",pic:"",cid:"",title:"",sort:0,status:1},d.value="\u65B0\u589E\u5173\u952E\u8BCD"):s=="edit"&&(Object.keys(e.value).map(i=>{e.value[i]=o[i]}),d.value="\u7F16\u8F91\u5173\u952E\u8BCD"),(n=p.value)==null||n.open()}}),(s,o)=>{const n=T,i=N,E=O,h=S,x=G,A=Y("router-link"),v=H,R=q,U=I,L=Q;return m(),C("div",te,[t(J,{ref_key:"popupRef",ref:p,title:l(d),async:!0,width:"550px",onConfirm:k,onClose:b},{default:a(()=>[t(L,{ref_key:"formRef",ref:f,rules:V,model:l(e),"label-width":"100px"},{default:a(()=>[t(i,{label:"\u5C01\u9762",prop:"pic"},{default:a(()=>[t(n,{modelValue:l(e).pic,"onUpdate:modelValue":o[0]||(o[0]=u=>l(e).pic=u),limit:1},null,8,["modelValue"])]),_:1}),t(i,{label:"\u5173\u952E\u8BCD",prop:"title"},{default:a(()=>[r("div",oe,[t(E,{modelValue:l(e).title,"onUpdate:modelValue":o[1]||(o[1]=u=>l(e).title=u),"show-word-limit":"",placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD"},null,8,["modelValue"])])]),_:1}),t(i,{label:"\u6240\u5C5E\u7C7B\u76EE",prop:"cid"},{default:a(()=>[r("div",le,[r("div",ue,[t(x,{class:"!w-full",modelValue:l(e).cid,"onUpdate:modelValue":o[2]||(o[2]=u=>l(e).cid=u),placeholder:"\u8BF7\u9009\u62E9\u6240\u5C5E\u5206\u7C7B"},{default:a(()=>[(m(!0),C(Z,null,$(l(D).categoryList,(u,P)=>(m(),ee(h,{key:P,label:u.title,value:u.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),r("div",ae,[t(v,{type:"primary",link:""},{default:a(()=>[t(A,{to:l(W)("ai_application.draw_sd/prompt_category")},{default:a(()=>[w("\u65B0\u5EFA\u5206\u7C7B")]),_:1},8,["to"])]),_:1}),t(R,{direction:"vertical"}),t(v,{type:"primary",link:"",onClick:l(y)},{default:a(()=>[w(" \u5237\u65B0 ")]),_:1},8,["onClick"])])])]),_:1}),t(i,{label:"\u6392\u5E8F",prop:"sort"},{default:a(()=>[r("div",se,[t(E,{type:"text",modelValue:l(e).sort,"onUpdate:modelValue":o[3]||(o[3]=u=>l(e).sort=u),min:0,max:9999},null,8,["modelValue"]),ie])]),_:1}),t(i,{label:"\u72B6\u6001",prop:"status"},{default:a(()=>[t(U,{modelValue:l(e).status,"onUpdate:modelValue":o[4]||(o[4]=u=>l(e).status=u),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])])}}});export{ve as _};

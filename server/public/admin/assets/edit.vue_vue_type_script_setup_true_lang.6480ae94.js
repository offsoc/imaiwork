import{R as O,S as w,D as Y,C as N,F as U}from"./element-plus.09e738c5.js";import{r as p}from"./index.39a36e30.js";import{_ as I}from"./index.e57d7385.js";import{d as G,s as A,Y as T,b as L,o as _,c as C,P as t,G as a,u as o,a as i,L as E,M as b,F as M,K as S}from"./@vue.b0c8b5fa.js";function te(){return p.get({url:"/setting.storage/lists"})}function P(n){return p.post({url:"/setting.storage/setup",params:n})}function j(n){return p.get({url:"/setting.storage/detail",params:n})}function oe(n){return p.post({url:"/setting.storage/migration",params:n})}const z={class:"edit-popup"},H={class:"form-tips"},J={key:0},Q={class:"flex-1"},W={class:"flex-1"},X=i("div",{class:"form-tips"},"\u8BF7\u8865\u5168http://\u6216https://\uFF0C\u4F8B\u5982https://static.cloud.com",-1),le=G({__name:"edit",emits:["success"],setup(n,{expose:y,emit:D}){const k=D,c=A(),m=A(),u=T({engine:"",bucket:"",access_key:"",secret_key:"",domain:"",region:"",status:0}),V=[{name:"\u672C\u5730\u5B58\u50A8",type:"local",tips:"\u672C\u5730\u5B58\u50A8\u65B9\u5F0F\u4E0D\u9700\u8981\u914D\u7F6E\u5176\u4ED6\u53C2\u6570"},{name:"\u4E03\u725B\u4E91\u5B58\u50A8",type:"qiniu",tips:"\u5207\u6362\u4E03\u725B\u4E91\u5B58\u50A8\u540E\uFF0C\u7D20\u6750\u5E93\u9700\u8981\u91CD\u65B0\u4E0A\u4F20\u81F3\u4E03\u725B\u4E91"},{name:"\u963F\u91CC\u4E91OSS",type:"aliyun",tips:"\u5207\u6362\u963F\u91CC\u4E91OSS\u540E\uFF0C\u7D20\u6750\u5E93\u9700\u8981\u91CD\u65B0\u4E0A\u4F20\u81F3\u963F\u91CC\u4E91OSS"},{name:"\u817E\u8BAF\u4E91OSS",type:"qcloud",tips:"\u5207\u6362\u817E\u8BAF\u4E91OSS\u540E\uFF0C\u7D20\u6750\u5E93\u9700\u8981\u91CD\u65B0\u4E0A\u4F20\u81F3\u817E\u8BAF\u4E91OSS"}],v={bucket:[{required:!0,message:"\u8BF7\u8F93\u5165\u5B58\u50A8\u7A7A\u95F4\u540D\u79F0",trigger:"blur"}],access_key:[{required:!0,message:"\u8BF7\u8F93\u5165ACCESS_KEY",trigger:"blur"}],secret_key:[{required:!0,message:"\u8BF7\u8F93\u5165SECRET_KEY",trigger:"blur"}],domain:[{required:!0,message:"\u8BF7\u8F93\u5165\u7A7A\u95F4\u57DF\u540D",trigger:"blur"}],region:[{required:!0,message:"\u8BF7\u8F93\u5165REGION",trigger:"blur"}]},g=L(()=>V.find(s=>s.type==u.engine)),R=async()=>{var s,e;await((s=c.value)==null?void 0:s.validate()),await P(u),(e=m.value)==null||e.close(),k("success")},h=async()=>{const s=await j({engine:u.engine});for(const e in s)u[e]=s[e]},q=s=>{var e;u.engine=s,(e=m.value)==null||e.open(),h()},x=()=>{var s;(s=c.value)==null||s.resetFields()};return y({open:q}),(s,e)=>{const F=O,f=w,r=Y,d=N,K=U;return _(),C("div",z,[t(I,{ref_key:"popupRef",ref:m,title:"\u8BBE\u7F6E\u5B58\u50A8",async:!0,width:"550px",onConfirm:R,onClose:x},{default:a(()=>[t(K,{ref_key:"formRef",ref:c,model:o(u),"label-width":"120px",rules:v},{default:a(()=>[t(r,{label:"\u5B58\u50A8\u65B9\u5F0F",prop:"engine"},{default:a(()=>{var l;return[i("div",null,[t(f,{"model-value":1},{default:a(()=>[t(F,{value:1},{default:a(()=>{var B;return[E(b((B=o(g))==null?void 0:B.name),1)]}),_:1})]),_:1}),i("div",H,b((l=o(g))==null?void 0:l.tips),1)])]}),_:1}),o(u).engine!=="local"?(_(),C("div",J,[t(r,{label:" \u5B58\u50A8\u7A7A\u95F4\u540D\u79F0",prop:"bucket"},{default:a(()=>[i("div",Q,[t(d,{modelValue:o(u).bucket,"onUpdate:modelValue":e[0]||(e[0]=l=>o(u).bucket=l),placeholder:"\u8BF7\u8F93\u5165\u5B58\u50A8\u7A7A\u95F4\u540D\u79F0(Bucket)",clearable:""},null,8,["modelValue"])])]),_:1}),t(r,{label:"ACCESS_KEY",prop:"access_key"},{default:a(()=>[t(d,{modelValue:o(u).access_key,"onUpdate:modelValue":e[1]||(e[1]=l=>o(u).access_key=l),placeholder:"\u8BF7\u8F93\u5165ACCESS_KEY(AK)",clearable:""},null,8,["modelValue"])]),_:1}),t(r,{label:"SECRET_KEY",prop:"secret_key"},{default:a(()=>[t(d,{modelValue:o(u).secret_key,"onUpdate:modelValue":e[2]||(e[2]=l=>o(u).secret_key=l),placeholder:"\u8BF7\u8F93\u5165SECRET_KEY(SK)",clearable:""},null,8,["modelValue"])]),_:1}),t(r,{label:"\u7A7A\u95F4\u57DF\u540D",prop:"domain"},{default:a(()=>[i("div",W,[i("div",null,[t(d,{modelValue:o(u).domain,"onUpdate:modelValue":e[3]||(e[3]=l=>o(u).domain=l),placeholder:"\u8BF7\u8F93\u5165\u7A7A\u95F4\u57DF\u540D(Domain)",clearable:""},null,8,["modelValue"])]),X])]),_:1}),o(u).engine=="qcloud"?(_(),M(r,{key:0,label:"REGION",prop:"region"},{default:a(()=>[t(d,{modelValue:o(u).region,"onUpdate:modelValue":e[4]||(e[4]=l=>o(u).region=l),placeholder:"\u8BF7\u8F93\u5165region",clearable:""},null,8,["modelValue"])]),_:1})):S("",!0)])):S("",!0),t(r,{label:"\u72B6\u6001",prop:"status"},{default:a(()=>[t(f,{modelValue:o(u).status,"onUpdate:modelValue":e[5]||(e[5]=l=>o(u).status=l)},{default:a(()=>[t(F,{label:0},{default:a(()=>[E("\u5173\u95ED")]),_:1}),t(F,{label:1},{default:a(()=>[E("\u5F00\u542F")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},512)])}}});export{le as _,oe as a,te as s};

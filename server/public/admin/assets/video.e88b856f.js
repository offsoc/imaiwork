import{a4 as ee,L as te,C as ue,D as le,G as oe,H as ae,w as ne,F as ie,J as se,K as re,o as de,I as me,M as pe}from"./element-plus.09e738c5.js";import{_ as _e}from"./index.vue_vue_type_script_setup_true_lang.a9802a4b.js";import{_ as ce}from"./index.vue_vue_type_script_setup_true_lang.0af97da2.js";import{_ as fe}from"./index.vue_vue_type_script_setup_true_lang.5d117949.js";import{d as Fe,ab as ve,b as ye,Y as be,r as C,ap as he,o as i,c as F,a as v,P as t,G as u,u as l,a6 as U,O as w,a5 as Ce,F as d,L as a,H as E,M as p,K as V,v as K}from"./@vue.b0c8b5fa.js";import{c as we,e as ge}from"./record.be1c6641.js";import{u as ke}from"./usePaging.3fa68fd5.js";import{u as Be,C as Ee,f as P}from"./index.39a36e30.js";import"./@vueuse.20a2efa8.js";import"./@element-plus.ca3f8b8b.js";import"./lodash-es.2cd559e9.js";import"./dayjs.33f9e030.js";import"./@vscode.6c9cb547.js";import"./katex.234fd046.js";import"./@popperjs.36402333.js";import"./async-validator.fb49d0f5.js";import"./@ctrl.b082b0c1.js";import"./normalize-wheel-es.8aeb3683.js";import"./vue3-video-play.20b32444.js";import"./lodash.0bb3a698.js";import"./axios.e67d1c3e.js";import"./vue-router.f608815d.js";import"./pinia.173cb91f.js";import"./vue-demi.b3a9cad9.js";import"./css-color-function.9d260b6b.js";import"./color.4290e22e.js";import"./clone.10c3af82.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./debug.35afef70.js";import"./ms.a9ae1d6d.js";import"./nprogress.d9597aae.js";import"./vue-clipboard3.6701dfcc.js";import"./clipboard.a993786e.js";import"./sortablejs.fb59ed0f.js";import"./echarts.8535e5a6.js";import"./zrender.3eba8991.js";import"./tslib.60310f1a.js";import"./highlight.js.4f6161a5.js";import"./@highlightjs.39ed541d.js";const Ve={class:"mb-4 flex justify-between"},Ae={key:0},De={class:"flex justify-end mt-4"},bt=Fe({__name:"video",setup(xe){const $=Be(),{config:I}=ve($),A=ye(()=>{var s;return(s=I.value)==null?void 0:s.digital_human.channel}),L={[1]:"\u6587\u5B57\u9A71\u52A8",[2]:"\u8BED\u97F3\u9A71\u52A8"},r=be({name:"",user:"",start_time:"",end_time:"",model_version:""}),{pager:_,getLists:g,resetPage:k,resetParams:N}=ke({fetchFun:ge,params:r}),D=C(),M=s=>{var o;return(o=A.value.find(h=>h.id==s))==null?void 0:o.name},j=s=>L[s],y=C(!1),x=C(""),z=async s=>{const{result_url:o}=s;if(!o){P.msgError("\u89C6\u9891\u6682\u672A\u751F\u6210");return}y.value=!0,x.value=o},b=C([]),G=s=>{b.value=s},T=async s=>{var o;await P.confirm("\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F"),await we({id:s}),g(),b.value=[],(o=D.value)==null||o.clearSelection()};return g(),(s,o)=>{const h=ue,c=le,H=oe,O=ae,q=fe,f=ne,J=ie,S=se,n=re,Y=de,m=ee,Q=ce,W=_e,X=me,R=he("perms"),Z=pe;return i(),F(w,null,[v("div",null,[t(S,{class:"!border-none",shadow:"never"},{default:u(()=>[t(J,{ref:"formRef",class:"mb-[-16px]",model:l(r),inline:!0},{default:u(()=>[t(c,{label:"\u89C6\u9891\u540D\u79F0"},{default:u(()=>[t(h,{class:"w-[280px]",modelValue:l(r).name,"onUpdate:modelValue":o[0]||(o[0]=e=>l(r).name=e),placeholder:"\u8BF7\u8F93\u5165\u89C6\u9891\u540D\u79F0",clearable:"",onKeyup:U(l(k),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),t(c,{label:"\u7528\u6237\u4FE1\u606F"},{default:u(()=>[t(h,{class:"w-[280px]",modelValue:l(r).user,"onUpdate:modelValue":o[1]||(o[1]=e=>l(r).user=e),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237",clearable:"",onKeyup:U(l(k),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),t(c,{label:"\u4F7F\u7528\u6A21\u578B"},{default:u(()=>[t(O,{modelValue:l(r).model_version,"onUpdate:modelValue":o[2]||(o[2]=e=>l(r).model_version=e),class:"!w-[180px]",placeholder:"\u8BF7\u9009\u62E9\u4F7F\u7528\u6A21\u578B"},{default:u(()=>[(i(!0),F(w,null,Ce(l(A),e=>(i(),d(H,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(c,{label:"\u521B\u4F5C\u65F6\u95F4"},{default:u(()=>[t(q,{startTime:l(r).start_time,"onUpdate:startTime":o[3]||(o[3]=e=>l(r).start_time=e),endTime:l(r).end_time,"onUpdate:endTime":o[4]||(o[4]=e=>l(r).end_time=e)},null,8,["startTime","endTime"])]),_:1}),t(c,null,{default:u(()=>[t(f,{type:"primary",onClick:l(k)},{default:u(()=>[a("\u67E5\u8BE2")]),_:1},8,["onClick"]),t(f,{onClick:l(N)},{default:u(()=>[a("\u91CD\u7F6E")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),t(S,{class:"!border-none mt-4",shadow:"never"},{default:u(()=>[v("div",Ve,[E((i(),d(f,{type:"default",plain:!0,disabled:!l(b).length,onClick:o[5]||(o[5]=e=>T(l(b).map(B=>B.id)))},{default:u(()=>[a(" \u6279\u91CF\u5220\u9664 ")]),_:1},8,["disabled"])),[[R,["dh_record.video/del"]]])]),E((i(),d(l(te),{ref_key:"tableRef",ref:D,size:"large",data:l(_).lists,"row-key":"id",onSelectionChange:G},{default:u(()=>[t(n,{type:"selection",width:"55",fixed:"left","reserve-selection":""}),t(n,{label:"ID",prop:"id","min-width":"60"}),t(n,{label:"\u5934\u50CF","min-width":"100"},{default:u(({row:e})=>[t(Y,{src:e.avatar,size:50},null,8,["src"])]),_:1}),t(n,{label:"\u6635\u79F0",prop:"nickname","min-width":"140","show-overflow-tooltip":""}),t(n,{label:"\u89C6\u9891\u540D\u79F0",prop:"name","min-width":"180","show-overflow-tooltip":""}),t(n,{label:"\u5F62\u8C61\u540D\u79F0",prop:"anchor_name","min-width":"180","show-overflow-tooltip":""}),t(n,{label:"\u667A\u80FD\u526A\u8F91\u7C7B\u578B",width:"120"},{default:u(({row:e})=>[a(p(e.automatic_clip==1?l(Ee)[e.clip_type]:"-"),1)]),_:1}),t(n,{label:"\u4F7F\u7528\u6A21\u578B",width:"120"},{default:u(({row:e})=>[a(p(M(e.model_version)),1)]),_:1}),t(n,{label:"\u4F7F\u7528\u97F3\u8272","min-width":"120",prop:"voice_name","show-overflow-tooltip":""},{default:u(({row:e})=>[a(p(e.voice_name||"\u539F\u89C6\u9891\u58F0\u97F3"),1)]),_:1}),t(n,{label:"\u751F\u6210\u6A21\u5F0F","min-width":"120","show-overflow-tooltip":""},{default:u(({row:e})=>[a(p(j(e.audio_type)),1)]),_:1}),t(n,{label:"\u6D88\u8017\u7B97\u529B","min-width":"120"},{default:u(({row:e})=>[v("div",null,[v("div",null,"\u5408\u6210\uFF1A"+p(e.video_points||0)+"\u7B97\u529B",1),e.automatic_clip==1?(i(),F("div",Ae,"\u526A\u8F91\uFF1A"+p(e.clip_points||0)+"\u7B97\u529B",1)):V("",!0)])]),_:1}),t(n,{label:"\u751F\u6210\u72B6\u6001","min-width":"120"},{default:u(({row:e})=>[e.status==1?(i(),d(m,{key:0,type:"success"},{default:u(()=>[a("\u751F\u6210\u6210\u529F")]),_:1})):e.status==2?(i(),d(m,{key:1,type:"danger"},{default:u(()=>[a("\u751F\u6210\u5931\u8D25")]),_:1})):[0,5].includes(e.status)?(i(),d(m,{key:2,type:"warning"},{default:u(()=>[a("\u751F\u6210\u4E2D")]),_:1})):V("",!0)]),_:1}),t(n,{label:"\u526A\u8F91\u72B6\u6001","min-width":"120"},{default:u(({row:e})=>[e.automatic_clip==1?(i(),F(w,{key:0},[e.clip_status==3?(i(),d(m,{key:0,type:"success"},{default:u(()=>[a("\u526A\u8F91\u6210\u529F")]),_:1})):[0,1,2].includes(e.clip_status)?(i(),d(m,{key:1,type:"warning"},{default:u(()=>[a("\u526A\u8F91\u4E2D")]),_:1})):e.clip_status==4?(i(),d(m,{key:2,type:"danger"},{default:u(()=>[a("\u526A\u8F91\u5931\u8D25")]),_:1})):V("",!0)],64)):(i(),F(w,{key:1},[a(" - ")],64))]),_:1}),t(n,{label:"\u521B\u4F5C\u65F6\u95F4",prop:"create_time","min-width":"180","show-overflow-tooltip":""}),t(n,{label:"\u64CD\u4F5C",width:"120",fixed:"right"},{default:u(({row:e})=>[t(f,{type:"primary",link:"",onClick:B=>z(e)},{default:u(()=>[a(" \u64AD\u653E ")]),_:2},1032,["onClick"]),E((i(),d(f,{type:"danger",link:"",onClick:B=>T([e.id])},{default:u(()=>[a(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[R,["dh_record.video/del"]]])]),_:1})]),_:1},8,["data"])),[[Z,l(_).loading]]),v("div",De,[t(Q,{modelValue:l(_),"onUpdate:modelValue":o[6]||(o[6]=e=>K(_)?_.value=e:null),onChange:l(g)},null,8,["modelValue","onChange"])])]),_:1})]),t(X,{modelValue:l(y),"onUpdate:modelValue":o[7]||(o[7]=e=>K(y)?y.value=e:null),width:"740px",title:"\u89C6\u9891\u9884\u89C8"},{default:u(()=>[t(W,{ref:"playerRef",src:l(x),width:"100%",height:"450px"},null,8,["src"])]),_:1},8,["modelValue"])],64)}}});export{bt as default};

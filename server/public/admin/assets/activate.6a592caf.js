import{_ as N}from"./index.65ae06d1.js";import{X as q,a3 as H,J as I,C as M,D as P,w as U,F as G}from"./element-plus.09e738c5.js";import{_ as J}from"./support.33fd4668.js";import{u as L,H as O,f as T}from"./index.1bd46af0.js";import{f as X}from"./recharge.d14197cb.js";import{d as Y,ab as z,b as K,s as w,Y as C,i as Q,ap as W,o as i,c as Z,a as u,P as o,G as t,u as r,H as $,F as y,L as v,O as ee}from"./@vue.b0c8b5fa.js";import"./@vueuse.20a2efa8.js";import"./@element-plus.ca3f8b8b.js";import"./lodash-es.2cd559e9.js";import"./dayjs.33f9e030.js";import"./@vscode.6c9cb547.js";import"./katex.234fd046.js";import"./@popperjs.36402333.js";import"./async-validator.fb49d0f5.js";import"./@ctrl.b082b0c1.js";import"./normalize-wheel-es.8aeb3683.js";import"./lodash.0bb3a698.js";import"./axios.e67d1c3e.js";import"./vue-router.f608815d.js";import"./pinia.173cb91f.js";import"./vue-demi.b3a9cad9.js";import"./css-color-function.9d260b6b.js";import"./color.4290e22e.js";import"./clone.10c3af82.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./debug.35afef70.js";import"./ms.a9ae1d6d.js";import"./nprogress.d9597aae.js";import"./vue-clipboard3.6701dfcc.js";import"./clipboard.a993786e.js";import"./sortablejs.fb59ed0f.js";import"./echarts.8535e5a6.js";import"./zrender.3eba8991.js";import"./tslib.60310f1a.js";import"./highlight.js.4f6161a5.js";import"./@highlightjs.39ed541d.js";const te=u("div",{class:"text-sm"}," \u6CE8\u610F\uFF1A\u8BF7\u59A5\u5584\u4FDD\u7BA1\u6388\u6743\u4FE1\u606F\uFF0C\u540E\u671F\u9700\u66F4\u6362\u6388\u6743\u8D26\u53F7\uFF0C\u53EA\u4FEE\u6539\u8D26\u53F7\u5373\u53EF\uFF0C\u6388\u6743\u5BC6\u7801\u4E0D\u4F1A\u4FEE\u6539\uFF01 ",-1),oe=u("div",{class:"text-xl font-medium mb-[20px]"},"\u914D\u7F6E\u4FE1\u606F",-1),ue={class:"flex justify-between"},ae=u("div",{class:"text-xl font-medium"},"\u81EA\u5B9A\u4E49\u6807\u8BC6",-1),re=u("div",{class:"flex justify-center items-center"},[u("img",{class:"w-[150px] h-[150px]",src:J})],-1),Xe=Y({__name:"activate",setup(se){const n=L(),{config:p}=z(n),E=K(()=>{const{model_key:e}=p.value;return e}),l=w(),s=C({cdkey:"",project_key:""}),B={cdkey:[{required:!0,message:"\u8BF7\u8F93\u5165\u6388\u6743\u8D26\u53F7"}]},c=w(),m=C({byname:p.value.by_name}),g={byname:[{required:!0,message:"\u8BF7\u8F93\u5165\u6280\u672F\u6807\u8BC6"}]},x=()=>{var e;(e=c.value)==null||e.open()},D=async()=>{var e,a;await((e=l.value)==null?void 0:e.validate());try{await O(m),n.getConfig(),(a=c.value)==null||a.close()}catch(d){T.msgError(d)}},A=()=>{var e,a;s.cdkey=((e=E.value)==null?void 0:e.api_key)||"",s.project_key=((a=E.value)==null?void 0:a.project_key)||""},V=async()=>{var e;await((e=l.value)==null?void 0:e.validate()),await X(s),n.getConfig()};return Q(async()=>{await n.getConfig(),A()}),(e,a)=>{const d=q,_=I,b=M,h=P,f=U,R=H,k=G,j=N,S=W("perms");return i(),Z(ee,null,[u("div",null,[o(_,{class:"!border-none mb-4",shadow:"never"},{default:t(()=>[o(d,{type:"warning","show-icon":"",closable:!1},{default:t(()=>[te]),_:1})]),_:1}),o(k,{model:r(s),rules:B,ref_key:"formRef",ref:l,"label-width":"100px"},{default:t(()=>[o(_,{class:"mb-4 !border-none",shadow:"never"},{default:t(()=>[u("div",null,[oe,u("div",null,[o(h,{label:"\u6388\u6743\u8D26\u53F7",prop:"cdkey"},{default:t(()=>[u("div",null,[o(b,{modelValue:r(s).cdkey,"onUpdate:modelValue":a[0]||(a[0]=F=>r(s).cdkey=F),class:"w-[380px]"},null,8,["modelValue"])])]),_:1})]),$((i(),y(f,{type:"primary",onClick:V},{default:t(()=>[v("\u4FDD\u5B58")]),_:1})),[[S,["setting.activate/setConfig"]]])])]),_:1}),o(_,{class:"mb-4 !border-none",shadow:"never"},{default:t(()=>[u("div",ue,[ae,u("div",null,[r(p).is_auth_by==1?(i(),y(f,{key:0,type:"primary",onClick:x},{default:t(()=>[v("\u4FEE\u6539\u7248\u6743\u4FE1\u606F")]),_:1})):(i(),y(R,{key:1,width:"200"},{reference:t(()=>[o(f,{type:"primary"},{default:t(()=>[v("\u8054\u7CFB\u5BA2\u670D\u81EA\u5B9A\u4E49\u6807\u8BC6")]),_:1})]),default:t(()=>[re]),_:1}))])])]),_:1})]),_:1},8,["model"])]),o(j,{ref_key:"popupRef",ref:c,title:"\u7248\u6743\u4FE1\u606F\u4FEE\u6539",width:"500px",async:"",onConfirm:D},{default:t(()=>[u("div",null,[o(k,{model:r(m),rules:g,ref_key:"formRef",ref:l,"label-width":"100px"},{default:t(()=>[o(h,{label:"\u6280\u672F\u6807\u8BC6",prop:"byname"},{default:t(()=>[o(b,{modelValue:r(m).byname,"onUpdate:modelValue":a[1]||(a[1]=F=>r(m).byname=F),class:"w-[380px]"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1},512)],64)}}});export{Xe as default};

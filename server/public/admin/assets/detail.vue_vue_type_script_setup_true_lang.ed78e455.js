import{a4 as S,D as U,G,H,w as M,F as O,K as $,L as j,M as q}from"./element-plus.e618cff3.js";import{_ as z}from"./index.vue_vue_type_script_setup_true_lang.2d767870.js";import{_ as K}from"./index.vue_vue_type_script_setup_true_lang.f895f497.js";import{_ as Q}from"./index.81ef9c88.js";import{c as x,a as Y}from"./redeem_code.bb633b22.js";import{u as J}from"./usePaging.74092dd4.js";import{d as W,s as y,r as X,Y as Z,o as m,c as ee,Q as e,H as t,a as p,M as u,O as _,u as a,I as te,G as g,v as ae}from"./@vue.fa3e2f74.js";const le={class:"edit-popup"},ue={class:"flex flex-wrap"},se={class:"flex justify-end mt-4"},Fe=W({__name:"detail",emits:["success","close"],setup(oe,{expose:C,emit:B}){const v=B,E=y(),f=y(),n=X({id:"",sn:"",type:3,card_num:"",valid_start_time:"",valid_end_time:"",create_time:"",remark:"",type_desc:"",content:"",valid_time_desc:"",use_num:0,unused_num:0}),i=Z({id:"",status:""}),{pager:c,getLists:F,resetPage:D,resetParams:ne}=J({fetchFun:x,params:i}),k=async s=>{try{const l=await Y({id:s});n.value=l}catch(l){console.log("\u83B7\u53D6\u4F7F\u7528\u8BE6\u60C5=>",l)}},V=async()=>{var s;try{(s=f.value)==null||s.close(),v("success")}catch(l){return l}},R=()=>{v("close")};return C({open:s=>{var l;i.id=s,(l=f.value)==null||l.open(),k(s),F()}}),(s,l)=>{const o=U,b=G,A=H,h=M,L=K,P=O,d=$,w=S,T=j,I=z,N=q;return m(),ee("div",le,[e(Q,{ref_key:"popupRef",ref:f,title:"\u4F7F\u7528\u8BE6\u60C5",async:!0,width:"920px",onConfirm:V,onClose:R},{default:t(()=>[p("div",ue,[e(o,{"label-width":"90px",label:"\u6279\u6B21\u7F16\u53F7:"},{default:t(()=>[u(_(a(n).sn),1)]),_:1}),e(o,{"label-width":"90px",label:"\u5361\u5BC6\u9762\u989D:"},{default:t(()=>[u(_(a(n).content),1)]),_:1}),e(o,{"label-width":"90px",label:"\u751F\u6548\u65F6\u95F4:"},{default:t(()=>[u(_(a(n).valid_time_desc),1)]),_:1}),e(o,{"label-width":"90px",label:"\u751F\u6210\u6570\u91CF:"},{default:t(()=>[u(_(a(n).card_num),1)]),_:1}),e(o,{"label-width":"90px",label:"\u5DF2\u4F7F\u7528:"},{default:t(()=>[u(_(a(n).use_num),1)]),_:1}),e(o,{"label-width":"120px",label:"\u672A\u4F7F\u7528:"},{default:t(()=>[u(_(a(n).unused_num),1)]),_:1})]),p("div",null,[e(P,{ref_key:"formRef",ref:E,class:"mt-4",model:a(i),inline:!0},{default:t(()=>[e(o,{label:"\u4F7F\u7528\u72B6\u6001"},{default:t(()=>[e(A,{modelValue:a(i).status,"onUpdate:modelValue":l[0]||(l[0]=r=>a(i).status=r),class:"!w-[120px]"},{default:t(()=>[e(b,{label:"\u5168\u90E8",value:""}),e(b,{label:"\u672A\u4F7F\u7528",value:0}),e(b,{label:"\u5DF2\u4F7F\u7528",value:1})]),_:1},8,["modelValue"])]),_:1}),e(o,null,{default:t(()=>[e(h,{type:"primary",onClick:a(D)},{default:t(()=>[u("\u67E5\u8BE2")]),_:1},8,["onClick"]),e(h,{onClick:l[1]||(l[1]=()=>{a(i).status="",a(F)()})},{default:t(()=>[u("\u91CD\u7F6E")]),_:1}),e(L,{class:"ml-[12px]",params:a(i),fetchFun:a(x)},{default:t(()=>[e(h,null,{default:t(()=>[u(" \u5BFC\u51FA ")]),_:1})]),_:1},8,["params","fetchFun"])]),_:1})]),_:1},8,["model"]),p("div",null,[te((m(),g(T,{size:"large",height:"400px",data:a(c).lists},{default:t(()=>[e(d,{label:"ID",prop:"id","min-width":"60"}),e(d,{label:"\u5361\u5BC6\u7F16\u53F7",prop:"record_sn","min-width":"140"}),e(d,{label:"\u72B6\u6001","min-width":"120"},{default:t(({row:r})=>[r.status?(m(),g(w,{key:0,type:"success"},{default:t(()=>[u("\u5DF2\u4F7F\u7528")]),_:1})):(m(),g(w,{key:1,type:"warning"},{default:t(()=>[u("\u672A\u4F7F\u7528")]),_:1}))]),_:1}),e(d,{label:"\u4F7F\u7528\u4EBA",prop:"nickname","min-width":"140"}),e(d,{label:"\u4F7F\u7528\u65F6\u95F4",prop:"use_time","min-width":"150"})]),_:1},8,["data"])),[[N,a(c).loading]]),p("div",se,[e(I,{modelValue:a(c),"onUpdate:modelValue":l[2]||(l[2]=r=>ae(c)?c.value=r:null),onChange:a(F)},null,8,["modelValue","onChange"])])])])]),_:1},512)])}}});export{Fe as _};

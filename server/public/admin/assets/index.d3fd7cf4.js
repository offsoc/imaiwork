import{Q as X,T as Y,R as Z,S as uu,G as z,H as S,D as eu,a as lu,v as tu,t as ou,C as su,F as au,E as nu}from"./element-plus.b694a2f4.js";import{u as iu,K as c,_ as du,b as mu}from"./index.f10dd425.js";import{k as ru,a as pu}from"./lists.63315472.js";import{d as _u,b as I,r as T,o as m,c as F,a as l,Q as t,H as s,u as e,M as d,P as A,a5 as x,G as E,O as v,L as V,bj as cu,bi as Fu}from"./@vue.fa3e2f74.js";import"./@vueuse.57305db2.js";import"./@element-plus.8edeb311.js";import"./lodash-es.72862127.js";import"./dayjs.0a835391.js";import"./@vscode.4616c7ee.js";import"./katex.42c635ec.js";import"./@popperjs.36402333.js";import"./@ctrl.b082b0c1.js";import"./async-validator.fb49d0f5.js";import"./normalize-wheel-es.8aeb3683.js";import"./lodash.a609e612.js";import"./axios.ddddcbae.js";import"./vue-router.24cf2b30.js";import"./pinia.d2a105b3.js";import"./vue-demi.b3a9cad9.js";import"./css-color-function.6fe488a5.js";import"./color.eb90fb33.js";import"./clone.81074570.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./debug.e2d654ba.js";import"./ms.a9ae1d6d.js";import"./nprogress.430b6dc1.js";import"./vue-clipboard3.2f1d7104.js";import"./clipboard.7e043bc1.js";import"./sortablejs.f3bfd0ca.js";import"./echarts.8535e5a6.js";import"./zrender.3eba8991.js";import"./tslib.60310f1a.js";import"./highlight.js.4f6161a5.js";import"./@highlightjs.fc60ff58.js";const n=_=>(cu("data-v-9fc6c66a"),_=_(),Fu(),_),Eu={class:"h-full flex flex-col py-6"},Cu={class:"grow min-h-0"},Bu={class:"px-[30px]"},Du={class:"flex items-center"},fu={class:"ml-1 cursor-pointer"},Au=n(()=>l("p",null,"\u8BE5\u53C2\u6570\u8868\u793A\u5355\u6B21\u6587\u6863\u4ECE\u77E5\u8BC6\u5E93\u68C0\u7D22\u6700\u5927\u7684Tokens\u6570\u91CF",-1)),vu=n(()=>l("p",null,"\u8BF4\u660E: \u5F15\u7528\u8D8A\u591A\u610F\u5473\u7740\u6240\u9700\u6D88\u8017\u7684token\u8D8A\u591A",-1)),Vu=n(()=>l("p",null,"\u6CE8\u610F: \u5207\u8BB0\u4E0D\u8981\u8D85\u51FA\u6A21\u578B\u7684\u6700\u5927token\u9650\u5236",-1)),hu={class:"flex items-center w-full gap-x-4"},bu={class:"flex-1"},xu=n(()=>l("span",null,"tokens",-1)),ku={class:"mt-4"},gu={class:"flex items-center"},yu={class:"ml-1 cursor-pointer"},wu=n(()=>l("p",null,"\u8BED\u4E49\u68C0\u7D22: \u91C7\u7528\u5411\u91CF\u5316\u6A21\u578B\u8FDB\u884C\u5411\u91CF\u68C0\u7D22",-1)),Uu=n(()=>l("p",null,"\u5168\u6587\u68C0\u7D22: \u4F7F\u7528\u4F20\u7EDF\u7684\u6570\u636E\u5E93\u68C0\u7D22\u65B9\u5F0F\u68C0\u7D22",-1)),Ru=n(()=>l("p",null,"\u6DF7\u5408\u68C0\u7D22: \u8BED\u4E49\u68C0\u7D22+\u5168\u6587\u68C0\u7D22,\u5177\u6709\u66F4\u597D\u7684\u6548\u679C,\u5EFA\u8BAE\u642D\u914D\u91CD\u6392\u6A21\u578B\u4F7F\u7528\u3002",-1)),zu=n(()=>l("p",null," \u6CE8\u610F: \u5F53\u60A8\u4F7F\u7528\u5168\u6587\u6216\u6DF7\u5408\u68C0\u7D22\u65F6\uFF0C\u662F\u6CA1\u6709\u8BED\u4E49\u76F8\u4F3C\u5EA6\u7684\uFF0C\u5EFA\u8BAE\u60A8\u5F00\u542F\u91CD\u6392\u6A21\u578B ",-1)),Su={class:"flex items-center"},Iu={class:"ml-1 cursor-pointer"},Tu=n(()=>l("p",null,"\u4E0A\u4E0B\u6587\u8BB0\u5FC6\u529F\u80FD\uFF0C\u5BF9\u8BDD\u65F6\u8BA9\u5927\u6A21\u578B\u77E5\u9053\u60A8\u524D N\u6B21 \u7684\u5BF9\u8BDD\u3002",-1)),qu={class:"flex items-center w-full gap-x-4"},Ou={class:"flex-1"},Ku={class:"flex items-center"},Nu={class:"ml-1 cursor-pointer"},Lu=n(()=>l("p",null,"\u8BED\u4E49\u68C0\u7D22\u7684\u7CBE\u5EA6\uFF0C\u63D0\u95EE\u68C0\u7D22\u7684\u5185\u5BB9\u9700\u8981\u8FBE\u5230\u8BE5\u7CBE\u5EA6\u624D\u4F1A\u88AB\u5F15\u7528",-1)),Gu=n(()=>l("ol",{class:"list-decimal pl-4"},[l("li",null," \u9AD8\u8BED\u4E49\u76F8\u4F3C\u5EA6(>=0.8): \u4F1A\u68C0\u7D22\u76F8\u5173\u6027\u9AD8\u7684\u77E5\u8BC6\uFF0C\u4F1A\u66F4\u51C6\u786E\uFF0C\u540C\u65F6\u4E5F\u5BB9\u6613\u672A\u547D\u4E2D\u3002 "),l("li",null," \u4F4E\u8BED\u4E49\u76F8\u4F3C\u5EA6(\u59820.4): \u68C0\u7D22\u8303\u56F4\u66F4\u5927\uFF0C\u66F4\u5BB9\u6613\u5339\u914D\u77E5\u8BC6\uFF0C\u4F46\u53EF\u80FD\u56DE\u7B54\u4F1A\u4E0D\u51C6\u786E\u3002 "),l("li",null," \u4E0D\u540C\u7684\u5411\u91CF\u6A21\u578B\u68C0\u7D22\u76F8\u4F3C\u5EA6\u4E0D\u4E00\u6837\uFF0C\u5177\u4F53\u60C5\u51B5\u5230 \u300E\u77E5\u8BC6\u5E93 - \u641C\u7D22\u6D4B\u8BD5\u300F\u8FDB\u884C\u8C03\u8BD5\u3002 "),l("li",null," \u5982\u679C\u60A8\u4F7F\u7528\u7684\u662F\u300E\u5168\u6587\u68C0\u7D22/\u6DF7\u5408\u68C0\u7D22\u300F\u8FD9\u4E2A\u503C\u5219\u4E0D\u4F1A\u751F\u6548\uFF0C\u4EC5\u5BF9\u8BED\u4E49\u68C0\u7D22\u6709\u6548\u3002 ")],-1)),ju={class:"flex items-center w-full gap-x-4"},Hu={class:"flex-1"},Mu={class:"mt-4"},Pu={class:"flex justify-between w-full gap-x-4"},Qu=n(()=>l("div",{class:"form-tips"}," \u5F00\u542F\u540E\uFF0C\u5219\u4F1A\u5BF9\u4ECE\u6570\u636E\u5E93\u68C0\u7D22\u7684\u5185\u5BB9\u8FDB\u884C\u91CD\u65B0\u6392\u5E8F(\u53D6\u5206\u6570\u6700\u9AD8\u7684N\u6761\u6570\u636E\u4F5C\u4E3A\u5F15\u7528) ",-1)),$u={class:"flex items-center w-full gap-x-4"},Ju={class:"flex-1"},Wu=n(()=>l("div",{class:"form-tips"},"\u8868\u793A\u5982\u679C\u6570\u636E\u91CD\u6392\u540E\uFF0C\u5206\u6570\u6CA1\u6709\u8FBE\u5230\u8BE5\u503C\u5219\u4F1A\u8FC7\u6EE4\u6389\u3002",-1)),Xu={class:"mt-4"},Yu={class:"flex justify-between w-full gap-x-4"},Zu=n(()=>l("div",{class:"form-tips"}," \u7EFC\u5408\u5386\u53F2\u8BB0\u5F55\u548C\u95EE\u9898, \u591A\u7EF4\u5EA6\u7684\u751F\u6210\u76F8\u4F3C\u95EE\u9898, \u53EF\u589E\u52A0\u77E5\u8BC6\u5E93\u68C0\u7D22\u65F6\u7684\u7CBE\u51C6\u5EA6\u3002 ",-1)),ue=n(()=>l("div",{class:"form-tips"},"\u5F53\u77E5\u8BC6\u5E93\u68C0\u7D22\u4E3A\u7A7A\u65F6\u5019\u5982\u4F55\u8FDB\u884C\u56DE\u590D",-1)),ee=_u({__name:"index",props:{modelValue:{default:()=>({})}},emits:["success","close","update:modelValue"],setup(_,{expose:q,emit:O}){const K=_,N=O,L=iu(),G=I(()=>{var r;return((r=L.config.ai_model)==null?void 0:r.channel)||[]}),k=T(),o=I({get(){return K.modelValue},set(r){N("update:modelValue",r)}}),j={kb_type:[{required:!0,message:"\u8BF7\u9009\u62E9\u77E5\u8BC6\u5E93\u7C7B\u578B"}],kb_ids:[{required:!0,message:"\u8BF7\u9009\u62E9\u6302\u9760\u77E5\u8BC6\u5E93"}],search_mode:[{required:!0,message:"\u8BF7\u9009\u62E9\u641C\u7D22\u6A21\u5F0F"}],search_similar:[{required:!0,message:"\u8BF7\u8F93\u5165\u6700\u4F4E\u76F8\u4F3C\u5EA6"}],ranking_status:[{required:!0,message:"\u8BF7\u9009\u62E9\u91CD\u6392\u5F00\u5173"}],ranking_score:[{required:!0,message:"\u8BF7\u8F93\u5165\u91CD\u6392\u5206\u6570"}],optimize_ask:[{required:!0,message:"\u8BF7\u9009\u62E9\u4F18\u5316\u5F00\u5173"}],optimize_m_id:[{required:!0,message:"\u8BF7\u9009\u62E9\u4F18\u5316\u6A21\u578B"}]},H=[{label:"\u6DF7\u5408\u68C0\u7D22",value:"mix"},{label:"\u8BED\u4E49\u68C0\u7D22",value:"similar"},{label:"\u5168\u6587\u68C0\u7D22",value:"full"}],g=T([]),M=async r=>{const a=o.value.kb_type==c.VECTOR?ru:pu,{lists:p}=await a({page_size:25e3,name:r});g.value=p||[]},y=()=>{o.value.kb_ids=[]};return q({validate:()=>new Promise((r,a)=>{var p;return(p=k.value)==null?void 0:p.validate().then(r).catch(a)})}),(r,a)=>{const p=X,h=z,P=S,i=eu,w=z,b=S,C=du,B=lu,D=Y,f=tu,U=ou,R=Z,Q=uu,$=su,J=au,W=nu;return m(),F("div",Eu,[l("div",Cu,[t(W,null,{default:s(()=>[l("div",Bu,[t(J,{model:e(o),rules:j,ref_key:"formRef",ref:k,"label-position":"top"},{default:s(()=>[t(p,{"content-position":"left"},{default:s(()=>[d("\u57FA\u7840\u8BBE\u7F6E")]),_:1}),t(i,{label:"\u77E5\u8BC6\u5E93\u7C7B\u578B",prop:"kb_type"},{default:s(()=>[t(P,{modelValue:e(o).kb_type,"onUpdate:modelValue":a[0]||(a[0]=u=>e(o).kb_type=u),class:"!h-11 !w-[390px]",placeholder:"\u8BF7\u9009\u62E9\u77E5\u8BC6\u5E93\u7C7B\u578B",onChange:y},{default:s(()=>[t(h,{label:"\u5411\u91CF\u77E5\u8BC6\u5E93",value:e(c).VECTOR},null,8,["value"]),t(h,{label:"RAG\u77E5\u8BC6\u5E93",value:e(c).RAG},null,8,["value"])]),_:1},8,["modelValue"])]),_:1}),t(i,{label:"\u6302\u9760\u77E5\u8BC6\u5E93",prop:"kb_ids"},{default:s(()=>[t(b,{modelValue:e(o).kb_ids,"onUpdate:modelValue":a[1]||(a[1]=u=>e(o).kb_ids=u),class:"!h-11 !w-[390px]",clearable:"",placeholder:"\u8BF7\u9009\u62E9\u6302\u9760\u77E5\u8BC6\u5E93",remote:"",filterable:"",multiple:e(o).kb_type==e(c).VECTOR,"remote-method":M},{default:s(()=>[(m(!0),F(A,null,x(e(g),u=>(m(),E(w,{key:u.id,label:u.name,value:u.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","multiple"])]),_:1}),t(i,{label:"\u5F15\u7528\u4E0A\u9650",prop:"search_tokens"},{label:s(({label:u})=>[l("span",Du,[d(v(u)+" ",1),t(B,{placement:"top"},{content:s(()=>[Au,vu,Vu]),default:s(()=>[l("span",fu,[t(C,{name:"local-icon-privacy",color:"#00000080"})])]),_:1})])]),default:s(()=>[l("div",hu,[l("div",bu,[t(D,{modelValue:e(o).search_tokens,"onUpdate:modelValue":a[2]||(a[2]=u=>e(o).search_tokens=u),min:100,max:2e4},null,8,["modelValue"])]),t(f,{modelValue:e(o).search_tokens,"onUpdate:modelValue":a[3]||(a[3]=u=>e(o).search_tokens=u),"controls-position":"right",min:100,max:2e4},{suffix:s(()=>[xu]),_:1},8,["modelValue"])])]),_:1}),e(o).kb_type==e(c).VECTOR?(m(),F(A,{key:0},[l("div",ku,[t(p,{"content-position":"left"},{default:s(()=>[d("\u53EC\u56DE\u8BBE\u7F6E")]),_:1})]),t(i,{label:"\u68C0\u7D22\u6A21\u5F0F"},{label:s(({label:u})=>[l("span",gu,[d(v(u)+" ",1),t(B,{placement:"top"},{content:s(()=>[wu,Uu,Ru,zu]),default:s(()=>[l("span",yu,[t(C,{name:"local-icon-privacy",color:"#00000080"})])]),_:1})])]),default:s(()=>[t(b,{class:"!h-11 !w-[390px]",modelValue:e(o).search_mode,"onUpdate:modelValue":a[4]||(a[4]=u=>e(o).search_mode=u),placeholder:"\u8BF7\u9009\u62E9\u641C\u7D22\u6A21\u5F0F"},{default:s(()=>[(m(),F(A,null,x(H,u=>t(w,{key:u.value,label:u.label,value:u.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),t(i,{label:"\u5F15\u7528\u4E0A\u4E0B\u6587",prop:"context_num"},{label:s(({label:u})=>[l("span",Su,[d(v(u)+" ",1),t(B,{placement:"top"},{content:s(()=>[Tu]),default:s(()=>[l("span",Iu,[t(C,{name:"local-icon-privacy",color:"#00000080"})])]),_:1})])]),default:s(()=>[l("div",qu,[l("div",Ou,[t(D,{modelValue:e(o).context_num,"onUpdate:modelValue":a[5]||(a[5]=u=>e(o).context_num=u),min:0,max:8,step:1},null,8,["modelValue"])]),t(f,{modelValue:e(o).context_num,"onUpdate:modelValue":a[6]||(a[6]=u=>e(o).context_num=u),"controls-position":"right",min:0,max:8},{suffix:s(()=>[d("\u6761")]),_:1},8,["modelValue"])])]),_:1}),t(i,{label:"\u6700\u4F4E\u76F8\u4F3C\u5EA6"},{label:s(({label:u})=>[l("span",Ku,[d(v(u)+" ",1),t(B,{placement:"top"},{content:s(()=>[Lu,Gu]),default:s(()=>[l("span",Nu,[t(C,{name:"local-icon-privacy",color:"#00000080"})])]),_:1})])]),default:s(()=>[l("div",ju,[l("div",Hu,[t(D,{modelValue:e(o).search_similar,"onUpdate:modelValue":a[7]||(a[7]=u=>e(o).search_similar=u),size:"small",disabled:e(o).search_mode!=="similar",min:0,max:1,step:.001},null,8,["modelValue","disabled"])]),t(f,{modelValue:e(o).search_similar,"onUpdate:modelValue":a[8]||(a[8]=u=>e(o).search_similar=u),disabled:e(o).search_mode!=="similar","controls-position":"right",min:0,max:1,step:.001},null,8,["modelValue","disabled"])])]),_:1}),l("div",Mu,[t(p,{"content-position":"left"},{default:s(()=>[d("\u91CD\u6392\u8BBE\u7F6E")]),_:1})]),l("div",null,[t(i,{label:"\u91CD\u6392\u5F00\u5173"},{default:s(()=>[l("div",Pu,[Qu,t(U,{modelValue:e(o).ranking_status,"onUpdate:modelValue":a[9]||(a[9]=u=>e(o).ranking_status=u),"active-value":1,"inactive-value":0},null,8,["modelValue"])])]),_:1}),e(o).ranking_status===1?(m(),E(i,{key:0,label:"\u91CD\u6392\u5206\u6570"},{default:s(()=>[l("div",$u,[l("div",Ju,[t(D,{modelValue:e(o).ranking_score,"onUpdate:modelValue":a[10]||(a[10]=u=>e(o).ranking_score=u),size:"small",min:0,max:1,step:.001},null,8,["modelValue"])]),t(f,{modelValue:e(o).ranking_score,"onUpdate:modelValue":a[11]||(a[11]=u=>e(o).ranking_score=u),"controls-position":"right",min:0,max:1,step:.001},null,8,["modelValue"])]),Wu]),_:1})):V("",!0)]),l("div",Xu,[t(p,{"content-position":"left"},{default:s(()=>[d("\u95EE\u9898\u4F18\u5316")]),_:1})]),l("div",null,[t(i,{label:"\u4F18\u5316\u5F00\u5173"},{default:s(()=>[l("div",Yu,[Zu,t(U,{modelValue:e(o).optimize_ask,"onUpdate:modelValue":a[12]||(a[12]=u=>e(o).optimize_ask=u),"active-value":1,"inactive-value":0},null,8,["modelValue"])])]),_:1}),e(o).optimize_ask==1?(m(),E(i,{key:0,label:"\u4F18\u5316\u6A21\u578B",prop:"optimize_m_id"},{default:s(()=>[t(b,{modelValue:e(o).optimize_m_id,"onUpdate:modelValue":a[13]||(a[13]=u=>e(o).optimize_m_id=u),class:"!h-11 !w-[390px]",placeholder:"\u8BF7\u9009\u62E9\u4F18\u5316\u6A21\u578B",onChange:y},{default:s(()=>[(m(!0),F(A,null,x(e(G),u=>(m(),E(h,{key:u.id,label:u.name,value:parseInt(u.id)},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):V("",!0)]),t(i,{label:"\u7A7A\u641C\u7D22\u56DE\u590D"},{default:s(()=>[l("div",null,[l("div",null,[t(Q,{modelValue:e(o).search_empty_type,"onUpdate:modelValue":a[14]||(a[14]=u=>e(o).search_empty_type=u)},{default:s(()=>[t(R,{value:1},{default:s(()=>[d(" AI\u56DE\u590D")]),_:1}),t(R,{value:2},{default:s(()=>[d(" \u81EA\u5B9A\u4E49\u56DE\u590D")]),_:1})]),_:1},8,["modelValue"])]),ue])]),_:1}),e(o).search_empty_type===2?(m(),E(i,{key:0},{default:s(()=>[t($,{modelValue:e(o).search_empty_text,"onUpdate:modelValue":a[15]||(a[15]=u=>e(o).search_empty_text=u),placeholder:"\u8BF7\u8F93\u5165\u56DE\u590D\u5185\u5BB9\uFF0C\u5F53\u641C\u7D22\u5339\u914D\u4E0D\u4E0A\u5185\u5BB9\u65F6\uFF0C\u76F4\u63A5\u56DE\u590D\u586B\u5199\u7684\u5185\u5BB9",type:"textarea",autosize:{minRows:6,maxRows:6},maxlength:1e3,"show-word-limit":"",resize:"none"},null,8,["modelValue"])]),_:1})):V("",!0)],64)):V("",!0)]),_:1},8,["model"])])]),_:1})])])}}});const Ke=mu(ee,[["__scopeId","data-v-9fc6c66a"]]);export{Ke as default};

import{x as Z,y as j,C as q,D as M,w as W,F as H,J,K as Q,L as S,M as Y}from"./element-plus.e618cff3.js";import{_ as X}from"./index.vue_vue_type_script_setup_true_lang.2d767870.js";import{f as ee,h as te}from"./index.03099c94.js";import{_ as ae}from"./index.vue_vue_type_script_setup_true_lang.b9a0ee41.js";import{d as oe,r as F,Y as le,aq as ne,o as m,c as ie,a as g,Q as t,H as l,u as a,a6 as D,M as p,v as B,I as V,G as c,L as y,O as w,P as re,n as se}from"./@vue.fa3e2f74.js";import{u as ue}from"./usePaging.74092dd4.js";import{i as me,j as pe}from"./index.f708c426.js";import{e as de,f as ce}from"./coze.005f5805.js";import{_ as _e}from"./reply-pop.vue_vue_type_script_setup_true_lang.46cf5314.js";import{A as u}from"./enums.fbb460c1.js";import"./@vueuse.57305db2.js";import"./@element-plus.8edeb311.js";import"./lodash-es.72862127.js";import"./dayjs.33f9e030.js";import"./@vscode.6c9cb547.js";import"./katex.234fd046.js";import"./@popperjs.36402333.js";import"./@ctrl.b082b0c1.js";import"./async-validator.fb49d0f5.js";import"./normalize-wheel-es.8aeb3683.js";import"./lodash.0bb3a698.js";import"./axios.e67d1c3e.js";import"./vue-router.24cf2b30.js";import"./pinia.d2a105b3.js";import"./vue-demi.b3a9cad9.js";import"./css-color-function.9d260b6b.js";import"./color.4290e22e.js";import"./clone.10c3af82.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./debug.35afef70.js";import"./ms.a9ae1d6d.js";import"./nprogress.d9597aae.js";import"./vue-clipboard3.6701dfcc.js";import"./clipboard.a993786e.js";import"./sortablejs.fb59ed0f.js";import"./echarts.8535e5a6.js";import"./zrender.3eba8991.js";import"./tslib.60310f1a.js";import"./highlight.js.4f6161a5.js";import"./@highlightjs.fc60ff58.js";import"./index.vue_vue_type_style_index_0_lang.08f0d96e.js";import"./markdown-it.255c515f.js";import"./entities.c5b8564c.js";import"./uc.micro.5b97656f.js";import"./mdurl.bc8d6f75.js";import"./linkify-it.11d25e6c.js";import"./punycode.d0023b24.js";/* empty css                            */import"./index.81ef9c88.js";const fe={class:"mb-4"},ve={class:"flex items-center"},ge={class:"flex justify-end mt-4"},gt=oe({__name:"index",setup(Ce){const r=F(u.AGENT),i=le({user:"",message:"",start_date:"",end_date:""}),{pager:d,getLists:_,resetPage:C,resetParams:x}=ue({fetchFun:n=>r.value===u.AGENT?pe(n):ce({...n,type:r.value}),params:i}),A=n=>{r.value=n.paneName,_()},N=async n=>{await ee.confirm("\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F"),r.value===u.AGENT?await me({id:n.id}):await de({id:n.id,conversation_id:n.conversation_id}),_()},E=F(!1),k=F(),R=async n=>{var o;E.value=!0,await se(),await((o=k.value)==null?void 0:o.open({content:n.content||n.message,reply:n.reply,type:r.value,...n}))};return _(),(n,o)=>{const T=q,f=M,P=ae,v=W,L=H,h=J,b=Z,G=j,s=Q,K=te,O=S,U=X,$=ne("perms"),z=Y;return m(),ie(re,null,[g("div",null,[t(h,{class:"!border-none",shadow:"never"},{default:l(()=>[t(L,{ref:"formRef",class:"mb-[-16px]",model:a(i),inline:!0},{default:l(()=>[t(f,{label:"\u7528\u6237\u4FE1\u606F"},{default:l(()=>[t(T,{class:"w-[280px]",modelValue:a(i).user,"onUpdate:modelValue":o[0]||(o[0]=e=>a(i).user=e),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u6635\u79F0",clearable:"",onKeyup:D(a(C),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),t(f,{label:"\u5173\u952E\u8BCD"},{default:l(()=>[t(T,{class:"w-[280px]",modelValue:a(i).message,"onUpdate:modelValue":o[1]||(o[1]=e=>a(i).message=e),placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD",clearable:"",onKeyup:D(a(C),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),t(f,{label:"\u63D0\u95EE\u65F6\u95F4"},{default:l(()=>[t(P,{startTime:a(i).start_date,"onUpdate:startTime":o[2]||(o[2]=e=>a(i).start_date=e),endTime:a(i).end_date,"onUpdate:endTime":o[3]||(o[3]=e=>a(i).end_date=e)},null,8,["startTime","endTime"])]),_:1}),t(f,null,{default:l(()=>[t(v,{type:"primary",onClick:a(C)},{default:l(()=>[p("\u67E5\u8BE2")]),_:1},8,["onClick"]),t(v,{onClick:a(x)},{default:l(()=>[p("\u91CD\u7F6E")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),t(h,{class:"!border-none mt-4",shadow:"never"},{default:l(()=>[g("div",fe,[t(G,{modelValue:a(r),"onUpdate:modelValue":o[4]||(o[4]=e=>B(r)?r.value=e:null),onTabClick:A},{default:l(()=>[t(b,{label:"\u667A\u80FD\u4F53",name:a(u).AGENT},null,8,["name"]),t(b,{label:"Coze\u667A\u80FD\u4F53",name:a(u).COZE_AGENT},null,8,["name"]),t(b,{label:"Coze\u5DE5\u4F5C\u6D41",name:a(u).COZE_FLOW},null,8,["name"])]),_:1},8,["modelValue"])]),V((m(),c(O,{size:"large",data:a(d).lists},{default:l(()=>[t(s,{label:"ID",prop:"id","min-width":"80"}),t(s,{label:"\u5934\u50CF","min-width":"100"},{default:l(({row:e})=>[g("div",ve,[e.image||e.avatar?(m(),c(K,{key:0,radius:"50%",class:"flex-none",src:e.image||e.avatar,width:48,height:48,"preview-src-list":[e.image||e.avatar],"preview-teleported":"",fit:"cover"},null,8,["src","preview-src-list"])):y("",!0)])]),_:1}),t(s,{label:"\u6635\u79F0",prop:"nickname","min-width":"140"}),a(r)!=a(u).COZE_FLOW?(m(),c(s,{key:0,label:"\u63D0\u95EE\u5185\u5BB9","min-width":"140","show-overflow-tooltip":""},{default:l(({row:e})=>[p(w(e.content||e.message),1)]),_:1})):y("",!0),t(s,{label:"\u63D0\u95EE\u65F6\u95F4",prop:"create_time","min-width":"180"}),t(s,{label:"\u6D88\u8017\u7B97\u529B",prop:"points","min-width":"140"},{default:l(({row:e})=>[p(w(e.points)+"\u7B97\u529B ",1)]),_:1}),t(s,{label:"\u64CD\u4F5C",width:"120",fixed:"right"},{default:l(({row:e})=>[t(v,{type:"primary",link:"",onClick:I=>R(e)},{default:l(()=>[p("\u67E5\u770B")]),_:2},1032,["onClick"]),V((m(),c(v,{type:"danger",link:"",onClick:I=>N(e)},{default:l(()=>[p(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[$,["ai_application.agent.record/delete"]]])]),_:1})]),_:1},8,["data"])),[[z,a(d).loading]]),g("div",ge,[t(U,{modelValue:a(d),"onUpdate:modelValue":o[5]||(o[5]=e=>B(d)?d.value=e:null),onChange:a(_)},null,8,["modelValue","onChange"])])]),_:1})]),a(E)?(m(),c(_e,{key:0,ref_key:"replyPopRef",ref:k,onClose:o[6]||(o[6]=e=>E.value=!1)},null,512)):y("",!0)],64)}}});export{gt as default};
